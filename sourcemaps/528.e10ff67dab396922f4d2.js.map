{"version":3,"sources":["webpack:///./src/config/Config.ts","webpack:///./src/properties/DefinedMessages.ts","webpack:///./src/components/RedirectToDefaultBundle.tsx","webpack:///./src/types/Integration.ts","webpack:///./src/properties/Messages.ts","webpack:///./src/pages/Error/Page.tsx","webpack:///./src/app/AppContext.tsx","webpack:///./src/utils/getOuiaProps.ts","webpack:///./src/components/Integrations/Table/ConnectionAttempt.tsx","webpack:///./src/components/Integrations/Table/ConnectionAlert.tsx","webpack:///./src/components/Integrations/Table/ConnectionDegraded.tsx","webpack:///./src/components/Integrations/Table/ConnectionFailed.tsx","webpack:///./src/components/Integrations/Table/ExpandedContent.tsx","webpack:///./src/components/Integrations/Table.tsx","webpack:///./src/hooks/useTableExportConfig.ts","webpack:///./src/types/Environments.ts","webpack:///./src/components/Integrations/Filters.ts","webpack:///./src/components/Integrations/Toolbar.tsx","webpack:///./src/components/Icons/EnabledIntegrationIcon.tsx","webpack:///./src/components/Icons/DisabledIntegrationIcon.tsx","webpack:///./src/hooks/useDeleteModalReducer.ts","webpack:///./src/hooks/useFormModalReducer.ts","webpack:///./src/generated/OpenapiIntegrations.ts","webpack:///./src/types/adapters/IntegrationAdapter.ts","webpack:///./src/services/useListIntegrations.ts","webpack:///./src/utils/exporters/Integration/Csv.ts","webpack:///./src/utils/exporters/Integration/Json.ts","webpack:///./src/components/Integrations/AddNotificationBody.tsx","webpack:///./src/schemas/Integrations/Integration.ts","webpack:///./src/components/Integrations/Form/IntegrationTypeHttpForm.tsx","webpack:///./src/components/Integrations/Form/IntegrationTypeForm.tsx","webpack:///./src/components/Integrations/Form.tsx","webpack:///./src/components/Integrations/SaveModal.tsx","webpack:///./src/services/useSaveIntegration.ts","webpack:///./src/services/useSwitchIntegrationEnabledStatus.ts","webpack:///./src/store/selectors/SavedNotificationScopeSelector.ts","webpack:///./src/pages/Integrations/Create/CreatePage.tsx","webpack:///./src/components/Integrations/DeleteModal.tsx","webpack:///./src/generated/OpenapiNotifications.ts","webpack:///./src/types/Notification.ts","webpack:///./src/types/adapters/NotificationAdapter.ts","webpack:///./src/services/Notifications/GetAffectedNotificationsByEndpoint.ts","webpack:///./src/services/useDeleteIntegration.ts","webpack:///./src/pages/Integrations/Delete/DeleteModal.tsx","webpack:///./src/pages/Integrations/List/useIntegrationFilter.ts","webpack:///./src/services/useListIntegrationHistory.ts","webpack:///./src/pages/Integrations/List/useIntegrationRows.ts","webpack:///./src/pages/Integrations/List/Page.tsx","webpack:///./src/services/Notifications/GetApplications.ts","webpack:///./src/utils/Immutable.ts","webpack:///./src/utils/Find.ts","webpack:///./src/components/Notifications/Table/BehaviorGroupCell.tsx","webpack:///./src/components/Notifications/Table/BehaviorGroupCellControl.tsx","webpack:///./src/components/Notifications/NotificationsBehaviorGroupTable.tsx","webpack:///./src/components/Ouia.tsx","webpack:///./src/components/Notifications/Filter.ts","webpack:///./src/components/Notifications/Types.ts","webpack:///./src/components/Notifications/Table/GroupBy.tsx","webpack:///./src/components/Notifications/Toolbar.tsx","webpack:///./src/services/useListNotifications.ts","webpack:///./src/components/Icons/WebhookIcon.svg","webpack:///./src/components/Icons/WebhookIcon.tsx","webpack:///./src/components/Notifications/ActionComponent.tsx","webpack:///./src/components/Notifications/Recipient.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCard.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCardList.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal.tsx","webpack:///./src/hooks/useOnDeleteWrapper.ts","webpack:///./src/generated/OpenapiPrivate.ts","webpack:///./src/services/Notifications/DeleteBehaviorGroup.ts","webpack:///./src/services/Notifications/GetAffectedNotificationsByBehaviorGroup.ts","webpack:///./src/pages/Notifications/Form/DeleteBehaviorGroupPage.tsx","webpack:///./src/schemas/Integrations/Notifications.ts","webpack:///./src/components/Notifications/Form/RecipientOption.ts","webpack:///./src/components/Notifications/Form/useRecipientOptionMemo.tsx","webpack:///./src/components/Notifications/Form/useTypeaheadReducer.ts","webpack:///./src/components/Notifications/Form/IntegrationRecipientTypeahead.tsx","webpack:///./src/components/Notifications/Form/RecipientTypeahead.tsx","webpack:///./src/components/Notifications/EditableActionRow/RecipientForm.tsx","webpack:///./src/components/Notifications/EditableActionRow/useEditableActionRow.ts","webpack:///./src/components/Notifications/Form/ActionOption.ts","webpack:///./src/components/Notifications/Form/ActionTypeahead.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupForm.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupSaveModal.tsx","webpack:///./src/components/Notifications/useGetIntegrations.ts","webpack:///./src/components/Notifications/useGetRecipients.ts","webpack:///./src/types/adapters/BehaviorGroupAdapter.ts","webpack:///./src/services/Notifications/SaveBehaviorGroup.ts","webpack:///./src/services/Notifications/UpdateBehaviorGroupActions.ts","webpack:///./src/pages/Notifications/Form/EditBehaviorGroupPage.tsx","webpack:///./src/pages/Notifications/List/BehaviorGroupsSection.tsx","webpack:///./src/services/Notifications/GetBehaviorGroups.ts","webpack:///./src/services/Notifications/GetBehaviorGroupByNotificationId.ts","webpack:///./src/services/Notifications/LinkBehaviorGroup.ts","webpack:///./src/pages/Notifications/List/useBehaviorGroupNotificationRows.tsx","webpack:///./src/pages/Notifications/List/useNotificationFilter.ts","webpack:///./src/pages/Notifications/List/useNotificationPage.ts","webpack:///./src/pages/Notifications/List/BundlePageBehaviorGroupContent.tsx","webpack:///./src/pages/Notifications/List/useBehaviorGroupContent.ts","webpack:///./src/components/Notifications/DefaultBehavior.tsx","webpack:///./src/components/Notifications/Table.tsx","webpack:///./src/services/useDefaultNotificationBehavior.ts","webpack:///./src/components/Notifications/Form/EditableActionTable.tsx","webpack:///./src/components/Notifications/Form.tsx","webpack:///./src/components/Notifications/SaveModal.tsx","webpack:///./src/services/Notifications/GetDefaultActionId.ts","webpack:///./src/services/useGetNotificationActions.ts","webpack:///./src/pages/Notifications/Form/EditNotificationPage.tsx","webpack:///./src/services/useRemoveActionFromNotification.ts","webpack:///./src/services/useAddActionToNotification.ts","webpack:///./src/services/useRemoveActionFromDN.ts","webpack:///./src/services/useAddActionToDN.ts","webpack:///./src/pages/Notifications/List/useFormModalReducer.ts","webpack:///./src/pages/Notifications/List/useNotificationRows.ts","webpack:///./src/pages/Notifications/List/BundlePageContent.tsx","webpack:///./src/pages/Notifications/List/BundlePage.tsx","webpack:///./src/pages/Notifications/List/Page.tsx","webpack:///./src/Routes.tsx","webpack:///./src/hooks/usePage.ts","webpack:///./src/utils/exporters/Integration/Factory.ts","webpack:///./src/pages/Integrations/List/useActionResolver.ts","webpack:///./src/services/Notifications/GetBundles.ts","webpack:///./src/app/useApp.ts","webpack:///./src/app/App.tsx","webpack:///./src/store/reducers/SavedNotificationScopeReducer.ts","webpack:///./src/store/Store.ts","webpack:///./src/store/actions/SavedNotificationScopeAction.ts","webpack:///./src/store/types/SavedNotificationScopeTypes.ts","webpack:///./src/utils/Basename.ts"],"names":["subAppId","title","notifications","id","description","defaultMessage","integrations","integrationsEmptyStateTitle","integrationsTableEmptyStateBody","defaultBundleName","RedirectToDefaultBundle","from","linkTo","to","IntegrationType","UserIntegrationType","cache","locale","navigator","language","slice","intl","onError","console","log","intlSettings","Messages","appName","formatMessage","appNameIntegrations","pages","list","add","edit","viewHistory","error","emptyState","content","showDetails","actions","goToIndex","components","toolbar","addIntegration","editIntegration","table","columns","name","type","lastConnectionAttempt","enabled","enableError","disableError","integrationType","WEBHOOK","types","EMAIL_SUBSCRIPTION","DRAWER","INTEGRATION","event","action","recipient","common","choose","ErrorPage","props","goToListPage","history","goBack","ErrorBoundaryPage","actionLabel","pageHeader","children","AppContext","rbac","canReadIntegrationsEndpoints","canReadNotifications","canWriteIntegrationsEndpoints","canWriteNotifications","getOuiaProps","getOuiaPropsFactory","ConnectionAttemptType","dateClassName","style","marginLeft","global_spacer_xs","ConnectionAttempt","formattedDate","format","toUtc","date","SUCCESS","color","global_success_color_100","FAILED","global_danger_color_100","getIcon","className","connectionAttemptClassName","global_spacer_sm","marginTopClassName","marginTop","ConnectionAlert","Alert","variant","alertVariant","isInline","attempts","map","attempt","index","key","isSuccess","ConnectionDegraded","failures","filter","a","length","AlertVariant","ConnectionFailed","titleClass","fontWeight","ExpandedContent","TextContent","TextList","component","TextListVariants","TextListItem","TextListItemVariants","integration","url","sslVerificationEnabled","undefined","secretToken","LastConnectionAttemptStatus","connectionAlertClassName","paddingBottom","global_spacer_md","expandedContentClassName","paddingLeft","isEnabledLoadingClassName","smallMarginLeft","degradedClassName","global_warning_color_200","fontSize","getLastConnectionAttemptStatus","UNKNOWN","ERROR","WARNING","getConnectionAlert","status","LastConnectionAttemptSuccess","LastConnectionAttemptError","getConnectionAttemptCell","isLoading","Spinner","size","Text","cellFormatters","expandable","transforms","rowExpandedContentClassName","rowWrapperClassName","tableClassName","noneStyle","important","borderStyle","noBorderBottom","borderBottom","borderTop","buildClassNames","RowWrapper","trRef","rowProps","row","rest","ref","isExpanded","hidden","IntegrationsTable","useIntl","onCollapseHandler","_event","_index","isOpen","data","onCollapse","findIndex","rows","onEnable","reduce","idx","push","selected","isSelected","cells","lastConnectionAttempts","isConnectionAttemptLoading","isEnabledLoading","Switch","isChecked","isEnabled","onChange","isDisabled","ouiaId","fullWidth","parent","colSpan","actionsResolverCallback","rowData","actionResolver","integrationIndex","i","integrationRow","ouiaSafe","SkeletonTable","rowSize","loadingCount","paddingColumnSize","sortBy","EmptyState","EmptyStateVariant","EmptyStateIcon","icon","Title","headingLevel","EmptyStateBody","Table","rowWrapper","TableHeader","TableBody","useTableExportConfig","onExport","extraItems","onSelect","exporterTypeFromString","stagingAndProd","IntegrationFilterColumn","enabledTextClassName","filterMetadata","NAME","label","placeholder","ENABLED","options","exclusive","items","value","IntegrationsToolbar","primaryToolbarFilterConfig","usePrimaryToolbarFilterConfig","filters","setFilters","clearFilters","actionsConfig","onClick","onAddIntegration","kebabToggleProps","exportConfig","filterConfig","useInsightsEnvironmentFlag","getInsights","useCallback","activeFiltersConfig","pageChanged","page","inner","perPageChanged","perPage","topPaginationProps","itemCount","count","isCompact","PaginationVariant","onSetPage","onFirstClick","onPreviousClick","onNextClick","onLastClick","onPageInput","onPerPageSelect","bottomPaginationProps","PrimaryToolbar","pagination","UseDeleteModalReducerActionType","initialState","reducer","state","DELETE","RESET","useDeleteModalReducer","dispatch","useReducer","useMemo","delete","makeDeleteAction","reset","UseFormModalReducerActionType","isEdit","template","isCopy","useFormModalReducer","copyFunction","CREATE","EDIT","buildReducer","create","Schemas","Operations","zodSchemaApplication","bundle_id","zodSchemaUUID","created","optional","nullable","display_name","updated","nonstrict","zodSchemaBasicAuthentication","password","username","zodSchemaBehaviorGroupAction","endpoint","zodSchemaEndpoint","zodSchemaBehaviorGroupActionId","behaviorGroupId","endpointId","zodSchemaEmailSubscriptionProperties","properties","zodSchemaWebhookProperties","zodSchemaEndpointType","zodSchemaEntityTag","weak","zodSchemaFamily","zodSchemaHttpType","zodSchemaLink","params","rel","rels","uri","uriBuilder","zodSchemaUriBuilder","zodSchemaLocale","country","displayCountry","displayLanguage","displayName","displayScript","displayVariant","extensionKeys","iSO3Country","iSO3Language","script","unicodeLocaleAttributes","unicodeLocaleKeys","zodSchemaMediaType","parameters","subtype","wildcardSubtype","wildcardType","zodSchemaMeta","int","zodSchemaMultivaluedMapStringObject","zodSchemaMultivaluedMapStringString","zodSchemaNewCookie","comment","domain","expiry","httpOnly","maxAge","path","secure","version","zodSchemaStatusType","family","reasonPhrase","statusCode","basic_authentication","disable_ssl_verification","method","secret_token","Application","BasicAuthentication","BehaviorGroup","BehaviorGroupAction","BehaviorGroupActionId","Bundle","EmailSubscriptionProperties","EmailSubscriptionType","Endpoint","EndpointPage","links","meta","EndpointProperties","EndpointType","EntityTag","EventType","application","application_id","Facet","Family","HttpType","Link","Locale","MediaType","Meta","MultivaluedMapStringObject","MultivaluedMapStringString","NewCookie","NotificationHistory","details","eventId","invocationResult","invocationTime","RbacRaw","Response","allowedMethods","cookies","entity","entityTag","headers","lastModified","location","mediaType","metadata","statusInfo","stringHeaders","StatusType","UUID","UriBuilder","WebhookProperties","__Empty","max","EndpointServiceGetEndpoints","EndpointServiceCreateEndpoint","EndpointServiceCreateEndpointBg","EndpointServiceSubscribeEmail","EndpointServiceUnsubscribeEmail","EndpointServiceGetEndpoint","EndpointServiceUpdateEndpoint","EndpointServiceDeleteEndpoint","EndpointServiceEnableEndpoint","EndpointServiceDisableEndpoint","EndpointServiceGetEndpointHistory","EndpointServiceGetDetailedEndpointHistory","actionCreator","query","active","limit","offset","pageNumber","sort_by","actionBuilder","queryParams","config","rules","ValidateRule","build","body","Response200","replace","applicationName","toString","bundleName","historyId","pageSize","getIntegrationType","Enum","webhook","email_subscription","default","Error","getEndpointType","toIntegration","serverIntegration","integrationBase","GET","toIntegrations","serverIntegrations","filterOutDefaultAction","toIntegrationProperties","integrationHttp","toServerIntegrationRequest","serverNotifications","e","enum","listIntegrationsActionCreator","pager","Page","toQuery","filterType","filterActive","listIntegrationIntegrationDecoder","validationResponseTransformer","payload","validatedResponse","Object","values","includes","errors","IntegrationExporterCsv","ExporterCsv","IntegrationExporterJson","ExporterJson","buttonClassname","AddNotificationBody","text","buttonText","Button","ButtonVariant","switchEnabled","IntegrationSchemaBase","required","trim","oneOf","IntegrationHttpSchema","concat","shape","notRequired","POST","IntegrationSchema","IntegrationTypeHttpForm","FormTextInput","isRequired","ouiaIdConcat","Checkbox","IntegrationTypeForm","FormSelectOption","IntegrationsForm","useFormikContext","Form","maxLength","FormSelect","InternalIntegrationSaveModal","pageTitle","handleSubmit","isValid","isSubmitting","onSaveClicked","SaveModal","isSaving","onSave","onClose","actionButtonDisabled","IntegrationSaveModal","initialIntegration","cast","onSubmit","transformedIntegration","Formik","initialValues","validationSchema","validateOnMount","createIntegrationActionCreator","saveIntegrationActionCreator","decoder","response","switchIntegrationEnabledStatusActionCreator","useSwitchIntegrationEnabledStatus","useMutation","savedNotificationScopeSelector","savedNotificationScope","savedNotificationScopeEqualFn","left","right","AddNotificationBodyContainer","useSelector","useDispatch","switchIntegrationEnabledStatus","mutate","SavedNotificationScopeAction","then","CreatePage","saveIntegrationMutation","useTransformQueryResponse","hasError","setError","onSaveIntegration","savedIntegration","addSuccessNotification","loading","IntegrationDeleteModal","onDeleteInternal","onDelete","Skeleton","eventText","ExpandableSection","toggleText","List","notification","ListItem","applicationDisplayName","eventTypeDisplayName","DeleteModal","isDeleting","titleIconVariant","NotificationType","NotificationServiceGetEndpointsForDefaults","NotificationServiceAddEndpointToDefaults","NotificationServiceDeleteEndpointFromDefaults","NotificationServiceGetEventTypes","NotificationServiceGetEventTypesAffectedByEndpointId","NotificationServiceGetLinkedEndpoints","NotificationServiceLinkEndpointToEventType","NotificationServiceUnlinkEndpointFromEventType","NotificationServiceGetApplicationsFacets","NotificationServiceGetBundleFacets","NotificationServiceMarkRead","applicationIds","bundleId","eventTypeId","Response204","_toAction","serverAction","userIntegration","toUserIntegration","integrationId","toNotification","serverNotification","JSON","stringify","toAction","toNotifications","toActions","serverActions","notificationsForEndpointActionCreator","defaultNotificationsDecoder","deleteIntegrationActionCreator","IntegrationDeleteModalPage","deleteIntegrationMutation","getNotificationsQuery","useParameterizedQuery","deleteIntegration","useUrlStateName","defaultValue","useUrlStateString","useUrlStateEnabled","_defaultValue","useUrlStateMultipleOptions","useStateFactory","column","notificationAppStateSelector","notificationAppStateEqualFn","integrationFilterBuilder","Filter","toLocaleLowerCase","and","Operator","userIntegrationCopier","getApplicationsAction","emptyImmutableArray","freeze","emptyImmutableObject","findById","findByKey","val","BehaviorGroupChip","unlink","behaviorGroup","Chip","BehaviorGroupCell","setOpen","onSelected","dataset","currentTarget","firstChild","behaviorGroupContent","found","find","OptionsMenuItem","bg","toggle","OptionsMenuToggle","onToggle","toggleTemplate","ChipGroup","readonlyText","Split","hasGutter","SplitItem","global_palette_black_400","v","join","isEditMode","OptionsMenu","direction","menuItems","menuAppendTo","document","TableText","wrapModifier","ButtonWithNotificationId","notificationId","restProps","toOnNotificationSetAdapter","BehaviorGroupCellControl","commonButtonProps","onFinishEditing","global_disabled_color_100","global_active_color_100","onCancelEditMode","global_palette_black_600","onStartEditing","buttonCellClassName","width","cellWidth","NotificationsBehaviorGroupTable","Component","Wrapped","ouia","callbacks","onCancelEditing","onBehaviorGroupLinkUpdated","callback","loadingActionStatus","behaviors","TableVariant","NotificationFilterColumn","GroupByEnum","GroupBy","DropdownItem","None","groupBy","target","shouldBeOpen","pascalCase","Dropdown","DropdownToggle","toggleIndicator","dropdownItems","NotificationsToolbar","appFilterItems","appFilterOptions","APPLICATION","ACTION","clearFilter","exportConfigInternal","dedicatedAction","onGroupBySelected","useListNotifications","useQuery","filterApplicationId","filterBundleId","listNotificationsActionCreator","verticalAlign","height","alt","src","marginLeftClassName","grayFontClassName","ActionTypeToIcon","actionType","ActionComponentWrapper","ActionComponent","isDefault","disabledLabelClassName","Recipient","Tooltip","position","Label","hasOutline","cardClassName","contentTitleStyle","BehaviorGroupCardLayout","switchOpen","prev","Card","isFlat","CardHeader","CardHeaderMain","TextVariants","CardActions","KebabToggle","isPlain","DropdownPosition","CardBody","Grid","GridItem","span","contents","BehaviorGroupCard","onClickEdit","onEdit","onClickDelete","BehaviorGroupCardSkeleton","contentWidth","cardsWrapperClassName","overflow","cardWrapperClassName","BehaviorGroupCardListLayout","container","getBoundingClientRect","Flex","alignItems","alignContent","FlexItem","element","BehaviorGroupCardList","behaviorGroups","BehaviorGroupCardListSkeleton","BehaviorGroupDeleteModal","toDelete","useOnDeleteWrapper","cancelButtonTitle","conflictingNotifications","cancelButtonVariant","ackDelete","setAckDelete","Stack","StackItem","events","actionButtonHidden","BehaviorGroupDeleteModalSkeleton","NotificationServiceCreateBehaviorGroup","NotificationServiceUpdateBehaviorGroupActions","NotificationServiceUpdateBehaviorGroup","NotificationServiceDeleteBehaviorGroup","NotificationServiceGetEventTypesAffectedByRemovalOfEndpoint","NotificationServiceFindBehaviorGroupsByBundleId","NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup","NotificationServiceGetLinkedBehaviorGroups","NotificationServiceUpdateEventTypeBehaviors","deleteBehaviorGroupAction","DeleteBehaviorGroupPage","deleteBehaviorGroup","affected","getAffectedNotificationsByBehaviorGroupAction","addDangerNotification","useEffect","ActionIntegration","min","ActionNotify","ActionsArray","obj","hasOwnProperty","WithActions","BehaviorGroupSchema","RecipientOption","recipientOrIntegration","this","selectOption","postfix","mapper","r","SelectOption","useRecipientOptionMemo","show","loadingDefault","isNoResultsOption","defaultValues","loadingFilter","filterValues","ReducerActionType","reducerFunction","SET_FILTER_VALUE","search","lastSearch","LOAD_FILTER_VALUE","USE_DEFAULTS","SET_DEFAULTS","useTypeaheadReducer","setFilterValue","loadFilterValue","setDefaults","useDefaults","IntegrationRecipientTypeahead","dispatchers","getIntegrations","onFilter","selection","sel","integrationSelected","Select","SelectVariant","typeAheadAriaLabel","placeholderText","selections","RecipientTypeahead","getRecipients","recipients","s","RecipientForm","recipientSelected","onClear","recipientOnClear","useEditableActionRow","setFieldValue","recipientFieldProps","_","recipientFieldHelpers","useField","actionSelected","notificationType","indexOf","setValue","ActionOption","kind","actionName","ActionTypeahead","selectedOption","hideNonWebhooks","insights","getInsightsEnvironment","o","alignLeftClassName","textAlign","subtitleClassName","ActionRow","isFilled","onRemove","form","addAction","handleRemove","EditBehaviorGroupForm","FieldArray","helpers","InternalBehaviorGroupSaveModal","ModalVariant","BehaviorGroupSaveModal","useGetIntegrations","useContext","ClientContext","_search","toLowerCase","useGetRecipients","reportBehaviorGroup","toBehaviorGroup","serverBehaviorGroup","behaviorAction","toShallowBehaviorGroupRequest","saveBehaviorGroupActionCreator","updateBehaviorGroupActionsActionCreator","endpointIds","EditBehaviorGroupPage","saveBehaviorGroupMutation","updateBehaviorGroupActionsMutation","creatingIntegrations","setCreatingNotifications","updateBehaviorGroupActions","saveBehaviorGroup","original","Promise","resolve","toCreate","newAction","all","result","newIds","oldNonUserAction","catch","err","expandableSectionClassName","backgroundColor","global_BackgroundColor_100","global_spacer_lg","paddingRight","sectionClassName","sectionTitleClassName","paddingTop","titleClassName","global_palette_black_1000","emptyAddButtonClassName","BehaviorGroupsSection","setExpanded","setFilter","filteredBehaviors","lowerCaseFilter","editModalState","editModalActions","deleteModalState","deleteModalActions","createGroup","onCloseModal","saved","reload","onCloseDelete","deleted","onClearFilter","contentId","ExpandableSectionToggle","Badge","isRead","isDetached","SearchInput","behaviorGroupDecoder","getNotification","useBehaviorGroupNotificationRows","notificationRows","setNotificationRows","prevNotificationInput","usePrevious","removeBehaviorGroup","draft","splice","updateBehaviorGroupLink","linkBehavior","setEditMode","command","behaviorGroupIds","linkBehaviorGroupAction","b","draftNotification","oldBehaviors","startEditMode","finishEditMode","cancelEditMode","_prev","clearQueue","forEach","getBehaviorGroupByNotificationAction","useNotificationFilter","initialAppOptions","debounce","useUrlStateApplication","useUrlStateAction","useFilters","useNotificationPage","bundle","defaultPerPage","sort","currentPage","setCurrentPage","useState","itemsPerPage","setItemsPerPage","appFilter","appIds","arrayValue","filterOption","changePage","changeItemsPerPage","behaviorGroupSectionClassName","marginBottom","global_spacer_xl","emptyArray","BundlePageBehaviorGroupContent","notificationsFilter","applications","useGetBehaviorGroups","errorObject","useBehaviorGroupContent","notificationPage","debouncedFilters","useNotifications","isLinked","Section","cssRaw","c_skeleton_BackgroundColor","global_palette_black_300","contentClassName","display","$nest","global_FontSize_sm","DefaultBehavior","defaultBehavior","pfBorderBottomClassName","cellPaddingBottom","actionCellStyle","cellPaddingBottomStyle","cellPaddingTop","cellPaddingTopStyle","noExpandableBorderClassName","borderLeft","applicationGroupClassName","EventCell","rowClassName","toTableRowsGroupedByNone","rowSpan","Math","useDefault","firstAction","joinClasses","classNames","cssStyle","NotificationsTable","grouped","applicationGroups","applicationGroup","n","defaultNotificationBehaviorCreator","EditableActionRow","EditableActionTable","ActionArray","NotificationForm","showActions","FormText","InternalNotificationSaveModal","NotificationSaveModal","getDefaultActionIdDecoder","getNotificationActionsByIdAction","hasDefaultNotificationDecoder","getNotificationByIdActionDecoder","EditNotificationPage","idMapper","oldActions","oldUseDefault","p","actionsPromise","newUseDefault","defaultActionId","originalIds","newActions","nonUserIntegrationsPromises","every","toAdd","arr","promises","actionId","actionRemoveActionFromNotification","actionAddActionToNotification","noneState","EDIT_DEFAULTS","EDIT_NOTIFICATION","NONE","toRowsGroupByNone","toRowGroupByApplication","groups","tableTitleClassName","BundlePageContent","defaultNotificationBehavior","setGroupBy","groupBySelected","prevGroupBy","setNotificationRowById","partialNotificationRow","appIndex","notificationIndex","j","findNotificationPath","newApps","newNotifications","endpoints","prevRows","useNotificationRows","modalIsOpenState","dispatchModalIsOpen","closeFormModal","updateDefaultNotifications","updateNotifications","onEditDefaultAction","onEditNotification","displayInlineClassName","NotificationListBundlePage","pageHeaderTitleProps","isUsingBehaviorGroup","setUsingBehaviorGroup","renderIfUsingBehaviorGroupResolver","PageHeader","PageHeaderTitle","InsightsEnvDetector","onEnvironment","RenderIfFalse","FormGroup","fieldId","Main","RenderIf","renderIf","RenderIfTrue","BundleStatus","pathRoutes","integrationFilter","useIntegrationFilter","pageData","filterBuilder","usePage","integrationsQuery","initFetch","exportIntegrationsQuery","integrationRows","setIntegrationRows","prevIntegrationsInput","reduxDispatch","switchStatus","setIntegrationRowByIndex","partialIntegration","prevIntegrations","newIntegrations","setIntegrationRowById","listIntegrationHistoryActionCreator","last5","reverse","Date","_integration","message","useIntegrationRows","modalIsOpenActions","onAddIntegrationClicked","exporter","ExporterType","integrationExporterFactory","exportedIntegrations","nextPage","export","now","canWrite","closeDeleteModal","pageCount","onFunction","chrome","on","getBundles","getApplications","navId","NOT_FOUND","FAILED_TO_LOAD","LOADING","isBundleStatus","AppSkeleton","InsightsRoute","Routes","pathRoute","exact","setRbac","waitForInsights","init","appId","getApp","identifyApp","auth","getUser","fetchRBAC","hasPermission","useApp","serviceName","pathname","hasReadPermissions","Provider","NotificationsPortal","NotAuthorized","SavedNotificationScopeReducer","getType","createStore","middleware","initStore","resetStore","restoreStore","SavedNotificationScopeKeys","SavedNotificationScopeActions","setIntegration","createAction","SET_INTEGRATION","start","START","finish","FINISH","unset","UNSET","Status","getBaseName","release","pathName","split","shift","getSubApp"],"mappings":"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","file":"js/528.103d1f30c4cbbe3e077b.js","sourcesContent":["import { DeepReadonly } from 'ts-essentials';\n\nconst apiVersion = 'v1.0';\nconst apiBaseUrl = `/api/notifications/${apiVersion}`;\n\nexport const withBaseUrl = (path: string) => `${apiBaseUrl}${path}`;\n\nconst Config = {\n    integrations: {\n        subAppId: 'integrations',\n        title: 'Integrations | Settings'\n    },\n    notifications: {\n        subAppId: 'notifications',\n        title: 'Notifications | Settings'\n    },\n    pages: {\n    }\n};\n\nconst ReadonlyConfig: DeepReadonly<typeof Config> = Config;\nexport default ReadonlyConfig;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n    notifications: {\n        id: 'notifications',\n        description: 'Application name',\n        defaultMessage: 'Notifications'\n    },\n    integrations: {\n        id: 'integrations',\n        description: 'Application name',\n        defaultMessage: 'Integrations'\n    },\n    integrationsEmptyStateTitle: {\n        id: 'integrationsEmptyStateTitle',\n        description: 'Integrations Empty State title',\n        defaultMessage: 'No integrations'\n    },\n    integrationsTableEmptyStateBody: {\n        id: 'integrationsTableEmptyStateBody',\n        description: 'Integrations Empty State body',\n        defaultMessage: 'Connect to webhooks and external applications.'\n    }\n});\n","import * as React from 'react';\nimport { Redirect } from 'react-router';\n\nimport { linkTo } from '../Routes';\n\nexport const defaultBundleName = 'rhel';\n\nexport const RedirectToDefaultBundle = () => <Redirect from={ linkTo.notifications('') } to={ linkTo.notifications(defaultBundleName) } />;\n","import { Schemas } from '../generated/OpenapiIntegrations';\n\nexport enum IntegrationType {\n    WEBHOOK = 'webhook',\n    EMAIL_SUBSCRIPTION = 'email_subscription'\n}\n\n// Integrations that the user can create in the Integrations page\nexport enum UserIntegrationType {\n    WEBHOOK = 'webhook'\n}\n\nexport interface IntegrationBase {\n    id: string;\n    name: string;\n    type: IntegrationType;\n    isEnabled: boolean;\n}\n\nexport interface IntegrationHttp extends IntegrationBase {\n    type: IntegrationType.WEBHOOK;\n    url: string;\n    sslVerificationEnabled: boolean;\n    secretToken?: string;\n    method: Schemas.HttpType;\n}\n\nexport interface IntegrationEmailSubscription extends IntegrationBase {\n    type: IntegrationType.EMAIL_SUBSCRIPTION\n}\n\nexport type Integration = IntegrationHttp | IntegrationEmailSubscription;\n\ntype ToUserIntegration<T extends IntegrationBase, TYPE extends UserIntegrationType[keyof UserIntegrationType]> = Omit<T, 'type'> & {\n    type: TYPE\n};\n\nexport type UserIntegration = ToUserIntegration<IntegrationHttp, UserIntegrationType.WEBHOOK>;\n\ntype NewIntegrationKeys = 'id';\n\nexport type NewIntegrationTemplate<T extends IntegrationBase | UserIntegration> = Omit<T, NewIntegrationKeys> & Partial<Pick<T, NewIntegrationKeys>>;\n\nexport type NewIntegrationBase = NewIntegrationTemplate<IntegrationBase>;\nexport type NewIntegration = NewIntegrationTemplate<Integration>;\nexport type NewUserIntegration = NewIntegrationTemplate<UserIntegration>;\n\nexport type ServerIntegrationRequest = Schemas.Endpoint;\nexport type ServerIntegrationResponse = Schemas.Endpoint;\n\nexport interface IntegrationConnectionAttempt {\n    date: Date;\n    isSuccess: boolean;\n}\n","import { intlHelper } from '@redhat-cloud-services/frontend-components-translations';\nimport { createIntl, createIntlCache } from 'react-intl';\nimport { DeepReadonly } from 'ts-essentials';\n\nimport { IntegrationType } from '../types/Integration';\nimport messages from './DefinedMessages';\n\nconst cache = createIntlCache();\nconst locale = navigator.language.slice(0, 2);\nconst intl = createIntl({\n    // eslint-disable-next-line no-console\n    onError: console.log,\n    locale\n}, cache);\nconst intlSettings = { locale };\n\nconst MutableMessages = {\n    appName: intlHelper(intl.formatMessage(messages.notifications), intlSettings),\n    appNameIntegrations: intlHelper(intl.formatMessage(messages.integrations), intlSettings),\n    pages: {\n        integrations: {\n            list: {\n                title: 'Integrations'\n            },\n            add: {\n                title: 'Add integration'\n            },\n            edit: {\n                title: 'Edit integration'\n            }\n        },\n        notifications: {\n            list: {\n                title: 'Notifications',\n                viewHistory: 'View notification history'\n            }\n        },\n        error: {\n            title: 'Notifications',\n            emptyState: {\n                title: 'Unhandled error',\n                content: 'There was a problem trying to process your request.',\n                showDetails: 'Show details',\n                actions: {\n                    goToIndex: 'Go back'\n                }\n            }\n        }\n    },\n    components: {\n        integrations: {\n            toolbar: {\n                actions: {\n                    addIntegration: 'Add integration',\n                    editIntegration: 'Edit integration'\n                }\n            },\n            table: {\n                title: 'Integrations',\n                columns: {\n                    name: 'Name',\n                    type: 'Type',\n                    lastConnectionAttempt: 'Last connection attempt',\n                    enabled: 'Enabled'\n                }\n            },\n            enableError: {\n                title: 'Unable to enable the Integration',\n                description: 'There was a problem trying to enable the integration: \"{0}\".\\nPlease try again.'\n            },\n            disableError: {\n                title: 'Unable to disable the Integration',\n                description: 'There was a problem trying to disable the integration: \"{0}\".\\nPlease try again.'\n            },\n            integrationType: {\n                [IntegrationType.WEBHOOK]: 'Webhook'\n            }\n        },\n        notifications: {\n            types: {\n                EMAIL_SUBSCRIPTION: 'Send an email',\n                DRAWER: 'Send to notification drawer',\n                INTEGRATION: 'Integration'\n            },\n            toolbar: {\n                actions: {\n\n                }\n            },\n            table: {\n                title: 'Notifications',\n                columns: {\n                    event: 'Event type',\n                    action: 'Action',\n                    recipient: 'Recipient'\n                }\n            }\n        }\n    },\n    common: {\n        choose: 'Please choose'\n    }\n};\n\nexport const Messages: DeepReadonly<typeof MutableMessages> = MutableMessages;\n","import { ErrorBoundaryPage } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport { Messages } from '../../properties/Messages';\n\ntype ErrorPageProps = RouteComponentProps<any>;\n\nexport const ErrorPageInternal: React.FunctionComponent<ErrorPageProps> = (props) => {\n    const goToListPage = React.useCallback(() => {\n        props.history.goBack();\n    }, [ props.history ]);\n\n    return (\n        <ErrorBoundaryPage\n            action={ goToListPage }\n            actionLabel={ Messages.pages.error.emptyState.actions.goToIndex }\n            pageHeader={ Messages.pages.error.title }\n            title={ Messages.pages.error.emptyState.title }\n            description={ Messages.pages.error.emptyState.content }\n        >\n            { props.children }\n        </ErrorBoundaryPage>\n    );\n};\n\nexport const ErrorPage = withRouter(ErrorPageInternal);\n","import * as React from 'react';\nimport { useContext } from 'react';\n\nexport interface AppContext {\n    rbac: {\n        canWriteIntegrationsEndpoints: boolean;\n        canReadIntegrationsEndpoints: boolean;\n        canWriteNotifications: boolean;\n        canReadNotifications: boolean;\n    }\n}\n\nexport const AppContext = React.createContext<AppContext>({\n    rbac: {\n        canReadIntegrationsEndpoints: false,\n        canReadNotifications: false,\n        canWriteIntegrationsEndpoints: false,\n        canWriteNotifications: false\n    }\n});\n\nexport const useAppContext = () => useContext(AppContext);\n","import { getOuiaPropsFactory } from '@redhat-cloud-services/insights-common-typescript';\n\nexport const getOuiaProps = getOuiaPropsFactory('Notifications');\n","import { CheckCircleIcon, ExclamationCircleIcon } from '@patternfly/react-icons';\nimport { global_danger_color_100, global_spacer_xs, global_success_color_100 } from '@patternfly/react-tokens';\nimport { toUtc } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport format from 'date-fns/format';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nexport interface ConnectionAttemptProps {\n    type: ConnectionAttemptType;\n    date: Date;\n}\n\nexport enum ConnectionAttemptType {\n    SUCCESS,\n    FAILED\n}\n\nconst dateClassName = style({\n    marginLeft: global_spacer_xs.var\n});\n\nconst dateFormatString = 'MMM d, HH:mm:ss';\n\nconst getIcon = (type: ConnectionAttemptType) => {\n    switch (type) {\n        case ConnectionAttemptType.SUCCESS:\n            return <CheckCircleIcon color={ global_success_color_100.value } />;\n        case ConnectionAttemptType.FAILED:\n            return <ExclamationCircleIcon color={ global_danger_color_100.value } />;\n        default:\n            assertNever(type);\n    }\n};\n\nexport const ConnectionAttempt: React.FunctionComponent<ConnectionAttemptProps> = (props) => {\n    const formattedDate = format(toUtc(props.date), dateFormatString);\n    return (\n        <>\n            { getIcon(props.type) } <span className={ dateClassName }> { formattedDate } UTC </span>\n        </>\n    );\n};\n","import { Alert, AlertVariant } from '@patternfly/react-core';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { ConnectionAttempt, ConnectionAttemptType } from './ConnectionAttempt';\n\ninterface ConnectionAlertProps extends OuiaComponentProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n    alertVariant: AlertVariant;\n    description: string;\n    title: string;\n}\n\nconst connectionAttemptClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst marginTopClassName = style({\n    marginTop: global_spacer_sm.var\n});\n\nexport const ConnectionAlert: React.FunctionComponent<ConnectionAlertProps> = (props) => {\n    return (\n        <div { ...getOuiaProps('ConnectionAlert', props) }>\n            <Alert title={ props.title } variant={ props.alertVariant } isInline>\n                <p className={ marginTopClassName }>\n                    { props.description }\n                </p>\n                <p className={ marginTopClassName }>\n                    Last attempts: { props.attempts.map(\n                        (attempt, index) =>\n                            <span key={ index } className={ connectionAttemptClassName }>\n                                <ConnectionAttempt\n                                    type={ attempt.isSuccess ? ConnectionAttemptType.SUCCESS : ConnectionAttemptType.FAILED }\n                                    date={ attempt.date }\n                                />\n                            </span>\n                    ) }\n                </p>\n            </Alert>\n        </div>\n    );\n};\n","import { AlertVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { ConnectionAlert } from './ConnectionAlert';\n\ninterface ConnectionDegradedProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n}\n\nexport const ConnectionDegraded: React.FunctionComponent<ConnectionDegradedProps> = (props) => {\n    const description = React.useMemo(() => {\n        const failures = props.attempts.filter(a => !a.isSuccess).length;\n        const attempts = props.attempts.length;\n\n        if (failures === 1) {\n            return `This connection has had 1 failure in the last ${ attempts } connection attempts.`;\n        }\n\n        return `This connection has had ${ failures } failures in the last ${ attempts } connection attempts.`;\n    }, [ props.attempts ]);\n\n    return <ConnectionAlert\n        attempts={ props.attempts }\n        alertVariant={ AlertVariant.warning }\n        description={ description }\n        title=\"Connection is degraded\"\n    />;\n};\n","import { AlertVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { ConnectionAlert } from './ConnectionAlert';\n\ninterface ConnectionFailedProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n}\n\nexport const ConnectionFailed: React.FunctionComponent<ConnectionFailedProps> = (props) => {\n    return <ConnectionAlert\n        attempts={ props.attempts }\n        alertVariant={ AlertVariant.danger }\n        description=\"This connection has failed the most recent connection attempts.\"\n        title=\"Failed connection\"\n    />;\n};\n","import { TextContent, TextList, TextListItem, TextListItemVariants, TextListVariants } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { UserIntegration } from '../../../types/Integration';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\n\nconst titleClass = style({\n    fontWeight: 400\n});\n\ninterface ExpandedContentProps extends OuiaComponentProps {\n    integration: UserIntegration;\n}\n\nexport const ExpandedContent: React.FunctionComponent<ExpandedContentProps> = (props) => {\n    return (\n        <TextContent { ...getOuiaProps('Integrations/Table/ExpandedContent', props) }>\n            <TextList component={ TextListVariants.dl }>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    Endpoint URL\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.url }\n                </TextListItem>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    SSL verification\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.sslVerificationEnabled ? 'Enabled' : 'Disabled' }\n                </TextListItem>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    Authentication type\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.secretToken !== undefined ? 'Secret token' : 'None' }\n                </TextListItem>\n            </TextList>\n        </TextContent>\n    );\n};\n","import {\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateVariant,\n    Spinner,\n    Switch,\n    Text,\n    Title\n} from '@patternfly/react-core';\nimport { CheckCircleIcon, CubesIcon, ExclamationCircleIcon, OffIcon } from '@patternfly/react-icons';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/Table/table';\nimport {\n    expandable,\n    IActions,\n    IActionsResolver,\n    ICell,\n    IRow,\n    IRowData,\n    RowWrapperProps,\n    Table,\n    TableBody,\n    TableHeader\n} from '@patternfly/react-table';\nimport {\n    global_danger_color_100,\n    global_spacer_md,\n    global_spacer_sm,\n    global_success_color_100,\n    global_warning_color_200\n} from '@patternfly/react-tokens';\nimport { SkeletonTable } from '@redhat-cloud-services/frontend-components';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport { important } from 'csx';\nimport * as React from 'react';\nimport { useIntl } from 'react-intl';\nimport { style } from 'typestyle';\n\nimport messages from '../../properties/DefinedMessages';\nimport { Messages } from '../../properties/Messages';\nimport { IntegrationConnectionAttempt, UserIntegration } from '../../types/Integration';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { ConnectionDegraded } from './Table/ConnectionDegraded';\nimport { ConnectionFailed } from './Table/ConnectionFailed';\nimport { ExpandedContent } from './Table/ExpandedContent';\n\nexport type OnEnable = (integration: IntegrationRow, index: number, isChecked: boolean) => void;\n\ninterface IntegrationsTableProps extends OuiaComponentProps {\n    isLoading: boolean;\n    loadingCount?: number;\n    integrations: Array<IntegrationRow>;\n    onCollapse?: (integration: IntegrationRow, index: number, isOpen: boolean) => void;\n    onEnable?: OnEnable;\n    actionResolver: (row: IntegrationRow, index: number) => IActions;\n}\n\nexport type IntegrationRow = UserIntegration & {\n    isOpen: boolean;\n    isSelected: boolean;\n    isEnabledLoading: boolean;\n    isConnectionAttemptLoading: boolean;\n    lastConnectionAttempts?: Array<IntegrationConnectionAttempt>;\n}\n\nenum LastConnectionAttemptStatus {\n    UNKNOWN,\n    SUCCESS,\n    WARNING,\n    ERROR\n}\n\nconst connectionAlertClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\nconst expandedContentClassName = style({\n    paddingLeft: 0,\n    paddingBottom: 0\n});\n\nconst isEnabledLoadingClassName = style({\n    marginLeft: 10\n});\n\nconst smallMarginLeft = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst degradedClassName = style({\n    fontWeight: 600,\n    color: global_warning_color_200.var,\n    fontSize: 'var(--pf-global--FontSize--sm)'\n});\n\nconst getLastConnectionAttemptStatus = (attempts: Array<IntegrationConnectionAttempt>): LastConnectionAttemptStatus => {\n    if (attempts.length === 0) {\n        return LastConnectionAttemptStatus.UNKNOWN;\n    }\n\n    const failures = attempts.filter(a => !a.isSuccess).length;\n\n    if (failures === attempts.length) {\n        return LastConnectionAttemptStatus.ERROR;\n    } else if (failures > 0) {\n        return LastConnectionAttemptStatus.WARNING;\n    }\n\n    return LastConnectionAttemptStatus.SUCCESS;\n};\n\nconst getConnectionAlert = (attempts: Array<IntegrationConnectionAttempt>) => {\n    const status = getLastConnectionAttemptStatus(attempts);\n    switch (status) {\n        case LastConnectionAttemptStatus.UNKNOWN:\n        case LastConnectionAttemptStatus.SUCCESS:\n            return null;\n        case LastConnectionAttemptStatus.ERROR:\n            return (\n                <div className={ connectionAlertClassName }>\n                    <ConnectionFailed attempts={ attempts } />\n                </div>\n            );\n        case LastConnectionAttemptStatus.WARNING:\n            return (\n                <div className={ connectionAlertClassName }>\n                    <ConnectionDegraded attempts={ attempts } />\n                </div>\n            );\n        default:\n            assertNever(status);\n    }\n};\n\nconst LastConnectionAttemptSuccess: React.FunctionComponent = () => (\n    <>\n        <CheckCircleIcon color={ global_success_color_100.value } data-testid=\"success-icon\" />\n        <span className={ smallMarginLeft }>Success</span>\n    </>\n);\n\nconst LastConnectionAttemptError: React.FunctionComponent = () => (\n    <>\n        <ExclamationCircleIcon color={ global_danger_color_100.value } data-testid=\"fail-icon\" />\n        <span className={ smallMarginLeft }>Failure</span>\n    </>\n);\n\nconst getConnectionAttemptCell = (attempts: Array<IntegrationConnectionAttempt> | undefined, isLoading: boolean) => {\n    if (attempts === undefined) {\n        return 'Error fetching connection attempts';\n    }\n\n    if (isLoading) {\n        return <Spinner size=\"md\" />;\n    }\n\n    const status = getLastConnectionAttemptStatus(attempts);\n    switch (status) {\n        case LastConnectionAttemptStatus.UNKNOWN:\n            return <>\n                <OffIcon data-testid=\"off-icon\" />\n                <span className={ smallMarginLeft }>Unknown</span>\n            </>;\n        case LastConnectionAttemptStatus.SUCCESS:\n            return <><LastConnectionAttemptSuccess /></>;\n        case LastConnectionAttemptStatus.ERROR:\n            return <><LastConnectionAttemptError /></>;\n        case LastConnectionAttemptStatus.WARNING:\n            return <>\n                { attempts[0].isSuccess ? <LastConnectionAttemptSuccess /> : <LastConnectionAttemptError />}\n                <br />\n                <Text className={ degradedClassName }>Degraded connection</Text>\n            </>;\n        default:\n            assertNever(status);\n    }\n};\n\nconst toTableRows = (integrations: Array<IntegrationRow>, onEnable?: OnEnable): Array<IRow> => {\n    return integrations.reduce((rows, integration, idx) => {\n        rows.push({\n            id: integration.id,\n            key: integration.id,\n            isOpen: integration.isOpen,\n            selected: integration.isSelected,\n            cells: [\n                {\n                    title: integration.name\n                },\n                {\n                    title: Messages.components.integrations.integrationType[integration.type]\n                },\n                {\n                    title: getConnectionAttemptCell(integration.lastConnectionAttempts, integration.isConnectionAttemptLoading)\n                },\n                {\n                    title: <>\n                        { integration.isEnabledLoading ? (\n                            <Spinner className={ isEnabledLoadingClassName } size=\"md\" />\n                        ) : (\n                            <Switch\n                                id={ `table-row-switch-id-${integration.id}` }\n                                aria-label=\"Enabled\"\n                                isChecked={ integration.isEnabled }\n                                onChange={ isChecked => onEnable && onEnable(integration, idx, isChecked) }\n                                isDisabled={ !onEnable }\n                                ouiaId={ `enabled-${integration.id}` }\n                            />\n                        )}\n                    </>\n                }\n            ]\n        });\n        rows.push({\n            fullWidth: true,\n            parent: idx * 2,\n            cells: [\n                {\n                    title: <>\n                        {integration.lastConnectionAttempts !== undefined && getConnectionAlert(integration.lastConnectionAttempts)}\n                        <div className={ expandedContentClassName }>\n                            <ExpandedContent integration={ integration } ouiaId={ integration.id } />\n                        </div>\n                    </>,\n                    props: {\n                        colSpan: 6\n                    }\n                }\n            ]\n        });\n        return rows;\n    }, [] as Array<IRow>);\n};\n\nconst columns: Array<ICell> = [\n    {\n        title: Messages.components.integrations.table.columns.name,\n        cellFormatters: [ expandable ],\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.type,\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.lastConnectionAttempt,\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.enabled,\n        transforms: []\n    }\n];\n\nconst buildClassNames = () => {\n    const noneStyle = important('none');\n    const borderStyle = important('var(--pf-c-table--border-width--base) solid var(--pf-c-table--BorderColor)');\n\n    const noBorderBottom = {\n        borderBottom: noneStyle\n    };\n\n    const rowExpandedContentClassName = style(noBorderBottom);\n    const rowWrapperClassName = style(noBorderBottom, {\n        borderTop: borderStyle\n    });\n    const tableClassName = style({\n        borderBottom: borderStyle\n    });\n\n    return {\n        rowExpandedContentClassName,\n        rowWrapperClassName,\n        tableClassName\n    };\n};\n\nconst {\n    rowExpandedContentClassName,\n    rowWrapperClassName,\n    tableClassName\n} = buildClassNames();\n\nconst RowWrapper: React.FunctionComponent<RowWrapperProps> = (props) => {\n    const { trRef, className, rowProps, row, ...rest } = props;\n    if (!row) {\n        return <></>;\n    }\n\n    return (\n        <tr\n            { ...rest }\n            ref={ trRef as any }\n            className={ css(\n                className,\n                row.isExpanded === true ? rowExpandedContentClassName : rowWrapperClassName,\n                row.isExpanded !== undefined && styles.tableExpandableRow,\n                row.isExpanded && styles.modifiers.expanded\n            ) }\n            hidden={ row?.isExpanded !== undefined && !row.isExpanded }\n        >\n            { props.children}\n        </tr>\n    );\n};\n\nexport const IntegrationsTable: React.FunctionComponent<IntegrationsTableProps> = (props) => {\n    const intl = useIntl();\n    const onCollapseHandler = React.useCallback((_event, _index: number, isOpen: boolean, data: IRowData) => {\n        const integrations = props.integrations;\n        const onCollapse = props.onCollapse;\n        const index = integrations.findIndex(integration => integration.id === data.id);\n        if (onCollapse && index !== -1) {\n            const integration = integrations[index];\n            onCollapse(integration, index, isOpen);\n        }\n    }, [ props.integrations, props.onCollapse ]);\n\n    const rows = React.useMemo(() => {\n        return toTableRows(props.integrations, props.onEnable);\n    }, [ props.integrations, props.onEnable ]);\n\n    const actionsResolverCallback: IActionsResolver = React.useCallback(rowData => {\n        const actionResolver = props.actionResolver;\n        if (rowData.parent === undefined && rowData && props.integrations) {\n            const integrationIndex = props.integrations.findIndex(i => i.id === rowData.id);\n            const integrationRow = props.integrations[integrationIndex];\n            if (integrationRow) {\n                return actionResolver(integrationRow, integrationIndex);\n            }\n        }\n\n        return [];\n    }, [ props.actionResolver, props.integrations ]);\n\n    if (props.isLoading) {\n        return (\n            <div { ...getOuiaProps('Integrations/Table',  { ...props, ouiaSafe: false }) }>\n                <SkeletonTable\n                    rowSize={ (props.loadingCount && props.loadingCount > 0) ? props.loadingCount : 10 }\n                    columns={ columns }\n                    paddingColumnSize={ 0 }\n                    sortBy={ undefined }\n                />\n            </div>\n        );\n    }\n\n    return (\n        <div { ...getOuiaProps('Integrations/Table', props) }>\n            {rows.length === 0 ?  (<EmptyState variant={ EmptyStateVariant.full }>\n                <EmptyStateIcon icon={ CubesIcon } />\n                <Title headingLevel=\"h2\" size=\"lg\">\n                    {intl.formatMessage(messages.integrationsEmptyStateTitle)}\n                </Title>\n                <EmptyStateBody>\n                    {intl.formatMessage(messages.integrationsTableEmptyStateBody)}\n                </EmptyStateBody>\n            </EmptyState>) :\n                (<Table\n                    className={ tableClassName }\n                    aria-label={ Messages.components.integrations.table.title }\n                    rows={ rows }\n                    cells={ columns }\n                    onCollapse={ onCollapseHandler }\n                    rowWrapper={ RowWrapper as (props: RowWrapperProps) => React.ReactElement }\n                    actionResolver={ actionsResolverCallback }\n                >\n                    <TableHeader />\n                    <TableBody />\n                </Table>)}\n        </div>\n    );\n};\n","import { ExporterType, exporterTypeFromString } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\ntype OnExport = (type: ExporterType) => void;\n\nexport const useTableExportConfig = (onExport: OnExport) => {\n    return React.useMemo(() => {\n        if (onExport) {\n            return {\n                extraItems: [],\n                onSelect: (_event, type: string) => {\n                    onExport(exporterTypeFromString(type));\n                }\n            };\n        }\n\n        return undefined;\n    }, [ onExport ]);\n};\n","import { Environment, getInsightsEnvironment, InsightsType } from '@redhat-cloud-services/insights-common-typescript';\n\nexport const stagingAndProd: Array<Environment> = [\n    'stage-beta',\n    'prod-beta',\n    'stage',\n    'prod'\n];\n\nexport const isStagingOrProd = (insights: InsightsType) => {\n    return stagingAndProd.includes(getInsightsEnvironment(insights));\n};\n","import { ClearFilters, Filters, SetFilters } from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum IntegrationFilterColumn {\n    NAME = 'name',\n    ENABLED = 'enabled'\n}\n\nexport type IntegrationFilters = Filters<typeof IntegrationFilterColumn>;\nexport type SetIntegrationFilters = SetFilters<typeof IntegrationFilterColumn>;\nexport type ClearIntegrationFilters = ClearFilters<typeof IntegrationFilterColumn>;\n","import { PaginationProps, PaginationVariant } from '@patternfly/react-core';\nimport { PrimaryToolbar } from '@redhat-cloud-services/frontend-components';\nimport {\n    ColumnsMetada,\n    ExporterType,\n    getInsights,\n    OuiaComponentProps,\n    useInsightsEnvironmentFlag,\n    usePrimaryToolbarFilterConfig\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport { style } from 'typestyle';\n\nimport { useTableExportConfig } from '../../hooks/useTableExportConfig';\nimport { Messages } from '../../properties/Messages';\nimport { stagingAndProd } from '../../types/Environments';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { DisabledIntegrationIcon, EnabledIntegrationIcon } from '../Icons';\nimport { ClearIntegrationFilters, IntegrationFilterColumn, IntegrationFilters, SetIntegrationFilters } from './Filters';\n\ninterface IntegrationsToolbarProps extends OuiaComponentProps {\n    onAddIntegration?: () => void;\n    onExport: (type: ExporterType) => void;\n    filters: IntegrationFilters;\n    setFilters: SetIntegrationFilters;\n    clearFilters: ClearIntegrationFilters;\n    pageCount: number;\n    count: number;\n    page: number;\n    perPage: number;\n    pageChanged: (page: number) => void;\n    perPageChanged: (page: number) => void;\n}\n\nconst enabledTextClassName = style({\n    marginLeft: 4\n});\n\nconst filterMetadata: ColumnsMetada<typeof IntegrationFilterColumn> = {\n    [IntegrationFilterColumn.NAME]: {\n        label: 'Name',\n        placeholder: 'Filter by name'\n    },\n    [IntegrationFilterColumn.ENABLED]: {\n        label: 'Enabled',\n        placeholder: 'Filter by enabled',\n        options: {\n            exclusive: false,\n            items: [\n                {\n                    value: 'Enabled',\n                    label: <><EnabledIntegrationIcon /> <span className={ enabledTextClassName }>Enabled</span></>\n                },\n                {\n                    value: 'Disabled',\n                    label: <><DisabledIntegrationIcon /> <span className={ enabledTextClassName }>Disabled</span></>\n                }\n            ]\n        }\n    }\n};\n\nexport const IntegrationsToolbar: React.FunctionComponent<IntegrationsToolbarProps> = (props) => {\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n        IntegrationFilterColumn,\n        props.filters,\n        props.setFilters,\n        props.clearFilters,\n        filterMetadata\n    );\n\n    const actionsConfig = React.useMemo(() => {\n        const actions = [\n            {\n                key: 'add-integration',\n                label: Messages.components.integrations.toolbar.actions.addIntegration,\n                onClick: props.onAddIntegration,\n                props: {\n                    isDisabled: !props.onAddIntegration\n                }\n            }\n        ];\n\n        return {\n            actions,\n            kebabToggleProps: {\n                isDisabled: false\n            }\n        };\n    }, [ props.onAddIntegration ]);\n\n    const exportConfig = useTableExportConfig(props.onExport);\n\n    const filterConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.filterConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const activeFiltersConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.activeFiltersConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const pageChanged = React.useCallback((_event: unknown, page: number) => {\n        const inner = props.pageChanged;\n        inner(page);\n    }, [ props.pageChanged ]);\n\n    const perPageChanged = React.useCallback((_event: unknown, perPage: number) => {\n        const inner = props.perPageChanged;\n        inner(perPage);\n    }, [ props.perPageChanged ]);\n\n    const topPaginationProps = React.useMemo<PaginationProps>(() => ({\n        itemCount: props.count,\n        page: props.page,\n        perPage: props.perPage,\n        isCompact: true,\n        variant: PaginationVariant.top,\n        onSetPage: pageChanged,\n        onFirstClick: pageChanged,\n        onPreviousClick: pageChanged,\n        onNextClick: pageChanged,\n        onLastClick: pageChanged,\n        onPageInput: pageChanged,\n        onPerPageSelect: perPageChanged\n    }), [ props.count, props.page, props.perPage, pageChanged, perPageChanged ]);\n\n    const bottomPaginationProps = React.useMemo<PaginationProps>(() => ({\n        ...topPaginationProps,\n        isCompact: false,\n        variant: PaginationVariant.bottom\n    }), [ topPaginationProps ]);\n\n    return (\n        <div { ...getOuiaProps('Integrations/DualToolbar', props) }>\n            <PrimaryToolbar\n                actionsConfig={ actionsConfig }\n                exportConfig={ exportConfig }\n                filterConfig={ filterConfig }\n                activeFiltersConfig={ activeFiltersConfig }\n                pagination={ topPaginationProps }\n                id=\"integrations-top-toolbar\"\n            />\n            { props.children }\n            <PrimaryToolbar id=\"integrations-bottom-toolbar\" pagination={ bottomPaginationProps } />\n        </div>\n    );\n};\n","import { CheckCircleIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\n\nexport const EnabledIntegrationIcon: React.FunctionComponent = () => {\n    return <CheckCircleIcon color=\"green\" />;\n};\n","import { OffIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\n\nexport const DisabledIntegrationIcon: React.FunctionComponent = () => {\n    return <OffIcon />;\n};\n","import { assertNever } from 'assert-never';\nimport { useMemo, useReducer } from 'react';\n\nenum UseDeleteModalReducerActionType {\n    DELETE = 'delete',\n    RESET = 'reset'\n}\n\ninterface UseDeleteModalActionDelete<T> {\n    type: UseDeleteModalReducerActionType.DELETE;\n    data: T;\n}\n\ninterface UseDeleteModalActionReset {\n    type: UseDeleteModalReducerActionType.RESET;\n}\n\ntype UseDeleteModalReducerAction<T> = UseDeleteModalActionDelete<T> | UseDeleteModalActionReset;\n\ntype UseDeleteModalReducerState<T> = {\n    isOpen: false;\n    data: undefined;\n} | {\n    isOpen: true;\n    data: T;\n}\n\nconst initialState: UseDeleteModalReducerState<undefined> = {\n    isOpen: false,\n    data: undefined\n};\n\ntype ReducerFunction<T> = (state: UseDeleteModalReducerState<T>, action: UseDeleteModalReducerAction<T>) => UseDeleteModalReducerState<T>;\ntype ReducerActions<T> = {\n    delete: (data: T) => void;\n    reset: () => void;\n}\n\nconst reducer = <T>(\n    state: UseDeleteModalReducerState<T>,\n    action: UseDeleteModalReducerAction<T>\n): UseDeleteModalReducerState<T> => {\n    switch (action.type) {\n        case UseDeleteModalReducerActionType.DELETE:\n            return {\n                isOpen: true,\n                data: action.data\n            };\n        case UseDeleteModalReducerActionType.RESET:\n            return initialState;\n        default:\n            assertNever(action);\n\n    }\n};\n\nconst makeDeleteAction = <T>(data: T): UseDeleteModalActionDelete<T> => ({\n    type: UseDeleteModalReducerActionType.DELETE,\n    data\n});\n\nconst makeResetAction = (): UseDeleteModalActionReset => ({\n    type: UseDeleteModalReducerActionType.RESET\n});\n\nexport const useDeleteModalReducer = <T>(): [ UseDeleteModalReducerState<T>, ReducerActions<T> ] => {\n    const [ state, dispatch ] = useReducer<ReducerFunction<T>>(reducer, initialState);\n\n    const actions = useMemo<ReducerActions<T>>(() => ({\n        delete: data => dispatch(makeDeleteAction(data)),\n        reset: () => dispatch(makeResetAction())\n    }), [ dispatch ]);\n\n    return [ state, actions ];\n};\n","import { assertNever } from 'assert-never';\nimport { useMemo, useReducer } from 'react';\n\nenum UseFormModalReducerActionType {\n    EDIT = 'edit',\n    CREATE = 'create',\n    RESET = 'reset'\n}\n\ninterface UseFormModalReducerActionCreate<T> {\n    type: UseFormModalReducerActionType.CREATE;\n    template?: Partial<T>;\n}\n\ninterface UseFormModalReducerActionEdit<T> {\n    type: UseFormModalReducerActionType.EDIT;\n    template: T;\n}\n\ninterface UseFormModalReducerActionReset {\n    type: UseFormModalReducerActionType.RESET;\n}\n\ntype UseFormModalReducerAction<T> = UseFormModalReducerActionCreate<T> | UseFormModalReducerActionEdit<T> | UseFormModalReducerActionReset;\ntype ReducerAction<T> = {\n    create: (template?: Partial<T>) => void;\n    edit: (template: T) => void;\n    reset: () => void;\n};\n\ninterface UseFormModalReducerState<T> {\n    isOpen: boolean;\n    isEdit: boolean;\n    template: T | Partial<T> | undefined;\n    isCopy: boolean;\n}\n\nconst initialState: UseFormModalReducerState<undefined> = {\n    isOpen: false,\n    isEdit: false,\n    template: undefined,\n    isCopy: false\n};\n\ntype CopyFunction<T> = (from: Partial<T>) => Partial<T>;\n\nconst buildReducer = <T>(copyFunction?: CopyFunction<T>) => {\n    const reducer = (\n        state: UseFormModalReducerState<T>,\n        action: UseFormModalReducerAction<T>\n    ): UseFormModalReducerState<T> => {\n        switch (action.type) {\n            case UseFormModalReducerActionType.CREATE:\n                return {\n                    isOpen: true,\n                    isEdit: false,\n                    template: action.template ? copyFunction ? copyFunction(action.template) : action.template : undefined,\n                    isCopy: !!action.template\n                };\n            case UseFormModalReducerActionType.EDIT:\n                return {\n                    isOpen: true,\n                    isEdit: true,\n                    template: action.template,\n                    isCopy: false\n                };\n            case UseFormModalReducerActionType.RESET:\n                return initialState;\n            default:\n                assertNever(action);\n        }\n    };\n\n    return reducer;\n};\n\nconst makeCreateAction = <T>(template?: Partial<T>): UseFormModalReducerActionCreate<T> => ({\n    type: UseFormModalReducerActionType.CREATE,\n    template\n});\n\nconst makeEditAction = <T>(template: T): UseFormModalReducerActionEdit<T> => ({\n    type: UseFormModalReducerActionType.EDIT,\n    template\n});\n\nconst makeResetAction = (): UseFormModalReducerActionReset => ({\n    type: UseFormModalReducerActionType.RESET\n});\n\nexport const useFormModalReducer = <T>(copyFunction?: CopyFunction<T>): [ UseFormModalReducerState<T>, ReducerAction<T> ] => {\n    const reducer = useMemo(() => {\n        return buildReducer(copyFunction);\n    }, [ copyFunction ]);\n\n    const [ state, dispatch ] = useReducer(reducer, initialState);\n\n    const actions = useMemo<ReducerAction<T>>(() => ({\n        create: (data?: Partial<T>) => dispatch(makeCreateAction(data)),\n        edit: (data: T) => dispatch(makeEditAction(data)),\n        reset: () => dispatch(makeResetAction())\n    }), [ dispatch ]);\n\n    return [ state, actions ];\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const EmailSubscriptionProperties = zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = unknown;\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties)\n      | undefined\n      | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType = 'webhook' | 'email_subscription' | 'default';\n\n  export const EntityTag = zodSchemaEntityTag();\n  export type EntityTag = {\n    value?: string | undefined | null;\n    weak?: boolean | undefined | null;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const Family = zodSchemaFamily();\n  export type Family =\n    | 'CLIENT_ERROR'\n    | 'INFORMATIONAL'\n    | 'OTHER'\n    | 'REDIRECTION'\n    | 'SERVER_ERROR'\n    | 'SUCCESSFUL';\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Link = zodSchemaLink();\n  export type Link = {\n    params?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    rel?: string | undefined | null;\n    rels?: Array<string> | undefined | null;\n    title?: string | undefined | null;\n    type?: string | undefined | null;\n    uri?: string | undefined | null;\n    uriBuilder?: UriBuilder | undefined | null;\n  };\n\n  export const Locale = zodSchemaLocale();\n  export type Locale = {\n    country?: string | undefined | null;\n    displayCountry?: string | undefined | null;\n    displayLanguage?: string | undefined | null;\n    displayName?: string | undefined | null;\n    displayScript?: string | undefined | null;\n    displayVariant?: string | undefined | null;\n    extensionKeys?: Array<string> | undefined | null;\n    iSO3Country?: string | undefined | null;\n    iSO3Language?: string | undefined | null;\n    language?: string | undefined | null;\n    script?: string | undefined | null;\n    unicodeLocaleAttributes?: Array<string> | undefined | null;\n    unicodeLocaleKeys?: Array<string> | undefined | null;\n    variant?: string | undefined | null;\n  };\n\n  export const MediaType = zodSchemaMediaType();\n  export type MediaType = {\n    parameters?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    subtype?: string | undefined | null;\n    type?: string | undefined | null;\n    wildcardSubtype?: boolean | undefined | null;\n    wildcardType?: boolean | undefined | null;\n  };\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const MultivaluedMapStringObject = zodSchemaMultivaluedMapStringObject();\n  export type MultivaluedMapStringObject = {\n    [x: string]: Array<unknown>;\n  };\n\n  export const MultivaluedMapStringString = zodSchemaMultivaluedMapStringString();\n  export type MultivaluedMapStringString = {\n    [x: string]: Array<string>;\n  };\n\n  export const NewCookie = zodSchemaNewCookie();\n  export type NewCookie = {\n    comment?: string | undefined | null;\n    domain?: string | undefined | null;\n    expiry?: string | undefined | null;\n    httpOnly?: boolean | undefined | null;\n    maxAge?: number | undefined | null;\n    name?: string | undefined | null;\n    path?: string | undefined | null;\n    secure?: boolean | undefined | null;\n    value?: string | undefined | null;\n    version?: number | undefined | null;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    eventId?: string | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const RbacRaw = zodSchemaRbacRaw();\n  export type RbacRaw = {\n    data?:\n      | Array<{\n          [x: string]: unknown;\n        }>\n      | undefined\n      | null;\n    links?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    meta?:\n      | {\n          [x: string]: number;\n        }\n      | undefined\n      | null;\n  };\n\n  export const Response = zodSchemaResponse();\n  export type Response = {\n    allowedMethods?: Array<string> | undefined | null;\n    cookies?:\n      | {\n          [x: string]: NewCookie;\n        }\n      | undefined\n      | null;\n    date?: string | undefined | null;\n    entity?: unknown | undefined | null;\n    entityTag?: EntityTag | undefined | null;\n    headers?: MultivaluedMapStringObject | undefined | null;\n    language?: Locale | undefined | null;\n    lastModified?: string | undefined | null;\n    length?: number | undefined | null;\n    links?: Array<Link> | undefined | null;\n    location?: string | undefined | null;\n    mediaType?: MediaType | undefined | null;\n    metadata?: MultivaluedMapStringObject | undefined | null;\n    status?: number | undefined | null;\n    statusInfo?: StatusType | undefined | null;\n    stringHeaders?: MultivaluedMapStringString | undefined | null;\n  };\n\n  export const StatusType = zodSchemaStatusType();\n  export type StatusType = {\n    family?: Family | undefined | null;\n    reasonPhrase?: string | undefined | null;\n    statusCode?: number | undefined | null;\n  };\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const UriBuilder = zodSchemaUriBuilder();\n  export type UriBuilder = unknown;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  export const __Empty = zodSchema__Empty();\n  export type __Empty = string | undefined;\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties()\n          ])\n          .optional()\n          .nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default' ]);\n  }\n\n  function zodSchemaEntityTag() {\n      return z\n      .object({\n          value: z.string().optional().nullable(),\n          weak: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFamily() {\n      return z.enum([\n          'CLIENT_ERROR',\n          'INFORMATIONAL',\n          'OTHER',\n          'REDIRECTION',\n          'SERVER_ERROR',\n          'SUCCESSFUL'\n      ]);\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaLink() {\n      return z\n      .object({\n          params: z.record(z.string()).optional().nullable(),\n          rel: z.string().optional().nullable(),\n          rels: z.array(z.string()).optional().nullable(),\n          title: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          uri: z.string().optional().nullable(),\n          uriBuilder: zodSchemaUriBuilder().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaLocale() {\n      return z\n      .object({\n          country: z.string().optional().nullable(),\n          displayCountry: z.string().optional().nullable(),\n          displayLanguage: z.string().optional().nullable(),\n          displayName: z.string().optional().nullable(),\n          displayScript: z.string().optional().nullable(),\n          displayVariant: z.string().optional().nullable(),\n          extensionKeys: z.array(z.string()).optional().nullable(),\n          iSO3Country: z.string().optional().nullable(),\n          iSO3Language: z.string().optional().nullable(),\n          language: z.string().optional().nullable(),\n          script: z.string().optional().nullable(),\n          unicodeLocaleAttributes: z.array(z.string()).optional().nullable(),\n          unicodeLocaleKeys: z.array(z.string()).optional().nullable(),\n          variant: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMediaType() {\n      return z\n      .object({\n          parameters: z.record(z.string()).optional().nullable(),\n          subtype: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          wildcardSubtype: z.boolean().optional().nullable(),\n          wildcardType: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMultivaluedMapStringObject() {\n      return z.record(z.array(z.unknown()));\n  }\n\n  function zodSchemaMultivaluedMapStringString() {\n      return z.record(z.array(z.string()));\n  }\n\n  function zodSchemaNewCookie() {\n      return z\n      .object({\n          comment: z.string().optional().nullable(),\n          domain: z.string().optional().nullable(),\n          expiry: z.string().optional().nullable(),\n          httpOnly: z.boolean().optional().nullable(),\n          maxAge: z.number().int().optional().nullable(),\n          name: z.string().optional().nullable(),\n          path: z.string().optional().nullable(),\n          secure: z.boolean().optional().nullable(),\n          value: z.string().optional().nullable(),\n          version: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          eventId: z.string().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacRaw() {\n      return z\n      .object({\n          data: z.array(z.record(z.unknown())).optional().nullable(),\n          links: z.record(z.string()).optional().nullable(),\n          meta: z.record(z.number().int()).optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaResponse() {\n      return z\n      .object({\n          allowedMethods: z.array(z.string()).optional().nullable(),\n          cookies: z.record(zodSchemaNewCookie()).optional().nullable(),\n          date: z.string().optional().nullable(),\n          entity: z.unknown().optional().nullable(),\n          entityTag: zodSchemaEntityTag().optional().nullable(),\n          headers: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          language: zodSchemaLocale().optional().nullable(),\n          lastModified: z.string().optional().nullable(),\n          length: z.number().int().optional().nullable(),\n          links: z.array(zodSchemaLink()).optional().nullable(),\n          location: z.string().optional().nullable(),\n          mediaType: zodSchemaMediaType().optional().nullable(),\n          metadata: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          status: z.number().int().optional().nullable(),\n          statusInfo: zodSchemaStatusType().optional().nullable(),\n          stringHeaders: zodSchemaMultivaluedMapStringString()\n          .optional()\n          .nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatusType() {\n      return z\n      .object({\n          family: zodSchemaFamily().optional().nullable(),\n          reasonPhrase: z.string().optional().nullable(),\n          statusCode: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaUriBuilder() {\n      return z.unknown();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchema__Empty() {\n      return z.string().max(0).optional();\n  }\n}\n\nexport namespace Operations {\n  // GET /endpoints\n  export namespace EndpointServiceGetEndpoints {\n    const Active = z.boolean();\n    type Active = boolean;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Type = z.string();\n    type Type = string;\n    export interface Params {\n      active?: Active;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n      type?: Type;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'EndpointPage', 200, Schemas.EndpointPage>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints';\n        const query = {} as Record<string, any>;\n        if (params.active !== undefined) {\n            query.active = params.active;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        if (params.type !== undefined) {\n            query.type = params.type;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.EndpointPage, 'EndpointPage', 200) ]\n        })\n        .build();\n    };\n  }\n  // POST /endpoints\n  export namespace EndpointServiceCreateEndpoint {\n    export interface Params {\n      body: Schemas.Endpoint;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Schemas.Endpoint, 'Endpoint', 200) ]\n        })\n        .build();\n    };\n  }\n  // POST /endpoints/bg\n  export namespace EndpointServiceCreateEndpointBg {\n    export interface Params {\n      body: Schemas.Endpoint;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/bg';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Schemas.Endpoint, 'Endpoint', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/email/subscription/{bundleName}/{applicationName}/{type}\n  export namespace EndpointServiceSubscribeEmail {\n    const ApplicationName = z.string();\n    type ApplicationName = string;\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      applicationName: ApplicationName;\n      bundleName: BundleName;\n      type: Schemas.EmailSubscriptionType;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/email/subscription/{bundleName}/{applicationName}/{type}'\n        .replace('{applicationName}', params.applicationName.toString())\n        .replace('{bundleName}', params.bundleName.toString())\n        .replace('{type}', params.type.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/email/subscription/{bundleName}/{applicationName}/{type}\n  export namespace EndpointServiceUnsubscribeEmail {\n    const ApplicationName = z.string();\n    type ApplicationName = string;\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      applicationName: ApplicationName;\n      bundleName: BundleName;\n      type: Schemas.EmailSubscriptionType;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/email/subscription/{bundleName}/{applicationName}/{type}'\n        .replace('{applicationName}', params.applicationName.toString())\n        .replace('{bundleName}', params.bundleName.toString())\n        .replace('{type}', params.type.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}\n  export namespace EndpointServiceGetEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.Endpoint, 'Endpoint', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/{id}\n  export namespace EndpointServiceUpdateEndpoint {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      id: Schemas.UUID;\n      body: Schemas.Endpoint;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/{id}\n  export namespace EndpointServiceDeleteEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.__Empty, '__Empty', 204) ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/{id}/enable\n  export namespace EndpointServiceEnableEndpoint {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/enable'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/{id}/enable\n  export namespace EndpointServiceDisableEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/enable'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.__Empty, '__Empty', 204) ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}/history\n  export namespace EndpointServiceGetEndpointHistory {\n    const Response200 = z.array(Schemas.NotificationHistory);\n    type Response200 = Array<Schemas.NotificationHistory>;\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/history'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}/history/{history_id}/details\n  export namespace EndpointServiceGetDetailedEndpointHistory {\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const PageSize = z.number().int();\n    type PageSize = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      historyId: Schemas.UUID;\n      id: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      pageSize?: PageSize;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/history/{history_id}/details'\n        .replace('{history_id}', params.historyId.toString())\n        .replace('{id}', params.id.toString());\n        const query = {} as Record<string, any>;\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.pageSize !== undefined) {\n            query.pageSize = params.pageSize;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n}\n","import { assertNever } from 'assert-never';\n\nimport { Schemas } from '../../generated/OpenapiIntegrations';\nimport {\n    Integration,\n    IntegrationBase,\n    IntegrationHttp,\n    IntegrationType,\n    NewIntegration,\n    NewUserIntegration,\n    ServerIntegrationRequest,\n    ServerIntegrationResponse,\n    UserIntegration,\n    UserIntegrationType\n} from '../Integration';\n\nconst getIntegrationType = (type: Schemas.EndpointType | undefined): IntegrationType => {\n    switch (type) {\n        case Schemas.EndpointType.Enum.webhook:\n            return IntegrationType.WEBHOOK;\n        case Schemas.EndpointType.Enum.email_subscription:\n            return IntegrationType.EMAIL_SUBSCRIPTION;\n        case Schemas.EndpointType.Enum.default:\n        case undefined:\n            throw new Error(`Unexpected type: ${type}`);\n        default:\n            assertNever(type);\n    }\n};\n\nexport const getEndpointType = (type: IntegrationType | UserIntegrationType): Schemas.EndpointType => {\n    switch (type) {\n        case IntegrationType.WEBHOOK:\n        case UserIntegrationType.WEBHOOK:\n            return Schemas.EndpointType.Enum.webhook;\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            return Schemas.EndpointType.Enum.email_subscription;\n        default:\n            assertNever(type);\n    }\n};\n\nexport const toIntegration = (serverIntegration: ServerIntegrationResponse): Integration => {\n\n    const integrationBase: IntegrationBase = {\n        id: serverIntegration.id || '',\n        name: serverIntegration.name || '',\n        isEnabled: !!serverIntegration.enabled,\n        type: getIntegrationType(serverIntegration.type)\n    };\n\n    switch (integrationBase.type) {\n        case IntegrationType.WEBHOOK:\n            const properties = serverIntegration.properties as Schemas.WebhookProperties;\n            return {\n                ...integrationBase,\n                url: properties.url || '',\n                sslVerificationEnabled: !properties.disable_ssl_verification,\n                secretToken: properties.secret_token === null ? undefined : properties.secret_token,\n                method: properties.method ?? Schemas.HttpType.Enum.GET\n            };\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            return {\n                ...integrationBase,\n                type: IntegrationType.EMAIL_SUBSCRIPTION\n            };\n        default:\n            assertNever(integrationBase.type);\n    }\n};\n\nexport const toUserIntegration = (serverIntegration: ServerIntegrationResponse): UserIntegration => {\n    const integration = toIntegration(serverIntegration);\n    if (!Object.values(UserIntegrationType).includes(integration.type as unknown as UserIntegrationType)) {\n        throw new Error(`Unknown UserIntegrationType ${integration.type}`);\n    }\n\n    return integration as unknown as UserIntegration;\n};\n\nexport const toUserIntegrations = (serverIntegrations: Array<ServerIntegrationResponse>): Array<UserIntegration> => {\n    return toIntegrations(serverIntegrations)\n    .filter(\n        integration => Object.values(UserIntegrationType)\n        .includes(integration.type as unknown as UserIntegrationType)) as unknown as Array<UserIntegration>;\n};\n\nexport const toIntegrations = (serverIntegrations: Array<ServerIntegrationResponse>): Array<Integration> => {\n    return filterOutDefaultAction(serverIntegrations).map(toIntegration);\n};\n\nexport const toIntegrationProperties = (integration: Integration | NewIntegration | UserIntegration | NewUserIntegration) => {\n    switch (integration.type) {\n        case IntegrationType.WEBHOOK:\n        case UserIntegrationType.WEBHOOK:\n            const integrationHttp: IntegrationHttp = integration as IntegrationHttp;\n            return {\n                url: integrationHttp.url,\n                method: integrationHttp.method,\n                disable_ssl_verification: !integrationHttp.sslVerificationEnabled,\n                secret_token: integrationHttp.secretToken\n            };\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            return {};\n        default:\n            assertNever(integration);\n    }\n};\n\nexport const toServerIntegrationRequest =\n    (integration: Integration | NewIntegration | UserIntegration | NewUserIntegration): ServerIntegrationRequest => {\n        return {\n            id: integration.id,\n            name: integration.name,\n            enabled: integration.isEnabled,\n            type: getEndpointType(integration.type),\n            description: '',\n            properties: toIntegrationProperties(integration)\n        };\n    };\n\nexport const filterOutDefaultAction = (serverNotifications: Array<ServerIntegrationResponse>) =>\n    serverNotifications.filter(e => e.type !== Schemas.EndpointType.enum.default);\n","import { Page, useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useParameterizedQuery, useQuery } from 'react-fetching-library';\n\nimport {\n    Operations\n} from '../generated/OpenapiIntegrations';\nimport { getEndpointType, toUserIntegrations } from '../types/adapters/IntegrationAdapter';\nimport { IntegrationType } from '../types/Integration';\n\nexport const listIntegrationsActionCreator = (pager?: Page) => {\n    const query = (pager ?? Page.defaultPage()).toQuery();\n    return Operations.EndpointServiceGetEndpoints.actionCreator({\n        limit: +query.limit,\n        offset: +query.offset,\n        type: query.filterType ? getEndpointType(query.filterType as IntegrationType) : undefined,\n        active: query.filterActive ? query.filterActive === 'true' : undefined\n    });\n};\n\nexport const listIntegrationIntegrationDecoder = validationResponseTransformer((payload: Operations.EndpointServiceGetEndpoints.Payload) => {\n    if (payload?.status === 200) {\n        return validatedResponse(\n            'IntegrationPage',\n            200,\n            {\n                data: toUserIntegrations(payload.value.data),\n                count: payload.value.meta.count\n            },\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useListIntegrationsQuery = (pager?: Page, initFetch?: boolean) => useTransformQueryResponse(\n    useQuery(listIntegrationsActionCreator(pager), initFetch),\n    listIntegrationIntegrationDecoder\n);\n\nexport const useListIntegrationPQuery = () => useTransformQueryResponse(\n    useParameterizedQuery(listIntegrationsActionCreator),\n    listIntegrationIntegrationDecoder\n);\n","import { ExporterCsv, ExporterHeaders } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { UserIntegration } from '../../../types/Integration';\n\nexport class IntegrationExporterCsv extends ExporterCsv<UserIntegration> {\n\n    public serialize(integration: UserIntegration) {\n        return {\n            ...integration\n        };\n    }\n\n    public headers(): ExporterHeaders<IntegrationExporterCsv, UserIntegration> {\n        return [\n            [ 'id', 'id' ],\n            [ 'name', 'name' ],\n            [ 'isEnabled', 'isEnabled' ],\n            [ 'type', 'type' ],\n            // This works now, but what will happen when there are multiple types (slack, webhook, etc)\n            [ 'url', 'url' ]\n        ];\n    }\n}\n","import { ExporterJson } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { UserIntegration } from '../../../types/Integration';\n\nexport class IntegrationExporterJson extends ExporterJson<UserIntegration> {\n\n}\n","import { Button, ButtonVariant, Spinner } from '@patternfly/react-core';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { IntegrationRef } from '../../types/Notification';\n\ninterface AddNotificationBodyProps {\n    integration: IntegrationRef;\n    isLoading: boolean;\n    switchEnabled: () => void;\n}\n\nconst buttonClassname = style({\n    paddingLeft: 0\n});\n\nexport const AddNotificationBody: React.FunctionComponent<AddNotificationBodyProps> = (props) => {\n\n    const text = props.integration.isEnabled ? 'This integration is enabled and ready to use.' : 'This integration is disabled.';\n    const buttonText = props.integration.isEnabled ? 'Disable integration' : 'Enable integration';\n\n    return (\n        <>\n            <div>{ text }</div>\n            <Button\n                className={ buttonClassname }\n                isDisabled={ props.isLoading }\n                variant={ ButtonVariant.link }\n                onClick={ props.switchEnabled }\n            >\n                {buttonText}\n            </Button>\n            { props.isLoading && (\n                <Spinner size=\"sm\" />\n            ) }\n        </>\n    );\n};\n","import * as Yup from 'yup';\n\nimport { Schemas } from '../../generated/OpenapiIntegrations';\nimport {\n    IntegrationHttp,\n    IntegrationType, NewIntegration,\n    NewIntegrationBase, NewIntegrationTemplate\n} from '../../types/Integration';\n\nexport const maxIntegrationNameLength = 150;\n\nexport const IntegrationSchemaBase = Yup.object<NewIntegrationBase>({\n    name: Yup.string().required('Write a name for this Integration.').max(maxIntegrationNameLength).trim(),\n    type: Yup.mixed<IntegrationType>().oneOf([ IntegrationType.WEBHOOK ]).default(IntegrationType.WEBHOOK),\n    isEnabled: Yup.boolean().default(true).required()\n});\n\nexport const IntegrationHttpSchema = IntegrationSchemaBase.concat(Yup.object<NewIntegrationTemplate<IntegrationHttp>>().shape({\n    type: Yup.mixed<IntegrationType.WEBHOOK>().oneOf([ IntegrationType.WEBHOOK ]).required(),\n    url: Yup.string().url().required('Write a valid url for this Integration.'),\n    sslVerificationEnabled: Yup.boolean().default(true),\n    secretToken: Yup.string().notRequired(),\n    method: Yup.mixed<Schemas.HttpType>().oneOf(Object.values(Schemas.HttpType.Enum)).default(Schemas.HttpType.Enum.POST)\n}));\n\nexport const IntegrationSchema = Yup.lazy<NewIntegration | NewIntegrationBase | undefined>(value => {\n    if (value) {\n        if (value.type === IntegrationType.WEBHOOK) {\n            return IntegrationHttpSchema;\n        }\n    }\n\n    return IntegrationSchemaBase;\n});\n","import { Checkbox, FormTextInput, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './IntegrationTypeForm';\n\nexport const IntegrationTypeHttpForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n    return (\n        <div className=\"pf-c-form\" { ...getOuiaProps('Integrations/HttpForm', props) } >\n            <FormTextInput\n                isRequired={ true }\n                label=\"Endpoint URL\"\n                type=\"url\"\n                name=\"url\"\n                id=\"integration-type-http-url\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'endpoint-url') }\n            />\n            <Checkbox\n                id=\"integration-type-http-ssl-verification-enabled\"\n                label=\"Enable SSL verification\"\n                name=\"sslVerificationEnabled\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'is-ssl-verification-enabled') }\n            />\n            <FormTextInput\n                isRequired={ false }\n                label=\"Secret token\"\n                id=\"integration-type-http-secret-token\"\n                name=\"secretToken\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'secret-token') }\n            />\n        </div>\n    );\n};\n","import { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\n\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationTypeHttpForm } from './IntegrationTypeHttpForm';\n\nexport interface IntegrationTypeForm extends OuiaComponentProps {\n    type: UserIntegrationType;\n}\n\nexport const IntegrationTypeForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n    switch (props.type) {\n        case UserIntegrationType.WEBHOOK:\n            return <IntegrationTypeHttpForm { ...props } />;\n        default:\n            assertNever(props.type);\n    }\n};\n","import { FormSelectOption } from '@patternfly/react-core';\nimport {\n    Form,\n    FormSelect,\n    FormTextInput,\n    OuiaComponentProps,\n    ouiaIdConcat\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { Messages } from '../../properties/Messages';\nimport { maxIntegrationNameLength } from '../../schemas/Integrations/Integration';\nimport { IntegrationType, NewUserIntegration } from '../../types/Integration';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './Form/IntegrationTypeForm';\n\nconst options = [ IntegrationType.WEBHOOK ]\n.map(type => Messages.components.integrations.integrationType[type])\n.map(label => (<FormSelectOption key={ label } label={ label } />));\n\nexport const IntegrationsForm: React.FunctionComponent<OuiaComponentProps> = (props) => {\n\n    const { values } = useFormikContext<NewUserIntegration>();\n\n    return (\n        <Form { ...getOuiaProps('Integrations/Form', props) }>\n            <FormTextInput\n                maxLength={ maxIntegrationNameLength }\n                isRequired={ true }\n                label=\"Integration name\"\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'name') }\n            />\n            <FormSelect\n                isRequired={ true }\n                label=\"Type\"\n                name=\"type\"\n                id=\"integration-type\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'type') }\n            >\n                { options }\n            </FormSelect>\n            <IntegrationTypeForm\n                type={ values.type }\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'type-form') }\n            />\n        </Form>\n    );\n};\n","import { ActionModalError, SaveModal, SaveModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { Messages } from '../../properties/Messages';\nimport { IntegrationSchema } from '../../schemas/Integrations/Integration';\nimport { NewUserIntegration, UserIntegration } from '../../types/Integration';\nimport { IntegrationsForm } from './Form';\n\ntype PartialIntegration = Partial<UserIntegration>;\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onSave';\n\nexport interface IntegrationSaveModalProps extends Omit<SaveModalProps, UsedProps>{\n    initialIntegration?: PartialIntegration;\n    onSave: (integration: UserIntegration | NewUserIntegration) => boolean | Promise<boolean>;\n    isEdit: boolean;\n}\n\ninterface InternalIntegrationSaveModalProps {\n    isEdit: boolean;\n    onClose: (saved: boolean) => void;\n    error?: ActionModalError;\n}\n\nconst InternalIntegrationSaveModal: React.FunctionComponent<InternalIntegrationSaveModalProps> = (props) => {\n\n    const pageMessages = props.isEdit ? Messages.pages.integrations.edit : Messages.pages.integrations.add;\n    const pageTitle =  pageMessages.title;\n    const { handleSubmit, isValid, isSubmitting } = useFormikContext<NewUserIntegration>();\n\n    const onSaveClicked = React.useCallback(() => {\n        handleSubmit();\n        return false;\n    }, [ handleSubmit ]);\n\n    return (\n        <SaveModal\n            isOpen={ true }\n            isSaving={ isSubmitting }\n            onSave={ onSaveClicked }\n            title={ pageTitle }\n            content={ <IntegrationsForm /> }\n            onClose={ props.onClose }\n            error={ props.error }\n            actionButtonDisabled={ !isValid }\n        />\n    );\n};\n\nexport const IntegrationSaveModal: React.FunctionComponent<IntegrationSaveModalProps> = (props) => {\n\n    const [ initialIntegration ] = React.useState<PartialIntegration>(() => {\n        return {\n            // The call is twice, because we use lazy evaluation for the integration base type.\n            // To ensure we get the defaults on the second level (webhook, slack, etc) we need to call it again\n            ...IntegrationSchema.cast(IntegrationSchema.cast()),\n            ...props.initialIntegration\n        };\n    });\n\n    const onSubmit = React.useCallback(async (integration: PartialIntegration) => {\n        const onSave = props.onSave;\n        const onClose = props.onClose;\n        const transformedIntegration = IntegrationSchema.cast(integration) as NewUserIntegration;\n        const saved = await onSave(transformedIntegration);\n        if (saved) {\n            onClose(true);\n        }\n    }, [ props.onSave, props.onClose ]);\n\n    return (\n        <Formik<PartialIntegration>\n            initialValues={ initialIntegration }\n            validationSchema={ IntegrationSchema }\n            onSubmit={ onSubmit }\n            validateOnMount={ true }\n        >\n            <InternalIntegrationSaveModal\n                isEdit={ props.isEdit }\n                onClose={ props.onClose }\n                error={ props.error }\n            />\n        </Formik>\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiIntegrations';\nimport { toIntegration, toServerIntegrationRequest } from '../types/adapters/IntegrationAdapter';\nimport { Integration, NewIntegration, NewUserIntegration, UserIntegration } from '../types/Integration';\n\nexport const createIntegrationActionCreator = (integration: NewIntegration | NewUserIntegration) => {\n    return Operations.EndpointServiceCreateEndpoint.actionCreator({\n        body: toServerIntegrationRequest(integration)\n    });\n};\n\nexport const saveIntegrationActionCreator = (integration: Integration | NewIntegration | UserIntegration | NewUserIntegration) => {\n    if (integration.id) {\n        return Operations.EndpointServiceUpdateEndpoint.actionCreator({\n            body: toServerIntegrationRequest(integration),\n            id: integration.id\n        });\n    }\n\n    return createIntegrationActionCreator(integration);\n};\n\nconst decoder = (response: Operations.EndpointServiceCreateEndpoint.Payload | Operations.EndpointServiceUpdateEndpoint.Payload) => {\n    if (response.type === 'Endpoint') {\n        return {\n            ...response,\n            type: 'Integration',\n            value: toIntegration(response.value)\n        };\n    }\n\n    return response;\n};\n\nexport const useSaveIntegrationMutation = () => useTransformQueryResponse(\n    useMutation(saveIntegrationActionCreator),\n    decoder\n);\n","import { useMutation } from 'react-fetching-library';\n\nimport {\n    Operations\n} from '../generated/OpenapiIntegrations';\nimport { Integration, ServerIntegrationResponse } from '../types/Integration';\n\nexport const switchIntegrationEnabledStatusActionCreator = (integration: Integration) => {\n    if (integration.isEnabled) {\n        return Operations.EndpointServiceDisableEndpoint.actionCreator({\n            id: integration.id\n        });\n    } else {\n        return Operations.EndpointServiceEnableEndpoint.actionCreator({\n            id: integration.id\n        });\n    }\n};\n\nexport const useSwitchIntegrationEnabledStatus =\n    () => useMutation<ServerIntegrationResponse>(switchIntegrationEnabledStatusActionCreator);\n","import { NotificationAppState } from '../types/NotificationAppState';\nimport { SavedNotificationScopeState } from '../types/SavedNotificationScopeTypes';\n\nexport const savedNotificationScopeSelector = (state: NotificationAppState): SavedNotificationScopeState => state.savedNotificationScope;\n\nexport const savedNotificationScopeEqualFn = (left: SavedNotificationScopeState, right: SavedNotificationScopeState): boolean => {\n    return left?.integration === right?.integration && left?.status === right?.status;\n};\n","import { ActionModalError, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { AddNotificationBody } from '../../../components/Integrations/AddNotificationBody';\nimport { IntegrationSaveModal } from '../../../components/Integrations/SaveModal';\nimport { useSaveIntegrationMutation } from '../../../services/useSaveIntegration';\nimport { useSwitchIntegrationEnabledStatus } from '../../../services/useSwitchIntegrationEnabledStatus';\nimport { SavedNotificationScopeActions } from '../../../store/actions/SavedNotificationScopeAction';\nimport {\n    savedNotificationScopeEqualFn,\n    savedNotificationScopeSelector\n} from '../../../store/selectors/SavedNotificationScopeSelector';\nimport { Status } from '../../../store/types/SavedNotificationScopeTypes';\nimport { Integration, NewUserIntegration, UserIntegration, UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationRef } from '../../../types/Notification';\n\ninterface CreatePageProps {\n    isEdit: boolean;\n    initialIntegration: Partial<UserIntegration>;\n    onClose: (saved: boolean) => void;\n}\n\ninterface AddNotificationBodyContainer {\n    integration: IntegrationRef;\n}\n\nconst AddNotificationBodyContainer: React.FunctionComponent<AddNotificationBodyContainer> = (props) => {\n\n    const savedNotificationScope = useSelector(savedNotificationScopeSelector, savedNotificationScopeEqualFn);\n    const dispatch = useDispatch();\n    const switchIntegrationEnabledStatus = useSwitchIntegrationEnabledStatus();\n\n    const onClick = React.useCallback((): void => {\n        const mutate = switchIntegrationEnabledStatus.mutate;\n        if (savedNotificationScope) {\n            dispatch(SavedNotificationScopeActions.start());\n            const integration = savedNotificationScope.integration;\n            mutate(integration).then(response => {\n                if (!response.error) {\n                    dispatch(SavedNotificationScopeActions.finish(!integration.isEnabled));\n                } else {\n                    dispatch(SavedNotificationScopeActions.finish(integration.isEnabled));\n                }\n            });\n        }\n    }, [ switchIntegrationEnabledStatus.mutate, dispatch, savedNotificationScope ]);\n\n    React.useEffect(() => {\n        dispatch(SavedNotificationScopeActions.setIntegration(props.integration));\n        return () => {\n            dispatch(SavedNotificationScopeActions.unset());\n        };\n    }, [ dispatch, props.integration ]);\n\n    if (!savedNotificationScope) {\n        return <React.Fragment />;\n    }\n\n    return <AddNotificationBody\n        integration={ savedNotificationScope.integration }\n        isLoading={ savedNotificationScope.status === Status.LOADING }\n        switchEnabled={ onClick }\n    />;\n};\n\nexport const CreatePage: React.FunctionComponent<CreatePageProps> = props => {\n\n    const saveIntegrationMutation = useSaveIntegrationMutation();\n    const [ hasError, setError ] = React.useState(false);\n\n    const onSaveIntegration = React.useCallback((integration: NewUserIntegration) => {\n        if (!integration.id) {\n            integration.isEnabled = true;\n        }\n\n        setError(false);\n\n        return saveIntegrationMutation.mutate(integration).then(response => {\n            if (response.payload?.status === 200) {\n\n                const savedIntegration: IntegrationRef =  response.payload?.type === 'Integration' ? {\n                    ...response.payload.value as Integration,\n                    type: response.payload.value.type as unknown as UserIntegrationType\n                } : integration as IntegrationRef;\n\n                const title = props.isEdit ? `${savedIntegration.name} saved successfully` : `${savedIntegration.name} added successfully`;\n\n                addSuccessNotification(\n                    title,\n                    <AddNotificationBodyContainer integration={ savedIntegration } />,\n                    true\n                );\n\n                return true;\n            } else {\n                setError(true);\n                return false;\n            }\n        });\n    }, [ saveIntegrationMutation, props.isEdit ]);\n\n    const error = React.useMemo<ActionModalError | undefined>(() => {\n        if (hasError) {\n            if (props.isEdit) {\n                return {\n                    title: 'Integration failed to update',\n                    description: <p>There was an error trying to update the Integration. Please try again.</p>\n                };\n            } else {\n                return {\n                    title: 'Failed to create Integration',\n                    description: <p>There was an error trying to create the Integration. Please try again.</p>\n                };\n            }\n        }\n\n        return undefined;\n    }, [ hasError, props.isEdit ]);\n\n    return (\n        <IntegrationSaveModal\n            initialIntegration={ props.initialIntegration }\n            onSave={ onSaveIntegration }\n            isEdit={ props.isEdit }\n            isSaving={ saveIntegrationMutation.loading }\n            onClose={ props.onClose }\n            error={ error }\n        />\n    );\n};\n","import { ExpandableSection, List, ListItem, Skeleton } from '@patternfly/react-core';\nimport { DeleteModal, DeleteModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { UserIntegration } from '../../types/Integration';\nimport { Notification } from '../../types/Notification';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onDelete';\n\ninterface IntegrationDeleteModalProps extends Omit<DeleteModalProps, UsedProps> {\n    integration?: UserIntegration;\n    onDelete: (integration: UserIntegration) => boolean | Promise<boolean>;\n    notifications?: Array<Notification>;\n}\n\nexport const IntegrationDeleteModal: React.FunctionComponent<IntegrationDeleteModalProps> = (props) => {\n\n    const onDeleteInternal = React.useCallback(() => {\n        const integration = props.integration;\n        const onDelete = props.onDelete;\n        if (integration) {\n            return onDelete(integration);\n        }\n\n        return false;\n    }, [ props.onDelete, props.integration ]);\n\n    const content = React.useMemo(() => {\n        if (props.notifications === undefined) {\n            return (\n                <span data-testid=\"loading\">\n                    <Skeleton />\n                </span>\n            );\n        } else if (props.notifications.length === 0) {\n            return <span\n                data-testid=\"removing-integration-without-notifications\"\n            >\n                Removing integration <strong>{ props.integration?.name }</strong> does not affect any notification events.\n            </span>;\n        } else {\n            const eventText = props.notifications.length !== 1 ? 'events' : 'event';\n            return (\n                <span data-testid={ `removing-integration-with-notifications-${props.notifications.length}` }>\n                    Removing integration <strong>{ props.integration?.name }</strong> affects {props.notifications.length} notification {eventText}.\n                    { props.notifications.length > 0 && <ExpandableSection toggleText={ `View ${props.notifications.length} ${eventText}.` }>\n                        <List>\n                            { props.notifications.map(notification => (\n                                <ListItem\n                                    key={ notification.id }\n                                >\n                                    { notification.applicationDisplayName }: { notification.eventTypeDisplayName }\n                                </ListItem>\n                            )) }\n                        </List>\n                    </ExpandableSection> }\n                </span>\n            );\n        }\n    }, [ props.notifications, props.integration ]);\n\n    if (!props.integration) {\n        return null;\n    }\n\n    return (\n        <DeleteModal\n            isOpen={ true }\n            isDeleting={ props.isDeleting }\n            title={ 'Remove integration' }\n            content={ content }\n            onClose={ props.onClose }\n            onDelete={ onDeleteInternal }\n            error={ props.error }\n            titleIconVariant=\"warning\"\n        />\n    );\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const EmailSubscriptionProperties = zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = unknown;\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties)\n      | undefined\n      | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType = 'webhook' | 'email_subscription' | 'default';\n\n  export const EntityTag = zodSchemaEntityTag();\n  export type EntityTag = {\n    value?: string | undefined | null;\n    weak?: boolean | undefined | null;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const Family = zodSchemaFamily();\n  export type Family =\n    | 'CLIENT_ERROR'\n    | 'INFORMATIONAL'\n    | 'OTHER'\n    | 'REDIRECTION'\n    | 'SERVER_ERROR'\n    | 'SUCCESSFUL';\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Link = zodSchemaLink();\n  export type Link = {\n    params?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    rel?: string | undefined | null;\n    rels?: Array<string> | undefined | null;\n    title?: string | undefined | null;\n    type?: string | undefined | null;\n    uri?: string | undefined | null;\n    uriBuilder?: UriBuilder | undefined | null;\n  };\n\n  export const Locale = zodSchemaLocale();\n  export type Locale = {\n    country?: string | undefined | null;\n    displayCountry?: string | undefined | null;\n    displayLanguage?: string | undefined | null;\n    displayName?: string | undefined | null;\n    displayScript?: string | undefined | null;\n    displayVariant?: string | undefined | null;\n    extensionKeys?: Array<string> | undefined | null;\n    iSO3Country?: string | undefined | null;\n    iSO3Language?: string | undefined | null;\n    language?: string | undefined | null;\n    script?: string | undefined | null;\n    unicodeLocaleAttributes?: Array<string> | undefined | null;\n    unicodeLocaleKeys?: Array<string> | undefined | null;\n    variant?: string | undefined | null;\n  };\n\n  export const MediaType = zodSchemaMediaType();\n  export type MediaType = {\n    parameters?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    subtype?: string | undefined | null;\n    type?: string | undefined | null;\n    wildcardSubtype?: boolean | undefined | null;\n    wildcardType?: boolean | undefined | null;\n  };\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const MultivaluedMapStringObject = zodSchemaMultivaluedMapStringObject();\n  export type MultivaluedMapStringObject = {\n    [x: string]: Array<unknown>;\n  };\n\n  export const MultivaluedMapStringString = zodSchemaMultivaluedMapStringString();\n  export type MultivaluedMapStringString = {\n    [x: string]: Array<string>;\n  };\n\n  export const NewCookie = zodSchemaNewCookie();\n  export type NewCookie = {\n    comment?: string | undefined | null;\n    domain?: string | undefined | null;\n    expiry?: string | undefined | null;\n    httpOnly?: boolean | undefined | null;\n    maxAge?: number | undefined | null;\n    name?: string | undefined | null;\n    path?: string | undefined | null;\n    secure?: boolean | undefined | null;\n    value?: string | undefined | null;\n    version?: number | undefined | null;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    eventId?: string | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const RbacRaw = zodSchemaRbacRaw();\n  export type RbacRaw = {\n    data?:\n      | Array<{\n          [x: string]: unknown;\n        }>\n      | undefined\n      | null;\n    links?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    meta?:\n      | {\n          [x: string]: number;\n        }\n      | undefined\n      | null;\n  };\n\n  export const Response = zodSchemaResponse();\n  export type Response = {\n    allowedMethods?: Array<string> | undefined | null;\n    cookies?:\n      | {\n          [x: string]: NewCookie;\n        }\n      | undefined\n      | null;\n    date?: string | undefined | null;\n    entity?: unknown | undefined | null;\n    entityTag?: EntityTag | undefined | null;\n    headers?: MultivaluedMapStringObject | undefined | null;\n    language?: Locale | undefined | null;\n    lastModified?: string | undefined | null;\n    length?: number | undefined | null;\n    links?: Array<Link> | undefined | null;\n    location?: string | undefined | null;\n    mediaType?: MediaType | undefined | null;\n    metadata?: MultivaluedMapStringObject | undefined | null;\n    status?: number | undefined | null;\n    statusInfo?: StatusType | undefined | null;\n    stringHeaders?: MultivaluedMapStringString | undefined | null;\n  };\n\n  export const StatusType = zodSchemaStatusType();\n  export type StatusType = {\n    family?: Family | undefined | null;\n    reasonPhrase?: string | undefined | null;\n    statusCode?: number | undefined | null;\n  };\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const UriBuilder = zodSchemaUriBuilder();\n  export type UriBuilder = unknown;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  export const __Empty = zodSchema__Empty();\n  export type __Empty = string | undefined;\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties()\n          ])\n          .optional()\n          .nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default' ]);\n  }\n\n  function zodSchemaEntityTag() {\n      return z\n      .object({\n          value: z.string().optional().nullable(),\n          weak: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFamily() {\n      return z.enum([\n          'CLIENT_ERROR',\n          'INFORMATIONAL',\n          'OTHER',\n          'REDIRECTION',\n          'SERVER_ERROR',\n          'SUCCESSFUL'\n      ]);\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaLink() {\n      return z\n      .object({\n          params: z.record(z.string()).optional().nullable(),\n          rel: z.string().optional().nullable(),\n          rels: z.array(z.string()).optional().nullable(),\n          title: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          uri: z.string().optional().nullable(),\n          uriBuilder: zodSchemaUriBuilder().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaLocale() {\n      return z\n      .object({\n          country: z.string().optional().nullable(),\n          displayCountry: z.string().optional().nullable(),\n          displayLanguage: z.string().optional().nullable(),\n          displayName: z.string().optional().nullable(),\n          displayScript: z.string().optional().nullable(),\n          displayVariant: z.string().optional().nullable(),\n          extensionKeys: z.array(z.string()).optional().nullable(),\n          iSO3Country: z.string().optional().nullable(),\n          iSO3Language: z.string().optional().nullable(),\n          language: z.string().optional().nullable(),\n          script: z.string().optional().nullable(),\n          unicodeLocaleAttributes: z.array(z.string()).optional().nullable(),\n          unicodeLocaleKeys: z.array(z.string()).optional().nullable(),\n          variant: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMediaType() {\n      return z\n      .object({\n          parameters: z.record(z.string()).optional().nullable(),\n          subtype: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          wildcardSubtype: z.boolean().optional().nullable(),\n          wildcardType: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMultivaluedMapStringObject() {\n      return z.record(z.array(z.unknown()));\n  }\n\n  function zodSchemaMultivaluedMapStringString() {\n      return z.record(z.array(z.string()));\n  }\n\n  function zodSchemaNewCookie() {\n      return z\n      .object({\n          comment: z.string().optional().nullable(),\n          domain: z.string().optional().nullable(),\n          expiry: z.string().optional().nullable(),\n          httpOnly: z.boolean().optional().nullable(),\n          maxAge: z.number().int().optional().nullable(),\n          name: z.string().optional().nullable(),\n          path: z.string().optional().nullable(),\n          secure: z.boolean().optional().nullable(),\n          value: z.string().optional().nullable(),\n          version: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          eventId: z.string().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacRaw() {\n      return z\n      .object({\n          data: z.array(z.record(z.unknown())).optional().nullable(),\n          links: z.record(z.string()).optional().nullable(),\n          meta: z.record(z.number().int()).optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaResponse() {\n      return z\n      .object({\n          allowedMethods: z.array(z.string()).optional().nullable(),\n          cookies: z.record(zodSchemaNewCookie()).optional().nullable(),\n          date: z.string().optional().nullable(),\n          entity: z.unknown().optional().nullable(),\n          entityTag: zodSchemaEntityTag().optional().nullable(),\n          headers: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          language: zodSchemaLocale().optional().nullable(),\n          lastModified: z.string().optional().nullable(),\n          length: z.number().int().optional().nullable(),\n          links: z.array(zodSchemaLink()).optional().nullable(),\n          location: z.string().optional().nullable(),\n          mediaType: zodSchemaMediaType().optional().nullable(),\n          metadata: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          status: z.number().int().optional().nullable(),\n          statusInfo: zodSchemaStatusType().optional().nullable(),\n          stringHeaders: zodSchemaMultivaluedMapStringString()\n          .optional()\n          .nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatusType() {\n      return z\n      .object({\n          family: zodSchemaFamily().optional().nullable(),\n          reasonPhrase: z.string().optional().nullable(),\n          statusCode: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaUriBuilder() {\n      return z.unknown();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchema__Empty() {\n      return z.string().max(0).optional();\n  }\n}\n\nexport namespace Operations {\n  // GET /notifications/defaults\n  // Retrieve all integrations of the configured default actions.\n  export namespace NotificationServiceGetEndpointsForDefaults {\n    const Response200 = z.array(Schemas.Endpoint);\n    type Response200 = Array<Schemas.Endpoint>;\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/defaults';\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/defaults/{endpointId}\n  // Add an integration to the list of configured default actions.\n  export namespace NotificationServiceAddEndpointToDefaults {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      endpointId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/defaults/{endpointId}'.replace(\n            '{endpointId}',\n            params.endpointId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /notifications/defaults/{endpointId}\n  // Remove an integration from the list of configured default actions.\n  export namespace NotificationServiceDeleteEndpointFromDefaults {\n    export interface Params {\n      endpointId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/defaults/{endpointId}'.replace(\n            '{endpointId}',\n            params.endpointId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.__Empty, '__Empty', 204) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes\n  // Retrieve all event types. The returned list can be filtered by bundle or application.\n  export namespace NotificationServiceGetEventTypes {\n    const ApplicationIds = z.array(z.string());\n    type ApplicationIds = Array<string>;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      applicationIds?: ApplicationIds;\n      bundleId?: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes';\n        const query = {} as Record<string, any>;\n        if (params.applicationIds !== undefined) {\n            query.applicationIds = params.applicationIds;\n        }\n\n        if (params.bundleId !== undefined) {\n            query.bundleId = params.bundleId;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes/affectedByRemovalOfEndpoint/{endpointId}\n  export namespace NotificationServiceGetEventTypesAffectedByEndpointId {\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      endpointId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes/affectedByRemovalOfEndpoint/{endpointId}'.replace(\n            '{endpointId}',\n            params.endpointId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes/{eventTypeId}\n  export namespace NotificationServiceGetLinkedEndpoints {\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.Endpoint);\n    type Response200 = Array<Schemas.Endpoint>;\n    export interface Params {\n      eventTypeId: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}'.replace(\n            '{eventTypeId}',\n            params.eventTypeId.toString()\n        );\n        const query = {} as Record<string, any>;\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/eventTypes/{eventTypeId}/{endpointId}\n  export namespace NotificationServiceLinkEndpointToEventType {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      endpointId: Schemas.UUID;\n      eventTypeId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/{endpointId}'\n        .replace('{endpointId}', params.endpointId.toString())\n        .replace('{eventTypeId}', params.eventTypeId.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /notifications/eventTypes/{eventTypeId}/{endpointId}\n  export namespace NotificationServiceUnlinkEndpointFromEventType {\n    export interface Params {\n      endpointId: Schemas.UUID;\n      eventTypeId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/{endpointId}'\n        .replace('{endpointId}', params.endpointId.toString())\n        .replace('{eventTypeId}', params.eventTypeId.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.__Empty, '__Empty', 204) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/facets/applications\n  // Return a thin list of configured applications. This can be used to configure a filter in the UI\n  export namespace NotificationServiceGetApplicationsFacets {\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.array(Schemas.Facet);\n    type Response200 = Array<Schemas.Facet>;\n    export interface Params {\n      bundleName?: BundleName;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/facets/applications';\n        const query = {} as Record<string, any>;\n        if (params.bundleName !== undefined) {\n            query.bundleName = params.bundleName;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/facets/bundles\n  // Return a thin list of configured bundles. This can be used to configure a filter in the UI\n  export namespace NotificationServiceGetBundleFacets {\n    const Response200 = z.array(Schemas.Facet);\n    type Response200 = Array<Schemas.Facet>;\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/facets/bundles';\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /notifications/{id}\n  export namespace NotificationServiceMarkRead {\n    const Id = z.number().int();\n    type Id = number;\n    const Response204 = z.string();\n    type Response204 = string;\n    export interface Params {\n      id: Id;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 204, Response204>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response204, 'unknown', 204) ]\n        })\n        .build();\n    };\n  }\n}\n","import { Schemas } from '../generated/OpenapiNotifications';\nimport { UserIntegration } from './Integration';\n\nexport type UUID = Schemas.UUID;\n\nexport interface NotificationBase {\n    id: UUID;\n    applicationDisplayName: string;\n    eventTypeDisplayName: string;\n}\n\nexport interface Notification extends NotificationBase {\n    actions?: Array<Action>;\n    useDefault?: boolean;\n}\n\nexport interface NotificationBehaviorGroup extends NotificationBase {\n    readonly behaviors: ReadonlyArray<BehaviorGroup>;\n}\n\nexport type IntegrationRef = Pick<UserIntegration, 'id' | 'name' | 'type' | 'isEnabled'>\n\nexport interface DefaultNotificationBehavior {\n    actions: Array<Action>;\n}\n\nexport interface ActionBase {\n    type: NotificationType;\n    integrationId: UUID;\n}\n\nexport interface ActionIntegration extends ActionBase {\n    type: NotificationType.INTEGRATION;\n    integration: IntegrationRef;\n}\n\nexport interface ActionNotify extends ActionBase {\n    type: NotificationType.EMAIL_SUBSCRIPTION | NotificationType.DRAWER;\n    recipient: Array<string>;\n}\n\nexport type Action = ActionIntegration | ActionNotify;\n\nexport enum NotificationType {\n    EMAIL_SUBSCRIPTION = 'EMAIL_SUBSCRIPTION',\n    DRAWER = 'DRAWER',\n    INTEGRATION = 'INTEGRATION'\n}\n\nexport type Facet = Schemas.Facet;\n\nexport type ServerNotificationRequest = Schemas.EventType;\nexport type ServerNotificationResponse = Schemas.EventType;\n\nexport type BehaviorGroup = {\n    readonly id: UUID;\n    readonly actions: ReadonlyArray<Action>;\n    readonly bundleId: UUID,\n    readonly displayName: string;\n}\n\nexport type NewBehaviorGroup = Partial<Pick<BehaviorGroup, 'id'>> & Omit<BehaviorGroup, 'id'>;\n","import { assertNever } from 'assert-never';\n\nimport { Schemas } from '../../generated/OpenapiNotifications';\nimport { ServerIntegrationResponse } from '../Integration';\nimport { Action, NotificationBase, NotificationType, ServerNotificationResponse } from '../Notification';\nimport { filterOutDefaultAction, toIntegration, toUserIntegration } from './IntegrationAdapter';\n\nconst _toAction = (type: NotificationType, serverAction: ServerIntegrationResponse): Action => {\n    if (type === NotificationType.INTEGRATION) {\n        const userIntegration = toUserIntegration(serverAction);\n        return {\n            type,\n            integrationId: userIntegration.id,\n            integration: userIntegration\n        };\n    }\n\n    const integration = toIntegration(serverAction);\n\n    return {\n        type,\n        integrationId: integration.id,\n        recipient: []\n    };\n};\n\nexport const usesDefault = (endpoints: Array<Schemas.Endpoint>): boolean =>\n    endpoints.findIndex(e => e.type === Schemas.EndpointType.enum.default) !== -1;\n\nexport const toNotification = (serverNotification: ServerNotificationResponse): NotificationBase => {\n    if (!serverNotification.id || !serverNotification.application) {\n        throw new Error(`Unexpected notification from server ${JSON.stringify(serverNotification)}`);\n    }\n\n    return {\n        id: serverNotification.id,\n        applicationDisplayName: serverNotification.application.display_name,\n        eventTypeDisplayName: serverNotification.display_name\n    };\n};\n\nexport const toAction = (serverAction: ServerIntegrationResponse): Action => {\n    switch (serverAction.type) {\n        case Schemas.EndpointType.enum.webhook:\n            return _toAction(NotificationType.INTEGRATION, serverAction);\n        case Schemas.EndpointType.enum.email_subscription:\n            return _toAction(NotificationType.EMAIL_SUBSCRIPTION, serverAction);\n        case Schemas.EndpointType.enum.default:\n            throw new Error('EndpointType.default should not reach this point');\n        default:\n            assertNever(serverAction.type);\n    }\n};\n\nexport const toNotifications = (serverNotifications: Array<ServerNotificationResponse>) => serverNotifications.map(toNotification);\nexport const toActions = (serverActions: Array<ServerIntegrationResponse>): Array<Action> => filterOutDefaultAction(serverActions).map(toAction);\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useParameterizedQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toNotifications } from '../../types/adapters/NotificationAdapter';\n\nconst notificationsForEndpointActionCreator = (integrationId: string) => {\n    return Operations.NotificationServiceGetEventTypesAffectedByEndpointId.actionCreator({\n        endpointId: integrationId\n    });\n};\n\nconst defaultNotificationsDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetEventTypesAffectedByEndpointId.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'Notifications',\n                200,\n                toNotifications(payload.value),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetAffectedNotificationsByEndpoint = () =>\n    useTransformQueryResponse(useParameterizedQuery(notificationsForEndpointActionCreator), defaultNotificationsDecoder);\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiIntegrations';\n\nexport const deleteIntegrationActionCreator = (integrationId: string) => {\n    return Operations.EndpointServiceDeleteEndpoint.actionCreator({\n        id: integrationId\n    });\n};\n\nexport const useDeleteIntegration = () => useMutation<boolean>(deleteIntegrationActionCreator);\n","import {\n    ActionModalError,\n    addSuccessNotification,\n    OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { IntegrationDeleteModal } from '../../../components/Integrations/DeleteModal';\nimport { useGetAffectedNotificationsByEndpoint } from '../../../services/Notifications/GetAffectedNotificationsByEndpoint';\nimport { useDeleteIntegration } from '../../../services/useDeleteIntegration';\nimport { UserIntegration } from '../../../types/Integration';\n\ninterface IntegrationDeleteModalPageProps extends OuiaComponentProps {\n    onClose: (deleted: boolean) => void;\n    integration: UserIntegration;\n}\n\nexport const IntegrationDeleteModalPage: React.FunctionComponent<IntegrationDeleteModalPageProps> = (props) => {\n\n    const deleteIntegrationMutation = useDeleteIntegration();\n    const getNotificationsQuery = useGetAffectedNotificationsByEndpoint();\n    const [ hasError, setError ] = React.useState(false);\n\n    const onDelete = React.useCallback((integration: UserIntegration) => {\n        const deleteIntegration = deleteIntegrationMutation.mutate;\n        setError(false);\n        return deleteIntegration(integration.id).then((response) => {\n            if (!response.error) {\n                addSuccessNotification('Integration removed', 'The integration was removed.');\n                return true;\n            } else {\n                setError(true);\n                return false;\n            }\n        });\n    }, [ deleteIntegrationMutation.mutate, setError ]);\n\n    const error = React.useMemo<ActionModalError | undefined>(() => {\n        if (hasError) {\n            return {\n                title: 'Failed to remove Integration',\n                description: <p>There was an error trying to remove the Integration. Please try again.</p>\n            };\n        }\n\n        return undefined;\n    }, [ hasError ]);\n\n    React.useEffect(() => {\n        const query = getNotificationsQuery.query;\n        query(props.integration.id);\n    }, [ props.integration, getNotificationsQuery.query ]);\n\n    const notifications = React.useMemo(() => {\n        const payload = getNotificationsQuery.payload;\n        if (payload && payload.type === 'Notifications') {\n            return payload.value;\n        }\n\n        return undefined;\n    }, [ getNotificationsQuery.payload ]);\n\n    return (\n        <IntegrationDeleteModal\n            integration={ props.integration }\n            notifications={ notifications }\n            isDeleting={ deleteIntegrationMutation.loading }\n            onClose={ props.onClose }\n            onDelete={ onDelete }\n            error={ error }\n        />\n    );\n};\n","import {\n    useFilters,\n    useUrlStateMultipleOptions,\n    useUrlStateString\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\n\nimport { IntegrationFilterColumn } from '../../../components/Integrations/Filters';\n\nconst DEBOUNCE_MS = 250;\n\nconst useUrlStateName = (defaultValue?: string) => useUrlStateString('name', defaultValue);\nconst useUrlStateEnabled = (_defaultValue?: string) => useUrlStateMultipleOptions('enabled', [ 'Enabled', 'Disabled' ]);\n\nconst useStateFactory = (column: IntegrationFilterColumn) => {\n    switch (column) {\n        case IntegrationFilterColumn.NAME:\n            return useUrlStateName;\n        case IntegrationFilterColumn.ENABLED:\n            return useUrlStateEnabled;\n        default:\n            assertNever(column);\n    }\n};\n\nexport const useIntegrationFilter = (debounce = DEBOUNCE_MS) => {\n    return useFilters(IntegrationFilterColumn, debounce, useStateFactory);\n};\n","import { Operations } from '../generated/OpenapiIntegrations';\n\nexport const listIntegrationHistoryActionCreator = (integrationId: string) => {\n    return Operations.EndpointServiceGetEndpointHistory.actionCreator({\n        id: integrationId\n    });\n};\n","import { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport pLimit from 'p-limit';\nimport { useCallback, useContext, useEffect, useState } from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { format } from 'react-string-format';\nimport { usePrevious } from 'react-use';\n\nimport { IntegrationRow } from '../../../components/Integrations/Table';\nimport { Messages } from '../../../properties/Messages';\nimport { listIntegrationHistoryActionCreator } from '../../../services/useListIntegrationHistory';\nimport { useSwitchIntegrationEnabledStatus } from '../../../services/useSwitchIntegrationEnabledStatus';\nimport { SavedNotificationScopeActions } from '../../../store/actions/SavedNotificationScopeAction';\nimport { NotificationAppState } from '../../../store/types/NotificationAppState';\nimport { SavedNotificationScopeState, Status } from '../../../store/types/SavedNotificationScopeTypes';\nimport { UserIntegration } from '../../../types/Integration';\n\nconst notificationAppStateSelector = (state: NotificationAppState): SavedNotificationScopeState => state.savedNotificationScope;\n\nconst notificationAppStateEqualFn = (left: SavedNotificationScopeState, right: SavedNotificationScopeState): boolean => {\n    return left?.integration === right?.integration && left?.status === right?.status;\n};\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nexport const useIntegrationRows = (integrations: Array<UserIntegration>) => {\n    const [ integrationRows, setIntegrationRows ] = useState<Array<IntegrationRow>>([]);\n    const prevIntegrationsInput = usePrevious(integrations);\n\n    const reduxDispatch = useDispatch();\n    const savedNotificationScope = useSelector<NotificationAppState, SavedNotificationScopeState>(\n        notificationAppStateSelector, notificationAppStateEqualFn\n    );\n\n    const switchStatus = useSwitchIntegrationEnabledStatus();\n    const { query } = useContext(ClientContext);\n    const [ limit ] = useState<pLimit.Limit>(() => pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS));\n\n    const setIntegrationRowByIndex = useCallback((index: number, partialIntegration: Partial<IntegrationRow>) => {\n        setIntegrationRows(prevIntegrations => {\n            const newIntegrations = [ ...prevIntegrations ];\n            newIntegrations[index] = { ...newIntegrations[index], ...partialIntegration };\n            return newIntegrations;\n        });\n    }, [ setIntegrationRows ]);\n\n    const setIntegrationRowById = useCallback((id: string, partialIntegration: Partial<IntegrationRow>) => {\n        setIntegrationRows(prevIntegrations => {\n            const index = prevIntegrations.findIndex(integration => integration.id === id);\n            if (index === -1) {\n                return prevIntegrations;\n            }\n\n            const newIntegrations = [ ...prevIntegrations ];\n            newIntegrations[index] = { ...newIntegrations[index], ...partialIntegration };\n            return newIntegrations;\n        });\n    }, [ setIntegrationRows ]);\n\n    useEffect(() => {\n        if (integrations !== prevIntegrationsInput) {\n            setIntegrationRows(prev => {\n                return integrations.map(integration => ({\n                    isOpen: false,\n                    isSelected: false,\n                    isEnabledLoading: false,\n                    lastConnectionAttempts: [],\n                    isConnectionAttemptLoading: true,\n                    ...prev.find(i => i.id === integration.id),\n                    ...integration\n                }));\n            });\n\n            if (integrations) {\n                limit.clearQueue();\n\n                integrations.map(integration => integration.id).forEach(integrationId => {\n                    limit(() => query(listIntegrationHistoryActionCreator(integrationId))).then(response => {\n\n                        if (response.payload && response.payload.status === 200) {\n                            const last5 = (response.payload.value.reverse().slice(0, 5)).map(p => ({\n                                isSuccess: !!p.invocationResult,\n                                date: new Date(p.created as string)\n                            }));\n                            setIntegrationRowById(integrationId, {\n                                isConnectionAttemptLoading: false,\n                                lastConnectionAttempts: last5\n                            });\n                        } else {\n                            setIntegrationRowById(integrationId, {\n                                isConnectionAttemptLoading: false,\n                                lastConnectionAttempts: undefined\n                            });\n                        }\n                    });\n                });\n            }\n        }\n    }, [ prevIntegrationsInput, integrations, setIntegrationRowById, limit, query ]);\n\n    const onCollapse = useCallback((_integration: IntegrationRow, index: number, isOpen: boolean) => {\n        setIntegrationRowByIndex(index, {\n            isOpen\n        });\n    }, [ setIntegrationRowByIndex ]);\n\n    const onEnable = useCallback((_integration: UserIntegration, index: number, isEnabled: boolean) => {\n        setIntegrationRowByIndex(index, {\n            isEnabledLoading: true\n        });\n\n        if (savedNotificationScope) {\n            if (_integration.id === savedNotificationScope.integration.id) {\n                reduxDispatch(SavedNotificationScopeActions.start());\n            }\n        }\n\n        switchStatus.mutate(_integration).then((response) => {\n            if (!response.error) {\n                setIntegrationRowByIndex(index, {\n                    isEnabled,\n                    isEnabledLoading: false\n                });\n                if (savedNotificationScope) {\n                    if (_integration.id === savedNotificationScope.integration.id) {\n                        reduxDispatch(SavedNotificationScopeActions.finish(isEnabled));\n                    }\n                }\n            } else {\n                const message = isEnabled ? Messages.components.integrations.enableError : Messages.components.integrations.disableError;\n\n                if (savedNotificationScope) {\n                    if (_integration.id === savedNotificationScope.integration.id) {\n                        reduxDispatch(SavedNotificationScopeActions.finish(_integration.isEnabled));\n                    }\n                }\n\n                addDangerNotification(\n                    message.title,\n                    format(message.description, _integration.name),\n                    true);\n                setIntegrationRowByIndex(index, {\n                    isEnabled: _integration.isEnabled,\n                    isEnabledLoading: false\n                });\n            }\n        });\n\n    }, [ setIntegrationRowByIndex, switchStatus, reduxDispatch, savedNotificationScope ]);\n\n    useEffect(() => {\n        if (savedNotificationScope) {\n            if (savedNotificationScope.status === Status.LOADING) {\n                setIntegrationRowById(\n                    savedNotificationScope.integration.id,\n                    { isEnabledLoading: true }\n                );\n            } else {\n                setIntegrationRowById(\n                    savedNotificationScope.integration.id,\n                    { isEnabledLoading: false, isEnabled: savedNotificationScope.integration.isEnabled }\n                );\n            }\n        }\n    }, [ savedNotificationScope, setIntegrationRowById ]);\n\n    return {\n        rows: integrationRows,\n        onCollapse,\n        onEnable\n    };\n};\n","import { Main, PageHeader, PageHeaderTitle, Section } from '@redhat-cloud-services/frontend-components';\nimport {\n    addDangerNotification,\n    ExporterType,\n    Filter,\n    Operator,\n    Page\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { format } from 'date-fns';\nimport inBrowserDownload from 'in-browser-download';\nimport * as React from 'react';\nimport { useContext } from 'react';\n\nimport { AppContext } from '../../../app/AppContext';\nimport { IntegrationFilters } from '../../../components/Integrations/Filters';\nimport { IntegrationsTable } from '../../../components/Integrations/Table';\nimport { IntegrationsToolbar } from '../../../components/Integrations/Toolbar';\nimport { useDeleteModalReducer } from '../../../hooks/useDeleteModalReducer';\nimport { useFormModalReducer } from '../../../hooks/useFormModalReducer';\nimport { usePage } from '../../../hooks/usePage';\nimport { Messages } from '../../../properties/Messages';\nimport { useListIntegrationPQuery, useListIntegrationsQuery } from '../../../services/useListIntegrations';\nimport { IntegrationType, UserIntegration } from '../../../types/Integration';\nimport { integrationExporterFactory } from '../../../utils/exporters/Integration/Factory';\nimport { CreatePage } from '../Create/CreatePage';\nimport { IntegrationDeleteModalPage } from '../Delete/DeleteModal';\nimport { useActionResolver } from './useActionResolver';\nimport { useIntegrationFilter } from './useIntegrationFilter';\nimport { useIntegrationRows } from './useIntegrationRows';\n\nconst integrationFilterBuilder = (filters?: IntegrationFilters) => {\n    const filter = new Filter();\n    if (filters?.enabled?.length === 1) {\n        const isEnabled = filters.enabled[0].toLocaleLowerCase() === 'enabled';\n        filter.and('active', Operator.EQUAL, isEnabled.toString());\n    }\n\n    return filter.and('type', Operator.EQUAL, IntegrationType.WEBHOOK);\n};\n\nconst userIntegrationCopier = (userIntegration: Partial<UserIntegration>) => ({\n    ...userIntegration,\n    name: `Copy of ${userIntegration.name}`\n});\n\nexport const IntegrationsListPage: React.FunctionComponent = () => {\n\n    const { rbac: { canWriteIntegrationsEndpoints }} = useContext(AppContext);\n    const integrationFilter = useIntegrationFilter();\n    const pageData = usePage<IntegrationFilters>(10, integrationFilterBuilder, integrationFilter.filters);\n    const integrationsQuery = useListIntegrationsQuery(pageData.page);\n    const exportIntegrationsQuery = useListIntegrationPQuery();\n\n    const integrations = React.useMemo(() => {\n        const payload = integrationsQuery.payload;\n        if (payload?.type === 'IntegrationPage') {\n            return payload.value;\n        }\n\n        return {\n            data: [],\n            count: 0\n        };\n    }, [ integrationsQuery.payload ]);\n\n    const integrationRows = useIntegrationRows(integrations.data);\n    const [ modalIsOpenState, modalIsOpenActions ] = useFormModalReducer<UserIntegration>(userIntegrationCopier);\n    const [ deleteModalState, deleteModalActions ] = useDeleteModalReducer<UserIntegration>();\n\n    const onAddIntegrationClicked = React.useCallback(() => {\n        modalIsOpenActions.create();\n    }, [ modalIsOpenActions ]);\n\n    const onEdit = React.useCallback((integration: UserIntegration) => {\n        modalIsOpenActions.edit(integration);\n    }, [ modalIsOpenActions ]);\n\n    const onDelete = React.useCallback((integration: UserIntegration) => {\n        deleteModalActions.delete(integration);\n    }, [ deleteModalActions ]);\n\n    const onExport = React.useCallback(async (type: ExporterType) => {\n        const query = exportIntegrationsQuery.query;\n        const exporter = integrationExporterFactory(type);\n        const exportedIntegrations: Array<UserIntegration> = [];\n        let page = Page.of(1, 100, new Filter().and('type', Operator.EQUAL, 'webhook'));\n        while (true) {\n            const data = await query(page);\n            if (data?.payload?.status !== 200) {\n                if (exportedIntegrations.length === 0) {\n                    addDangerNotification(\n                        'Unable to download integrations',\n                        'We were unable to download the integrations for exporting. Please try again.'\n                    );\n                    return;\n                } else {\n                    addDangerNotification(\n                        'Unable to download all integrations',\n                        `We were unable to download all the integrations for exporting. Downloading: ${exportedIntegrations.length}.`\n                    );\n                    break;\n                }\n            }\n\n            if (data.payload.value.data.length === 0) {\n                break;\n            }\n\n            page = page.nextPage();\n            exportedIntegrations.push(...data.payload.value.data);\n        }\n\n        if (exportedIntegrations) {\n            inBrowserDownload(\n                exporter.export(exportedIntegrations),\n                `integrations-${format(new Date(Date.now()), 'y-dd-MM')}.${exporter.type}`\n            );\n        }\n    }, [ exportIntegrationsQuery ]);\n\n    const actionResolver = useActionResolver({\n        canWrite: canWriteIntegrationsEndpoints,\n        onEdit,\n        onDelete,\n        onEnable: integrationRows.onEnable\n    });\n\n    const closeFormModal = React.useCallback((saved: boolean) => {\n        const query = integrationsQuery.query;\n        modalIsOpenActions.reset();\n        if (saved) {\n            query();\n        }\n    }, [ modalIsOpenActions, integrationsQuery.query ]);\n\n    const closeDeleteModal = React.useCallback((deleted: boolean) => {\n        const query = integrationsQuery.query;\n        if (deleted) {\n            query();\n        }\n\n        deleteModalActions.reset();\n    }, [ deleteModalActions, integrationsQuery.query ]);\n\n    // This is an estimate of how many rows are in the next page (Won't be always correct because a new row could be added while we are browsing)\n    // Is used for the skeleton loading\n    const loadingCount = Math.min(pageData.page.size, integrations.count - (pageData.page.index - 1) * pageData.page.size)  || 10;\n\n    return (\n        <>\n            <PageHeader>\n                <PageHeaderTitle title={ Messages.pages.integrations.list.title } />\n            </PageHeader>\n            <Main>\n                <Section className='pf-c-page__main-section pf-m-light'>\n                    <IntegrationsToolbar\n                        onAddIntegration={ canWriteIntegrationsEndpoints ? onAddIntegrationClicked : undefined }\n                        onExport={ onExport }\n                        filters={ integrationFilter.filters }\n                        setFilters={ integrationFilter.setFilters }\n                        clearFilters={ integrationFilter.clearFilter }\n                        count={ integrations.count || 0 }\n                        pageCount={ integrations.data.length }\n                        page={ pageData.page.index }\n                        perPage={ pageData.page.size }\n                        pageChanged={ pageData.changePage }\n                        perPageChanged={ pageData.changeItemsPerPage }\n                    >\n                        <IntegrationsTable\n                            isLoading={ integrationsQuery.loading }\n                            loadingCount={ loadingCount }\n                            integrations={ integrationRows.rows }\n                            onCollapse={ integrationRows.onCollapse }\n                            onEnable={ canWriteIntegrationsEndpoints ? integrationRows.onEnable : undefined }\n                            actionResolver={ actionResolver }\n                        />\n                    </IntegrationsToolbar>\n                    { modalIsOpenState.isOpen && (\n                        <CreatePage\n                            isEdit={ modalIsOpenState.isEdit }\n                            initialIntegration={ modalIsOpenState.template || {} }\n                            onClose={ closeFormModal }\n                        />\n                    ) }\n                    { deleteModalState.data && (\n                        <IntegrationDeleteModalPage\n                            onClose={ closeDeleteModal }\n                            integration={ deleteModalState.data }\n                        />\n                    )}\n                </Section>\n            </Main>\n        </>\n    );\n};\n","import { useParameterizedQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const getApplicationsAction = (bundleName: string) => Operations.NotificationServiceGetApplicationsFacets.actionCreator({\n    bundleName\n});\n\nexport const useGetApplications = () => useParameterizedQuery(getApplicationsAction);\n","export const emptyImmutableArray = Object.freeze([]);\nexport const emptyImmutableObject = Object.freeze({});\n","interface HasId<ID> {\n    id: ID\n}\n\nexport const findByKey = <T, KEY extends keyof T>(val: T[KEY], key: KEY) => (value: T) => value[key] === val;\nexport const findById = <T extends HasId<T['id']>>(id: T['id']) => findByKey<T, 'id'>(id, 'id');\n","import {\n    Chip, ChipGroup,\n    OptionsMenu,\n    OptionsMenuItem,\n    OptionsMenuToggle,\n    Split,\n    SplitItem\n} from '@patternfly/react-core';\nimport { BellSlashIcon } from '@patternfly/react-icons';\nimport { TableText } from '@patternfly/react-table';\nimport { global_palette_black_400 } from '@patternfly/react-tokens';\nimport * as React from 'react';\n\nimport { BehaviorGroupContent } from '../../../pages/Notifications/List/useBehaviorGroupContent';\nimport { BehaviorGroup, NotificationBehaviorGroup } from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\nimport { emptyImmutableObject } from '../../../utils/Immutable';\n\ninterface BehaviorGroupCellProps {\n    id: string;\n    notification: NotificationBehaviorGroup;\n    behaviorGroupContent: BehaviorGroupContent;\n    selected: ReadonlyArray<BehaviorGroup>;\n    onSelect?: (notification: NotificationBehaviorGroup, behaviorGroup: BehaviorGroup, linkBehavior: boolean) => void;\n    isEditMode: boolean;\n}\n\ninterface BehaviorGroupChip {\n    behaviorGroup: BehaviorGroup;\n    notification: BehaviorGroupCellProps['notification'];\n    onSelect?: BehaviorGroupCellProps['onSelect'];\n}\n\nconst BehaviorGroupChip: React.FunctionComponent<BehaviorGroupChip> = props => {\n    const unlink = React.useCallback(() => {\n        const onSelect = props.onSelect;\n        if (onSelect) {\n            onSelect(props.notification, props.behaviorGroup, false);\n        }\n    }, [ props.onSelect, props.behaviorGroup, props.notification ]);\n\n    return <Chip onClick={ unlink }>\n        { props.behaviorGroup.displayName }\n    </Chip>;\n};\n\nexport const BehaviorGroupCell: React.FunctionComponent<BehaviorGroupCellProps> = props => {\n\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const onSelected = React.useCallback((event?: React.MouseEvent<HTMLAnchorElement> | React.KeyboardEvent) => {\n        const dataset = (event?.currentTarget?.firstChild as HTMLElement)?.dataset ?? emptyImmutableObject;\n        const onSelect = props.onSelect;\n        if (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError && onSelect) {\n            if (dataset.behaviorGroupId) {\n                const found = props.behaviorGroupContent.content.find(findById(dataset.behaviorGroupId));\n                if (found) {\n                    const isSelected = !!props.selected.find(findById(found.id));\n                    onSelect(props.notification, found, !isSelected);\n                }\n            }\n        }\n    }, [ props.onSelect, props.behaviorGroupContent, props.notification, props.selected ]);\n\n    const items = React.useMemo(() => {\n        if (props.behaviorGroupContent.isLoading || props.behaviorGroupContent.hasError) {\n            return [\n                <OptionsMenuItem key=\"is-loading\" isDisabled>Loading</OptionsMenuItem>\n            ];\n        }\n\n        return props.behaviorGroupContent.content.map(bg => {\n            const selected = !!props.selected.find(findById(bg.id));\n\n            return (\n                <OptionsMenuItem\n                    key={ bg.id }\n                    onSelect={ onSelected }\n                    data-behavior-group-id={ bg.id }\n                    isSelected={ selected }\n                >\n                    { bg.displayName }\n                </OptionsMenuItem>\n            );\n        });\n    }, [ props.behaviorGroupContent, props.selected, onSelected ]);\n\n    const toggle = React.useMemo(() => {\n        return (\n            <OptionsMenuToggle onToggle={ setOpen } toggleTemplate={ (\n                <ChipGroup>\n                    { props.selected.map(value => (\n                        <BehaviorGroupChip key={ value.id } behaviorGroup={ value } notification={ props.notification } onSelect={ props.onSelect } />\n                    )) }\n                </ChipGroup>\n            ) } />\n        );\n    }, [ props.selected, props.notification, props.onSelect ]);\n\n    const readonlyText = React.useMemo(() => {\n        if (props.selected.length === 0) {\n            return <Split hasGutter>\n                <SplitItem><BellSlashIcon color={ global_palette_black_400.value } /></SplitItem>\n                <SplitItem>Mute</SplitItem>\n            </Split>;\n        }\n\n        return props.selected.map(v => v.displayName).join(', ');\n    }, [ props.selected ]);\n\n    if (!props.isEditMode) {\n        return <TableText wrapModifier=\"truncate\"> { readonlyText } </TableText>;\n    }\n\n    return <OptionsMenu id={ props.id } direction=\"up\" menuItems={ items } toggle={ toggle } isOpen={ isOpen } menuAppendTo={ document.body } />;\n};\n","import { Button, ButtonProps, ButtonVariant, Split, SplitItem } from '@patternfly/react-core';\nimport { CheckIcon, CloseIcon, PencilAltIcon } from '@patternfly/react-icons';\nimport { global_active_color_100, global_disabled_color_100, global_palette_black_600 } from '@patternfly/react-tokens';\nimport * as React from 'react';\n\nimport { UUID } from '../../../types/Notification';\nimport { emptyImmutableObject } from '../../../utils/Immutable';\n\nexport type OnNotificationIdHandler = (notificationId: UUID) => void;\n\nexport interface BehaviorGroupCellControlProps {\n    notificationId: UUID;\n    isEditMode: boolean;\n    onStartEditing: OnNotificationIdHandler;\n    onFinishEditing: OnNotificationIdHandler;\n    onCancelEditMode: OnNotificationIdHandler;\n    isDisabled: boolean;\n}\n\ninterface ButtonWithNotificationIdProps extends Omit<ButtonProps, 'onClick'> {\n    onClick: OnNotificationIdHandler;\n    notificationId: UUID;\n}\n\nconst toOnNotificationSetAdapter = (event: any, onClick: OnNotificationIdHandler) => {\n    const dataset = (event.currentTarget as HTMLElement)?.dataset ?? emptyImmutableObject;\n    if (dataset.notificationId) {\n        onClick(dataset.notificationId);\n    }\n};\n\nconst ButtonWithNotificationId: React.FunctionComponent<ButtonWithNotificationIdProps> = props => {\n    const { notificationId, ...restProps } = props;\n\n    const onClick = React.useCallback((event: any) => {\n        toOnNotificationSetAdapter(event, props.onClick);\n    }, [ props.onClick ]);\n\n    return <Button { ...restProps } onClick={ onClick } data-notification-id={ notificationId }>\n        { props.children }\n    </Button>;\n};\n\nexport const BehaviorGroupCellControl: React.FunctionComponent<BehaviorGroupCellControlProps> = props => {\n\n    const commonButtonProps = {\n        variant: ButtonVariant.plain,\n        notificationId: props.notificationId,\n        isDisabled: props.isDisabled\n    };\n\n    if (!props.isEditMode) {\n        return <ButtonWithNotificationId { ...commonButtonProps } onClick={ props.onStartEditing }>\n            <PencilAltIcon />\n        </ButtonWithNotificationId>;\n    } else {\n        return (\n            <Split>\n                <SplitItem>\n                    <ButtonWithNotificationId { ...commonButtonProps } onClick={ props.onFinishEditing }>\n                        <CheckIcon color={ props.isDisabled ? global_disabled_color_100.value : global_active_color_100.value } />\n                    </ButtonWithNotificationId>\n                </SplitItem>\n                <SplitItem>\n                    <ButtonWithNotificationId { ...commonButtonProps } onClick={ props.onCancelEditMode }>\n                        <CloseIcon color={ props.isDisabled ? global_disabled_color_100.value : global_palette_black_600.value } />\n                    </ButtonWithNotificationId>\n                </SplitItem>\n            </Split>\n        );\n    }\n};\n","import { Skeleton } from '@patternfly/react-core';\nimport { cellWidth, ICell, Table, TableBody, TableHeader, TableVariant } from '@patternfly/react-table';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroupContent } from '../../pages/Notifications/List/useBehaviorGroupContent';\nimport { BehaviorGroupNotificationRow } from '../../pages/Notifications/List/useBehaviorGroupNotificationRows';\nimport { BehaviorGroup, NotificationBehaviorGroup } from '../../types/Notification';\nimport { emptyImmutableArray } from '../../utils/Immutable';\nimport { ouia } from '../Ouia';\nimport { BehaviorGroupCell } from './Table/BehaviorGroupCell';\nimport { BehaviorGroupCellControl, OnNotificationIdHandler } from './Table/BehaviorGroupCellControl';\n\nexport type OnBehaviorGroupLinkUpdated = (notification: NotificationBehaviorGroup, behaviorGroup: BehaviorGroup, isLinked: boolean) => void;\n\nexport interface NotificationsBehaviorGroupTableProps {\n    behaviorGroupContent: BehaviorGroupContent;\n    notifications: Array<BehaviorGroupNotificationRow>;\n    onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n    onStartEditing: OnNotificationIdHandler;\n    onFinishEditing: OnNotificationIdHandler;\n    onCancelEditing: OnNotificationIdHandler;\n}\n\nconst buttonCellClassName = style({\n    width: '10px !important'\n});\n\ntype Callbacks = {\n    onStartEditing: OnNotificationIdHandler;\n    onFinishEditing:  OnNotificationIdHandler;\n    onCancelEditing: OnNotificationIdHandler;\n    onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n};\n\nconst toTableRows = (\n    notifications: Array<BehaviorGroupNotificationRow>,\n    behaviorGroupContent: BehaviorGroupContent,\n    callback: Callbacks) => {\n    return notifications.map((notification => ({\n        id: notification.id,\n        key: notification.id,\n        cells: [\n            {\n                title: <span>{ notification.eventTypeDisplayName }</span>\n            },\n            {\n                title: <span>{ notification.applicationDisplayName }</span>\n            },\n            {\n                title: notification.loadingActionStatus === 'loading' ?\n                    <Skeleton width=\"90%\" /> :\n                    <span>\n                        <BehaviorGroupCell\n                            id={ `behavior-group-cell-${notification.id}` }\n                            notification={ notification }\n                            behaviorGroupContent={ behaviorGroupContent }\n                            selected={ notification.behaviors ?? emptyImmutableArray }\n                            onSelect={ callback.onBehaviorGroupLinkUpdated }\n                            isEditMode={ notification.isEditMode }\n                        />\n                    </span>\n            },\n            {\n                title: <BehaviorGroupCellControl\n                    notificationId={ notification.id }\n                    isEditMode={ notification.isEditMode }\n                    onStartEditing={ callback.onStartEditing }\n                    onCancelEditMode={ callback.onCancelEditing }\n                    onFinishEditing={ callback.onFinishEditing }\n                    isDisabled={ notification.loadingActionStatus !== 'done' }\n                />,\n                props: {\n                    className: buttonCellClassName\n                }\n            }\n        ]\n    })));\n};\n\nconst cells: Array<ICell> = [\n    {\n        title: 'Event',\n        transforms: [],\n        cellFormatters: []\n    },\n    {\n        title: 'Application',\n        transforms: []\n    },\n    {\n        title: 'Behavior',\n        transforms: [ cellWidth(35) ]\n    },\n    {\n        title: ''\n    }\n];\n\nexport const NotificationsBehaviorGroupTable = ouia<NotificationsBehaviorGroupTableProps>(props => {\n\n    const callbacks: Callbacks = React.useMemo(() => ({\n        onStartEditing: props.onStartEditing,\n        onFinishEditing: props.onFinishEditing,\n        onCancelEditing: props.onCancelEditing,\n        onBehaviorGroupLinkUpdated: props.onBehaviorGroupLinkUpdated\n    }), [ props.onStartEditing, props.onFinishEditing, props.onCancelEditing, props.onBehaviorGroupLinkUpdated ]);\n\n    const rows = React.useMemo(() => {\n        return toTableRows(props.notifications, props.behaviorGroupContent, callbacks);\n    }, [ props.notifications, props.behaviorGroupContent, callbacks ]);\n\n    return (\n        <Table\n            aria-label=\"Notifications\"\n            rows={ rows }\n            cells={ cells }\n            variant={ TableVariant.compact }\n        >\n            <TableHeader />\n            <TableBody />\n        </Table>\n    );\n}, 'Notifications/BehaviorGroupTable');\n","import { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../utils/getOuiaProps';\n\nexport const ouia = <P extends any>(Component: React.FunctionComponent<P>, type: string): React.FunctionComponent<OuiaComponentProps & P> => {\n\n    const Wrapped: React.FunctionComponent<OuiaComponentProps & P> = props => {\n        return (\n            <div { ...getOuiaProps(type, props) }>\n                <Component { ...props } />\n            </div>\n        );\n    };\n\n    Wrapped.displayName = `Ouia(${Component.displayName ?? Component.name})`;\n\n    return Wrapped;\n};\n","import { ClearFilters, Filters, SetFilters } from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum NotificationFilterColumn {\n    NAME = 'name',\n    APPLICATION = 'application',\n    ACTION = 'action'\n}\n\nexport type NotificationFilters = Filters<typeof NotificationFilterColumn>;\nexport type SetNotificationFilters = SetFilters<typeof NotificationFilterColumn>;\nexport type ClearNotificationFilters = ClearFilters<typeof NotificationFilterColumn>;\n","export enum GroupByEnum {\n    Application = 'application',\n    None = 'none'\n}\n","import { Dropdown, DropdownItem, DropdownToggle } from '@patternfly/react-core';\nimport { CaretDownIcon } from '@patternfly/react-icons';\nimport camelcase from 'camelcase';\nimport * as React from 'react';\n\nimport { GroupByEnum } from '../Types';\n\nexport interface GroupByProps {\n    groupBy: (selected: GroupByEnum) => void;\n    selected: GroupByEnum;\n}\n\nexport const GroupBy: React.FunctionComponent<GroupByProps> = (props) => {\n    const items = [\n        <DropdownItem data-group-by={ GroupByEnum.Application } key=\"application\">Application</DropdownItem>,\n        <DropdownItem data-group-by={ GroupByEnum.None } key=\"none\">None</DropdownItem>\n    ];\n\n    const [ isOpen, setOpen ] = React.useState<boolean>(false);\n\n    const onSelect = React.useCallback((event) => {\n        const groupBy = props.groupBy;\n        const selected = props.selected;\n\n        if (event.target.dataset.groupBy !== selected) {\n            switch (event.target.dataset.groupBy) {\n                case GroupByEnum.Application:\n                    groupBy(GroupByEnum.Application);\n                    break;\n                case GroupByEnum.None:\n                    groupBy(GroupByEnum.None);\n                    break;\n            }\n        }\n\n        setOpen(false);\n    }, [ props.groupBy, props.selected ]);\n\n    const onToggle = React.useCallback((shouldBeOpen) => {\n        setOpen(shouldBeOpen);\n    }, [ setOpen ]);\n\n    const content = React.useMemo(() => {\n        return `Group by: ${camelcase(props.selected, {\n            pascalCase: true\n        })}`;\n    }, [ props.selected ]);\n\n    return (\n        <Dropdown\n            onSelect={ onSelect }\n            isOpen={ isOpen }\n            toggle={ <DropdownToggle\n                id=\"group-by-dropdown-toggle\"\n                toggleIndicator={ CaretDownIcon }\n                onToggle={ onToggle }\n            >\n                { content }\n            </DropdownToggle> }\n            dropdownItems={ items }\n        />\n    );\n};\n","import { PrimaryToolbar } from '@redhat-cloud-services/frontend-components';\nimport {\n    ColumnsMetada,\n    ExporterType,\n    getInsights,\n    OuiaComponentProps,\n    useInsightsEnvironmentFlag,\n    usePrimaryToolbarFilterConfig\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useCallback, useMemo } from 'react';\n\nimport { useTableExportConfig } from '../../hooks/useTableExportConfig';\nimport { stagingAndProd } from '../../types/Environments';\nimport { Facet } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport {\n    ClearNotificationFilters,\n    NotificationFilterColumn,\n    NotificationFilters,\n    SetNotificationFilters\n} from './Filter';\nimport { GroupBy } from './Table/GroupBy';\nimport { GroupByEnum } from './Types';\n\ninterface NotificationsToolbarProps extends OuiaComponentProps {\n    filters: NotificationFilters;\n    setFilters: SetNotificationFilters;\n    clearFilter: ClearNotificationFilters;\n\n    appFilterOptions: Array<Facet>;\n\n    groupBy?: GroupByEnum;\n    onGroupBySelected?: (selected: GroupByEnum) => void;\n\n    onExport: (type: ExporterType) => void;\n}\n\nexport const NotificationsToolbar: React.FunctionComponent<NotificationsToolbarProps> = (props) => {\n\n    const filterMetadata = useMemo<ColumnsMetada<typeof NotificationFilterColumn>>(() => {\n\n        const appFilterItems = props.appFilterOptions.map(a => ({\n            value: a.displayName,\n            label: <> {a.displayName}</>\n        }));\n\n        return {\n            [NotificationFilterColumn.NAME]: {\n                label: 'Event type',\n                placeholder: 'Filter by event type'\n            },\n            [NotificationFilterColumn.APPLICATION]: {\n                label: 'Application',\n                placeholder: 'Filter by application',\n                options: {\n                    exclusive: false,\n                    default: [] as any,\n                    items: appFilterItems\n                }\n            },\n            [NotificationFilterColumn.ACTION]: {\n                label: 'Action',\n                placeholder: 'Filter by action'\n            }\n        };\n    }, [ props.appFilterOptions ]);\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n        NotificationFilterColumn,\n        props.filters,\n        props.setFilters,\n        props.clearFilter,\n        filterMetadata\n    );\n\n    const exportConfigInternal = useTableExportConfig(props.onExport);\n\n    const filterConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.filterConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const activeFiltersConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.activeFiltersConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const exportConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => exportConfigInternal, [ exportConfigInternal ])\n    );\n\n    return (\n        <div { ...getOuiaProps('Notifications/DualToolbar', props) }>\n            <PrimaryToolbar\n                filterConfig={ filterConfig }\n                activeFiltersConfig={ activeFiltersConfig }\n                dedicatedAction={ (props.groupBy && props.onGroupBySelected) ?\n                    <GroupBy selected={ props.groupBy } groupBy={ props.onGroupBySelected } /> :\n                    undefined }\n                exportConfig={ exportConfig }\n            />\n            { props.children }\n            <PrimaryToolbar />\n        </div>\n    );\n};\n","import { Page, useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Schemas } from '../generated/OpenapiIntegrations';\nimport { Operations } from '../generated/OpenapiNotifications';\nimport { toNotifications } from '../types/adapters/NotificationAdapter';\n\nexport const listNotificationsActionCreator = (pager?: Page) => {\n    const query = (pager ?? Page.defaultPage()).toQuery();\n    return Operations.NotificationServiceGetEventTypes.actionCreator({\n        limit: +query.limit,\n        offset: +query.offset,\n        applicationIds: query.filterApplicationId as unknown as Array<Schemas.UUID>,\n        bundleId: query.filterBundleId as unknown as string\n    });\n};\n\nconst decoder = validationResponseTransformer((payload: Operations.NotificationServiceGetEventTypes.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'eventTypesArray',\n            200,\n            toNotifications(payload.value),\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useListNotifications = (pager?: Page) => useTransformQueryResponse(\n    useQuery(listNotificationsActionCreator(pager)),\n    decoder\n);\n","export default __webpack_public_path__ + \"fonts/WebhookIcon.svg\";","import { SVGIconProps } from '@patternfly/react-icons/dist/js/createIcon';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport icon from './WebhookIcon.svg';\nconst className = style({\n    verticalAlign: '-0.125em',\n    width: '1em',\n    height: '1em'\n});\n\nexport const WebhookIcon: React.FunctionComponent<SVGIconProps> = () => {\n    return (\n        <img alt=\"Webhook\" className={ className } src={ icon } />\n    );\n};\n","import { Spinner } from '@patternfly/react-core';\nimport { EnvelopeIcon } from '@patternfly/react-icons';\nimport BellIcon from '@patternfly/react-icons/dist/js/icons/bell-icon';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { Messages } from '../../properties/Messages';\nimport { Action, NotificationType } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { WebhookIcon } from '../Icons/WebhookIcon';\n\nexport interface ActionComponentText extends OuiaComponentProps{\n    isDefault: boolean;\n    action: Action | undefined;\n    loading?: boolean;\n    hasError?: boolean;\n}\n\ninterface ActionTypeToIconProps {\n    actionType: NotificationType;\n}\n\nconst marginLeftClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst grayFontClassName = style({\n    color: '#888'\n});\n\nconst ActionTypeToIcon: React.FunctionComponent<ActionTypeToIconProps> = (props) => {\n    switch (props.actionType) {\n        case NotificationType.DRAWER:\n            return <BellIcon />;\n        case NotificationType.EMAIL_SUBSCRIPTION:\n            return <EnvelopeIcon />;\n        case NotificationType.INTEGRATION:\n            return <WebhookIcon />;\n        default:\n            assertNever(props.actionType);\n    }\n};\n\nconst ActionComponentWrapper: React.FunctionComponent<ActionComponentText> = (props) => (\n    <div { ...getOuiaProps('Notifications/ActionComponent', props) }>\n        { props.children }\n    </div>\n);\n\nexport const ActionComponent: React.FunctionComponent<ActionComponentText> = (props) => {\n\n    if (props.loading) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <Spinner size=\"md\" />\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (props.hasError) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span>Error loading actions</span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (props.isDefault) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span>Default behavior</span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (!props.action) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span className={ grayFontClassName }>\n                    <div>No actions.</div>\n                    <div>Users will not be notified.</div>\n                </span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    return (\n        <ActionComponentWrapper { ...props }>\n            <ActionTypeToIcon actionType={ props.action.type } />\n            <span className={ marginLeftClassName }>{ Messages.components.notifications.types[props.action.type] }</span>\n            { props.action.type === NotificationType.INTEGRATION && (\n                <span>: { Messages.components.integrations.integrationType[props.action.integration.type] }</span>\n            ) }\n        </ActionComponentWrapper>\n    );\n};\n","import { Label, Tooltip } from '@patternfly/react-core';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { Action, NotificationType } from '../../types/Notification';\n\ninterface RecipientProps {\n    action: Action;\n    hasOutline?: boolean;\n}\n\nconst disabledLabelClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nexport const Recipient: React.FunctionComponent<RecipientProps> = (props) => {\n    if (props.action.type === NotificationType.INTEGRATION) {\n        return (\n            <>\n                <span>{ props.action.integration.name }</span>\n                { !props.action.integration.isEnabled && (\n                    <>\n                        <Tooltip content=\"This integration has been disabled. This action wil not fire until it is enabled.\" position=\"bottom\">\n                            <Label variant={ props.hasOutline ? 'outline' : 'filled' } className={ disabledLabelClassName }>Disabled</Label>\n                        </Tooltip>\n                    </>\n                )}\n            </>\n        );\n    }\n\n    return <span>All registered users</span>;\n};\n","import {\n    Card,\n    CardActions,\n    CardBody,\n    CardHeader,\n    CardHeaderMain,\n    Dropdown,\n    DropdownItem,\n    DropdownPosition,\n    Grid,\n    GridItem,\n    KebabToggle,\n    Skeleton,\n    Text,\n    TextContent,\n    TextVariants\n} from '@patternfly/react-core';\nimport { c_form__label_FontSize } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { ActionComponent } from '../ActionComponent';\nimport { Recipient } from '../Recipient';\n\nconst cardClassName = style({\n    width: 450,\n    height: '100%'\n});\n\nconst contentTitleStyle = {\n    fontSize: c_form__label_FontSize.value\n};\n\nexport interface BehaviorGroupProps extends OuiaComponentProps {\n    behaviorGroup: BehaviorGroup;\n    onEdit: (behaviorGroup: BehaviorGroup) => void;\n    onDelete: (behaviorGroup: BehaviorGroup) => void;\n}\n\nexport interface BehaviorGroupCardLayout {\n    title: React.ReactNode;\n    dropdownItems?: Array<React.ReactNode>;\n    contents: Array<{\n        key: string;\n        action: React.ReactNode;\n        recipient: React.ReactNode;\n    }>;\n}\n\nconst BehaviorGroupCardLayout: React.FunctionComponent<BehaviorGroupCardLayout> = props => {\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const switchOpen = React.useCallback(() => setOpen(prev => !prev), [ setOpen ]);\n\n    return (\n        <Card isFlat className={ cardClassName }>\n            <CardHeader>\n                <CardHeaderMain><TextContent><Text component={ TextVariants.h4 }> { props.title } </Text></TextContent></CardHeaderMain>\n                <CardActions>\n                    <Dropdown\n                        onSelect={ switchOpen }\n                        toggle={ <KebabToggle onToggle={ setOpen } isDisabled={ !props.dropdownItems } /> }\n                        isOpen={ isOpen }\n                        isPlain\n                        dropdownItems={ props.dropdownItems }\n                        position={ DropdownPosition.right }\n                    />\n                </CardActions>\n            </CardHeader>\n            <CardBody>\n                <Grid hasGutter>\n                    <GridItem span={ 6 }>\n                        <TextContent>\n                            <Text component={ TextVariants.h5 } style={ contentTitleStyle }>Action</Text>\n                        </TextContent>\n                    </GridItem>\n                    <GridItem span={ 6 }>\n                        <TextContent>\n                            <Text component={ TextVariants.h5 } style={ contentTitleStyle }>Recipient</Text>\n                        </TextContent>\n                    </GridItem>\n                    { props.contents.map(content => (\n                        <React.Fragment key={ content.key }>\n                            <GridItem span={ 6 }>\n                                { content.action }\n                            </GridItem>\n                            <GridItem span={ 6 }>\n                                { content.recipient }\n                            </GridItem>\n                        </React.Fragment>\n                    )) }\n                </Grid>\n            </CardBody>\n        </Card>\n    );\n};\n\nexport const BehaviorGroupCard: React.FunctionComponent<BehaviorGroupProps> = props => {\n    const onClickEdit = React.useCallback(() => {\n        const onEdit = props.onEdit;\n        onEdit(props.behaviorGroup);\n    }, [ props.behaviorGroup, props.onEdit ]);\n\n    const onClickDelete = React.useCallback(() => {\n        const onDelete = props.onDelete;\n        onDelete(props.behaviorGroup);\n    }, [ props.behaviorGroup, props.onDelete ]);\n\n    const dropdownItems = React.useMemo(() => [\n        <DropdownItem key=\"on-edit\" onClick={ onClickEdit }> Edit </DropdownItem>,\n        <DropdownItem key=\"on-delete\" onClick={ onClickDelete }> Delete </DropdownItem>\n    ], [ onClickEdit, onClickDelete ]);\n\n    return (\n        <BehaviorGroupCardLayout\n            title={ props.behaviorGroup.displayName }\n            dropdownItems={ dropdownItems }\n            contents={ props.behaviorGroup.actions.map((action, index) => ({\n                key: `${index}-${action.integrationId}`,\n                recipient: <Recipient action={ action } />,\n                action: <ActionComponent isDefault={ false } action={ action } />\n            })) }\n        />\n    );\n};\n\nexport const BehaviorGroupCardSkeleton: React.FunctionComponent = () => {\n    const contentWidth = '150px';\n\n    return (\n        <BehaviorGroupCardLayout\n            title={ <Skeleton width=\"300px\" /> }\n            contents={ [\n                {\n                    key: 'skeleton-1',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                },\n                {\n                    key: 'skeleton-2',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                },\n                {\n                    key: 'skeleton-3',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                }\n            ] }\n        />\n    );\n};\n","import { Flex, FlexItem } from '@patternfly/react-core';\nimport { global_spacer_md } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { BehaviorGroupCard, BehaviorGroupCardSkeleton } from './BehaviorGroupCard';\n\nconst cardsWrapperClassName = style({\n    overflow: 'auto'\n});\n\nconst cardWrapperClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\ninterface BehaviorGroupCardListProps {\n    onEdit: (behaviorGroup: BehaviorGroup) => void;\n    onDelete: (behaviorGroup: BehaviorGroup) => void;\n    behaviorGroups: ReadonlyArray<BehaviorGroup>;\n}\n\ninterface BehaviorGroupCardListLayoutProps {\n    contents: Array<{\n        key: string;\n        element: React.ReactNode;\n    }>;\n}\n\nconst BehaviorGroupCardListLayout: React.FunctionComponent<BehaviorGroupCardListLayoutProps> = props => {\n    const ref = React.useCallback(container => {\n        if (container?.firstChild?.firstChild) {\n            const height = container.firstChild.firstChild.getBoundingClientRect().height;\n            container.firstChild.style['max-height'] = `${height}px`;\n        }\n    }, []);\n\n    return (\n        <div ref={ ref }>\n            <Flex\n                alignItems={ { default: 'alignItemsStretch' } }\n                alignContent={ { default: 'alignContentSpaceBetween' } }\n                className={ cardsWrapperClassName }\n            >\n                { props.contents.map(content => (\n                    <FlexItem key={ content.key } className={ cardWrapperClassName }>\n                        { content.element }\n                    </FlexItem>\n                ))}\n            </Flex>\n        </div>\n    );\n};\n\nexport const BehaviorGroupCardList: React.FunctionComponent<BehaviorGroupCardListProps> = props => {\n\n    return (\n        <BehaviorGroupCardListLayout\n            contents={ props.behaviorGroups.map(behaviorGroup => ({\n                key: behaviorGroup.id,\n                element: <BehaviorGroupCard\n                    behaviorGroup={ behaviorGroup }\n                    onEdit={ props.onEdit }\n                    onDelete={ props.onDelete }\n                />\n            })) }\n        />\n    );\n};\n\nexport const BehaviorGroupCardListSkeleton: React.FunctionComponent = () => {\n    return (\n        <BehaviorGroupCardListLayout\n            contents={ [\n                {\n                    key: 'skeleton-1',\n                    element: <BehaviorGroupCardSkeleton />\n                },\n                {\n                    key: 'skeleton-2',\n                    element: <BehaviorGroupCardSkeleton />\n                },\n                {\n                    key: 'skeleton-3',\n                    element: <BehaviorGroupCardSkeleton />\n                }\n            ] }\n        />\n    );\n};\n","import {\n    ButtonVariant,\n    Checkbox,\n    ExpandableSection,\n    List,\n    ListItem,\n    Skeleton,\n    Stack,\n    StackItem\n} from '@patternfly/react-core';\nimport { ActionModalProps, DeleteModal, DeleteModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { useOnDeleteWrapper } from '../../../hooks/useOnDeleteWrapper';\nimport { OnDelete } from '../../../types/Callbacks';\nimport { BehaviorGroup, Notification } from '../../../types/Notification';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onDelete';\n\ninterface BehaviorGroupDeleteModalProps extends Omit<DeleteModalProps, UsedProps> {\n    behaviorGroup: BehaviorGroup;\n    onDelete: OnDelete<BehaviorGroup>;\n    conflictingNotifications: Array<Notification>;\n}\n\ntype BehaviorGroupDeleteModalSkeletonProps = Pick<ActionModalProps, 'onClose'>;\n\nexport const BehaviorGroupDeleteModal: React.FunctionComponent<BehaviorGroupDeleteModalProps> = props => {\n    const onDelete = useOnDeleteWrapper(props.onDelete, props.behaviorGroup);\n\n    const cancelButtonTitle = React.useMemo(\n        () => props.conflictingNotifications.length === 0 ? 'Cancel' : 'Close',\n        [ props.conflictingNotifications ]\n    );\n\n    const cancelButtonVariant = React.useMemo(\n        () => props.conflictingNotifications.length === 0 ? ButtonVariant.link : ButtonVariant.secondary,\n        [ props.conflictingNotifications ]\n    );\n\n    const [ ackDelete, setAckDelete ] = React.useState(false);\n\n    const content = React.useMemo(() => {\n        if (props.conflictingNotifications.length === 0) {\n            return (\n                <Stack hasGutter>\n                    <StackItem>\n                        Action and recipient pairings assigned in <b>{ props.behaviorGroup.displayName }</b> will lost. You\n                        will no longer be able to assign this behavior group to events.\n                    </StackItem>\n                    <StackItem>\n                        <Checkbox\n                            id=\"checkbox-delete-i-acknowledge\"\n                            label=\"I acknowledge that this action cannot be undone\"\n                            onChange={ setAckDelete }\n                            isChecked={ ackDelete }\n                        />\n                    </StackItem>\n                </Stack>\n            );\n        } else {\n            const events = props.conflictingNotifications;\n\n            return (\n                <Stack hasGutter>\n                    <StackItem>\n                        <b>{ props.behaviorGroup.displayName }</b> is associated to { events.length } events.\n                        Please remove the behavior group from these events in order  to continue.\n                    </StackItem>\n                    <StackItem>\n                        <ExpandableSection\n                            toggleText={ `View ${ events.length } event${ events.length === 0 ? '' : 's' }` }\n                        >\n                            <List>\n                                { events.map(event =>\n                                    (<ListItem key={ event.id }>{ `${event.applicationDisplayName} - ${event.eventTypeDisplayName}` }</ListItem>)\n                                ) }\n                            </List>\n                        </ExpandableSection>\n                    </StackItem>\n                </Stack>\n            );\n        }\n    }, [ props.conflictingNotifications, props.behaviorGroup, ackDelete, setAckDelete ]);\n\n    return (\n        <DeleteModal\n            isOpen={ true }\n            isDeleting={ props.isDeleting }\n            title=\"Delete behavior group\"\n            content={ content }\n            onClose={ props.onClose }\n            onDelete={ onDelete }\n            error={ props.error }\n            titleIconVariant=\"warning\"\n            actionButtonDisabled={ !ackDelete }\n            actionButtonHidden={ props.conflictingNotifications.length > 0 }\n            cancelButtonTitle={ cancelButtonTitle }\n            cancelButtonVariant={ cancelButtonVariant }\n        />\n    );\n};\n\nconst onDelete = () => false;\n\nexport const BehaviorGroupDeleteModalSkeleton: React.FunctionComponent<BehaviorGroupDeleteModalSkeletonProps> = props => {\n    return (\n        <DeleteModal\n            isOpen={ true }\n            title=\"Delete behavior group\"\n            actionButtonDisabled={ true }\n            titleIconVariant=\"warning\"\n            content={ <Stack hasGutter>\n                <StackItem><Skeleton width=\"500px\" /></StackItem>\n                <StackItem><Skeleton width=\"500px\" /></StackItem>\n            </Stack> }\n            onClose={ props.onClose }\n            isDeleting={ false }\n            onDelete={ onDelete }\n        />\n    );\n};\n","import { useCallback } from 'react';\n\nimport { OnDelete } from '../types/Callbacks';\n\nexport const useOnDeleteWrapper = <T>(onDelete: OnDelete<T>, toDelete: T) => {\n    return useCallback(() => {\n        return  onDelete(toDelete);\n    }, [ onDelete, toDelete ]);\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const EmailSubscriptionProperties = zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = unknown;\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties)\n      | undefined\n      | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType = 'webhook' | 'email_subscription' | 'default';\n\n  export const EntityTag = zodSchemaEntityTag();\n  export type EntityTag = {\n    value?: string | undefined | null;\n    weak?: boolean | undefined | null;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const Family = zodSchemaFamily();\n  export type Family =\n    | 'CLIENT_ERROR'\n    | 'INFORMATIONAL'\n    | 'OTHER'\n    | 'REDIRECTION'\n    | 'SERVER_ERROR'\n    | 'SUCCESSFUL';\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Link = zodSchemaLink();\n  export type Link = {\n    params?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    rel?: string | undefined | null;\n    rels?: Array<string> | undefined | null;\n    title?: string | undefined | null;\n    type?: string | undefined | null;\n    uri?: string | undefined | null;\n    uriBuilder?: UriBuilder | undefined | null;\n  };\n\n  export const Locale = zodSchemaLocale();\n  export type Locale = {\n    country?: string | undefined | null;\n    displayCountry?: string | undefined | null;\n    displayLanguage?: string | undefined | null;\n    displayName?: string | undefined | null;\n    displayScript?: string | undefined | null;\n    displayVariant?: string | undefined | null;\n    extensionKeys?: Array<string> | undefined | null;\n    iSO3Country?: string | undefined | null;\n    iSO3Language?: string | undefined | null;\n    language?: string | undefined | null;\n    script?: string | undefined | null;\n    unicodeLocaleAttributes?: Array<string> | undefined | null;\n    unicodeLocaleKeys?: Array<string> | undefined | null;\n    variant?: string | undefined | null;\n  };\n\n  export const MediaType = zodSchemaMediaType();\n  export type MediaType = {\n    parameters?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    subtype?: string | undefined | null;\n    type?: string | undefined | null;\n    wildcardSubtype?: boolean | undefined | null;\n    wildcardType?: boolean | undefined | null;\n  };\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const MultivaluedMapStringObject = zodSchemaMultivaluedMapStringObject();\n  export type MultivaluedMapStringObject = {\n    [x: string]: Array<unknown>;\n  };\n\n  export const MultivaluedMapStringString = zodSchemaMultivaluedMapStringString();\n  export type MultivaluedMapStringString = {\n    [x: string]: Array<string>;\n  };\n\n  export const NewCookie = zodSchemaNewCookie();\n  export type NewCookie = {\n    comment?: string | undefined | null;\n    domain?: string | undefined | null;\n    expiry?: string | undefined | null;\n    httpOnly?: boolean | undefined | null;\n    maxAge?: number | undefined | null;\n    name?: string | undefined | null;\n    path?: string | undefined | null;\n    secure?: boolean | undefined | null;\n    value?: string | undefined | null;\n    version?: number | undefined | null;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    eventId?: string | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const RbacRaw = zodSchemaRbacRaw();\n  export type RbacRaw = {\n    data?:\n      | Array<{\n          [x: string]: unknown;\n        }>\n      | undefined\n      | null;\n    links?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    meta?:\n      | {\n          [x: string]: number;\n        }\n      | undefined\n      | null;\n  };\n\n  export const Response = zodSchemaResponse();\n  export type Response = {\n    allowedMethods?: Array<string> | undefined | null;\n    cookies?:\n      | {\n          [x: string]: NewCookie;\n        }\n      | undefined\n      | null;\n    date?: string | undefined | null;\n    entity?: unknown | undefined | null;\n    entityTag?: EntityTag | undefined | null;\n    headers?: MultivaluedMapStringObject | undefined | null;\n    language?: Locale | undefined | null;\n    lastModified?: string | undefined | null;\n    length?: number | undefined | null;\n    links?: Array<Link> | undefined | null;\n    location?: string | undefined | null;\n    mediaType?: MediaType | undefined | null;\n    metadata?: MultivaluedMapStringObject | undefined | null;\n    status?: number | undefined | null;\n    statusInfo?: StatusType | undefined | null;\n    stringHeaders?: MultivaluedMapStringString | undefined | null;\n  };\n\n  export const StatusType = zodSchemaStatusType();\n  export type StatusType = {\n    family?: Family | undefined | null;\n    reasonPhrase?: string | undefined | null;\n    statusCode?: number | undefined | null;\n  };\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const UriBuilder = zodSchemaUriBuilder();\n  export type UriBuilder = unknown;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties()\n          ])\n          .optional()\n          .nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default' ]);\n  }\n\n  function zodSchemaEntityTag() {\n      return z\n      .object({\n          value: z.string().optional().nullable(),\n          weak: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFamily() {\n      return z.enum([\n          'CLIENT_ERROR',\n          'INFORMATIONAL',\n          'OTHER',\n          'REDIRECTION',\n          'SERVER_ERROR',\n          'SUCCESSFUL'\n      ]);\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaLink() {\n      return z\n      .object({\n          params: z.record(z.string()).optional().nullable(),\n          rel: z.string().optional().nullable(),\n          rels: z.array(z.string()).optional().nullable(),\n          title: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          uri: z.string().optional().nullable(),\n          uriBuilder: zodSchemaUriBuilder().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaLocale() {\n      return z\n      .object({\n          country: z.string().optional().nullable(),\n          displayCountry: z.string().optional().nullable(),\n          displayLanguage: z.string().optional().nullable(),\n          displayName: z.string().optional().nullable(),\n          displayScript: z.string().optional().nullable(),\n          displayVariant: z.string().optional().nullable(),\n          extensionKeys: z.array(z.string()).optional().nullable(),\n          iSO3Country: z.string().optional().nullable(),\n          iSO3Language: z.string().optional().nullable(),\n          language: z.string().optional().nullable(),\n          script: z.string().optional().nullable(),\n          unicodeLocaleAttributes: z.array(z.string()).optional().nullable(),\n          unicodeLocaleKeys: z.array(z.string()).optional().nullable(),\n          variant: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMediaType() {\n      return z\n      .object({\n          parameters: z.record(z.string()).optional().nullable(),\n          subtype: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          wildcardSubtype: z.boolean().optional().nullable(),\n          wildcardType: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMultivaluedMapStringObject() {\n      return z.record(z.array(z.unknown()));\n  }\n\n  function zodSchemaMultivaluedMapStringString() {\n      return z.record(z.array(z.string()));\n  }\n\n  function zodSchemaNewCookie() {\n      return z\n      .object({\n          comment: z.string().optional().nullable(),\n          domain: z.string().optional().nullable(),\n          expiry: z.string().optional().nullable(),\n          httpOnly: z.boolean().optional().nullable(),\n          maxAge: z.number().int().optional().nullable(),\n          name: z.string().optional().nullable(),\n          path: z.string().optional().nullable(),\n          secure: z.boolean().optional().nullable(),\n          value: z.string().optional().nullable(),\n          version: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          eventId: z.string().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacRaw() {\n      return z\n      .object({\n          data: z.array(z.record(z.unknown())).optional().nullable(),\n          links: z.record(z.string()).optional().nullable(),\n          meta: z.record(z.number().int()).optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaResponse() {\n      return z\n      .object({\n          allowedMethods: z.array(z.string()).optional().nullable(),\n          cookies: z.record(zodSchemaNewCookie()).optional().nullable(),\n          date: z.string().optional().nullable(),\n          entity: z.unknown().optional().nullable(),\n          entityTag: zodSchemaEntityTag().optional().nullable(),\n          headers: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          language: zodSchemaLocale().optional().nullable(),\n          lastModified: z.string().optional().nullable(),\n          length: z.number().int().optional().nullable(),\n          links: z.array(zodSchemaLink()).optional().nullable(),\n          location: z.string().optional().nullable(),\n          mediaType: zodSchemaMediaType().optional().nullable(),\n          metadata: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          status: z.number().int().optional().nullable(),\n          statusInfo: zodSchemaStatusType().optional().nullable(),\n          stringHeaders: zodSchemaMultivaluedMapStringString()\n          .optional()\n          .nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatusType() {\n      return z\n      .object({\n          family: zodSchemaFamily().optional().nullable(),\n          reasonPhrase: z.string().optional().nullable(),\n          statusCode: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaUriBuilder() {\n      return z.unknown();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n}\n\nexport namespace Operations {\n  // POST /api/notifications/v1.0/notifications/behaviorGroups\n  // Create a behavior group.\n  export namespace NotificationServiceCreateBehaviorGroup {\n    export interface Params {\n      body: Schemas.BehaviorGroup;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'BehaviorGroup', 200, Schemas.BehaviorGroup>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/behaviorGroups';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.BehaviorGroup, 'BehaviorGroup', 200)\n            ]\n        })\n        .build();\n    };\n  }\n  // PUT /api/notifications/v1.0/notifications/behaviorGroups/{behaviorGroupId}/actions\n  // Update the list of actions of a behavior group.\n  export namespace NotificationServiceUpdateBehaviorGroupActions {\n    const Body = z.array(z.string());\n    type Body = Array<string>;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      behaviorGroupId: Schemas.UUID;\n      body: Body;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/behaviorGroups/{behaviorGroupId}/actions'.replace(\n            '{behaviorGroupId}',\n            params.behaviorGroupId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /api/notifications/v1.0/notifications/behaviorGroups/{id}\n  // Update a behavior group.\n  export namespace NotificationServiceUpdateBehaviorGroup {\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      id: Schemas.UUID;\n      body: Schemas.BehaviorGroup;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/behaviorGroups/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /api/notifications/v1.0/notifications/behaviorGroups/{id}\n  // Delete a behavior group.\n  export namespace NotificationServiceDeleteBehaviorGroup {\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/behaviorGroups/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /api/notifications/v1.0/notifications/bg/eventTypes/affectedByRemovalOfEndpoint/{endpointId}\n  // Retrieve the event types affected by the removal of an integration.\n  export namespace NotificationServiceGetEventTypesAffectedByRemovalOfEndpoint {\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      endpointId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/bg/eventTypes/affectedByRemovalOfEndpoint/{endpointId}'.replace(\n            '{endpointId}',\n            params.endpointId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /api/notifications/v1.0/notifications/bundles/{bundleId}/behaviorGroups\n  // Retrieve the behavior groups of a bundle.\n  export namespace NotificationServiceFindBehaviorGroupsByBundleId {\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      bundleId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/bundles/{bundleId}/behaviorGroups'.replace(\n            '{bundleId}',\n            params.bundleId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /api/notifications/v1.0/notifications/eventTypes/affectedByRemovalOfBehaviorGroup/{behaviorGroupId}\n  // Retrieve the event types affected by the removal of a behavior group.\n  export namespace NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup {\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      behaviorGroupId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes/affectedByRemovalOfBehaviorGroup/{behaviorGroupId}'.replace(\n            '{behaviorGroupId}',\n            params.behaviorGroupId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups\n  // Retrieve the behavior groups linked to an event type.\n  export namespace NotificationServiceGetLinkedBehaviorGroups {\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      eventTypeId: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups'.replace(\n            '{eventTypeId}',\n            params.eventTypeId.toString()\n        );\n        const query = {} as Record<string, any>;\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups\n  // Update the list of behavior groups of an event type.\n  export namespace NotificationServiceUpdateEventTypeBehaviors {\n    const Body = z.array(z.string());\n    type Body = Array<string>;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      eventTypeId: Schemas.UUID;\n      body: Body;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups'.replace(\n            '{eventTypeId}',\n            params.eventTypeId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n}\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiPrivate';\nimport { UUID } from '../../types/Notification';\n\nconst deleteBehaviorGroupAction = (id: UUID) => {\n    return Operations.NotificationServiceDeleteBehaviorGroup.actionCreator({\n        id\n    });\n};\n\nexport const useDeleteBehaviorGroupMutation = () => useMutation(deleteBehaviorGroupAction);\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiPrivate';\nimport { toNotifications } from '../../types/adapters/NotificationAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst getAffectedNotificationsByBehaviorGroupAction = (id: UUID) => {\n    return Operations.NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup.actionCreator({\n        behaviorGroupId: id\n    });\n};\n\nconst defaultNotificationsDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'Notifications',\n                200,\n                toNotifications(payload.value),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetAffectedNotificationsByBehaviorGroupQuery = (id: UUID) =>\n    useTransformQueryResponse(\n        useQuery(getAffectedNotificationsByBehaviorGroupAction(id)),\n        defaultNotificationsDecoder\n    );\n","import { addDangerNotification, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useEffect } from 'react';\n\nimport {\n    BehaviorGroupDeleteModal,\n    BehaviorGroupDeleteModalSkeleton\n} from '../../../components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal';\nimport { useDeleteBehaviorGroupMutation } from '../../../services/Notifications/DeleteBehaviorGroup';\nimport { useGetAffectedNotificationsByBehaviorGroupQuery } from '../../../services/Notifications/GetAffectedNotificationsByBehaviorGroup';\nimport { BehaviorGroup } from '../../../types/Notification';\n\nexport interface DeleteBehaviorGroupPageProps {\n    behaviorGroup: BehaviorGroup;\n    onClose: (deleted: boolean) => void;\n}\n\nexport const DeleteBehaviorGroupPage: React.FunctionComponent<DeleteBehaviorGroupPageProps> = props => {\n\n    const deleteBehaviorGroup = useDeleteBehaviorGroupMutation();\n    const affected = useGetAffectedNotificationsByBehaviorGroupQuery(props.behaviorGroup.id);\n\n    const onDelete = React.useCallback(async (behaviorGroup: BehaviorGroup) => {\n        const mutate = deleteBehaviorGroup.mutate;\n        const response = await mutate(behaviorGroup.id);\n\n        if (response.payload?.status === 200) {\n            addSuccessNotification(\n                'Behavior group deleted',\n                <>\n                    Group <b>{ behaviorGroup.displayName }</b> deleted successfully.\n                </>\n            );\n            return true;\n        }\n\n        addDangerNotification(\n            'Behavior group failed to be deleted',\n            <>\n                Failed to delete group <b> { behaviorGroup.displayName }</b>.\n                <br />\n                Please try again.\n            </>\n        );\n\n        return false;\n    }, [ deleteBehaviorGroup.mutate ]);\n\n    useEffect(() => {\n        const payload = affected.payload;\n        const onClose = props.onClose;\n        if (payload && payload.status !== 200) {\n            addDangerNotification(\n                'Associated events failed to load ',\n                <>\n                    Failed to load associated events for group <b> { props.behaviorGroup.displayName }</b>.\n                    <br />\n                    Please try again.\n                </>\n            );\n\n            onClose(false);\n        }\n    }, [ affected.payload, props.behaviorGroup, props.onClose ]);\n\n    if (affected.loading) {\n        return <BehaviorGroupDeleteModalSkeleton\n            onClose={ props.onClose }\n        />;\n    }\n\n    if (affected.payload?.status !== 200) {\n        return null;\n    }\n\n    return <BehaviorGroupDeleteModal\n        onDelete={ onDelete }\n        isDeleting={ deleteBehaviorGroup.loading }\n        onClose={ props.onClose }\n        behaviorGroup={ props.behaviorGroup }\n        conflictingNotifications={ affected.payload.value }\n    />;\n};\n","import * as Yup from 'yup';\n\nimport { NotificationType } from '../../types/Notification';\n\nconst ActionIntegration = Yup.object({\n    type: Yup.mixed().oneOf([ NotificationType.INTEGRATION ]).required(),\n    integration: Yup.object({\n        id: Yup.string().required()\n    }).required(),\n    integrationId: Yup.string().min(1)\n});\n\nconst ActionNotify = Yup.object({\n    type: Yup.mixed().oneOf([ NotificationType.EMAIL_SUBSCRIPTION /*, NotificationType.DRAWER */ ]).required(),\n    recipient: Yup.array(Yup.string()).min(0),\n    integrationId: Yup.string().min(0)\n});\n\nexport const ActionsArray = Yup.array(Yup.lazy(obj => {\n    if ((obj as any).hasOwnProperty('type')) {\n        if ((obj as any).type === NotificationType.INTEGRATION) {\n            return ActionIntegration;\n        }\n    }\n\n    return ActionNotify;\n}));\n\nexport const WithActions = Yup.object({\n    actions: ActionsArray\n});\n\nexport const BehaviorGroupSchema = Yup.object({\n    displayName: Yup.string().min(1),\n    actions: ActionsArray\n});\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport { IntegrationRef } from '../../../types/Notification';\n\nexport class RecipientOption implements SelectOptionObject {\n    readonly recipientOrIntegration: string | IntegrationRef;\n\n    constructor(recipientOrIntegration: string | IntegrationRef) {\n        this.recipientOrIntegration = recipientOrIntegration;\n    }\n\n    compareTo(selectOption: any): boolean {\n        if (selectOption instanceof RecipientOption && typeof selectOption.recipientOrIntegration === typeof this.recipientOrIntegration) {\n            if (typeof selectOption.recipientOrIntegration === 'string') {\n                return selectOption.recipientOrIntegration === this.recipientOrIntegration;\n            } else {\n                return selectOption.recipientOrIntegration.id === (this.recipientOrIntegration as IntegrationRef).id;\n            }\n        }\n\n        return false;\n    }\n\n    toString(): string {\n        if (typeof this.recipientOrIntegration === 'string') {\n            return this.recipientOrIntegration;\n        } else {\n            const postfix = this.recipientOrIntegration.isEnabled ? '' : ' - Disabled';\n            return `${this.recipientOrIntegration.name}${postfix}`;\n        }\n    }\n}\n","import { SelectOption } from '@patternfly/react-core';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\n\nimport { IntegrationRef } from '../../../types/Notification';\nimport { RecipientOption } from './RecipientOption';\nimport { ReducerState } from './useTypeaheadReducer';\n\nconst mapper = <T extends IntegrationRef>(r: T | string) =>\n    <SelectOption key={ typeof r === 'string' ? r : r.id } value={ new RecipientOption(r) } />;\n\nexport const useRecipientOptionMemo = <T extends IntegrationRef>(state: ReducerState<T | string>) => {\n    return React.useMemo(() => {\n        if (state.show === 'default') {\n            if (state.loadingDefault) {\n                return [ <SelectOption\n                    key=\"loading-option\"\n                    isNoResultsOption={ true }\n                    value=\"Loading...\"\n                /> ];\n            } else {\n                return state.defaultValues.map(mapper);\n            }\n        } else if (state.show === 'filter') {\n            if (state.loadingFilter) {\n                return [ <SelectOption\n                    key=\"loading-option\"\n                    isNoResultsOption={ true }\n                    value=\"Loading...\"\n                /> ];\n            } else {\n                return state.filterValues.map(mapper);\n            }\n        }\n\n        assertNever(state.show);\n    }, [ state ]);\n};\n","import assertNever from 'assert-never';\nimport { Reducer, useCallback, useMemo, useReducer } from 'react';\n\nexport interface ReducerState<T> {\n    filterValues: Array<T>;\n    defaultValues: Array<T>;\n    show: 'default' | 'filter';\n    loadingFilter: boolean;\n    loadingDefault: boolean;\n    lastSearch: string;\n}\n\nenum ReducerActionType {\n    LOAD_FILTER_VALUE,\n    SET_FILTER_VALUE,\n    USE_DEFAULTS,\n    SET_DEFAULTS\n}\n\ntype ReducerAction<T> = {\n    type: ReducerActionType.USE_DEFAULTS;\n} | {\n    type: ReducerActionType.LOAD_FILTER_VALUE;\n    search: string;\n} | {\n    type: ReducerActionType.SET_FILTER_VALUE;\n    search: string;\n    values: Array<T>;\n} | {\n    type: ReducerActionType.SET_DEFAULTS;\n    values: Array<T>;\n}\n\nconst reducerFunction = <T>(state: ReducerState<T>, action: ReducerAction<T>): ReducerState<T> => {\n    switch (action.type) {\n        case ReducerActionType.SET_FILTER_VALUE:\n            if (action.search === state.lastSearch) {\n                if (action.values === state.filterValues) {\n                    return state;\n                }\n\n                return {\n                    ...state,\n                    loadingFilter: false,\n                    filterValues: action.values\n                };\n            }\n\n            return state;\n        case ReducerActionType.LOAD_FILTER_VALUE:\n            if (action.search !== state.lastSearch || state.show !== 'filter') {\n                return {\n                    ...state,\n                    loadingFilter: true,\n                    filterValues: [],\n                    lastSearch: action.search,\n                    show: 'filter'\n                };\n            }\n\n            return state;\n        case ReducerActionType.USE_DEFAULTS:\n            if (state.show !== 'default') {\n                return {\n                    ...state,\n                    show: 'default'\n                };\n            }\n\n            return state;\n        case ReducerActionType.SET_DEFAULTS:\n            return {\n                ...state,\n                defaultValues: action.values,\n                loadingDefault: false\n            };\n        default:\n            assertNever(action);\n    }\n};\n\nexport const useTypeaheadReducer = <T>() => {\n    const [ state, dispatch ] = useReducer<Reducer<ReducerState<T>, ReducerAction<T>>>(reducerFunction, {\n        filterValues: [],\n        defaultValues: [],\n        show: 'default',\n        loadingFilter: false,\n        loadingDefault: true,\n        lastSearch: ''\n    } as ReducerState<T>);\n\n    const setFilterValue = useCallback((search: string, values: Array<T>) => dispatch({\n        type: ReducerActionType.SET_FILTER_VALUE,\n        values,\n        search\n    }), [ dispatch ]);\n\n    const loadFilterValue = useCallback((search: string) => dispatch({\n        type: ReducerActionType.LOAD_FILTER_VALUE,\n        search\n    }), [ dispatch ]);\n\n    const setDefaults = useCallback((values: Array<T>) => dispatch({\n        type: ReducerActionType.SET_DEFAULTS,\n        values\n    }), [ dispatch ]);\n\n    const useDefaults = useCallback(() => dispatch({\n        type: ReducerActionType.USE_DEFAULTS\n    }), [ dispatch ]);\n\n    const dispatchers = useMemo(() => ({\n        setFilterValue,\n        loadFilterValue,\n        setDefaults,\n        useDefaults\n    }), [ setFilterValue, loadFilterValue, setDefaults, useDefaults ]);\n\n    return [ state, dispatchers ] as [ typeof state, typeof dispatchers ];\n};\n","import { Select, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationRef } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface IntegrationRecipientTypeaheadProps extends OuiaComponentProps {\n    selected: Partial<IntegrationRef> | undefined;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n    integrationType: UserIntegrationType;\n    isDisabled?: boolean;\n    onSelected: (recipientOption: RecipientOption) => void;\n}\n\nexport const IntegrationRecipientTypeahead: React.FunctionComponent<IntegrationRecipientTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const [ state, dispatchers ] = useTypeaheadReducer<IntegrationRef>();\n\n    const toggle = React.useCallback((isOpen: boolean) => {\n        setOpen(isOpen);\n    }, [ setOpen ]);\n\n    React.useEffect(() => {\n        const getIntegrations = props.getIntegrations;\n        getIntegrations(props.integrationType, '').then(integrations => dispatchers.setDefaults(integrations));\n    }, [ props.getIntegrations, props.integrationType, dispatchers ]);\n\n    React.useEffect(() => {\n        const getIntegrations = props.getIntegrations;\n        if (state.loadingFilter) {\n            getIntegrations(props.integrationType, state.lastSearch).then(integrations => dispatchers.setFilterValue(\n                state.lastSearch,\n                integrations\n            ));\n        }\n    }, [ props.getIntegrations, props.integrationType, state.loadingFilter, state.lastSearch, dispatchers ]);\n\n    const options = useRecipientOptionMemo(state);\n\n    const onFilter = React.useCallback((e: React.ChangeEvent<HTMLInputElement> | null) => {\n        // Ignore filter calls with null event\n        if (e === null) {\n            return options;\n        }\n\n        const search = e.target.value?.trim();\n        if (search === '') {\n            dispatchers.useDefaults();\n        } else {\n            dispatchers.loadFilterValue(search);\n        }\n\n        return options;\n    }, [ dispatchers, options ]);\n\n    const selection = React.useMemo(() => {\n        const sel = props.selected;\n        if (sel === undefined || sel.name === undefined || sel.id === undefined || sel.type === undefined) {\n            return undefined;\n        }\n\n        return new RecipientOption(sel as IntegrationRef);\n    }, [ props.selected ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const integrationSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n            integrationSelected(value);\n            setOpen(false);\n        }\n    }, [ props.onSelected ]);\n\n    return (\n        <div { ...getOuiaProps('IntegrationRecipientTypeahead', props) }>\n            <Select\n                variant={ SelectVariant.typeahead }\n                typeAheadAriaLabel=\"Choose webhook\"\n                placeholderText=\"Choose webhook\"\n                selections={ selection }\n                onSelect={ onSelect }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onFilter={ onFilter }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n            >\n                { options }\n            </Select>\n        </div>\n    );\n};\n","import { Select, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface RecipientTypeaheadProps extends OuiaComponentProps {\n    selected: Array<string> | undefined;\n    onSelected: (value: RecipientOption) => void;\n    getRecipients: (search: string) => Promise<Array<string>>;\n    isDisabled?: boolean;\n    onClear: () => void;\n}\n\nexport const RecipientTypeahead: React.FunctionComponent<RecipientTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n    const [ state, dispatchers ] = useTypeaheadReducer<string>();\n\n    React.useEffect(() => {\n        const getRecipients = props.getRecipients;\n        getRecipients('').then(recipients => dispatchers.setDefaults(recipients));\n    }, [ props.getRecipients, dispatchers ]);\n\n    React.useEffect(() => {\n        const getRecipients = props.getRecipients;\n        if (state.loadingFilter) {\n            getRecipients(state.lastSearch).then(recipients => dispatchers.setFilterValue(\n                state.lastSearch,\n                recipients\n            ));\n        }\n    }, [ props.getRecipients, state.loadingFilter, state.lastSearch, dispatchers ]);\n\n    const toggle = React.useCallback((isOpen: boolean) => {\n        setOpen(isOpen);\n    }, [ setOpen ]);\n\n    const options = useRecipientOptionMemo(state);\n\n    const onFilter = React.useCallback((e: React.ChangeEvent<HTMLInputElement> | null) => {\n        // Ignore filter calls with null event\n        if (e === null) {\n            return options;\n        }\n\n        const search = e.target.value?.trim();\n        if (search === '') {\n            dispatchers.useDefaults();\n        } else {\n            dispatchers.loadFilterValue(search);\n        }\n\n        return options;\n    }, [ dispatchers, options ]);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const selection = React.useMemo(() => {\n        const sel = props.selected;\n        if (sel === undefined) {\n            return undefined;\n        }\n\n        return (sel as Array<string>).map(s => new RecipientOption(s));\n\n    }, [ props.selected ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const onSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n            onSelected(value);\n        }\n    }, [ props.onSelected ]);\n\n    return (\n        <div { ...getOuiaProps('RecipientTypeahead', props) }>\n            <Select\n                variant={ SelectVariant.single }\n                typeAheadAriaLabel=\"Select the recipients\"\n                selections={ 'All registered users' }\n                onSelect={ onSelect }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onFilter={ onFilter }\n                menuAppendTo={ document.body }\n                isDisabled={ true }\n            >\n                { options }\n            </Select>\n        </div>\n    );\n};\n","import * as React from 'react';\n\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { Action, IntegrationRef, NotificationType } from '../../../types/Notification';\nimport { IntegrationRecipientTypeahead } from '../Form/IntegrationRecipientTypeahead';\nimport { RecipientTypeahead } from '../Form/RecipientTypeahead';\nimport { useEditableActionRow } from './useEditableActionRow';\n\ninterface RecipientFormProps {\n    action: Action;\n    integrationSelected: ReturnType<typeof useEditableActionRow>['integrationSelected'];\n    recipientSelected: ReturnType<typeof useEditableActionRow>['recipientSelected'];\n    recipientOnClear: ReturnType<typeof useEditableActionRow>['recipientOnClear'];\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n}\n\nexport const RecipientForm: React.FunctionComponent<RecipientFormProps> = props => {\n    if (props.action.type === NotificationType.INTEGRATION) {\n        return (\n            <IntegrationRecipientTypeahead\n                onSelected={ props.integrationSelected }\n                integrationType={ props.action.integration?.type ?? UserIntegrationType.WEBHOOK }\n                selected={ props.action.integration }\n                getIntegrations={ props.getIntegrations }\n            />\n        );\n    }\n\n    return (\n        <RecipientTypeahead\n            onSelected={ props.recipientSelected }\n            selected={ props.action.recipient }\n            getRecipients={ props.getRecipients }\n            onClear={ props.recipientOnClear }\n        />\n    );\n};\n","import { useField, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { DefaultNotificationBehavior } from '../../../types/Notification';\nimport { ActionOption } from '../Form/ActionOption';\nimport { RecipientOption } from '../Form/RecipientOption';\n\nexport const useEditableActionRow = (path: string) => {\n\n    const { setFieldValue } = useFormikContext<Notification | DefaultNotificationBehavior>();\n    const [\n        recipientFieldProps,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        _,\n        recipientFieldHelpers\n    ] = useField<Array<string> | undefined>(`${path}.recipient`);\n\n    const actionSelected = React.useCallback((value: ActionOption) => {\n        setFieldValue(`${path}.type`, value.notificationType);\n        if (value.integrationType) {\n            setFieldValue(`${path}.integration`, {\n                type: value.integrationType\n            });\n            setFieldValue(`${path}.recipient`, []);\n            setFieldValue(`${path}.integrationId`, '');\n        } else {\n            setFieldValue(`${path}.recipient`, []);\n            setFieldValue(`${path}.integration`, undefined);\n            setFieldValue(`${path}.integrationId`, '');\n        }\n    }, [ setFieldValue, path ]);\n\n    const integrationSelected = React.useCallback((value: RecipientOption) => {\n        if (typeof value.recipientOrIntegration !== 'string') {\n            setFieldValue(`${path}.integration`, value.recipientOrIntegration);\n            setFieldValue(`${path}.integrationId`, value.recipientOrIntegration.id);\n        }\n    }, [ setFieldValue, path ]);\n\n    const recipientSelected = React.useCallback((value: RecipientOption) => {\n        if (recipientFieldProps.value) {\n            const selected = recipientFieldProps.value;\n            const index = selected.indexOf(value.toString());\n            if (index === -1) {\n                recipientFieldHelpers.setValue([ ...selected, value.toString() ]);\n            } else {\n                recipientFieldHelpers.setValue([ ...selected ].filter((_, i) => i !== index));\n            }\n        }\n    }, [ recipientFieldProps, recipientFieldHelpers ]);\n\n    const recipientOnClear = React.useCallback(() => {\n        recipientFieldHelpers.setValue([]);\n    }, [ recipientFieldHelpers ]);\n\n    return {\n        actionSelected,\n        integrationSelected,\n        recipientSelected,\n        recipientOnClear\n    };\n};\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport { Messages } from '../../../properties/Messages';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { NotificationType } from '../../../types/Notification';\n\ntype ActionTypeOrIntegration = {\n    kind: 'integration';\n    type: UserIntegrationType;\n} | {\n    kind: 'notification';\n    type: NotificationType;\n}\n\nexport class ActionOption implements SelectOptionObject {\n    readonly integrationType: UserIntegrationType | undefined;\n    readonly notificationType: NotificationType;\n\n    constructor(type: ActionTypeOrIntegration) {\n        if (type.kind === 'integration') {\n            this.notificationType = NotificationType.INTEGRATION;\n            this.integrationType = type.type;\n        } else {\n            this.notificationType = type.type;\n            this.integrationType = undefined;\n        }\n    }\n\n    compareTo(selectOption: any): boolean {\n        if (selectOption instanceof ActionOption) {\n            return selectOption.notificationType === this.notificationType && selectOption.integrationType === this.integrationType;\n        }\n\n        return false;\n    }\n\n    toString(): string {\n        const actionName = Messages.components.notifications.types[this.notificationType];\n        if (this.integrationType) {\n            const integrationName = Messages.components.integrations.integrationType[this.integrationType];\n            return `${actionName}: ${integrationName}`;\n        }\n\n        return actionName;\n    }\n}\n","import { Select, SelectOption, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { getInsights, OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { isStagingOrProd } from '../../../types/Environments';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { Action, ActionNotify, NotificationType } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { ActionOption } from './ActionOption';\n\nconst getSelectOptions = () => [\n    ...([ NotificationType.DRAWER, NotificationType.EMAIL_SUBSCRIPTION ] as Array<ActionNotify['type']>)\n    .map(type => new ActionOption({\n        kind: 'notification',\n        type\n    })),\n    ...[ UserIntegrationType.WEBHOOK ].map(type => new ActionOption({\n        kind: 'integration',\n        type\n    }))\n];\n\nexport interface ActionTypeaheadProps extends OuiaComponentProps {\n    action: Action;\n    isDisabled?: boolean;\n    onSelected: (actionOption: ActionOption) => void;\n}\n\nexport const ActionTypeahead: React.FunctionComponent<ActionTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const toggle = React.useCallback(() => {\n        setOpen(prev => !prev);\n    }, [ setOpen ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const actionSelected = props.onSelected;\n        if (value instanceof ActionOption) {\n            actionSelected(value);\n            setOpen(false);\n        }\n\n    }, [ props.onSelected, setOpen ]);\n\n    const selectedOption = React.useMemo(() => {\n        if (props.action.type === NotificationType.INTEGRATION) {\n            return new ActionOption({\n                kind: 'integration',\n                type: props.action.integration.type\n            });\n        }\n\n        return new ActionOption({\n            kind: 'notification',\n            type: props.action.type\n        });\n    }, [ props.action ]);\n\n    const hideNonWebhooks = isStagingOrProd(getInsights());\n\n    return (\n        <div { ...getOuiaProps('ActionTypeahead', props) } >\n            <Select\n                variant={ SelectVariant.typeahead }\n                typeAheadAriaLabel=\"Select an action type\"\n                selections={ selectedOption }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onSelect={ onSelect }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n            >\n                { getSelectOptions()\n                .filter((o) => !hideNonWebhooks\n                    || o.notificationType === NotificationType.INTEGRATION)\n                .map(o => <SelectOption key={ o.toString() } value={ o } />) }\n            </Select>\n        </div>\n    );\n};\n","import { Button, ButtonVariant, Form, Grid, GridItem, Split, SplitItem } from '@patternfly/react-core';\nimport { MinusCircleIcon, PlusCircleIcon } from '@patternfly/react-icons';\nimport { global_spacer_md } from '@patternfly/react-tokens';\nimport {\n    FormTextInput,\n    OuiaComponentProps,\n    ouiaIdConcat\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { FieldArray, FieldArrayRenderProps, FormikProps } from 'formik';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { UserIntegrationType } from '../../../types/Integration';\nimport {\n    Action,\n    BehaviorGroup,\n    IntegrationRef,\n    NewBehaviorGroup, NotificationType\n} from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { RecipientForm } from '../EditableActionRow/RecipientForm';\nimport { useEditableActionRow } from '../EditableActionRow/useEditableActionRow';\nimport { ActionTypeahead } from '../Form/ActionTypeahead';\n\ninterface EditBehaviorGroupProps extends OuiaComponentProps {\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n    behaviorGroup?: Partial<BehaviorGroup>;\n}\n\ntype FormType = BehaviorGroup | NewBehaviorGroup;\n\ntype ActionsArraysProps = FieldArrayRenderProps & Pick<EditBehaviorGroupProps, 'getRecipients' | 'getIntegrations'>  & {\n    form: FormikProps<FormType>;\n}\n\ntype ActionRowProps = {\n    action: Action;\n    path: string;\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n    onRemove?: () => void;\n};\n\nconst alignLeftClassName = style({\n    textAlign: 'left',\n    paddingLeft: 0\n});\n\nconst subtitleClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\nconst ActionRow: React.FunctionComponent<ActionRowProps> = props => {\n    const {\n        recipientSelected,\n        recipientOnClear,\n        integrationSelected,\n        actionSelected\n    } = useEditableActionRow(props.path);\n\n    return (\n        <>\n            <GridItem span={ 6 }>\n                <ActionTypeahead\n                    action={ props.action }\n                    onSelected={ actionSelected }\n                />\n            </GridItem>\n            <GridItem span={ 6 }>\n                <Split>\n                    <SplitItem isFilled>\n                        <RecipientForm\n                            getRecipients={ props.getRecipients }\n                            getIntegrations={ props.getIntegrations }\n                            recipientSelected={ recipientSelected }\n                            recipientOnClear={ recipientOnClear }\n                            integrationSelected={ integrationSelected }\n                            action={ props.action }\n                        />\n                    </SplitItem>\n                    { props.onRemove && (\n                        <SplitItem>\n                            <Button variant={ ButtonVariant.plain } onClick={ props.onRemove }>\n                                <MinusCircleIcon />\n                            </Button>\n                        </SplitItem>\n                    ) }\n                </Split>\n            </GridItem>\n        </>\n    );\n};\n\nconst ActionsArray: React.FunctionComponent<ActionsArraysProps> = props => {\n    const { values, isSubmitting } = props.form;\n    const actions = React.useMemo(() => values.actions ?? [] as Array<Action>, [ values ]);\n\n    const addAction = React.useCallback(() => {\n        const push = props.push;\n        const newAction: Action = {\n            type: NotificationType.EMAIL_SUBSCRIPTION,\n            integrationId: '',\n            recipient: []\n        };\n\n        push(newAction);\n    }, [ props.push ]);\n\n    React.useEffect(() => {\n        if (actions.length === 0) {\n            addAction();\n        }\n    }, [ actions, addAction ]);\n\n    return (\n        <>\n            <GridItem span={ 6 }>\n                <b>Actions</b>\n            </GridItem>\n            <GridItem span={ 6 }>\n                <b>Recipient</b>\n            </GridItem>\n            { actions.map((action, index) => (\n                <ActionRow key={ `${index}-${action.integrationId}` }\n                    action={ action }\n                    getIntegrations={ props.getIntegrations }\n                    getRecipients={ props.getRecipients }\n                    path={ `actions.${index}` }\n                    onRemove={ actions.length > 1 ? props.handleRemove(index) : undefined }\n                />\n            )) }\n            <GridItem span={ 6 }>\n                <Button\n                    className={ alignLeftClassName }\n                    variant={ ButtonVariant.link }\n                    icon={ <PlusCircleIcon /> }\n                    onClick={ addAction }\n                    isDisabled={ isSubmitting }\n                >\n                    Add action\n                </Button>\n            </GridItem>\n        </>\n    );\n};\n\nexport const EditBehaviorGroupForm: React.FunctionComponent<EditBehaviorGroupProps> = props => {\n    return (\n        <div { ... getOuiaProps('Notifications/BehaviorGroupForm', props) }>\n            <div className={ subtitleClassName }>Enter a name and add actions for your new group.</div>\n            <Form>\n                <Grid hasGutter>\n                    <GridItem span={ 12 }>\n                        <FormTextInput\n                            ouiaId={ ouiaIdConcat(props.ouiaId, 'group-name') }\n                            label=\"Group name\"\n                            name=\"displayName\"\n                            id=\"group-name\"\n                        />\n                    </GridItem>\n                    <FieldArray name=\"actions\">\n                        { helpers => <ActionsArray\n                            { ...helpers }\n                            getRecipients={ props.getRecipients }\n                            getIntegrations={ props.getIntegrations }\n                        /> }\n                    </FieldArray>\n                </Grid>\n            </Form>\n        </div>\n    );\n};\n","import { ModalVariant } from '@patternfly/react-core';\nimport { SaveModal, SaveModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { BehaviorGroupSchema } from '../../../schemas/Integrations/Notifications';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { BehaviorGroup, DefaultNotificationBehavior, IntegrationRef, Notification } from '../../../types/Notification';\nimport { EditBehaviorGroupForm } from './BehaviorGroupForm';\n\ntype DataFetcher = {\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n}\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onSave';\nexport type BehaviorGroupSaveModalProps = Omit<SaveModalProps, UsedProps> & {\n    data?: Partial<BehaviorGroup>;\n    onSave: (behaviorGroup: BehaviorGroup) => boolean | Promise<boolean>;\n} & DataFetcher;\n\ninterface InternalProps extends DataFetcher {\n    onClose: (saved: boolean) => void;\n    data: BehaviorGroupSaveModalProps['data'];\n}\n\nconst InternalBehaviorGroupSaveModal: React.FunctionComponent<InternalProps> = props => {\n    const title =  `${props.data ? 'Create new' : 'Edit'} behavior group`;\n\n    const { handleSubmit, isValid, isSubmitting } = useFormikContext<Notification | DefaultNotificationBehavior>();\n\n    const onSaveClicked = React.useCallback(() => {\n        handleSubmit();\n        return false;\n    }, [ handleSubmit ]);\n\n    return (\n        <SaveModal\n            content={ <EditBehaviorGroupForm\n                behaviorGroup={ props.data }\n                getRecipients={ props.getRecipients }\n                getIntegrations={ props.getIntegrations }\n            /> }\n            isSaving={ isSubmitting }\n            onSave={ onSaveClicked }\n            isOpen={ true }\n            title={ title }\n            onClose={ props.onClose }\n            variant={ ModalVariant.large }\n            actionButtonDisabled={ !isValid }\n        />\n    );\n};\n\nexport const BehaviorGroupSaveModal: React.FunctionComponent<BehaviorGroupSaveModalProps> = props => {\n    const onSubmit = React.useCallback(async (data: Partial<BehaviorGroup>) => {\n        const onClose = props.onClose;\n        const onSave = props.onSave;\n\n        const saved = await onSave(data as BehaviorGroup);\n\n        if (saved) {\n            onClose(true);\n        }\n    }, [ props.onClose, props.onSave ]);\n\n    return (\n        <Formik<Partial<BehaviorGroup>>\n            initialValues={ props.data ?? { } }\n            validationSchema={ BehaviorGroupSchema }\n            onSubmit={ onSubmit }\n            validateOnMount={ true }\n        >\n            <InternalBehaviorGroupSaveModal\n                onClose={ props.onClose }\n                data={ props.data }\n                getRecipients={ props.getRecipients }\n                getIntegrations={ props.getIntegrations }\n            />\n        </Formik>\n    );\n};\n","import { Filter, Operator, Page } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport { listIntegrationIntegrationDecoder, listIntegrationsActionCreator } from '../../services/useListIntegrations';\nimport { UserIntegrationType } from '../../types/Integration';\nimport { IntegrationRef } from '../../types/Notification';\n\nexport const useGetIntegrations = () => {\n    const { query } = useContext(ClientContext);\n\n    return React.useCallback(async (type: UserIntegrationType, _search: string) => {\n        return query(listIntegrationsActionCreator(\n            Page.of(\n                1,\n                20,\n                new Filter()\n                .and('type', Operator.EQUAL, type)\n            )\n        )).then(response => {\n            let integrations: Array<IntegrationRef> = [];\n            const payload = response.payload ? listIntegrationIntegrationDecoder(response.payload) : undefined;\n\n            if (payload?.type === 'IntegrationPage') {\n                integrations = payload.value.data;\n            }\n\n            return integrations;\n        });\n    }, [ query ]);\n};\n","const recipients = [\n    'Admin',\n    'Another one',\n    'Default user access',\n    'Security admin',\n    'Stakeholders'\n];\n\nconst getRecipients = async (search: string) => {\n    if (search !== '') {\n        search = search.toLowerCase();\n        return recipients.filter(r => r.toLowerCase().includes(search));\n    }\n\n    return recipients;\n};\n\nexport const useGetRecipients = () => {\n    return getRecipients;\n};\n","import { Schemas } from '../../generated/OpenapiPrivate';\nimport { BehaviorGroup, NewBehaviorGroup } from '../Notification';\nimport { toAction } from './NotificationAdapter';\n\ntype ServerBehaviorGroup = Schemas.BehaviorGroup;\n\nconst reportBehaviorGroup = (element: ServerBehaviorGroup): never => {\n    throw new Error('Invalid behavior group:' + JSON.stringify(element));\n};\n\nexport const toBehaviorGroup = (serverBehaviorGroup: ServerBehaviorGroup): BehaviorGroup => {\n    const actions = serverBehaviorGroup.actions?.map((behaviorAction) => {\n        if (behaviorAction.endpoint) {\n            return toAction(behaviorAction.endpoint);\n        }\n\n        return reportBehaviorGroup(serverBehaviorGroup);\n    }) || [];\n\n    return {\n        actions,\n        bundleId: serverBehaviorGroup.bundle_id,\n        displayName: serverBehaviorGroup.display_name,\n        id: serverBehaviorGroup.id ?? reportBehaviorGroup(serverBehaviorGroup)\n    };\n};\n\nexport const toShallowBehaviorGroupRequest = (behaviorGroup: BehaviorGroup | NewBehaviorGroup): ServerBehaviorGroup => {\n    return {\n        bundle_id: behaviorGroup.bundleId,\n        display_name: behaviorGroup.displayName\n    };\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiPrivate';\nimport { toBehaviorGroup, toShallowBehaviorGroupRequest } from '../../types/adapters/BehaviorGroupAdapter';\nimport { BehaviorGroup, NewBehaviorGroup } from '../../types/Notification';\n\ntype Payload = Operations.NotificationServiceCreateBehaviorGroup.Payload\n    | Operations.NotificationServiceUpdateBehaviorGroup.Payload;\n\nconst decoder = validationResponseTransformer(\n    (payload: Payload) => {\n        if (payload.type === 'BehaviorGroup') {\n            return validatedResponse(\n                'BehaviorGroup',\n                payload.status,\n                toBehaviorGroup(payload.value),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nconst saveBehaviorGroupActionCreator =  (behaviorGroup: BehaviorGroup | NewBehaviorGroup) => {\n    if (behaviorGroup.id === undefined) {\n        return Operations.NotificationServiceCreateBehaviorGroup.actionCreator({\n            body: toShallowBehaviorGroupRequest(behaviorGroup)\n        });\n    }\n\n    return Operations.NotificationServiceUpdateBehaviorGroup.actionCreator({\n        id: behaviorGroup.id,\n        body: toShallowBehaviorGroupRequest(behaviorGroup)\n    });\n};\n\nexport const useSaveBehaviorGroupMutation = () => useTransformQueryResponse(\n    useMutation(saveBehaviorGroupActionCreator),\n    decoder\n);\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiPrivate';\nimport { UUID } from '../../types/Notification';\n\ntype UpdateBehaviorGroupActionsParams = {\n    behaviorGroupId: UUID;\n    endpointIds: Array<UUID>;\n}\n\nconst updateBehaviorGroupActionsActionCreator =  (params: UpdateBehaviorGroupActionsParams) => {\n    return Operations.NotificationServiceUpdateBehaviorGroupActions.actionCreator({\n        behaviorGroupId: params.behaviorGroupId,\n        body: params.endpointIds\n    });\n};\n\nexport const useUpdateBehaviorGroupActionsMutation = () => useMutation(updateBehaviorGroupActionsActionCreator);\n","import { addDangerNotification, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport { BehaviorGroupSaveModal } from '../../../components/Notifications/BehaviorGroup/BehaviorGroupSaveModal';\nimport { useGetIntegrations } from '../../../components/Notifications/useGetIntegrations';\nimport { useGetRecipients } from '../../../components/Notifications/useGetRecipients';\nimport { useSaveBehaviorGroupMutation } from '../../../services/Notifications/SaveBehaviorGroup';\nimport { useUpdateBehaviorGroupActionsMutation } from '../../../services/Notifications/UpdateBehaviorGroupActions';\nimport { deleteIntegrationActionCreator } from '../../../services/useDeleteIntegration';\nimport { createIntegrationActionCreator } from '../../../services/useSaveIntegration';\nimport { IntegrationType } from '../../../types/Integration';\nimport { Action, BehaviorGroup, NewBehaviorGroup, NotificationType, UUID } from '../../../types/Notification';\n\ninterface EditBehaviorGroupPageProps {\n    behaviorGroup?: Partial<BehaviorGroup>;\n    onClose: (saved: boolean) => void;\n}\n\nconst needsSaving = (original: Partial<BehaviorGroup> | undefined, updated: BehaviorGroup | NewBehaviorGroup) => {\n    return original?.id === undefined || original.displayName !== updated.displayName;\n};\n\nexport const EditBehaviorGroupPage: React.FunctionComponent<EditBehaviorGroupPageProps> = props => {\n    const getRecipients = useGetRecipients();\n    const getIntegrations = useGetIntegrations();\n\n    const saveBehaviorGroupMutation = useSaveBehaviorGroupMutation();\n    const updateBehaviorGroupActionsMutation = useUpdateBehaviorGroupActionsMutation();\n    const { query } = useContext(ClientContext);\n    const [ creatingIntegrations, setCreatingNotifications ] = React.useState<boolean>(false);\n\n    const onSave = React.useCallback(async (data: BehaviorGroup | NewBehaviorGroup) => {\n        const updateBehaviorGroupActions = updateBehaviorGroupActionsMutation.mutate;\n        const saveBehaviorGroup = saveBehaviorGroupMutation.mutate;\n\n        return (needsSaving(props.behaviorGroup, data) ?\n            saveBehaviorGroup(data).then(value => {\n                if (value.payload?.type === 'BehaviorGroup') {\n                    return value.payload.value.id;\n                } else if (value.payload?.status === 200) {\n                    return data.id;\n                }\n\n                throw new Error('Behavior group wasn\\'t saved');\n            }) : Promise.resolve(data.id)).then(behaviorGroupId => {\n\n            // Determine what Integrations we need to create (other than webhook)\n            const toCreate: Array<Action> = data.actions.filter(action => !action.integrationId);\n            if (toCreate.find(newAction => newAction.type !== NotificationType.EMAIL_SUBSCRIPTION)) {\n                throw new Error('Only email subscriptions are created when assigning behavior groups');\n            }\n\n            if (toCreate.length > 0) {\n                setCreatingNotifications(true);\n            }\n\n            return Promise.all(\n                toCreate.map(_ => query(createIntegrationActionCreator({\n                    type: IntegrationType.EMAIL_SUBSCRIPTION,\n                    name: 'Email subscription',\n                    isEnabled: true\n                }))\n                .then(result => result.payload?.type === 'Endpoint' ? result.payload.value.id : undefined)\n                )\n            ).then(newIds => {\n                return updateBehaviorGroupActions({\n                    behaviorGroupId: behaviorGroupId as UUID,\n                    endpointIds: data.actions.map(action => action.integrationId)\n                    .filter(id => id)\n                    .concat(newIds as Array<string>)\n                });\n            });\n        }).then(value => {\n            if (value.payload?.status === 200) {\n                // Delete non-user actions in the background; user doesn't need to wait.\n                (props.behaviorGroup?.actions ?? [])\n                .filter(action => action.type !== NotificationType.INTEGRATION)\n                .filter(action => !data.actions.find(newAction => newAction.integrationId === action.integrationId))\n                .map(oldNonUserAction =>  query(deleteIntegrationActionCreator(oldNonUserAction.integrationId)));\n\n                if (data.id === undefined) {\n                    addSuccessNotification(\n                        'New behavior group created',\n                        <>\n                            Group <b> { data.displayName } </b> created successfully.\n                        </>\n                    );\n                } else {\n                    addSuccessNotification(\n                        'Behavior group saved',\n                        <>\n                            Group <b> { data.displayName } </b> was saved successfully.\n                        </>\n                    );\n                }\n\n                return true;\n            }\n\n            if (data.id === undefined) {\n                addDangerNotification(\n                    'Behavior group failed to be created',\n                    <>\n                        Failed to create group <b> { data.displayName }</b>.\n                        <br />\n                        Please try again.\n                    </>\n                );\n            } else {\n                addDangerNotification(\n                    'Behavior group failed to save',\n                    <>\n                        Failed to save group <b> { data.displayName }</b>.\n                        <br />\n                        Please try again.\n                    </>\n                );\n            }\n\n            return false;\n        }).catch(err => {\n            console.error('Error saving behavior groups', err);\n            throw err;\n        });\n    }, [ saveBehaviorGroupMutation.mutate, updateBehaviorGroupActionsMutation.mutate, props.behaviorGroup, query ]);\n\n    const isSaving = React.useMemo(() => {\n        return creatingIntegrations || saveBehaviorGroupMutation.loading || updateBehaviorGroupActionsMutation.loading;\n    }, [ creatingIntegrations, saveBehaviorGroupMutation.loading, updateBehaviorGroupActionsMutation.loading ]);\n\n    return (\n        <BehaviorGroupSaveModal\n            data={ props.behaviorGroup }\n            isSaving={ isSaving }\n            onClose={ props.onClose }\n            onSave={ onSave }\n            getRecipients={ getRecipients }\n            getIntegrations={ getIntegrations }\n        />\n    );\n};\n","import {\n    Badge,\n    Button,\n    ButtonVariant,\n    ExpandableSection,\n    ExpandableSectionToggle,\n    SearchInput, Split,\n    SplitItem,\n    Stack,\n    StackItem,\n    Title\n} from '@patternfly/react-core';\nimport { global_BackgroundColor_100, global_palette_black_1000, global_spacer_lg } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport {\n    BehaviorGroupCardList,\n    BehaviorGroupCardListSkeleton\n} from '../../../components/Notifications/BehaviorGroup/BehaviorGroupCardList';\nimport { useDeleteModalReducer } from '../../../hooks/useDeleteModalReducer';\nimport {\n    useFormModalReducer } from '../../../hooks/useFormModalReducer';\nimport { BehaviorGroup, UUID } from '../../../types/Notification';\nimport { emptyImmutableArray } from '../../../utils/Immutable';\nimport { DeleteBehaviorGroupPage } from '../Form/DeleteBehaviorGroupPage';\nimport { EditBehaviorGroupPage } from '../Form/EditBehaviorGroupPage';\nimport { BehaviorGroupContent } from './useBehaviorGroupContent';\n\nconst expandableSectionClassName = {\n    backgroundColor: global_BackgroundColor_100.var,\n    paddingLeft: global_spacer_lg.var,\n    paddingRight: global_spacer_lg.var\n};\n\nconst sectionClassName = style(\n    expandableSectionClassName,\n    {\n        paddingBottom: global_spacer_lg.var\n    }\n);\n\nconst sectionTitleClassName = style(\n    expandableSectionClassName,\n    {\n        paddingTop: global_spacer_lg.var\n    }\n);\n\nconst titleClassName = style({\n    marginTop: '-0.15em',\n    color: global_palette_black_1000.var\n});\n\nconst emptyAddButtonClassName = style({\n    marginTop: '-0.2em'\n});\n\ninterface BehaviorGroupSectionProps {\n    bundleId: UUID;\n    behaviorGroupContent: BehaviorGroupContent;\n}\n\nexport const BehaviorGroupsSection: React.FunctionComponent<BehaviorGroupSectionProps> = props => {\n\n    const [ isExpanded, setExpanded ] = React.useState(true);\n    const [ filter, setFilter ] = React.useState<string>('');\n\n    const filteredBehaviors = React.useMemo(() => {\n        if (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError) {\n            const lowerCaseFilter = filter.toLowerCase();\n            return props.behaviorGroupContent.content.filter(bg => bg.displayName.toLowerCase().includes(lowerCaseFilter));\n        }\n\n        return emptyImmutableArray;\n    }, [ filter, props.behaviorGroupContent ]);\n\n    const [ editModalState, editModalActions ] = useFormModalReducer<BehaviorGroup>();\n    const [ deleteModalState, deleteModalActions ] = useDeleteModalReducer<BehaviorGroup>();\n\n    const createGroup = React.useCallback(() => {\n        editModalActions.create({\n            bundleId: props.bundleId\n        });\n    }, [ editModalActions, props.bundleId ]);\n\n    const onCloseModal = React.useCallback((saved: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (saved) {\n            reload();\n        }\n\n        editModalActions.reset();\n    }, [ editModalActions, props.behaviorGroupContent.reload ]);\n\n    const onEdit = React.useCallback((behaviorGroup: BehaviorGroup) => {\n        editModalActions.edit(behaviorGroup);\n    }, [ editModalActions ]);\n\n    const onDelete = React.useCallback((behaviorGroup: BehaviorGroup) => {\n        deleteModalActions.delete(behaviorGroup);\n    }, [ deleteModalActions ]);\n\n    const onCloseDelete = React.useCallback((deleted: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (deleted) {\n            reload();\n        }\n\n        deleteModalActions.reset();\n    }, [ deleteModalActions, props.behaviorGroupContent.reload ]);\n\n    const onClearFilter = React.useCallback(() => {\n        setFilter('');\n    }, [ setFilter ]);\n\n    const contentId = 'behavior-group-section-content';\n\n    return (\n        <div>\n            <div className={ sectionTitleClassName }>\n                <ExpandableSectionToggle\n                    isExpanded={ isExpanded }\n                    onToggle={ setExpanded }\n                    contentId={ contentId }\n                    direction=\"down\"\n                >\n                    <Split hasGutter>\n                        <SplitItem>\n                            <Title className={ titleClassName } headingLevel=\"h2\">Behavior groups</Title>\n                        </SplitItem>\n                        <SplitItem>\n                            { (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError) && (\n                                props.behaviorGroupContent.content.length > 0 ?\n                                    <Badge isRead>{ props.behaviorGroupContent.content.length }</Badge> :\n                                    <Button\n                                        className={ emptyAddButtonClassName }\n                                        variant={ ButtonVariant.primary }\n                                        onClick={ createGroup }\n                                        component='a'\n                                    >\n                                        Create new group\n                                    </Button>\n                            ) }\n                        </SplitItem>\n                    </Split>\n                </ExpandableSectionToggle>\n            </div>\n            <ExpandableSection\n                className={ sectionClassName }\n                contentId={ contentId }\n                isExpanded={ isExpanded }\n                onToggle={ setExpanded }\n                isDetached\n            >\n                <Stack hasGutter>\n                    <StackItem>\n                        Configure default actions for notifications recipients. Keep in mind that users will be able\n                        to change settings for all entitled events in User Preferences. You can prevent users from\n                        changing assigned actions by locking action / recipient pairings when creating or editing\n                        behavior groups.\n                    </StackItem>\n                    { (props.behaviorGroupContent.isLoading ||\n                        props.behaviorGroupContent.hasError ||\n                        props.behaviorGroupContent.content.length > 0) && (\n                        <>\n                            <StackItem>\n                                <Split hasGutter>\n                                    <SplitItem>\n                                        <SearchInput\n                                            value={ filter }\n                                            onChange={ setFilter }\n                                            onClear={ onClearFilter }\n                                            type=\"text\"\n                                            aria-label=\"Search by name\"\n                                            placeholder=\"Search by name\"\n                                            isDisabled={ props.behaviorGroupContent.isLoading }\n                                        />\n                                    </SplitItem>\n                                    <SplitItem>\n                                        <Button\n                                            isDisabled={ props.behaviorGroupContent.isLoading }\n                                            variant={ ButtonVariant.primary }\n                                            onClick={ createGroup }\n                                        >\n                                            Create new group\n                                        </Button>\n                                    </SplitItem>\n                                </Split>\n                            </StackItem>\n                            <StackItem>\n                                { props.behaviorGroupContent.isLoading ? (\n                                    <BehaviorGroupCardListSkeleton />\n                                ) : props.behaviorGroupContent.hasError ? (\n                                    <div>Error loading behavior groups</div>\n                                ) : (\n                                    <BehaviorGroupCardList onEdit={ onEdit } onDelete={ onDelete } behaviorGroups={ filteredBehaviors } />\n                                ) }\n                            </StackItem>\n                        </>\n                    ) }\n                </Stack>\n                { editModalState.isOpen && (\n                    <EditBehaviorGroupPage\n                        behaviorGroup={ editModalState.template }\n                        onClose={ onCloseModal }\n                    />\n                )}\n                { deleteModalState.isOpen && (\n                    <DeleteBehaviorGroupPage\n                        behaviorGroup={ deleteModalState.data }\n                        onClose={ onCloseDelete }\n                    />\n                ) }\n            </ExpandableSection>\n        </div>\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiPrivate';\nimport { toBehaviorGroup } from '../../types/adapters/BehaviorGroupAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst behaviorGroupDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceFindBehaviorGroupsByBundleId.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroups',\n                200,\n                payload.value.map(toBehaviorGroup),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetBehaviorGroups = (bundleId: UUID) => {\n    return useTransformQueryResponse(\n        useQuery(Operations.NotificationServiceFindBehaviorGroupsByBundleId.actionCreator({\n            bundleId\n        })),\n        behaviorGroupDecoder\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiPrivate';\nimport { UUID } from '../../types/Notification';\n\nexport const getBehaviorGroupByNotificationDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetLinkedBehaviorGroups.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroupId',\n                200,\n                payload.value.map(value => value.id),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const getBehaviorGroupByNotificationAction = (notificationId: UUID) =>\n    Operations.NotificationServiceGetLinkedBehaviorGroups.actionCreator({\n        eventTypeId: notificationId\n    });\n\nexport const useGetBehaviorGroupByNotification = (notificationId: UUID) => {\n    return useTransformQueryResponse(\n        useQuery(getBehaviorGroupByNotificationAction(notificationId)),\n        getBehaviorGroupByNotificationDecoder\n    );\n};\n","import { Operations } from '../../generated/OpenapiPrivate';\nimport { UUID } from '../../types/Notification';\nimport NotificationServiceUpdateEventTypeBehaviors = Operations.NotificationServiceUpdateEventTypeBehaviors;\n\nexport const linkBehaviorGroupAction = (notificationId: UUID, behaviorGroupIds: Array<UUID>) => {\n    return NotificationServiceUpdateEventTypeBehaviors.actionCreator({\n        body: behaviorGroupIds,\n        eventTypeId: notificationId\n    });\n};\n","import { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport produce, { castDraft } from 'immer';\nimport pLimit from 'p-limit';\nimport * as React from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { usePrevious } from 'react-use';\n\nimport { getBehaviorGroupByNotificationAction } from '../../../services/Notifications/GetBehaviorGroupByNotificationId';\nimport { linkBehaviorGroupAction } from '../../../services/Notifications/LinkBehaviorGroup';\nimport { toBehaviorGroup } from '../../../types/adapters/BehaviorGroupAdapter';\nimport { BehaviorGroup, Notification, NotificationBehaviorGroup, UUID } from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nexport type BehaviorGroupNotificationRow = NotificationBehaviorGroup & {\n    readonly loadingActionStatus: 'loading' | 'done' | 'error';\n    readonly behaviors: ReadonlyArray<BehaviorGroup>;\n} & (\n    {\n        readonly isEditMode: false;\n    } |\n    {\n        readonly isEditMode: true;\n        readonly oldBehaviors: ReadonlyArray<BehaviorGroup>;\n    }\n);\n\nconst getNotification = <T extends ReadonlyArray<BehaviorGroupNotificationRow>>(\n    rows: T,\n    notificationId: UUID): T[number] => {\n    const notification = rows.find(findById(notificationId));\n    if (!notification) {\n        throw new Error('Notification not found in rows');\n    }\n\n    return notification;\n};\n\nexport const useBehaviorGroupNotificationRows = (notifications: Array<Notification>) => {\n    const [ notificationRows, setNotificationRows ] = React.useState<Array<BehaviorGroupNotificationRow>>([]);\n    const prevNotificationInput = usePrevious(notifications);\n    const { query } = React.useContext(ClientContext);\n    const [ limit ] = React.useState<pLimit.Limit>(() => pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS));\n\n    const removeBehaviorGroup = React.useCallback((notificationId: UUID, behaviorGroupId: UUID) => {\n        setNotificationRows(produce(draft => {\n            const notification = getNotification(draft, notificationId);\n            const index = notification.behaviors.findIndex(findById(behaviorGroupId));\n            if (index === -1) {\n                throw new Error('Behavior group not found in rows');\n            }\n\n            notification.behaviors.splice(index, 1);\n        }));\n    }, [ setNotificationRows ]);\n\n    const updateBehaviorGroupLink = React.useCallback((notificationId: UUID, behaviorGroup: BehaviorGroup, linkBehavior: boolean) => {\n        if (linkBehavior) {\n            setNotificationRows(produce(draft => {\n                const notification = getNotification(draft, notificationId);\n                notification.behaviors.push({\n                    ...castDraft(behaviorGroup)\n                });\n            }));\n        } else {\n            removeBehaviorGroup(notificationId, behaviorGroup.id);\n        }\n    }, [ removeBehaviorGroup, setNotificationRows ]);\n\n    const setEditMode = React.useCallback(async (notificationId: UUID, command: 'edit' | 'finish' | 'cancel') => {\n\n        if (command === 'finish') {\n            const notification = getNotification(notificationRows, notificationId);\n            if (notification.isEditMode) {\n                setNotificationRows(produce(draft => {\n                    const draftNotification = getNotification(draft, notificationId);\n                    draftNotification.loadingActionStatus = 'loading';\n                }));\n\n                const response = await query(linkBehaviorGroupAction(notificationId, notification.behaviors.map(b => b.id)));\n                if (response.payload?.status === 200) {\n                    setNotificationRows(produce(draft => {\n                        const draftNotification = getNotification(draft, notificationId);\n                        draftNotification.isEditMode = false;\n                        draftNotification.loadingActionStatus = 'done';\n                    }));\n                } else {\n                    addDangerNotification(\n                        'Saving behavior',\n                        <>\n                            There was an error saving the behavior\n                             of <b>{notification.applicationDisplayName} - {notification.eventTypeDisplayName}</b>.\n                        </>\n                    );\n                    setNotificationRows(produce(draft => {\n                        const draftNotification = getNotification(draft, notificationId);\n                        draftNotification.isEditMode = true;\n                        draftNotification.loadingActionStatus = 'done';\n                    }));\n                }\n            }\n        } else {\n            setNotificationRows(produce(draft => {\n                const notification = getNotification(draft, notificationId);\n\n                if (notification.isEditMode && command === 'cancel') {\n                    notification.behaviors = notification.oldBehaviors;\n                }\n\n                notification.isEditMode = command === 'edit';\n                if (notification.isEditMode) {\n                    notification.oldBehaviors = notification.behaviors;\n                }\n            }));\n        }\n    }, [ setNotificationRows, notificationRows, query ]);\n\n    const startEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'edit');\n    }, [ setEditMode ]);\n\n    const finishEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'finish');\n    }, [ setEditMode ]);\n\n    const cancelEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'cancel');\n    }, [ setEditMode ]);\n\n    React.useEffect(() => {\n        if (notifications !== prevNotificationInput) {\n            setNotificationRows(_prev => notifications.map(notification => ({\n                ...notification,\n                loadingActionStatus: 'loading',\n                behaviors: [],\n                isEditMode: false\n            })));\n        }\n\n        if (notifications) {\n            limit.clearQueue();\n\n            notifications.map(notification => notification.id).forEach(notificationId => {\n                limit(() => query(getBehaviorGroupByNotificationAction(notificationId))).then(response => {\n                    setNotificationRows(produce(draft => {\n                        const draftNotification = getNotification(draft, notificationId);\n                        if (response.payload?.status === 200) {\n                            draftNotification.loadingActionStatus = 'done';\n                            draftNotification.behaviors = response.payload.value.map(toBehaviorGroup).map(bg => ({\n                                ...bg,\n                                isLoading: false,\n                                actions: castDraft(bg.actions)\n                            }));\n                        } else {\n                            draftNotification.loadingActionStatus = 'error';\n                            draftNotification.behaviors = [];\n                        }\n                    }));\n                });\n            });\n        }\n\n    }, [ notifications, limit, query, prevNotificationInput, setNotificationRows ]);\n\n    return {\n        rows: notificationRows,\n        updateBehaviorGroupLink,\n        startEditMode,\n        finishEditMode,\n        cancelEditMode\n    };\n};\n","import { useFilters, useUrlStateMultipleOptions, useUrlStateString } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport { useMemo } from 'react';\n\nimport { NotificationFilterColumn } from '../../../components/Notifications/Filter';\n\nconst DEBOUNCE_MS = 250;\n\nexport const useNotificationFilter = (initialAppOptions: Array<string>, debounce = DEBOUNCE_MS) => {\n    const useStateFactory = useMemo(() => {\n        const useUrlStateName = (defaultValue?: string) => useUrlStateString('name', defaultValue);\n        const useUrlStateApplication = (defaultValue?: Array<string>) => useUrlStateMultipleOptions(\n            'app',\n            initialAppOptions,\n            defaultValue\n        );\n        const useUrlStateAction = (defaultValue?: string) => useUrlStateString('action', defaultValue);\n\n        const useStateFactoryInternal = (column: NotificationFilterColumn) => {\n            switch (column) {\n                case NotificationFilterColumn.NAME:\n                    return useUrlStateName;\n                case NotificationFilterColumn.ACTION:\n                    return useUrlStateAction;\n                case NotificationFilterColumn.APPLICATION:\n                    return useUrlStateApplication;\n                default:\n                    assertNever(column);\n            }\n        };\n\n        return useStateFactoryInternal;\n        // This is an init param, so it doesn't need to recompute on change.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return useFilters(NotificationFilterColumn, debounce, useStateFactory);\n};\n","import { arrayValue, Filter, Operator, Page, Sort } from '@redhat-cloud-services/insights-common-typescript';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NotificationFilterColumn, NotificationFilters } from '../../../components/Notifications/Filter';\nimport { Facet } from '../../../types/Notification';\n\nexport interface UseNotificationPageReturn {\n    page: Page;\n    changePage: (page: number) => void;\n    changeItemsPerPage: (perPage: number) =>  void;\n}\n\nexport const useNotificationPage = (\n    filters: NotificationFilters,\n    bundle: Facet,\n    appFilterOptions: Array<Facet>,\n    defaultPerPage: number,\n    sort?: Sort): UseNotificationPageReturn => {\n    const [ currentPage, setCurrentPage ] = useState<number>(1);\n    const [ itemsPerPage, setItemsPerPage ] = useState<number>(defaultPerPage);\n\n    useEffect(() => setCurrentPage(1), [ setCurrentPage, filters ]);\n\n    const page = useMemo(() => {\n        const filter = new Filter();\n\n        const appFilter = filters[NotificationFilterColumn.APPLICATION];\n\n        if (appFilter) {\n            const appIds: Array<string> = [];\n            for (const appName of arrayValue(appFilter)) {\n                const filterOption = appFilterOptions.find(a => a.displayName === appName);\n                if (filterOption) {\n                    appIds.push(filterOption.id);\n                }\n            }\n\n            filter.and('applicationId', Operator.EQUAL, appIds);\n        }\n\n        filter.and('bundleId', Operator.EQUAL, bundle.id);\n\n        return Page.of(currentPage, itemsPerPage, filter, sort);\n    }, [ currentPage, itemsPerPage, sort, filters, appFilterOptions, bundle ]);\n\n    const changePage = useCallback((page: number) => setCurrentPage(page), [ setCurrentPage ]);\n    const changeItemsPerPage = useCallback((perPage: number) => {\n        setCurrentPage(1);\n        setItemsPerPage(perPage);\n    }, [ setCurrentPage ]);\n\n    return {\n        page,\n        changePage,\n        changeItemsPerPage\n    };\n};\n","import { global_spacer_xl } from '@patternfly/react-tokens';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport { ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { NotificationsBehaviorGroupTable } from '../../../components/Notifications/NotificationsBehaviorGroupTable';\nimport { NotificationsToolbar } from '../../../components/Notifications/Toolbar';\nimport { useListNotifications } from '../../../services/useListNotifications';\nimport { BehaviorGroup, Facet, NotificationBehaviorGroup, UUID } from '../../../types/Notification';\nimport { BehaviorGroupsSection } from './BehaviorGroupsSection';\nimport { useBehaviorGroupContent } from './useBehaviorGroupContent';\nimport { useBehaviorGroupNotificationRows } from './useBehaviorGroupNotificationRows';\nimport { useNotificationFilter } from './useNotificationFilter';\nimport { useNotificationPage } from './useNotificationPage';\n\ninterface BundlePageBehaviorGroupContentProps {\n    applications: Array<Facet>;\n    bundle: Facet;\n}\n\nconst behaviorGroupSectionClassName = style({\n    marginBottom: global_spacer_xl.var\n});\n\nconst emptyArray = [];\n\nexport const BundlePageBehaviorGroupContent: React.FunctionComponent<BundlePageBehaviorGroupContentProps> = props => {\n\n    const notificationsFilter = useNotificationFilter(props.applications.map(a => a.displayName.toString()));\n    const behaviorGroupContent = useBehaviorGroupContent(props.bundle.id);\n\n    const onExport = React.useCallback((type: ExporterType) => {\n        console.log('Export to', type);\n    }, []);\n\n    const notificationPage = useNotificationPage(notificationsFilter.debouncedFilters, props.bundle, props.applications, 10);\n    const useNotifications = useListNotifications(notificationPage.page);\n    const {\n        rows: notificationRows,\n        updateBehaviorGroupLink,\n        startEditMode,\n        finishEditMode,\n        cancelEditMode\n    } = useBehaviorGroupNotificationRows(\n        useNotifications.payload?.type === 'eventTypesArray' ? useNotifications.payload.value : emptyArray\n    );\n\n    const onBehaviorGroupLinkUpdated = React.useCallback((\n        notification: NotificationBehaviorGroup,\n        behaviorGroup: BehaviorGroup,\n        isLinked: boolean) => {\n        if (behaviorGroup) {\n            updateBehaviorGroupLink(notification.id, behaviorGroup, isLinked);\n        }\n    }, [ updateBehaviorGroupLink ]);\n\n    const onStartEditing = React.useCallback((notificationId: UUID) => {\n        startEditMode(notificationId);\n    }, [ startEditMode ]);\n\n    const onFinishEditing = React.useCallback((notificationId: UUID) => {\n        finishEditMode(notificationId);\n    }, [ finishEditMode ]);\n\n    const onCancelEditing = React.useCallback((notificationId: UUID) => {\n        cancelEditMode(notificationId);\n    }, [ cancelEditMode ]);\n\n    return (\n        <Section>\n            <div className={ behaviorGroupSectionClassName }>\n                <BehaviorGroupsSection\n                    bundleId={ props.bundle.id }\n                    behaviorGroupContent={ behaviorGroupContent }\n                />\n            </div>\n            <NotificationsToolbar\n                filters={ notificationsFilter.filters }\n                setFilters={ notificationsFilter.setFilters }\n                clearFilter={ notificationsFilter.clearFilter }\n                appFilterOptions={ props.applications }\n                onExport={ onExport }\n            >\n                <NotificationsBehaviorGroupTable\n                    notifications={ notificationRows }\n                    behaviorGroupContent={ behaviorGroupContent }\n                    onBehaviorGroupLinkUpdated={ onBehaviorGroupLinkUpdated }\n                    onStartEditing={ onStartEditing }\n                    onFinishEditing={ onFinishEditing }\n                    onCancelEditing={ onCancelEditing }\n                />\n            </NotificationsToolbar>\n        </Section>\n    );\n};\n","import * as React from 'react';\n\nimport { useGetBehaviorGroups } from '../../../services/Notifications/GetBehaviorGroups';\nimport { BehaviorGroup, UUID } from '../../../types/Notification';\n\nexport type BehaviorGroupContent = {\n    isLoading: true;\n    reload: () => void;\n} | {\n    isLoading: false;\n    hasError: true;\n    error: string;\n    reload: () => void;\n} | {\n    isLoading: false;\n    hasError: false;\n    content: Array<BehaviorGroup>;\n    reload: () => void;\n}\n\nexport const useBehaviorGroupContent = (bundleId: UUID) => {\n    const behaviorGroups = useGetBehaviorGroups(bundleId);\n\n    return React.useMemo<BehaviorGroupContent>(() => {\n        const payload = behaviorGroups.payload;\n        const error = behaviorGroups.errorObject;\n        const loading = behaviorGroups.loading;\n        const reload = behaviorGroups.query;\n\n        if (loading) {\n            return {\n                isLoading: true,\n                reload\n            };\n        }\n\n        if (payload?.status === 200) {\n            return {\n                isLoading: false,\n                hasError: false,\n                content: payload.value,\n                reload\n            };\n        }\n\n        return {\n            isLoading: false,\n            hasError: true,\n            error: error.toString(),\n            reload\n        };\n\n    }, [ behaviorGroups.payload, behaviorGroups.loading, behaviorGroups.errorObject, behaviorGroups.query ]);\n};\n","import { Button, ButtonVariant, Skeleton } from '@patternfly/react-core';\nimport {\n    c_skeleton_BackgroundColor, global_FontSize_sm, global_palette_black_300, global_spacer_md, global_spacer_xs\n} from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { cssRaw, style } from 'typestyle';\n\nimport { DefaultNotificationBehavior } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { ActionComponent } from './ActionComponent';\nimport { Recipient } from './Recipient';\n\nexport interface DefaultBehaviorProps extends OuiaComponentProps {\n    defaultBehavior?: DefaultNotificationBehavior;\n    onEdit?: () => void;\n    loading: boolean;\n}\n\ncssRaw(`\n    table.withDark300Skeleton .pf-c-skeleton {\n        ${c_skeleton_BackgroundColor.name}: ${global_palette_black_300.var} \n    }\n`);\n\nconst contentClassName = style({\n    backgroundColor: '#f0f0f0',\n    paddingTop: global_spacer_md.var,\n    paddingBottom: global_spacer_md.var,\n    paddingLeft: global_spacer_md.var,\n    paddingRight: global_spacer_md.var\n});\n\nconst tableClassName = style({\n    paddingTop: global_spacer_md.var,\n    display: 'block',\n    $nest: {\n        '& td, & th': {\n            paddingTop: global_spacer_xs.var,\n            paddingBottom: global_spacer_xs.var,\n            paddingLeft: global_spacer_md.var,\n            paddingRight: global_spacer_md.var,\n            fontSize: global_FontSize_sm.var\n        },\n        '& td:first-child, & th:first-child': {\n            paddingLeft: 0\n        },\n        '& thead:first-child th': {\n            paddingTop: 0\n        }\n    }\n});\n\nconst titleClassName = style({\n    fontWeight: 600\n});\n\nexport const DefaultBehavior: React.FunctionComponent<DefaultBehaviorProps> = (props) => {\n    return (\n        <div { ...getOuiaProps('Notifications/DefaultBehavior', props) } className={ contentClassName } >\n            <div className={ titleClassName }>\n                Default behavior <Button onClick={ props.onEdit } isDisabled={ !props.onEdit } variant={ ButtonVariant.link }>Edit defaults</Button>\n            </div>\n            <div>Default behavior applies to all notifications in a bundle. You can override this default for any specific event type.</div>\n            <table className={ `${tableClassName} withDark300Skeleton` }>\n                <thead>\n                    <tr>\n                        <th>Action</th>\n                        <th>Recipient</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    { props.loading ? (\n                        <>\n                            <tr>\n                                <td><Skeleton width=\"200px\" /></td>\n                                <td><Skeleton width=\"200px\" /></td>\n                            </tr>\n                            <tr>\n                                <td><Skeleton width=\"200px\" /></td>\n                                <td><Skeleton width=\"200px\" /></td>\n                            </tr>\n                            <tr>\n                                <td><Skeleton width=\"200px\" /></td>\n                                <td><Skeleton width=\"200px\" /></td>\n                            </tr>\n                        </>\n                    ) : props.defaultBehavior === undefined ? (\n                        <tr><td>Error while loading the default behavior. </td></tr>\n                    ) : (\n                        props.defaultBehavior?.actions.map((a, index) => {\n                            return (\n                                <tr key={ index }>\n                                    <td><ActionComponent isDefault={ false } action={ a } /></td>\n                                    <td> <Recipient action={ a } hasOutline /></td>\n                                </tr>\n                            );\n                        })\n                    )}\n                </tbody>\n            </table>\n        </div>\n    );\n};\n","import './Table.scss';\n\nimport { Button, ButtonVariant } from '@patternfly/react-core';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/Table/table';\nimport {\n    expandable,\n    ICell,\n    IRow,\n    IRowData,\n    RowWrapperProps,\n    Table,\n    TableBody,\n    TableHeader\n} from '@patternfly/react-table';\nimport { global_spacer_md, global_spacer_sm } from '@patternfly/react-tokens';\nimport { joinClasses, OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\nimport { cssRaw, style } from 'typestyle';\n\nimport { Messages } from '../../properties/Messages';\nimport { Notification } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { ActionComponent } from './ActionComponent';\nimport { Recipient } from './Recipient';\nimport { GroupByEnum } from './Types';\n\nconst pfBorderBottomClassName = style({\n    borderBottom: 'var(--pf-c-table--border-width--base) solid var(--pf-c-table--BorderColor)'\n});\n\nconst noBorderBottom = style({\n    borderBottom: 'none !important'\n});\n\nconst cellPaddingBottom = style({\n    paddingBottom: '0 !important'\n});\n\nconst actionCellStyle = style({\n    paddingLeft: `${global_spacer_md.var} !important`\n});\n\nconst cellPaddingBottomStyle = {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    '--pf-c-table__expandable-row-content--PaddingBottom': '0'\n} as any;\n\nconst cellPaddingTop = style({\n    paddingTop: `${global_spacer_sm.var} !important`\n} as any);\n\nconst cellPaddingTopStyle = {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    '--pf-c-table__expandable-row-content--PaddingTop': '0'\n} as any;\n\nconst grayFontClassName = style({\n    color: '#888'\n});\n\nconst noExpandableBorderClassName = style({\n    $nest: {\n        '&:after': {\n            borderLeft: 'none !important',\n            paddingBottom: '0 !important'\n        }\n    }\n});\n\nconst componentClassName = 'notification-table';\n\ncssRaw(`\n.${componentClassName} table {\n    --pf-c-table--m-compact__expandable-row-content--PaddingTop: ${global_spacer_sm.var};\n    --pf-c-table--m-compact__expandable-row-content--PaddingBottom: ${global_spacer_sm.var};\n}\n`);\n\nconst applicationGroupClassName = style({\n    fontWeight: 600\n});\n\nconst columns: Array<ICell> = [\n    {\n        title: Messages.components.notifications.table.columns.event,\n        transforms: [ ],\n        cellFormatters: [ expandable ]\n    },\n    {\n        title: Messages.components.notifications.table.columns.action,\n        transforms: []\n    },\n    {\n        title: Messages.components.notifications.table.columns.recipient,\n        transforms: []\n    },\n    {\n        title: ''\n    }\n];\n\nexport interface NotificationsTableProps extends OuiaComponentProps {\n    notifications: NotificationRows;\n    onCollapse: (index: number, isOpen: boolean) => void;\n    onEdit?: OnEditNotification;\n}\n\ntype NotificationRowBase = {\n    loadingActionStatus: 'loading' | 'done' | 'error';\n}\n\nexport type NotificationRowGroupedByNone = Notification & NotificationRowBase;\n\nexport interface NotificationRowGroupedByApplication {\n    applicationDisplayName: string;\n    notifications: Array<NotificationRowGroupedByNone>;\n    isOpen: boolean;\n}\n\nexport type NotificationRows = {\n    grouped: GroupByEnum.Application;\n    data: Array<NotificationRowGroupedByApplication>;\n} | {\n    grouped: GroupByEnum.None;\n    data: Array<NotificationRowGroupedByNone>;\n}\n\nexport type OnEditNotification = (notification: Notification) => void;\n\ninterface EventCellProps {\n    eventTypeDisplayName: string;\n    applicationDisplayName: string;\n}\n\nconst EventCell: React.FunctionComponent<EventCellProps> = (props) => (\n    <>\n        <div> { props.eventTypeDisplayName } </div>\n        <div className={ grayFontClassName }> { props.applicationDisplayName } </div>\n    </>\n);\n\nconst RowWrapper: React.FunctionComponent<RowWrapperProps> = (props) => {\n    const { trRef, className, rowProps, row, ...rest } = props;\n    if (!row) {\n        return <></>;\n    }\n\n    const rowClassName = (row as any).props?.className ? (row as any).props.className : '';\n\n    return (\n        <tr\n            { ...rest }\n            ref={ trRef as any }\n            className={ css(\n                className,\n                row.isExpanded !== undefined && styles.tableExpandableRow,\n                row.isExpanded && styles.modifiers.expanded,\n                rowClassName\n            ) }\n            hidden={ row?.isExpanded !== undefined && !row.isExpanded }\n        >\n            { props.children }\n        </tr>\n    );\n};\n\nconst toTableRowsGroupedByNone = (notifications: Array<NotificationRowGroupedByNone>, onEdit?: OnEditNotification, parent?: number) => {\n    return notifications.reduce((rows, notification) => {\n        const rowSpan = Math.max(1, notification.useDefault ? 1 : notification.actions?.length ?? 0);\n        const firstAction = notification.actions?.length ? notification.actions[0] : undefined;\n\n        rows.push({\n            id: `${parent !== undefined ? (parent.toString() + '-') : ''}${notification.id}`,\n            key: `${parent !== undefined ? (parent.toString() + '-') : ''}${notification.id}`,\n            cells: [\n                {\n                    title: <EventCell\n                        applicationDisplayName={ notification.applicationDisplayName }\n                        eventTypeDisplayName={ notification.eventTypeDisplayName }\n                    />,\n                    props: {\n                        rowSpan,\n                        className: joinClasses(\n                            noExpandableBorderClassName,\n                            pfBorderBottomClassName\n                        ),\n                        colSpan: parent === undefined ? 1 : 2\n                    }\n                },\n                {\n                    title: <><span><ActionComponent\n                        isDefault={ !!notification.useDefault }\n                        action={ firstAction }\n                        loading={ notification.loadingActionStatus === 'loading' }\n                        hasError={ notification.loadingActionStatus === 'error' }\n                    /></span></>,\n                    props: {\n                        className: joinClasses(actionCellStyle, cellPaddingBottom),\n                        style: cellPaddingBottomStyle\n                    }\n                },\n                {\n                    title: <><span>{ firstAction && <Recipient action={ firstAction } /> }</span></>,\n                    props: {\n                        className: cellPaddingBottom,\n                        style: cellPaddingBottomStyle\n                    }\n                },\n                {\n                    title: <><Button\n                        onClick={ () => onEdit && onEdit(notification) } isDisabled={ !onEdit }\n                        variant={ ButtonVariant.link }>Edit</Button></>,\n                    props: {\n                        className: cellPaddingBottom,\n                        style: cellPaddingBottomStyle\n                    }\n                }\n            ],\n            props: {\n                className: notification.actions?.length && notification.actions.length > 1 ? noBorderBottom : ''\n            }\n        });\n\n        if (parent !== undefined) {\n            rows[rows.length - 1].parent = parent;\n            rows[rows.length - 1].fullWidth = true;\n        }\n\n        for (let i = 1; i < rowSpan; ++i) {\n            if (notification.actions === undefined || notification.actions[i] === undefined) {\n                throw new Error(`Undefined notification.actions at index ${i}. ${notification.actions}`);\n            }\n\n            const classNames = joinClasses(\n                (i + 1 === rowSpan ? '' : cellPaddingBottom),\n                cellPaddingTop\n            );\n            const id = `${notification.id}-action-${i}`;\n            const cssStyle = {\n                ...cellPaddingTopStyle,\n                ...(i + 1 === rowSpan ? {} : cellPaddingBottomStyle)\n            };\n            rows.push({\n                id: `${parent !== undefined ? (parent.toString() + '-') : ''}${id}`,\n                key: `${parent !== undefined ? (parent.toString() + '-') : ''}${id}`,\n                cells: [\n                    {\n                        title: <ActionComponent\n                            isDefault={ !!notification.useDefault }\n                            action={ notification.actions[i] }\n                            loading={ notification.loadingActionStatus === 'loading' }\n                            hasError={ notification.loadingActionStatus === 'error' }\n                        />,\n                        props: {\n                            className: joinClasses(\n                                noExpandableBorderClassName,\n                                classNames,\n                                actionCellStyle\n                            ),\n                            style: cssStyle\n                        }\n                    },\n                    {\n                        title: <Recipient action={ notification.actions[i] } />,\n                        props: {\n                            className: classNames,\n                            style: cssStyle\n                        }\n                    },\n                    {\n                        props: {\n                            className: classNames,\n                            style: cssStyle\n                        }\n                    }\n                ],\n                props: {\n                    className: (i + 1 === rowSpan ? '' : noBorderBottom)\n                }\n            });\n\n            if (parent !== undefined) {\n                rows[rows.length - 1].parent = parent;\n                rows[rows.length - 1].fullWidth = true;\n            }\n        }\n\n        return rows;\n    }, [] as Array<IRow>);\n};\n\nconst toTableRowsGroupedByApplication = (applicationGroups: Array<NotificationRowGroupedByApplication>, onEdit?: OnEditNotification): Array<IRow> =>\n    applicationGroups.reduce((rows, applicationGroup) => {\n        rows.push({\n            id: applicationGroup.applicationDisplayName,\n            key: applicationGroup.applicationDisplayName,\n            cells: [\n                {\n                    title: <span className={ applicationGroupClassName }> Application: { applicationGroup.applicationDisplayName }</span>,\n                    props: {\n                        className: noExpandableBorderClassName\n                    }\n                },\n                {\n                    title: '',\n                    props: {\n                        colSpan: columns.length - 1\n                    }\n                }\n            ],\n            isOpen: applicationGroup.isOpen\n        });\n\n        rows.push(...toTableRowsGroupedByNone(applicationGroup.notifications, onEdit, rows.length - 1));\n\n        return rows;\n    }, [] as Array<IRow>);\n\nexport const NotificationsTable: React.FunctionComponent<NotificationsTableProps> = (props) => {\n\n    const rows = React.useMemo(() => {\n        const notifications = props.notifications;\n        switch (notifications.grouped) {\n            case GroupByEnum.Application:\n                return toTableRowsGroupedByApplication(notifications.data, props.onEdit);\n            case GroupByEnum.None:\n                return toTableRowsGroupedByNone(notifications.data, props.onEdit);\n            default:\n                assertNever(notifications);\n        }\n\n    }, [ props.notifications, props.onEdit ]);\n\n    const onCollapseHandler = React.useCallback((_event, _index: number, isOpen: boolean, data: IRowData) => {\n        const notifications = props.notifications;\n        const onCollapse = props.onCollapse;\n\n        if (notifications.grouped === GroupByEnum.None) {\n            throw new Error('Invalid group None for CollapseHandler');\n        }\n\n        const index = notifications.data.findIndex(n => n.applicationDisplayName === data.id);\n        if (onCollapse && index !== undefined && index !== -1) {\n            onCollapse(index, isOpen);\n        }\n\n    }, [ props.onCollapse, props.notifications ]);\n\n    return (\n        <div { ...getOuiaProps('Notifications/Table', props) } className={ componentClassName }>\n            <Table\n                aria-label={ Messages.components.notifications.table.title }\n                rows={ rows }\n                cells={ columns }\n                onCollapse={ onCollapseHandler }\n                rowWrapper={ RowWrapper as (props: RowWrapperProps) => React.ReactElement }\n                variant=\"compact\"\n            >\n                <TableHeader />\n                <TableBody />\n            </Table>\n        </div>\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport {\n    Operations\n} from '../generated/OpenapiNotifications';\nimport { toActions } from '../types/adapters/NotificationAdapter';\n\nexport const defaultNotificationBehaviorCreator = () => Operations.NotificationServiceGetEndpointsForDefaults.actionCreator();\n\nexport const defaultNotificationsDecoder = validationResponseTransformer((payload: Operations.NotificationServiceGetEndpointsForDefaults.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'DefaultNotificationBehavior',\n            200,\n            {\n                actions: toActions(payload.value)\n            },\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useDefaultNotificationBehavior = () => useTransformQueryResponse(\n    useQuery(defaultNotificationBehaviorCreator()),\n    defaultNotificationsDecoder\n);\n","import { Button, ButtonVariant } from '@patternfly/react-core';\nimport { TimesIcon } from '@patternfly/react-icons';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { Action, IntegrationRef } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { RecipientForm } from '../EditableActionRow/RecipientForm';\nimport { useEditableActionRow } from '../EditableActionRow/useEditableActionRow';\nimport { ActionTypeahead } from './ActionTypeahead';\n\nexport interface EditableActionTableProps {\n    actions: Array<Action>;\n    path: string;\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n    handleRemove?: (index: number) => () => void;\n    isDisabled?: boolean;\n}\n\ninterface EditableActionElementProps extends OuiaComponentProps {\n    path: string;\n    action: Action;\n    isDisabled?: boolean;\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n    onRemove?: () => void;\n}\n\nconst EditableActionRow: React.FunctionComponent<EditableActionElementProps> = (props) => {\n\n    const {\n        recipientSelected,\n        recipientOnClear,\n        integrationSelected,\n        actionSelected\n    } = useEditableActionRow(props.path);\n\n    return (\n        <tr>\n            <td>\n                <ActionTypeahead\n                    action={ props.action }\n                    onSelected={ actionSelected }\n                    isDisabled={ props.isDisabled }\n                    ouiaId={ `${props.ouiaId ? 'action-' + props.ouiaId : undefined}` }\n                />\n            </td>\n            <td>\n                <RecipientForm\n                    action={ props.action }\n                    integrationSelected={ integrationSelected }\n                    recipientSelected={ recipientSelected }\n                    recipientOnClear={ recipientOnClear }\n                    getIntegrations={ props.getIntegrations }\n                    getRecipients={ props.getRecipients }\n                />\n            </td>\n            <td>\n                <Button\n                    onClick={ props.onRemove }\n                    variant={ ButtonVariant.plain }\n                >\n                    <TimesIcon />\n                </Button>\n            </td>\n        </tr>\n    );\n};\n\nexport const EditableActionTable: React.FunctionComponent<EditableActionTableProps> = (props) => {\n\n    return (\n        <>\n            <thead { ...getOuiaProps('Notifications/Form/EditableActionHeader', {}) }>\n                <tr>\n                    <th>Action</th>\n                    <th>Recipient</th>\n                    <th />\n                </tr>\n            </thead>\n            <tbody { ...getOuiaProps('Notifications/Form/EditableActionBody', {}) }>\n                {\n                    props.actions.map((a, index) => {\n                        return (\n                            <EditableActionRow\n                                key={ index }\n                                ouiaId={ `${index}` }\n                                action={ a }\n                                isDisabled={ props.isDisabled }\n                                path={ `${props.path}.${index}` }\n                                getRecipients={ props.getRecipients }\n                                getIntegrations={ props.getIntegrations }\n                                onRemove={ props.handleRemove ? props.handleRemove(index) : undefined }\n                            />\n                        );\n                    })\n                }\n            </tbody>\n        </>\n    );\n};\n","import { Button, ButtonVariant } from '@patternfly/react-core';\nimport { PlusCircleIcon } from '@patternfly/react-icons';\nimport { global_spacer_md, global_spacer_sm } from '@patternfly/react-tokens';\nimport {\n    Checkbox,\n    Form,\n    FormText,\n    OuiaComponentProps,\n    ouiaIdConcat\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { FieldArray, FieldArrayRenderProps, FormikProps, useFormikContext } from 'formik';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { UserIntegrationType } from '../../types/Integration';\nimport {\n    Action,\n    DefaultNotificationBehavior,\n    IntegrationRef,\n    Notification,\n    NotificationType\n} from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { EditableActionTable } from './Form/EditableActionTable';\n\ntype Type = 'default' | 'notification';\n\nexport interface NotificationFormProps extends OuiaComponentProps {\n    type: Type;\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n}\n\ninterface ActionsArrayProps extends FieldArrayRenderProps {\n    form: FormikProps<Notification | DefaultNotificationBehavior>;\n    type: Type;\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n}\n\nconst alignLeftClassName = style({\n    textAlign: 'left',\n    paddingLeft: 0\n});\n\nconst tableClassName = style({\n    display: 'block',\n    $nest: {\n        '& td, & th': {\n            paddingTop: global_spacer_sm.var,\n            paddingBottom: global_spacer_sm.var,\n            paddingLeft: global_spacer_md.var,\n            paddingRight: global_spacer_md.var\n        },\n        '& th': {\n            width: '500px'\n        },\n        '& th:last-child': {\n            width: '80px'\n        },\n        '& td:first-child, & th:first-child': {\n            paddingLeft: 0\n        }\n    }\n});\n\nconst ActionArray: React.FunctionComponent<ActionsArrayProps> = (props) => {\n\n    const { values, isSubmitting } = props.form;\n    const actions = values.actions;\n\n    const addAction = React.useCallback(() => {\n        const push = props.push;\n        const newAction: Action = {\n            type: NotificationType.EMAIL_SUBSCRIPTION,\n            integrationId: '',\n            recipient: []\n        };\n\n        push(newAction);\n    }, [ props.push ]);\n\n    return (\n        <>\n            { (actions === undefined || actions.length === 0) && (\n                <tbody { ...getOuiaProps('Notifications/Form/NoActions', {}) }>\n                    <tr>\n                        <td colSpan={ 3 }><span>No actions. Users will not be notified.</span></td>\n                    </tr>\n                </tbody>\n            )}\n\n            { actions && actions.length > 0 && (\n                <EditableActionTable\n                    path={ props.name }\n                    actions={ actions }\n                    getRecipients={ props.getRecipients }\n                    getIntegrations={ props.getIntegrations }\n                    handleRemove={ props.handleRemove }\n                    isDisabled={ isSubmitting }\n                />\n            ) }\n            <tbody { ...getOuiaProps('Notifications/Form/Button', {}) }>\n                <tr>\n                    <td>\n                        <Button\n                            className={ alignLeftClassName }\n                            variant={ ButtonVariant.link }\n                            icon={ <PlusCircleIcon /> }\n                            onClick={ addAction }\n                            isDisabled={ isSubmitting }\n                        >\n                            Add action\n                        </Button>\n                    </td>\n                </tr>\n            </tbody>\n        </>\n    );\n};\n\nexport const NotificationForm: React.FunctionComponent<NotificationFormProps> = (props) => {\n\n    const { values, isSubmitting } = useFormikContext<Notification | DefaultNotificationBehavior>();\n    const { type } = props;\n\n    const showActions: boolean = type === 'default' ? true : !(values as Notification).useDefault;\n\n    return (\n        <div { ... getOuiaProps('Notifications/Form', props) }>\n            <Form>\n                <table className={ tableClassName }>\n                    { props.type === 'notification' && (\n                        <>\n                            <thead />\n                            <tbody { ...getOuiaProps('Notifications/Form/ApplicationHeader', {}) }>\n                                <tr>\n                                    <td>\n                                        <FormText\n                                            ouiaId={ ouiaIdConcat(props.ouiaId, 'event-name') }\n                                            label=\"Event name\"\n                                            name=\"eventTypeDisplayName\"\n                                            id=\"event\"\n                                        />\n                                    </td>\n                                    <td>\n                                        <FormText\n                                            ouiaId={ ouiaIdConcat(props.ouiaId, 'application') }\n                                            label=\"Application\"\n                                            name=\"applicationDisplayName\"\n                                            id=\"application\"\n                                        />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td colSpan={ 2 }>\n                                        <Checkbox\n                                            ouiaId={ ouiaIdConcat(props.ouiaId, 'use-default') }\n                                            name=\"useDefault\"\n                                            id=\"useDefault\"\n                                            label=\"Use default notification actions\"\n                                            isDisabled={ isSubmitting }\n                                        />\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </>\n                    ) }\n                    { props.type === 'default' && (\n                        <tbody { ...getOuiaProps('Notifications/Form/DefaultHeader', {}) }>\n                            <tr>\n                                <td colSpan={ 3 }>\n                                    <div>Change the default notification actions for <b>Red Hat Insights</b>.</div>\n                                    <div>These actions apply to all events that use the default actions.</div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    )}\n\n                    { showActions && (\n                        <>\n                            <FieldArray name=\"actions\">\n                                { helpers =>  <ActionArray\n                                    type={ props.type }\n                                    { ...helpers }\n                                    getRecipients={ props.getRecipients }\n                                    getIntegrations={ props.getIntegrations }\n                                /> }\n                            </FieldArray>\n                        </>\n                    ) }\n                </table>\n            </Form>\n        </div>\n    );\n};\n","import { ModalVariant } from '@patternfly/react-core';\nimport { SaveModal, SaveModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { WithActions } from '../../schemas/Integrations/Notifications';\nimport { UserIntegrationType } from '../../types/Integration';\nimport { DefaultNotificationBehavior, IntegrationRef, Notification } from '../../types/Notification';\nimport { NotificationForm } from './Form';\n\ntype DataFetcher = {\n    getRecipients: (search: string) => Promise<Array<string>>;\n    getIntegrations: (type: UserIntegrationType, search: string) => Promise<Array<IntegrationRef>>;\n}\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onSave';\nexport type NotificationSaveModalProps = Omit<SaveModalProps, UsedProps> & ({\n    type: 'default';\n    data: DefaultNotificationBehavior;\n    onSave: (dnb: DefaultNotificationBehavior) => boolean | Promise<boolean>;\n} | {\n    type: 'notification';\n    data: Notification;\n    onSave: (notification: Notification) => boolean | Promise<boolean>;\n}) & DataFetcher;\n\ninterface InternalProps extends DataFetcher {\n    onClose: (saved: boolean) => void;\n    type: NotificationSaveModalProps['type'];\n}\n\nconst InternalNotificationSaveModal: React.FunctionComponent<InternalProps> = (props) => {\n    const title =  `Edit${props.type === 'default' && ' default' || ''} notification actions`;\n\n    const { handleSubmit, isValid, isSubmitting } = useFormikContext<Notification | DefaultNotificationBehavior>();\n\n    const onSaveClicked = React.useCallback(() => {\n        handleSubmit();\n        return false;\n    }, [ handleSubmit ]);\n\n    return (\n        <SaveModal\n            content={ <NotificationForm\n                type={ props.type }\n                getRecipients={ props.getRecipients }\n                getIntegrations={ props.getIntegrations }\n            /> }\n            isSaving={ isSubmitting }\n            onSave={ onSaveClicked }\n            isOpen={ true }\n            title={ title }\n            onClose={ props.onClose }\n            variant={ ModalVariant.large }\n            actionButtonDisabled={ !isValid }\n        />\n    );\n};\n\nexport const NotificationSaveModal: React.FunctionComponent<NotificationSaveModalProps> = (props) => {\n\n    const onSubmit = React.useCallback(async (data: Notification | DefaultNotificationBehavior) => {\n        const onClose = props.onClose;\n        let saved = false;\n        if (props.type === 'notification') {\n            const onSave = props.onSave;\n            saved = await onSave(data as Notification);\n        } else if (props.type === 'default') {\n            const onSave = props.onSave;\n            saved = await onSave(data as DefaultNotificationBehavior);\n        }\n\n        if (saved) {\n            onClose(true);\n        }\n    }, [ props.onSave, props.onClose, props.type ]);\n\n    return (\n        <Formik<Notification | DefaultNotificationBehavior>\n            initialValues={ props.data }\n            validationSchema={ WithActions }\n            onSubmit={ onSubmit }\n            validateOnMount={ true }\n        >\n            <InternalNotificationSaveModal\n                type={ props.type }\n                onClose={ props.onClose }\n                getRecipients={ props.getRecipients }\n                getIntegrations={ props.getIntegrations }\n            />\n        </Formik>\n    );\n};\n","import { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\n\nimport {\n    Operations, Schemas\n} from '../../generated/OpenapiIntegrations';\n\nexport const getDefaultActionIdAction = () => Operations.EndpointServiceCreateEndpoint.actionCreator({\n    body: {\n        type: Schemas.EndpointType.enum.default,\n        name: 'Default endpoint type',\n        description: '',\n        enabled: true,\n        properties: null\n    }\n});\n\nexport const getDefaultActionIdDecoder = validationResponseTransformer((payload: Operations.EndpointServiceCreateEndpoint.Payload) => {\n    if (payload.type === 'Endpoint') {\n        return validatedResponse(\n            'DefaultNotificationId',\n            payload.status,\n            payload.value.id as string,\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n","import { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\n\nimport {\n    Operations, Schemas\n} from '../generated/OpenapiNotifications';\nimport { toActions } from '../types/adapters/NotificationAdapter';\nimport { UUID } from '../types/Notification';\n\nexport const getNotificationActionsByIdAction = (eventTypeId: UUID) => {\n    return Operations.NotificationServiceGetLinkedEndpoints.actionCreator({\n        eventTypeId\n    });\n};\n\nexport const hasDefaultNotificationDecoder = validationResponseTransformer((payload: Operations.NotificationServiceGetLinkedEndpoints.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'defaultNotification',\n            200,\n            payload.value.findIndex(a => a.type === Schemas.EndpointType.enum.default) !== -1,\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const getNotificationByIdActionDecoder = validationResponseTransformer((payload: Operations.NotificationServiceGetLinkedEndpoints.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'actionsArray',\n            200,\n            toActions(payload.value),\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n","import {\n    addDangerNotification,\n    addSuccessNotification\n} from '@redhat-cloud-services/insights-common-typescript';\nimport assertNever from 'assert-never';\nimport pLimit from 'p-limit';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport { NotificationSaveModal } from '../../../components/Notifications/SaveModal';\nimport { useGetIntegrations } from '../../../components/Notifications/useGetIntegrations';\nimport { useGetRecipients } from '../../../components/Notifications/useGetRecipients';\nimport {\n    getDefaultActionIdAction,\n    getDefaultActionIdDecoder\n} from '../../../services/Notifications/GetDefaultActionId';\nimport { actionAddActionToDefault } from '../../../services/useAddActionToDN';\nimport { actionAddActionToNotification } from '../../../services/useAddActionToNotification';\nimport {\n    defaultNotificationBehaviorCreator,\n    defaultNotificationsDecoder\n} from '../../../services/useDefaultNotificationBehavior';\nimport {\n    getNotificationActionsByIdAction,\n    getNotificationByIdActionDecoder,\n    hasDefaultNotificationDecoder\n} from '../../../services/useGetNotificationActions';\nimport { actionRemoveActionFromDefault } from '../../../services/useRemoveActionFromDN';\nimport { actionRemoveActionFromNotification } from '../../../services/useRemoveActionFromNotification';\nimport { createIntegrationActionCreator } from '../../../services/useSaveIntegration';\nimport { IntegrationType } from '../../../types/Integration';\nimport {\n    Action,\n    DefaultNotificationBehavior,\n    Notification,\n    NotificationType\n} from '../../../types/Notification';\n\ninterface EditNotificationPagePropsNotification {\n    type: 'notification';\n    data: Notification;\n}\n\ninterface EditNotificationPagePropsDefault {\n    type: 'default';\n    data: DefaultNotificationBehavior;\n}\n\nexport type EditNotificationPageProps = {\n    onClose: (saved: boolean) => void;\n} & (EditNotificationPagePropsNotification | EditNotificationPagePropsDefault);\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nexport const EditNotificationPage: React.FunctionComponent<EditNotificationPageProps> = (props) => {\n\n    const { query } = useContext(ClientContext);\n\n    const getRecipients = useGetRecipients();\n    const getIntegrations = useGetIntegrations();\n\n    const onSave = React.useCallback(async (data: Notification | DefaultNotificationBehavior) => {\n        const idMapper = (a: Action) => {\n            if (a.type !== NotificationType.INTEGRATION && a.type !== NotificationType.EMAIL_SUBSCRIPTION) {\n                throw new Error('Only integrations and EmailSubscription are supported');\n            }\n\n            return a.integrationId;\n        };\n\n        const type = props.type;\n        if (type !== 'notification' && type !== 'default') {\n            assertNever(type);\n        }\n\n        let oldActions: Array<Action> | undefined;\n        let oldUseDefault: boolean | undefined;\n        if (props.type === 'default') {\n            oldActions = await query(defaultNotificationBehaviorCreator())\n            .then(r => r.payload ? defaultNotificationsDecoder(r.payload) : r.payload)\n            .then(p => p?.type === 'DefaultNotificationBehavior' ? p.value.actions : undefined);\n\n            oldUseDefault = false;\n        } else if (props.type === 'notification') {\n            const id = props.data.id;\n            const actionsPromise = query(getNotificationActionsByIdAction(id));\n\n            oldActions = await actionsPromise\n            .then(r => r.payload ? getNotificationByIdActionDecoder(r.payload) : r.payload)\n            .then(p => p?.type === 'actionsArray' ? p.value : undefined);\n\n            oldUseDefault = await actionsPromise\n            .then(r => r.payload ? hasDefaultNotificationDecoder(r.payload) : r.payload)\n            .then(p => p?.type === 'defaultNotification' ? p.value : undefined);\n        }\n\n        const newUseDefault = props.type === 'notification' ? (data as Notification).useDefault : false;\n        let defaultActionId: string | undefined;\n\n        if (newUseDefault !== oldUseDefault) {\n            defaultActionId = await query(getDefaultActionIdAction())\n            .then(r => r.payload ? getDefaultActionIdDecoder(r.payload) : undefined)\n            .then(p => p?.type === 'DefaultNotificationId' ? p.value : undefined);\n        } else {\n            defaultActionId = 'nothing';\n        }\n\n        if (!oldActions || oldUseDefault === undefined || defaultActionId === undefined) {\n            addDangerNotification('Error updating actions', 'Failed to update actions. Please try again.');\n            return false;\n        }\n\n        const limit = pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS);\n\n        const originalIds = oldActions.map(idMapper);\n        const newActions = data.actions ?? [];\n        const newIds = newActions.map((a, i) => a.integrationId === '' ? { ...a, integrationId: `new${i}` } : a).map(idMapper);\n\n        const nonUserIntegrationsPromises: Array<Promise<boolean>> = [];\n\n        newActions.map((a, index) => {\n            if (a.integrationId === '' && a.type === NotificationType.EMAIL_SUBSCRIPTION) {\n                nonUserIntegrationsPromises.push(limit(() => {\n                    return query(createIntegrationActionCreator({\n                        type: IntegrationType.EMAIL_SUBSCRIPTION,\n                        name: 'Email subscription',\n                        isEnabled: true\n                    }))\n                    .then(r => r.payload?.type === 'Endpoint' ? r.payload.value.id : undefined)\n                    .then(id => {\n                        if (id) {\n                            // Sanity check\n                            if (newIds[index] !== `new${index}`) {\n                                throw new Error(`Sync error, expected new${index} but found ${newIds[index]}`);\n                            }\n\n                            newIds[index] = id;\n                            return true;\n                        }\n\n                        return false;\n                    });\n                }));\n                // New, we need add this integration\n            }\n        });\n\n        if (nonUserIntegrationsPromises.length) {\n            const created = await Promise.all(nonUserIntegrationsPromises.map(p => p.catch(() => false))).then(all => all.every(e => e));\n            if (!created) {\n                addDangerNotification('Actions not added/removed', 'Some actions were not correctly added or removed. Please try again.');\n                return false;\n            }\n        }\n\n        let toDelete: Array<string>;\n        let toAdd: Array<string>;\n\n        if (newUseDefault) {\n            toDelete = originalIds.reduce<Array<string>>((arr, val) => {\n                if (!arr.includes(val)) {\n                    arr.push(val);\n                }\n\n                return arr;\n            }, []);\n\n            if (!oldUseDefault) {\n                toAdd = [ defaultActionId ];\n            } else {\n                toAdd = [];\n            }\n\n        } else {\n            toDelete = originalIds.reduce<Array<string>>((arr, val) => {\n                if (!newIds.includes(val) && !arr.includes(val)) {\n                    arr.push(val);\n                }\n\n                return arr;\n            }, []);\n\n            if (oldUseDefault) {\n                toDelete.push(defaultActionId);\n            }\n\n            toAdd = newIds.reduce<Array<string>>((arr, val) => {\n                if (!originalIds.includes(val) && !arr.includes(val)) {\n                    arr.push(val);\n                }\n\n                return arr;\n            }, []);\n        }\n\n        if (toAdd.length === 0 && toDelete.length === 0) {\n            // Nothing to update, display to the user that all was updated?\n            addSuccessNotification('Actions updated', 'All the actions were updated.');\n            return true;\n        }\n\n        const promises: Array<Promise<boolean>> = [];\n\n        if (props.type === 'notification') {\n            const notificationId = props.data.id;\n            promises.push(...toDelete.map(id => limit(() =>\n                query(actionRemoveActionFromNotification(notificationId, id)).then(r => !r.error))));\n            promises.push(...toAdd.map(id => limit(() => query(actionAddActionToNotification(notificationId, id)).then(r => !r.error))));\n        } else if (props.type === 'default') {\n            promises.push(...toDelete.map(id => limit(() => query(actionRemoveActionFromDefault(id)).then(r => !r.error))));\n            promises.push(...toAdd.map(id => limit(() => query(actionAddActionToDefault(id)).then(r => !r.error))));\n        }\n\n        const saved = await Promise.all(promises.map(p => p.catch(() => false))).then(all => all.every(e => e));\n\n        if (saved) {\n            addSuccessNotification('Actions updated', 'All the actions were updated.');\n        } else {\n            addDangerNotification('Actions not added/removed', 'Some actions were not correctly added or removed. Please try again.');\n        }\n\n        return saved;\n    }, [ props.type, query, props.data ]);\n\n    return (\n        <NotificationSaveModal\n            onSave={ onSave }\n            isSaving={ false }\n            { ...props }\n            getRecipients={ getRecipients }\n            getIntegrations={ getIntegrations }\n        />\n    );\n};\n","import { Operations  } from '../generated/OpenapiNotifications';\nimport { UUID } from '../types/Notification';\n\nexport const actionRemoveActionFromNotification = (notificationId: UUID, actionId: UUID) => {\n    return Operations.NotificationServiceUnlinkEndpointFromEventType.actionCreator({\n        endpointId: actionId,\n        eventTypeId: notificationId\n    });\n};\n","import { Operations } from '../generated/OpenapiNotifications';\nimport { UUID } from '../types/Notification';\n\nexport const actionAddActionToNotification = (notificationId: UUID, actionId: UUID) => {\n    return Operations.NotificationServiceLinkEndpointToEventType.actionCreator({\n        endpointId: actionId,\n        eventTypeId: notificationId\n    });\n};\n","import { Operations } from '../generated/OpenapiNotifications';\nimport { UUID } from '../types/Notification';\n\nexport const actionRemoveActionFromDefault = (actionId: UUID) =>\n    Operations.NotificationServiceDeleteEndpointFromDefaults.actionCreator({\n        endpointId: actionId\n    });\n","import { Operations } from '../generated/OpenapiNotifications';\n\nexport const actionAddActionToDefault = (actionId: string) =>\n    Operations.NotificationServiceAddEndpointToDefaults.actionCreator({\n        endpointId: actionId\n    });\n","import { assertNever } from 'assert-never';\nimport { useReducer } from 'react';\n\nimport { DefaultNotificationBehavior, Notification } from '../../../types/Notification';\n\nenum UseFormModalReducerActionType {\n    EDIT_NOTIFICATION = 'edit-notification',\n    EDIT_DEFAULTS = 'edit-defaults',\n    NONE = 'none'\n}\n\ninterface UseFormModalReducerActionEditNotification {\n    type: UseFormModalReducerActionType.EDIT_NOTIFICATION;\n    template: Notification;\n}\n\ninterface UseFormModalReducerActionEditDefault {\n    type: UseFormModalReducerActionType.EDIT_DEFAULTS;\n    template: DefaultNotificationBehavior;\n}\n\ninterface UseFormModalReducerActionNone {\n    type: UseFormModalReducerActionType.NONE;\n}\n\ntype UseFormModalReducerAction = UseFormModalReducerActionEditNotification | UseFormModalReducerActionEditDefault | UseFormModalReducerActionNone;\n\ntype UseFormModalReducerState = {\n    isOpen: false;\n} | ({\n    isOpen: true;\n} & ({\n    type: 'default';\n    data: DefaultNotificationBehavior;\n} | {\n    type: 'notification';\n    data: Notification;\n}))\n\nconst noneState = {\n    isOpen: false as const\n};\n\nconst reducer = (state: UseFormModalReducerState, action: UseFormModalReducerAction): UseFormModalReducerState => {\n    switch (action.type) {\n        case UseFormModalReducerActionType.EDIT_DEFAULTS:\n            return {\n                isOpen: true,\n                type: 'default',\n                data: action.template\n            };\n        case UseFormModalReducerActionType.EDIT_NOTIFICATION:\n            return {\n                isOpen: true,\n                type: 'notification',\n                data: action.template\n            };\n        case UseFormModalReducerActionType.NONE:\n            return noneState;\n        default:\n            assertNever(action);\n    }\n};\n\nexport const makeEditNotificationAction = (template: Notification): UseFormModalReducerActionEditNotification => ({\n    type: UseFormModalReducerActionType.EDIT_NOTIFICATION,\n    template\n});\n\nexport const makeEditDefaultAction = (template: DefaultNotificationBehavior): UseFormModalReducerActionEditDefault => ({\n    type: UseFormModalReducerActionType.EDIT_DEFAULTS,\n    template\n});\n\nexport const makeNoneAction = (): UseFormModalReducerActionNone => ({\n    type: UseFormModalReducerActionType.NONE\n});\n\nexport const useFormModalReducer = () => {\n    return useReducer(reducer, noneState);\n};\n","import { assertNever } from 'assert-never';\nimport pLimit from 'p-limit';\nimport { default as React, useCallback, useContext, useEffect, useState } from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { usePrevious } from 'react-use';\n\nimport {\n    NotificationRowGroupedByApplication,\n    NotificationRowGroupedByNone,\n    NotificationRows\n} from '../../../components/Notifications/Table';\nimport { GroupByEnum } from '../../../components/Notifications/Types';\nimport { getNotificationActionsByIdAction } from '../../../services/useGetNotificationActions';\nimport { toActions, usesDefault } from '../../../types/adapters/NotificationAdapter';\nimport { Notification, UUID } from '../../../types/Notification';\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nconst toRowsGroupByNone = (notification: Notification): NotificationRowGroupedByNone => ({\n    loadingActionStatus: 'loading',\n    ...notification\n});\n\nconst findNotificationPath = (rows: Array<NotificationRowGroupedByApplication>, id: UUID): [number, number] => {\n    for (let i = 0; i < rows.length; ++i) {\n        for (let j = 0; j < rows[i].notifications.length; ++j) {\n            if (rows[i].notifications[j].id === id) {\n                return [ i, j ];\n            }\n        }\n    }\n\n    return [ -1, -1 ];\n};\n\nconst toRowGroupByApplication = (notifications: Array<Notification>): Array<NotificationRowGroupedByApplication> => {\n    const grouped = notifications.reduce((groups, notification) => {\n        if (!groups[notification.applicationDisplayName]) {\n            groups[notification.applicationDisplayName] = {\n                applicationDisplayName: notification.applicationDisplayName,\n                isOpen: true,\n                notifications: []\n            };\n        }\n\n        groups[notification.applicationDisplayName].notifications.push(toRowsGroupByNone(notification));\n        return groups;\n    }, {} as Record<string, NotificationRowGroupedByApplication>);\n\n    return Object.values(grouped);\n};\n\nexport const useNotificationRows = (notifications: Array<Notification>, groupBy: GroupByEnum) => {\n\n    const [ notificationRows, setNotificationRows ] = useState<NotificationRows>({\n        data: [],\n        grouped: GroupByEnum.Application\n    });\n    const prevNotificationInput = usePrevious(notifications);\n    const prevGroupBy = usePrevious(groupBy);\n    const { query } = useContext(ClientContext);\n    const [ limit ] = useState<pLimit.Limit>(() => pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS));\n\n    const setNotificationRowById = useCallback((id: UUID, partialNotificationRow: Partial<NotificationRowGroupedByNone>) => {\n        setNotificationRows(prev => {\n            if (prev.grouped === GroupByEnum.Application) {\n                const [ appIndex, notificationIndex ] = findNotificationPath(prev.data, id);\n\n                if (appIndex === -1) {\n                    return prev;\n                }\n\n                const newApps: Array<NotificationRowGroupedByApplication> = [ ...prev.data ];\n                newApps[appIndex] = { ...newApps[appIndex], notifications: [ ...newApps[appIndex].notifications ]};\n                newApps[appIndex].notifications[notificationIndex] = {\n                    ...newApps[appIndex].notifications[notificationIndex],\n                    ...partialNotificationRow\n                };\n\n                return {\n                    ...prev,\n                    data: newApps\n                };\n            } else if (prev.grouped === GroupByEnum.None) {\n                const index = prev.data.findIndex(n => n.id === id);\n                if (index === -1) {\n                    return prev;\n                }\n\n                const newNotifications = [ ...prev.data ];\n                newNotifications[index] = { ...newNotifications[index], ...partialNotificationRow };\n                return {\n                    ...prev,\n                    data: newNotifications\n                };\n            } else {\n                assertNever(prev);\n            }\n        });\n    }, [ setNotificationRows ]);\n\n    useEffect(() => {\n        if (notifications !== prevNotificationInput || groupBy !== prevGroupBy) {\n            setNotificationRows(_prev => {\n                switch (groupBy) {\n                    case GroupByEnum.None:\n                        return {\n                            grouped: GroupByEnum.None,\n                            data: notifications.map(toRowsGroupByNone)\n                        };\n                    case GroupByEnum.Application:\n                        return {\n                            grouped: GroupByEnum.Application,\n                            data: toRowGroupByApplication(notifications)\n                        };\n                    default:\n                        assertNever(groupBy);\n                }\n            });\n\n            if (notifications) {\n                limit.clearQueue();\n\n                notifications.map(notification => notification.id).forEach(notificationId => {\n                    limit(() => query(getNotificationActionsByIdAction(notificationId))).then(response => {\n                        if (response.payload && response.payload.status === 200) {\n                            setNotificationRowById(notificationId, {\n                                loadingActionStatus: 'done',\n                                actions: toActions(response.payload.value),\n                                useDefault: usesDefault(response.payload.value)\n                            });\n                        } else {\n                            setNotificationRowById(notificationId, {\n                                loadingActionStatus: 'error',\n                                actions: []\n                            });\n                        }\n                    });\n                });\n            }\n        }\n    }, [ groupBy, prevGroupBy, notifications, prevNotificationInput, limit, query, setNotificationRowById ]);\n\n    const onCollapse = React.useCallback((index: number, isOpen: boolean) => {\n        setNotificationRows(prevRows => {\n            switch (prevRows.grouped) {\n                case GroupByEnum.None:\n                    throw new Error('On collapse is not valid for group: None');\n                case GroupByEnum.Application:\n                    const data = [\n                        ...prevRows.data\n                    ];\n\n                    data[index] = {\n                        ...data[index],\n                        isOpen\n                    };\n\n                    return {\n                        ...prevRows,\n                        data\n                    };\n                default:\n                    assertNever(prevRows);\n            }\n        });\n    }, [ setNotificationRows ]);\n\n    return {\n        rows: notificationRows,\n        onCollapse\n    };\n};\n","import { global_spacer_md } from '@patternfly/react-tokens';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport { ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { style } from 'typestyle';\n\nimport { AppContext } from '../../../app/AppContext';\nimport { DefaultBehavior } from '../../../components/Notifications/DefaultBehavior';\nimport { NotificationsTable } from '../../../components/Notifications/Table';\nimport { NotificationsToolbar } from '../../../components/Notifications/Toolbar';\nimport { GroupByEnum } from '../../../components/Notifications/Types';\nimport { useDefaultNotificationBehavior } from '../../../services/useDefaultNotificationBehavior';\nimport { useListNotifications } from '../../../services/useListNotifications';\nimport { Facet, Notification } from '../../../types/Notification';\nimport { EditNotificationPage } from '../Form/EditNotificationPage';\nimport {\n    makeEditDefaultAction,\n    makeEditNotificationAction,\n    makeNoneAction,\n    useFormModalReducer\n} from './useFormModalReducer';\nimport { useNotificationFilter } from './useNotificationFilter';\nimport { useNotificationPage } from './useNotificationPage';\nimport { useNotificationRows } from './useNotificationRows';\n\nconst tableTitleClassName = style({\n    fontWeight: 600,\n    paddingTop: global_spacer_md.var,\n    paddingBottom: global_spacer_md.var,\n    fontSize: '17px'\n});\n\nconst emptyArray = [];\n\ninterface BundlePageContentProps {\n    applications: Array<Facet>;\n    bundle: Facet;\n}\n\nexport const BundlePageContent: React.FunctionComponent<BundlePageContentProps> = props => {\n\n    const { rbac: { canWriteNotifications }} = useContext(AppContext);\n    const defaultNotificationBehavior = useDefaultNotificationBehavior();\n\n    const notificationsFilter = useNotificationFilter(props.applications.map(a => a.displayName.toString()));\n    const [ groupBy, setGroupBy ] = React.useState<GroupByEnum>(GroupByEnum.Application);\n    const groupBySelected = React.useCallback((selected: GroupByEnum) => {\n        setGroupBy(selected);\n    }, [ setGroupBy ]);\n\n    const notificationPage = useNotificationPage(notificationsFilter.debouncedFilters, props.bundle, props.applications, 10);\n\n    const useNotifications = useListNotifications(notificationPage.page);\n    const {\n        rows: notificationRows,\n        onCollapse\n    } = useNotificationRows(\n        useNotifications.payload?.type === 'eventTypesArray' ? useNotifications.payload.value : emptyArray,\n        groupBy\n    );\n\n    const [ modalIsOpenState, dispatchModalIsOpen ] = useFormModalReducer();\n\n    const closeFormModal = React.useCallback((saved: boolean) => {\n        const updateDefaultNotifications = defaultNotificationBehavior.query;\n        const updateNotifications = useNotifications.query;\n        if (saved && modalIsOpenState.isOpen) {\n            if (modalIsOpenState.type === 'default') {\n                updateDefaultNotifications();\n            } else if (modalIsOpenState.type === 'notification') {\n                updateNotifications();\n            }\n        }\n\n        dispatchModalIsOpen(makeNoneAction());\n    }, [ dispatchModalIsOpen, defaultNotificationBehavior.query, modalIsOpenState, useNotifications.query ]);\n\n    const onExport = React.useCallback((type: ExporterType) => {\n        console.log('Export to', type);\n    }, []);\n\n    const onEditDefaultAction = React.useCallback(() => {\n        const payload = defaultNotificationBehavior.payload;\n        if (payload?.type === 'DefaultNotificationBehavior') {\n            dispatchModalIsOpen(makeEditDefaultAction(payload.value));\n        }\n    }, [ dispatchModalIsOpen, defaultNotificationBehavior.payload ]);\n\n    const onEditNotification = React.useCallback((notification: Notification) => {\n        dispatchModalIsOpen(makeEditNotificationAction(notification));\n    }, [ dispatchModalIsOpen ]);\n\n    return (\n        <Section>\n            <DefaultBehavior\n                loading={ defaultNotificationBehavior.loading }\n                defaultBehavior={ defaultNotificationBehavior.payload?.type === 'DefaultNotificationBehavior' ?\n                    defaultNotificationBehavior.payload.value :\n                    undefined }\n                onEdit={ canWriteNotifications ? onEditDefaultAction : undefined }\n            />\n            <div className={ tableTitleClassName }>Insights notifications event types and behavior</div>\n            <NotificationsToolbar\n                filters={ notificationsFilter.filters }\n                setFilters={ notificationsFilter.setFilters }\n                clearFilter={ notificationsFilter.clearFilter }\n                appFilterOptions={ props.applications }\n                groupBy={ groupBy }\n                onGroupBySelected={ groupBySelected }\n                onExport={ onExport }\n            >\n                <NotificationsTable\n                    notifications={ notificationRows }\n                    onCollapse={ onCollapse }\n                    onEdit={ canWriteNotifications ? onEditNotification : undefined }\n                />\n            </NotificationsToolbar>\n            { modalIsOpenState.isOpen && (\n                <EditNotificationPage\n                    onClose={ closeFormModal }\n                    { ...modalIsOpenState }\n                />\n            ) }\n        </Section>\n    );\n};\n","import { Button, ButtonVariant, FormGroup, Switch } from '@patternfly/react-core';\nimport { FlaskIcon } from '@patternfly/react-icons';\nimport { Main, PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components';\nimport {\n    getInsights,\n    InsightsEnvDetector, RenderIf,\n    RenderIfFalse, RenderIfTrue\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { default as React } from 'react';\nimport { style } from 'typestyle';\n\nimport { Messages } from '../../../properties/Messages';\nimport { stagingAndProd } from '../../../types/Environments';\nimport { Facet } from '../../../types/Notification';\nimport { BundlePageBehaviorGroupContent } from './BundlePageBehaviorGroupContent';\nimport { BundlePageContent } from './BundlePageContent';\n\ninterface NotificationListBundlePageProps {\n    bundle: Facet;\n    applications: Array<Facet>;\n}\n\nconst displayInlineClassName = style({\n    display: 'inline'\n});\n\nexport const NotificationListBundlePage: React.FunctionComponent<NotificationListBundlePageProps> = (props) => {\n\n    const pageHeaderTitleProps = {\n        className: displayInlineClassName,\n        title: Messages.pages.notifications.list.title\n    };\n\n    const [ isUsingBehaviorGroup, setUsingBehaviorGroup ] = React.useState<boolean>(false);\n    const renderIfUsingBehaviorGroupResolver = React.useCallback(() => isUsingBehaviorGroup, [ isUsingBehaviorGroup ]);\n\n    return (\n        <>\n            <PageHeader>\n                <PageHeaderTitle { ...pageHeaderTitleProps } />\n                <InsightsEnvDetector insights={ getInsights() } onEnvironment={ stagingAndProd }>\n                    <RenderIfFalse>\n                        <Button variant={ ButtonVariant.link }>{ Messages.pages.notifications.list.viewHistory }</Button>\n                    </RenderIfFalse>\n                </InsightsEnvDetector>\n                <InsightsEnvDetector insights={ getInsights() } onEnvironment={ stagingAndProd }>\n                    <RenderIfFalse>\n                        <FormGroup fieldId=\"use-behavior-group-check\">\n                            <Switch\n                                id=\"use-behavior-group-check\"\n                                isChecked={ isUsingBehaviorGroup }\n                                label={ <>\n                                    <FlaskIcon />\n                                    <span>Use behavior groups</span>\n                                </> }\n                                onChange={ setUsingBehaviorGroup }\n                            />\n                        </FormGroup>\n                    </RenderIfFalse>\n                </InsightsEnvDetector>\n            </PageHeader>\n            <Main>\n                <RenderIf renderIf={ renderIfUsingBehaviorGroupResolver }>\n                    <RenderIfTrue>\n                        <BundlePageBehaviorGroupContent applications={ props.applications } bundle={ props.bundle } />\n                    </RenderIfTrue>\n                    <RenderIfFalse>\n                        <BundlePageContent applications={ props.applications } bundle={ props.bundle } />\n                    </RenderIfFalse>\n                </RenderIf>\n            </Main>\n        </>\n    );\n};\n","import { AppSkeleton, getInsights } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\n\nimport { defaultBundleName, RedirectToDefaultBundle } from '../../../components/RedirectToDefaultBundle';\nimport { linkTo } from '../../../Routes';\nimport { useGetApplications } from '../../../services/Notifications/GetApplications';\nimport { useGetBundles } from '../../../services/Notifications/GetBundles';\nimport { Facet } from '../../../types/Notification';\nimport { NotificationListBundlePage } from './BundlePage';\n\ninterface NotificationListPageParams {\n    bundleName: string;\n}\n\nenum BundleStatus {\n    LOADING,\n    NOT_FOUND,\n    FAILED_TO_LOAD\n}\n\nconst isBundleStatus = (bundle: Facet | BundleStatus): bundle is BundleStatus => typeof bundle === 'number';\n\nexport const NotificationsListPage: React.FunctionComponent = () => {\n\n    const params = useParams<NotificationListPageParams>();\n    const history = useHistory();\n    const insights = getInsights();\n    const onFunction = insights?.chrome?.on;\n\n    const getBundles = useGetBundles();\n    const getApplications = useGetApplications();\n\n    React.useEffect(() => {\n        if (onFunction) {\n            onFunction('APP_NAVIGATION', (event: any) => {\n                history.push(linkTo.notifications(event.navId));\n            });\n        }\n    }, [ history, onFunction ]);\n\n    const bundle: Facet | BundleStatus = useMemo(() => {\n        if (getBundles.payload?.status === 200) {\n            return getBundles.payload.value.find(b => b.name === params.bundleName) ?? BundleStatus.NOT_FOUND;\n        } else if (getBundles.payload) {\n            return BundleStatus.FAILED_TO_LOAD;\n        }\n\n        return BundleStatus.LOADING;\n    }, [ getBundles.payload, params.bundleName ]);\n\n    React.useEffect(() => {\n        const query = getApplications.query;\n        if (!isBundleStatus(bundle)) {\n            query(bundle.name);\n        }\n    }, [ bundle, getApplications.query ]);\n\n    const applications: Array<Facet> | null | undefined = useMemo(\n        () => {\n            if (getApplications.payload) {\n                return getApplications.payload.status === 200 ? getApplications.payload.value : null;\n            }\n\n            return undefined;\n        },\n        [ getApplications.payload ]\n    );\n\n    if (bundle === BundleStatus.NOT_FOUND) {\n        if (params.bundleName === defaultBundleName) {\n            throw new Error('Default bundle information not found');\n        }\n\n        return <RedirectToDefaultBundle />;\n    }\n\n    if (bundle === BundleStatus.FAILED_TO_LOAD) {\n        throw new Error('Unable to load bundle information');\n    }\n\n    if (applications === null) {\n        throw new Error('Unable to load application facets');\n    }\n\n    if (bundle === BundleStatus.LOADING || !applications) {\n        return (\n            <AppSkeleton />\n        );\n    }\n\n    return (\n        <NotificationListBundlePage\n            bundle={ bundle }\n            applications={ applications }\n        />\n    );\n};\n","import * as React from 'react';\nimport { Route, RouteProps, Switch } from 'react-router';\n\nimport { RedirectToDefaultBundle } from './components/RedirectToDefaultBundle';\nimport { ErrorPage } from './pages/Error/Page';\nimport { IntegrationsListPage } from './pages/Integrations/List/Page';\nimport { NotificationsListPage } from './pages/Notifications/List/Page';\n\ninterface Path {\n    path: string;\n    component: React.ComponentType;\n}\n\nexport const linkTo = {\n    integrations: () => '/integrations',\n    notifications: (bundle: string) => `/notifications/${bundle}`\n};\n\nconst EmptyPage: React.FunctionComponent = () => null;\n\nconst pathRoutes: Path[] = [\n    {\n        path: '/',\n        component: EmptyPage\n    },\n    {\n        path: linkTo.integrations(),\n        component: IntegrationsListPage\n    },\n    {\n        path: linkTo.notifications(':bundleName'),\n        component: NotificationsListPage\n    }\n];\n\ntype InsightsRouteProps = RouteProps;\n\nconst InsightsRoute: React.FunctionComponent<InsightsRouteProps> = (props: InsightsRouteProps) => {\n    return (\n        <ErrorPage>\n            <Route { ...props } />\n        </ErrorPage>\n    );\n};\n\nexport const Routes: React.FunctionComponent = () => {\n    return (\n        <Switch>\n            { pathRoutes.map(pathRoute => (\n                <InsightsRoute\n                    key={ pathRoute.path }\n                    component={ pathRoute.component }\n                    path={ pathRoute.path }\n                    exact={ true }\n                />\n            ))}\n            <RedirectToDefaultBundle />\n        </Switch>\n    );\n};\n","import { Filter, Page, Sort } from '@redhat-cloud-services/insights-common-typescript';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nexport interface UsePageReturn {\n    page: Page;\n    changePage: (page: number) => void;\n    changeItemsPerPage: (perPage: number) => void;\n}\n\nexport type FilterBuilder<T> = (filters: T | undefined) => Filter | undefined;\n\nexport const usePage = <T>(defaultPerPage: number, filterBuilder: FilterBuilder<T>, filters?: T, sort?: Sort): UsePageReturn => {\n    const [ currentPage, setCurrentPage ] = useState(1);\n    const [ itemsPerPage, setItemsPerPage ] = useState(defaultPerPage);\n\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [ filters, setCurrentPage, itemsPerPage ]);\n\n    const page = useMemo(() => {\n        const filter = filterBuilder ? filterBuilder(filters) : undefined;\n        return Page.of(currentPage, itemsPerPage, filter, sort);\n    }, [ currentPage, itemsPerPage, filters, sort, filterBuilder ]);\n\n    const changePage = useCallback((page: number) => {\n        setCurrentPage(page);\n    },  [ setCurrentPage ]);\n\n    const changeItemsPerPage = useCallback((perPage: number) => {\n        setItemsPerPage(perPage);\n    }, [ setItemsPerPage ]);\n\n    return {\n        page,\n        changePage,\n        changeItemsPerPage\n    };\n};\n","import { Exporter, ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\n\nimport { UserIntegration } from '../../../types/Integration';\nimport { IntegrationExporterCsv } from './Csv';\nimport { IntegrationExporterJson } from './Json';\n\nexport const integrationExporterFactory = (type: ExporterType): Exporter<UserIntegration> => {\n    switch (type) {\n        case ExporterType.CSV:\n            return new IntegrationExporterCsv();\n        case ExporterType.JSON:\n            return new IntegrationExporterJson();\n    }\n\n    assertNever(type);\n};\n","import { useCallback } from 'react';\n\nimport { IntegrationRow, OnEnable } from '../../../components/Integrations/Table';\nimport { UserIntegration } from '../../../types/Integration';\n\ninterface ActionResolverParams {\n    onEdit: (integration: UserIntegration) => void;\n    onDelete: (integration: UserIntegration) => void;\n    canWrite: boolean;\n    onEnable: OnEnable;\n}\n\nexport const useActionResolver = (params: ActionResolverParams) => {\n\n    return useCallback((integration: IntegrationRow, index: number) => {\n        const onEdit = params.onEdit;\n        const onDelete = params.onDelete;\n        const onEnable = params.onEnable;\n\n        const isDisabled = !params.canWrite;\n\n        return [\n            {\n                title: 'Edit',\n                isDisabled,\n                onClick: () => onEdit(integration)\n            }, {\n                title: 'Remove',\n                isDisabled,\n                onClick: () => onDelete(integration)\n            }, {\n                title: integration.isEnabled ? 'Disable' : 'Enable',\n                isDisabled,\n                onClick: () => onEnable(integration, index, !integration.isEnabled)\n            }\n        ];\n\n    }, [ params.onEdit, params.onDelete, params.canWrite, params.onEnable ]);\n};\n","import { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const getBundlesAction = () => Operations.NotificationServiceGetBundleFacets.actionCreator();\n\nexport const useGetBundles = () => useQuery(getBundlesAction());\n","import { fetchRBAC, Rbac, waitForInsights } from '@redhat-cloud-services/insights-common-typescript';\nimport { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport Config from '../config/Config';\nimport { AppContext } from './AppContext';\n\nexport const useApp = (): Omit<AppContext, 'rbac'> & Partial<Pick<AppContext, 'rbac'>> => {\n\n    const history = useHistory();\n    const [ rbac, setRbac ] = useState<Rbac | undefined>(undefined);\n\n    useEffect(() => {\n        waitForInsights().then((insights) => {\n            insights.chrome.init();\n            const appId = insights.chrome.getApp();\n            switch (appId) {\n                case Config.notifications.subAppId:\n                    document.title = Config.notifications.title;\n                    break;\n                case Config.integrations.subAppId:\n                    document.title = Config.integrations.title;\n                    break;\n            }\n\n            insights.chrome.identifyApp(appId);\n        });\n    }, [ history ]);\n\n    useEffect(() => {\n        waitForInsights().then(insights => {\n            insights.chrome.auth.getUser().then(() => {\n                fetchRBAC(`${Config.notifications.subAppId},${Config.integrations.subAppId}`).then(setRbac);\n            });\n        });\n    }, []);\n\n    return {\n        rbac: rbac ? {\n            canWriteNotifications: rbac.hasPermission('notifications', 'notifications', 'write'),\n            canReadNotifications: rbac.hasPermission('notifications', 'notifications', 'read'),\n            canWriteIntegrationsEndpoints: rbac.hasPermission('integrations', 'endpoints', 'write'),\n            canReadIntegrationsEndpoints: rbac.hasPermission('integrations', 'endpoints', 'read')\n        } : undefined\n    };\n};\n","import './App.scss';\n\nimport { NotAuthorized } from '@redhat-cloud-services/frontend-components';\nimport { NotificationsPortal } from '@redhat-cloud-services/frontend-components-notifications';\nimport { AppSkeleton } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useLocation } from 'react-router';\n\nimport Config from '../config/Config';\nimport messages from '../properties/DefinedMessages';\nimport { Routes } from '../Routes';\nimport { getSubApp } from '../utils/Basename';\nimport { AppContext } from './AppContext';\nimport { useApp } from './useApp';\n\nconst App: React.ComponentType = () => {\n    const intl = useIntl();\n    const { rbac } = useApp();\n    const location = useLocation();\n\n    const serviceName = React.useMemo(() => {\n        switch (getSubApp(location.pathname)) {\n            case Config.integrations.subAppId:\n                return intl.formatMessage(messages.integrations);\n            case Config.notifications.subAppId:\n                return intl.formatMessage(messages.notifications);\n            default:\n                return '';\n        }\n    }, [ intl, location.pathname ]);\n\n    const hasReadPermissions = React.useMemo(() => {\n        const appId = getSubApp(location.pathname);\n        switch (appId) {\n            case Config.integrations.subAppId:\n                return rbac?.canReadIntegrationsEndpoints;\n            case Config.notifications.subAppId:\n                return rbac?.canReadNotifications;\n        }\n\n        return false;\n    }, [ rbac, location.pathname ]);\n\n    if (!rbac) {\n        return (\n            <AppSkeleton />\n        );\n    }\n\n    return (\n        <AppContext.Provider value={ {\n            rbac\n        } }>\n            { hasReadPermissions ? (\n                <>\n                    <NotificationsPortal />\n                    <Routes />\n                </>\n            ) : (\n                <NotAuthorized serviceName={ serviceName } />\n            ) }\n        </AppContext.Provider>\n    );\n};\n\nexport default App;\n","import { getType } from 'typesafe-actions';\n\nimport { NotificationAppAction } from '../actions/NotificationAppAction';\nimport { SavedNotificationScopeActions } from '../actions/SavedNotificationScopeAction';\nimport { SavedNotificationScopeState, Status } from '../types/SavedNotificationScopeTypes';\n\nexport const INITIAL_STATE: SavedNotificationScopeState = null;\n\nexport const SavedNotificationScopeReducer = (\n    state: SavedNotificationScopeState = INITIAL_STATE,\n    action: NotificationAppAction): SavedNotificationScopeState => {\n    switch (action.type) {\n        case getType(SavedNotificationScopeActions.setIntegration):\n            return {\n                integration: action.payload,\n                status: Status.DONE\n            };\n        case getType(SavedNotificationScopeActions.start):\n            if (!state) {\n                return state;\n            }\n\n            return {\n                ...state,\n                status: Status.LOADING\n            };\n        case getType(SavedNotificationScopeActions.finish):\n            if (!state) {\n                return state;\n            }\n\n            return {\n                integration: { ...state.integration, isEnabled: action.payload },\n                status: Status.DONE\n            };\n        case getType(SavedNotificationScopeActions.unset):\n            return null;\n        default:\n            return state;\n    }\n};\n","import { initStore, restoreStore } from '@redhat-cloud-services/insights-common-typescript';\nimport { Middleware } from 'redux';\n\nimport { INITIAL_STATE as SNS_INITIAL_STATE, SavedNotificationScopeReducer } from './reducers/SavedNotificationScopeReducer';\nimport { NotificationAppState } from './types/NotificationAppState';\n\nexport const createStore = (...middleware: Middleware[]) => {\n    return initStore(\n        {\n            savedNotificationScope: SNS_INITIAL_STATE\n        } as NotificationAppState,\n        {\n            savedNotificationScope: SavedNotificationScopeReducer\n        },\n        ...middleware);\n};\n\nexport const resetStore = () => restoreStore();\n","import { ActionType, createAction } from 'typesafe-actions';\n\nimport { IntegrationRef } from '../../types/Notification';\n\nexport enum SavedNotificationScopeKeys {\n    SET_INTEGRATION = 'SET_INTEGRATION',\n    START = 'START',\n    FINISH = 'FINISH',\n    UNSET = 'UNSET'\n}\n\nexport const SavedNotificationScopeActions = {\n    setIntegration: createAction(SavedNotificationScopeKeys.SET_INTEGRATION)<IntegrationRef>(),\n    start: createAction(SavedNotificationScopeKeys.START)(),\n    finish: createAction(SavedNotificationScopeKeys.FINISH)<boolean>(),\n    unset: createAction(SavedNotificationScopeKeys.UNSET)()\n};\n\nexport type SavedNotificationScopeAction = ActionType<typeof SavedNotificationScopeActions>;\n","import { IntegrationRef } from '../../types/Notification';\n\nexport enum Status {\n    LOADING,\n    DONE\n}\n\nexport type SavedNotificationScopeState = {\n    integration: IntegrationRef;\n    status: Status;\n} | null;\n","// This is a custom getBaseName that doesn't add the appId\n// The reason is that this 'app' is in 2 menus (integrations and notifications), so is easier to just add that into our\n// paths for easier navigation.\nexport const getBaseName = (pathname: string) => {\n    let release = '/';\n    const pathName = pathname.split('/');\n\n    pathName.shift();\n\n    if (pathName[0] === 'beta') {\n        pathName.shift();\n        release = `/beta/`;\n    }\n\n    return `${release}${pathName[0]}`;\n};\n\nexport const getSubApp = (pathname: string) => {\n    const pathName = pathname.split('/');\n    pathName.shift();\n    if (pathName[0] === 'beta') {\n        return pathName[1];\n    }\n\n    return pathName[0];\n};\n"],"sourceRoot":""}