{"version":3,"sources":["webpack:///./src/types/Integration.ts","webpack:///./src/types/Notification.ts","webpack:///./src/config/Config.ts","webpack:///./src/properties/DefinedMessages.ts","webpack:///./src/components/RedirectToDefaultBundle.tsx","webpack:///./src/properties/Messages.ts","webpack:///./src/pages/Error/Page.tsx","webpack:///./src/types/Server.ts","webpack:///./src/app/AppContext.tsx","webpack:///./src/utils/getOuiaProps.ts","webpack:///./src/components/Integrations/Table/ConnectionAttempt.tsx","webpack:///./src/components/Integrations/Table/ConnectionAlert.tsx","webpack:///./src/components/Integrations/Table/ConnectionDegraded.tsx","webpack:///./src/components/Integrations/Table/ConnectionFailed.tsx","webpack:///./src/components/Integrations/Table/ExpandedContent.tsx","webpack:///./src/components/Integrations/Table.tsx","webpack:///./src/hooks/useTableExportConfig.ts","webpack:///./src/types/Environments.ts","webpack:///./src/components/Integrations/Filters.ts","webpack:///./src/components/Integrations/Toolbar.tsx","webpack:///./src/components/Icons/EnabledIntegrationIcon.tsx","webpack:///./src/components/Icons/DisabledIntegrationIcon.tsx","webpack:///./src/hooks/useDeleteModalReducer.ts","webpack:///./src/hooks/useFormModalReducer.ts","webpack:///./src/hooks/usePage.ts","webpack:///./src/generated/OpenapiIntegrations.ts","webpack:///./src/types/adapters/IntegrationAdapter.ts","webpack:///./src/services/useListIntegrations.ts","webpack:///./src/utils/exporters/Integration/Csv.ts","webpack:///./src/utils/exporters/Integration/Json.ts","webpack:///./src/utils/exporters/Integration/Factory.ts","webpack:///./src/components/Integrations/AddNotificationBody.tsx","webpack:///./src/schemas/Integrations/Integration.ts","webpack:///./src/components/Integrations/Form/IntegrationTypeCamelForm.tsx","webpack:///./src/components/Integrations/Form/IntegrationTypeHttpForm.tsx","webpack:///./src/components/Integrations/Form/IntegrationTypeForm.tsx","webpack:///./src/components/Integrations/Form.tsx","webpack:///./src/components/Integrations/SaveModal.tsx","webpack:///./src/services/useSaveIntegration.ts","webpack:///./src/services/useSwitchIntegrationEnabledStatus.ts","webpack:///./src/store/selectors/SavedNotificationScopeSelector.ts","webpack:///./src/pages/Integrations/Create/CreatePage.tsx","webpack:///./src/components/Integrations/DeleteModal.tsx","webpack:///./src/generated/OpenapiNotifications.ts","webpack:///./src/types/Recipient.ts","webpack:///./src/types/adapters/NotificationAdapter.ts","webpack:///./src/types/adapters/BehaviorGroupAdapter.ts","webpack:///./src/services/Notifications/GetAffectedBehaviorGroupsByEndpoint.ts","webpack:///./src/services/useDeleteIntegration.ts","webpack:///./src/pages/Integrations/Delete/DeleteModal.tsx","webpack:///./src/pages/Integrations/List/useIntegrationFilter.ts","webpack:///./src/services/useListIntegrationHistory.ts","webpack:///./src/pages/Integrations/List/Page.tsx","webpack:///./src/pages/Integrations/List/useIntegrationRows.ts","webpack:///./src/pages/Integrations/List/useActionResolver.ts","webpack:///./src/components/ButtonLink.tsx","webpack:///./src/components/Notifications/EventLog/EventLogDateFilter.tsx","webpack:///./src/types/Event.ts","webpack:///./src/components/UtcDate.tsx","webpack:///./src/components/Notifications/EventLog/EventLogActionPopoverContent.tsx","webpack:///./src/components/Notifications/EventLog/EventLogTable.tsx","webpack:///./src/components/Notifications/EventLog/EventLogFilter.ts","webpack:///./src/components/Notifications/EventLog/EventLogToolbar.tsx","webpack:///./src/types/adapters/NotificationEventAdapter.ts","webpack:///./src/services/EventLog/GetNotificationEvents.ts","webpack:///./src/services/Integrations/GetEndpoint.ts","webpack:///./src/services/Notifications/GetApplications.ts","webpack:///./src/services/Notifications/GetBundles.ts","webpack:///./src/pages/Notifications/EventLog/useFilterBuilder.ts","webpack:///./src/pages/Notifications/EventLog/EventLogPage.tsx","webpack:///./src/utils/Immutable.ts","webpack:///./src/utils/Find.ts","webpack:///./src/components/Notifications/Table/BehaviorGroupCell.tsx","webpack:///./src/components/Notifications/NotificationsBehaviorGroupTable.tsx","webpack:///./src/components/Ouia.tsx","webpack:///./src/components/Notifications/Filter.ts","webpack:///./src/components/Notifications/Types.ts","webpack:///./src/components/Notifications/Table/GroupBy.tsx","webpack:///./src/components/Notifications/Toolbar.tsx","webpack:///./src/services/useListNotifications.ts","webpack:///./src/components/Icons/WebhookIcon.svg","webpack:///./src/components/Icons/WebhookIcon.tsx","webpack:///./src/components/Notifications/ActionComponent.tsx","webpack:///./src/components/Notifications/Recipient.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCard.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCardList.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal.tsx","webpack:///./src/hooks/useOnDeleteWrapper.ts","webpack:///./src/services/Notifications/DeleteBehaviorGroup.ts","webpack:///./src/services/Notifications/GetAffectedNotificationsByBehaviorGroup.ts","webpack:///./src/pages/Notifications/Form/DeleteBehaviorGroupPage.tsx","webpack:///./src/schemas/Integrations/Notifications.ts","webpack:///./src/components/Notifications/RecipientContext.ts","webpack:///./src/components/Notifications/Form/RecipientOption.ts","webpack:///./src/components/Notifications/Form/useRecipientOptionMemo.tsx","webpack:///./src/components/Notifications/Form/useTypeaheadReducer.ts","webpack:///./src/components/Notifications/Form/IntegrationRecipientTypeahead.tsx","webpack:///./src/components/Notifications/Form/RecipientTypeahead.tsx","webpack:///./src/components/Notifications/EditableActionRow/RecipientForm.tsx","webpack:///./src/components/Notifications/Form/ActionOption.ts","webpack:///./src/components/Notifications/Form/ActionTypeahead.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupFormActionsTable.tsx","webpack:///./src/components/Notifications/BehaviorGroup/useBehaviorGroupActionHandlers.ts","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupForm.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupSaveModal.tsx","webpack:///./src/components/Notifications/useGetRecipients.ts","webpack:///./src/services/Integrations/GetDefaultSystemEndpoint.ts","webpack:///./src/services/Notifications/SaveBehaviorGroup.ts","webpack:///./src/services/Notifications/UpdateBehaviorGroupActions.ts","webpack:///./src/pages/Notifications/Form/useSaveBehaviorGroup.tsx","webpack:///./src/pages/Notifications/Form/EditBehaviorGroupPage.tsx","webpack:///./src/components/Notifications/useGetIntegrations.ts","webpack:///./src/pages/Notifications/List/BehaviorGroupsSection.tsx","webpack:///./src/services/Notifications/GetBehaviorGroups.ts","webpack:///./src/services/Notifications/GetBehaviorGroupByNotificationId.ts","webpack:///./src/services/Notifications/LinkBehaviorGroup.ts","webpack:///./src/pages/Notifications/List/useBehaviorGroupNotificationRows.tsx","webpack:///./src/pages/Notifications/List/BundlePageBehaviorGroupContent.tsx","webpack:///./src/pages/Notifications/List/useNotificationFilter.ts","webpack:///./src/pages/Notifications/List/useBehaviorGroupContent.ts","webpack:///./src/pages/Notifications/List/useNotificationPage.ts","webpack:///./src/pages/Notifications/List/BundlePage.tsx","webpack:///./src/pages/Notifications/List/Page.tsx","webpack:///./src/Routes.tsx","webpack:///./src/pages/Notifications/EventLog/useEventLogFilter.ts","webpack:///./src/generated/OpenapiPrivate.ts","webpack:///./src/types/adapters/ServerAdapter.ts","webpack:///./src/services/GetServerStatus.ts","webpack:///./src/app/App.tsx","webpack:///./src/app/useApp.ts","webpack:///./src/store/reducers/SavedNotificationScopeReducer.ts","webpack:///./src/store/Store.ts","webpack:///./src/store/actions/SavedNotificationScopeAction.ts","webpack:///./src/store/types/SavedNotificationScopeTypes.ts","webpack:///./src/utils/Basename.ts"],"names":["IntegrationType","UserIntegrationType","WEBHOOK","SPLUNK","isCamelType","type","startsWith","isActionNotify","action","NotificationType","EMAIL_SUBSCRIPTION","DRAWER","integrationTypes","name","notificationTypes","INTEGRATION","integrations","subAppId","title","types","base","complete","Object","keys","forEach","key","element","computeIntegrationConfig","actions","released","experimental","notifications","pages","paging","defaultPerPage","id","description","defaultMessage","integrationsEmptyStateTitle","integrationsTableEmptyStateBody","defaultBundleName","RedirectToDefaultBundle","from","linkTo","to","cache","locale","navigator","language","slice","intl","onError","console","log","intlSettings","Messages","appName","formatMessage","appNameIntegrations","list","add","edit","viewHistory","eventLog","subtitle","viewNotifications","error","emptyState","content","showDetails","goToIndex","components","toolbar","addIntegration","editIntegration","table","columns","lastConnectionAttempt","enabled","enableError","disableError","event","recipient","common","choose","ErrorPage","props","goToListPage","history","goBack","ErrorBoundaryPage","actionLabel","pageHeader","children","ServerStatus","AppContext","rbac","canReadIntegrationsEndpoints","canReadNotifications","canWriteIntegrationsEndpoints","canWriteNotifications","isOrgAdmin","server","status","RUNNING","useAppContext","useContext","getOuiaProps","getOuiaPropsFactory","ConnectionAttemptType","dateClassName","style","marginLeft","global_spacer_xs","ConnectionAttempt","formattedDate","format","toUtc","date","SUCCESS","color","global_success_color_100","FAILED","global_danger_color_100","getIcon","className","connectionAttemptClassName","global_spacer_sm","marginTopClassName","marginTop","ConnectionAlert","Alert","variant","alertVariant","isInline","attempts","map","attempt","index","isSuccess","ConnectionDegraded","failures","filter","a","length","AlertVariant","ConnectionFailed","titleClass","fontWeight","ExpandedContent","TextContent","TextList","component","TextListVariants","TextListItem","TextListItemVariants","integration","url","sslVerificationEnabled","undefined","secretToken","LastConnectionAttemptStatus","connectionAlertClassName","paddingBottom","global_spacer_md","expandedContentClassName","paddingLeft","isEnabledLoadingClassName","smallMarginLeft","degradedClassName","global_warning_color_200","fontSize","getLastConnectionAttemptStatus","UNKNOWN","ERROR","WARNING","getConnectionAlert","LastConnectionAttemptSuccess","LastConnectionAttemptError","getConnectionAttemptCell","isLoading","Spinner","size","Text","cellFormatters","expandable","transforms","rowExpandedContentClassName","rowWrapperClassName","tableClassName","noneStyle","important","borderStyle","noBorderBottom","borderBottom","borderTop","buildClassNames","RowWrapper","trRef","rowProps","row","rest","ref","isExpanded","hidden","IntegrationsTable","useIntl","onCollapseHandler","_event","_index","isOpen","data","onCollapse","findIndex","rows","onEnable","reduce","idx","push","selected","isSelected","cells","lastConnectionAttempts","isConnectionAttemptLoading","isEnabledLoading","Switch","isChecked","isEnabled","onChange","isDisabled","ouiaId","fullWidth","parent","colSpan","actionsResolverCallback","rowData","actionResolver","integrationIndex","i","integrationRow","ouiaSafe","SkeletonTable","rowSize","loadingCount","paddingColumnSize","sortBy","EmptyState","EmptyStateVariant","EmptyStateIcon","icon","Title","headingLevel","EmptyStateBody","Table","rowWrapper","isStickyHeader","TableHeader","TableBody","useTableExportConfig","onExport","extraItems","onSelect","exporterTypeFromString","stagingAndProd","stagingAndProdStable","stagingStableAndAnyProd","isStagingOrProd","insights","includes","getInsightsEnvironment","isReleased","getInsights","IntegrationFilterColumn","cssRaw","enabledTextClassName","filterMetadata","NAME","label","placeholder","ENABLED","options","exclusive","items","value","IntegrationsToolbar","primaryToolbarFilterConfig","usePrimaryToolbarFilterConfig","filters","setFilters","clearFilters","actionsConfig","onClick","onAddIntegration","kebabToggleProps","exportConfig","filterConfig","useInsightsEnvironmentFlag","useCallback","activeFiltersConfig","pageChanged","page","inner","perPageChanged","perPage","topPaginationProps","itemCount","count","isCompact","PaginationVariant","onSetPage","onFirstClick","onPreviousClick","onNextClick","onLastClick","onPageInput","onPerPageSelect","bottomPaginationProps","PrimaryToolbar","pagination","UseDeleteModalReducerActionType","initialState","reducer","state","DELETE","RESET","useDeleteModalReducer","dispatch","useReducer","useMemo","delete","makeDeleteAction","reset","UseFormModalReducerActionType","isEdit","template","isCopy","useFormModalReducer","copyFunction","CREATE","EDIT","buildReducer","create","usePage","filterBuilder","sort","currentPage","setCurrentPage","useState","itemsPerPage","setItemsPerPage","useEffect","Page","changePage","changeItemsPerPage","Operations","Schemas","zodSchemaApplication","bundle_id","zodSchemaUUID","created","optional","nullable","display_name","updated","nonstrict","zodSchemaBasicAuthentication","password","username","zodSchemaBehaviorGroupAction","endpoint","zodSchemaEndpoint","zodSchemaBehaviorGroupActionId","behaviorGroupId","endpointId","zodSchemaBundle","zodSchemaCamelProperties","basic_authentication","disable_ssl_verification","extras","secret_token","sub_type","zodSchemaEmailSubscriptionProperties","group_id","ignore_preferences","only_admins","properties","zodSchemaWebhookProperties","zodSchemaEndpointType","zodSchemaEventLogEntry","zodSchemaEventLogEntryAction","application","bundle","event_type","payload","details","endpoint_id","endpoint_sub_type","endpoint_type","invocation_result","zodSchemaHttpType","zodSchemaMeta","int","zodSchemaStatus","method","Application","BasicAuthentication","BehaviorGroup","default_behavior","BehaviorGroupAction","BehaviorGroupActionId","Bundle","CamelProperties","CurrentStatus","end_time","start_time","EmailSubscriptionProperties","EmailSubscriptionType","Endpoint","EndpointPage","links","meta","EndpointProperties","EndpointType","EventLogEntry","EventLogEntryAction","EventType","application_id","Facet","displayName","HttpType","Meta","NotificationHistory","invocationResult","invocationTime","PageEventLogEntry","RenderEmailTemplateRequest","body_template","subject_template","RequestDefaultBehaviorGroupPropertyList","RequestEmailSubscriptionProperties","Status","UUID","WebhookProperties","__Empty","max","EndpointServiceGetEndpoints","EndpointServiceCreateEndpoint","EndpointServiceSubscribeEmail","EndpointServiceUnsubscribeEmail","EndpointServiceGetOrCreateEmailSubscriptionEndpoint","EndpointServiceGetEndpoint","EndpointServiceUpdateEndpoint","EndpointServiceDeleteEndpoint","EndpointServiceEnableEndpoint","EndpointServiceDisableEndpoint","EndpointServiceGetEndpointHistory","EndpointServiceGetDetailedEndpointHistory","actionCreator","params","query","active","limit","offset","pageNumber","sort_by","actionBuilder","queryParams","config","rules","ValidateRule","build","body","Response200","path","replace","applicationName","toString","bundleName","includeDetail","historyId","getIntegrationType","serverIntegration","values","Error","notNull","defaultValue","toIntegration","integrationBase","basicAuth","user","pass","toIntegrationCamel","toIntegrationWebhook","ignorePreferences","groupId","onlyAdmin","toIntegrationEmail","toIntegrationProperties","integrationCamel","integrationHttp","integrationEmail","toServerIntegrationRequest","subType","splitType","split","getEndpointType","filterOutDefaultAction","serverNotification","listIntegrationsActionCreator","pager","toQuery","filterType","filterActive","listIntegrationIntegrationDecoder","validationResponseTransformer","validatedResponse","serverIntegrations","errors","IntegrationExporterCsv","ExporterCsv","IntegrationExporterJson","ExporterJson","buttonClassname","AddNotificationBody","text","buttonText","Button","ButtonVariant","switchEnabled","IntegrationSchemaBase","required","trim","oneOf","default","IntegrationHttpSchema","concat","shape","notRequired","IntegrationCamelSchema","v","when","is","then","transform","s","JSON","parse","e","test","IntegrationSchema","IntegrationTypeCamelForm","FormTextInput","isRequired","ouiaIdConcat","Checkbox","FormSection","FormTextArea","IntegrationTypeHttpForm","IntegrationTypeForm","IntegrationsForm","useFormikContext","FormSelectOption","Form","maxLength","FormSelect","InternalIntegrationSaveModal","pageTitle","handleSubmit","isValid","isSubmitting","onSaveClicked","SaveModal","isSaving","onSave","onClose","actionButtonDisabled","IntegrationSaveModal","initialIntegration","initial","cast","stringify","onSubmit","async","transformedIntegration","Formik","initialValues","validationSchema","validateOnMount","saveIntegrationActionCreator","createIntegrationActionCreator","decoder","response","switchIntegrationEnabledStatusActionCreator","savedNotificationScopeSelector","savedNotificationScope","ConnectedAddNotificationBodyContainer","connect","reduxDispatch","switchIntegrationEnabledStatus","useMutation","mutate","SavedNotificationScopeAction","CreatePage","saveIntegrationMutation","useTransformQueryResponse","hasError","setError","onSaveIntegration","savedIntegration","addSuccessNotification","loading","IntegrationDeleteModal","onDeleteInternal","onDelete","behaviorGroups","Skeleton","behaviorGroupText","ExpandableSection","toggleText","List","behaviorGroup","ListItem","DeleteModal","isDeleting","titleIconVariant","actionButtonTitle","NotificationServiceCreateBehaviorGroup","NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint","NotificationServiceUpdateBehaviorGroupActions","NotificationServiceUpdateBehaviorGroup","NotificationServiceDeleteBehaviorGroup","NotificationServiceFindBehaviorGroupsByBundleId","NotificationServiceGetEventTypes","NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup","NotificationServiceGetLinkedBehaviorGroups","NotificationServiceUpdateEventTypeBehaviors","EventServiceGetEvents","NotificationServiceGetApplicationsFacets","NotificationServiceGetBundleFacets","NotificationServiceMarkRead","bundleId","applicationIds","eventTypeId","appIds","bundleIds","endDate","endpointTypes","eventTypeDisplayName","includeDetails","includePayload","invocationResults","startDate","Response204","Recipient","this","IntegrationRecipient","super","NotificationRecipient","integrationId","sendToAdmin","_toAction","serverAction","toNotification","applicationDisplayName","reduceActions","current","draft","existingAction","find","toNotifications","serverNotifications","reportBehaviorGroup","toBehaviorGroup","serverBehaviorGroup","behaviorAction","toAction","isDefault","toShallowBehaviorGroupRequest","behaviorGroupsForEndpointActionCreator","defaultBehaviorGroupDecoder","deleteIntegrationActionCreator","IntegrationDeleteModalPage","deleteIntegrationMutation","getBehaviorGroupsQuery","useParameterizedQuery","deleteIntegration","useUrlStateName","useUrlStateString","useUrlStateEnabled","_defaultValue","useUrlStateMultipleOptions","useStateFactory","column","userIntegrationCopier","userIntegration","ConnectedIntegrationsListPage","integrationFilter","debounce","useFilters","useIntegrationFilter","integrationFilterBuilder","Filter","toLocaleLowerCase","and","Operator","pageData","integrationsQuery","useQuery","initFetch","exportIntegrationsQuery","integrationRows","setIntegrationRows","prevIntegrationsInput","usePrevious","ClientContext","setIntegrationRowByIndex","partialIntegration","prevIntegrations","newIntegrations","setIntegrationRowById","prev","clearQueue","last5","p","Date","_integration","message","addDangerNotification","useIntegrationRows","modalIsOpenState","modalIsOpenActions","deleteModalState","deleteModalActions","onAddIntegrationClicked","onEdit","exporter","ExporterType","integrationExporterFactory","exportedIntegrations","nextPage","export","now","canWrite","closeFormModal","saved","closeDeleteModal","deleted","Math","min","PageHeader","PageHeaderTitle","Main","Section","clearFilter","pageCount","ButtonLink","navigate","EventLogDateFilterValue","labels","TODAY","YESTERDAY","LAST_7","LAST_14","CUSTOM","toClassName","paddingRight","global_palette_black_600","datePickerClassName","backgroundColor","cursor","$nest","borderBottomColor","global_active_color_100","EventLogSelectObject","selectOption","dateInputProps","isReadOnly","CustomDateFilter","maxDate","minDate","days","startRangeValidators","isBefore","isAfter","period","endRangeValidators","setStartDate","start","setPeriod","parseISO","setEndDate","end","startValue","endValue","startDateRef","useRef","endDateRef","onClickStartDateInput","setCalendarOpen","onClickEndDateInput","startDateInputProps","endDateInputProps","Split","SplitItem","DatePicker","inputProps","validators","Bullseye","EventLogDateFilter","SelectOption","setOpen","onToggle","_e","selectObject","setValue","Select","SelectVariant","selections","retentionDays","NotificationEventStatus","UtcDate","isUtc","formatted","headerClass","minWidth","grayFontClassName","global_palette_black_700","leftMargin","EventLogActionPopoverContent","getIntegrationRecipient","useAsync","TableComposable","borders","TableVariant","Thead","Tr","Th","Tbody","Td","endpointType","width","Tooltip","toDisplayStatus","successCount","errorCount","EventLogTableColumns","labelClassName","toLabelProps","EventLogTable","onSort","columnIndex","sortByDirection","_extraData","externalOnSort","sortOptions","EVENT","APPLICATION","DATE","direction","sortDirection","sortColumn","events","Array","_","LabelGroup","Popover","hasAutoWidth","bodyContent","Label","EventLogFilterColumn","EventLogToolbar","bundleOptions","applicationOptions","BUNDLE","b","chipValue","dedicatedAction","dateFilter","setDateFilter","toNotificationEvent","serverEvent","fromUtc","sortEventActions","groupActions","first","second","localeCompare","actionsById","actionsWithoutEndpoint","newAction","initAction","eventDecoder","getEndpointAction","getApplicationsAction","useGetBundles","DATE_FORMAT","subtitleClassName","paddingTop","emptyImmutableArray","freeze","emptyImmutableObject","findById","findByKey","val","noBehaviorGroupsClassName","textAlign","rightSpacerSm","marginRight","inlineSpacer","CommaSeparator","BehaviorGroupChip","unlink","notification","Chip","BehaviorGroupCell","onSelected","dataset","currentTarget","firstChild","behaviorGroupContent","found","OptionsMenuItem","bg","sortedSelected","toggle","OptionsMenuToggle","toggleTemplate","ChipGroup","readonlyText","global_palette_black_400","join","isEditMode","OptionsMenu","menuItems","menuAppendTo","document","TableText","wrapModifier","actionButtonClassName","float","cellWidth","EmptySpan","_props","emptySpanProducer","NotificationsBehaviorGroupTable","Component","Wrapped","ouia","callbacks","onStartEditing","onFinishEditing","onCancelEditing","onBehaviorGroupLinkUpdated","loadingActionStatus","behaviors","global_disabled_color_100","isOutsideDropdown","actionsToggle","NotificationFilterColumn","GroupByEnum","GroupBy","DropdownItem","None","groupBy","target","shouldBeOpen","pascalCase","Dropdown","DropdownToggle","toggleIndicator","dropdownItems","NotificationsToolbar","appFilterItems","appFilterOptions","ACTION","exportConfigInternal","onGroupBySelected","verticalAlign","height","alt","src","marginLeftClassName","ActionTypeToIcon","actionType","ActionComponentWrapper","ActionComponent","disabledLabelClassName","position","r","cardClassName","lockedSpacer","global_spacer_form_element","marginBottom","contentTitleStyle","BehaviorGroupCardLayout","switchOpen","Card","isFlat","CardHeader","CardHeaderMain","TextVariants","CardActions","isDefaultBehavior","KebabToggle","isPlain","DropdownPosition","CardBody","Grid","hasGutter","GridItem","span","contents","BehaviorGroupCard","onClickEdit","onClickDelete","BehaviorGroupCardSkeleton","contentWidth","cardsWrapperClassName","overflow","cardWrapperClassName","BehaviorGroupCardListLayout","measureRef","measuredSizing","useMeasure","container","refContainer","getBoundingClientRect","Flex","alignItems","alignContent","FlexItem","BehaviorGroupCardList","BehaviorGroupCardListSkeleton","BehaviorGroupDeleteModal","toDelete","useOnDeleteWrapper","cancelButtonTitle","conflictingNotifications","cancelButtonVariant","ackDelete","setAckDelete","Stack","StackItem","actionButtonHidden","BehaviorGroupDeleteModalSkeleton","deleteBehaviorGroupAction","defaultNotificationsDecoder","DeleteBehaviorGroupPage","deleteBehaviorGroup","affected","getAffectedNotificationsByBehaviorGroupAction","ActionIntegration","ActionNotify","ActionsArray","obj","hasOwnProperty","context","foundEmail","integrationIds","createError","BehaviorGroupSchema","RecipientContext","createContext","getIntegrations","getNotificationRecipients","useRecipientContext","RecipientContextProvider","Provider","RecipientOption","equals","mapper","getKey","useRecipientOptionMemo","show","loadingDefault","isNoResultsOption","defaultValues","loadingFilter","filterValues","ReducerActionType","reducerFunction","SET_FILTER_VALUE","search","lastSearch","LOAD_FILTER_VALUE","USE_DEFAULTS","SET_DEFAULTS","useTypeaheadReducer","setFilterValue","loadFilterValue","setDefaults","useDefaults","IntegrationRecipientTypeahead","prevOpen","dispatchers","onOpenChange","integrationType","onFilter","selection","sel","integrationSelected","chooseText","toLowerCase","typeAheadAriaLabel","placeholderText","validated","RecipientTypeahead","recipients","onClear","dummyOnToggle","RecipientForm","recipientSelected","recipientOnClear","FormHelperText","isError","isHidden","ActionOption","kind","notificationType","actionName","ActionTypeahead","actionSelected","selectedOption","selectableOptions","availableNotificationTypes","availableIntegrationTypes","selectedNotifications","o","tableHeaderClassName","tableBodyClassName","alignLeftClassName","emptySpan","BehaviorGroupFormActionsTable","setValues","touched","setFieldTouched","form","touchedActions","errorActions","Set","setValueDispatch","updater","Function","addAction","rowHandlers","setActions","handleActionSelected","handleIntegrationSelected","handleRecipientSelected","rowAsNotification","handleRecipientOnClear","isTouched","handleRemove","EditBehaviorGroupForm","FieldArray","helpers","InternalBehaviorGroupSaveModal","ModalVariant","BehaviorGroupSaveModal","getRecipients","lowerCaseSearch","useGetRecipients","saveBehaviorGroupActionCreator","updateBehaviorGroupActionsActionCreator","endpointIds","actionsToIdList","ids","remainingIds","toAdd","shift","isActionIntegration","SaveBehaviorGroupResult","useSaveBehaviorGroup","saveBehaviorGroupMutation","updateBehaviorGroupActionsMutation","fetchingIntegrations","setFetchingIntegrations","save","updateBehaviorGroupActions","original","behaviorGroupNeedsUpdate","result","saveBehaviorGroup","actionsNeedsUpdate","toFetch","onlyAdmins","toSystemProperties","Promise","all","systemProps","systemProperties","getDefaultSystemEndpointAction","newIds","endpointsToAdd","operation","UPDATE","saveActions","catch","err","EditBehaviorGroupPage","_search","useGetIntegrations","actionsContextValue","saving","expandableSectionClassName","global_BackgroundColor_100","global_spacer_lg","sectionClassName","sectionTitleClassName","titleClassName","global_palette_black_1000","emptyAddButtonClassName","BehaviorGroupAddButton","buttonProps","button","isAriaDisabled","BehaviorGroupsSection","setExpanded","setFilter","filteredBehaviors","lowerCaseFilter","editModalState","editModalActions","createGroup","stopPropagation","onCloseModal","reload","onCloseDelete","onClearFilter","contentId","ExpandableSectionToggle","Badge","isRead","isDetached","SearchInput","behaviorGroupDecoder","getBehaviorGroupByNotificationAction","notificationId","getNotification","behaviorGroupSectionClassName","global_spacer_xl","emptyArray","BundlePageBehaviorGroupContent","notificationsFilter","initialAppOptions","useUrlStateApplication","useUrlStateAction","useNotificationFilter","applications","useGetBehaviorGroups","errorObject","useBehaviorGroupContent","notificationPage","appFilter","arrayValue","filterOption","useNotificationPage","debouncedFilters","useNotifications","filterApplicationId","filterBundleId","listNotificationsActionCreator","notificationRows","updateBehaviorGroupLink","startEditMode","finishEditMode","cancelEditMode","updateBehaviorGroups","setNotificationRows","prevNotificationInput","removeBehaviorGroup","splice","ob","nb","linkBehavior","setEditMode","command","behaviorGroupIds","linkBehaviorGroupAction","draftNotification","oldBehaviors","_prev","useBehaviorGroupNotificationRows","isLinked","displayInlineClassName","display","NotificationListBundlePage","pageHeaderTitleProps","eventLogPageUrl","isFilled","InsightsEnvDetector","onEnvironment","RenderIfFalse","Link","BundleStatus","pathRoutes","getEndpoint","getBundles","bundles","getApplications","eventLogFilters","useApplication","useBundle","useEvent","useEventLogFilter","setSortDirection","setSortColumn","selectedBundleNames","selectedBundles","selectedAppNames","selectedApps","filterPeriod","today","sub","toDate","yesterday","useFilterBuilder","toUpperCase","Sort","eventsPage","eventsQuery","filterBundleIds","filterAppIds","filterStart","filterEnd","filterEvent","useGetEvents","eventNotificationPageUrl","NOT_FOUND","FAILED_TO_LOAD","LOADING","isBundleStatus","AppSkeleton","InsightsRoute","Routes","on","chrome","pathname","domEvent","href","relative","substr","route","exact","location","pathRoute","StatusServiceGetCurrentStatus","adapter","currentStatus","MAINTENANCE","utcFormat","regularFormat","serverStatus","setRbac","setServer","setOrgAdmin","waitForInsights","init","appId","getApp","identifyApp","auth","getUser","identity","is_org_admin","fetchRBAC","hasPermission","useApp","serviceName","hasReadPermissions","utcStartTime","utcEndTime","startTime","endTime","timezone","Maintenance","timeZone","NotificationsPortal","NotAuthorized","SavedNotificationScopeReducer","getType","createStore","middleware","initStore","resetStore","restoreStore","SavedNotificationScopeKeys","SavedNotificationScopeActions","setIntegration","createAction","SET_INTEGRATION","START","finish","FINISH","unset","UNSET","getBaseName","release","pathName","getSubApp"],"mappings":"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","file":"js/923.c34190f0fbc009292af8.js","sourcesContent":["import { Schemas } from '../generated/OpenapiIntegrations';\nimport { UUID } from './Notification';\n\n// Integrations that exist\n// Value should always be type:sub_type or only type if doesn't use sub_types\nexport enum IntegrationType {\n    WEBHOOK = 'webhook',\n    EMAIL_SUBSCRIPTION = 'email_subscription',\n    SPLUNK = 'camel:splunk'\n}\n\nexport const UserIntegrationType = {\n    WEBHOOK: IntegrationType.WEBHOOK,\n    SPLUNK: IntegrationType.SPLUNK\n} as const;\n\nexport type Subtypes<U, S extends string> = U extends `${S}:${string}` ? U : never;\nexport type CamelIntegrationType = Subtypes<IntegrationType, 'camel'>;\n\nexport const isCamelType = (type?: IntegrationType): type is CamelIntegrationType => !!type && type.startsWith('camel:');\nexport const isCamelIntegrationType = (integration: Partial<Integration>): integration is IntegrationCamel =>\n    !!integration.type && isCamelType(integration.type);\n\nexport type UserIntegrationType = (typeof UserIntegrationType)[keyof typeof UserIntegrationType];\n\nexport interface IntegrationBase<T extends IntegrationType> {\n    id: string;\n    name: string;\n    type: T;\n    isEnabled: boolean;\n}\n\nexport interface IntegrationHttp extends IntegrationBase<IntegrationType.WEBHOOK> {\n    type: IntegrationType.WEBHOOK;\n    url: string;\n    sslVerificationEnabled: boolean;\n    secretToken?: string;\n    method: Schemas.HttpType;\n}\n\nexport interface IntegrationCamel extends IntegrationBase<CamelIntegrationType> {\n    type: CamelIntegrationType;\n    url: string;\n    sslVerificationEnabled: boolean;\n    secretToken?: string;\n    basicAuth?: {\n        user: string;\n        pass: string;\n    };\n    extras?: Record<string, string>;\n}\n\nexport interface IntegrationEmailSubscription extends IntegrationBase<IntegrationType.EMAIL_SUBSCRIPTION> {\n    type: IntegrationType.EMAIL_SUBSCRIPTION,\n    onlyAdmin: boolean;\n    ignorePreferences: boolean;\n    groupId?: UUID\n}\n\nexport type Integration = IntegrationHttp | IntegrationEmailSubscription | IntegrationCamel;\n\n// Integrations that the user can create in the Integrations page;\nexport type UserIntegration = Extract<Integration, {\n    type: UserIntegrationType\n}>;\n\ntype NewIntegrationKeys = 'id';\n\nexport type NewIntegrationTemplate<\n    T extends IntegrationBase<IntegrationType>\n> = Omit<T, NewIntegrationKeys> & Partial<Pick<T, NewIntegrationKeys>>;\n\nexport type NewIntegrationBase = NewIntegrationTemplate<IntegrationBase<UserIntegrationType>>;\nexport type NewIntegration = NewIntegrationTemplate<Integration>;\nexport type NewUserIntegration = NewIntegrationTemplate<UserIntegration>;\n\nexport type ServerIntegrationRequest = Schemas.Endpoint;\nexport type ServerIntegrationResponse = Schemas.Endpoint;\n\nexport interface IntegrationConnectionAttempt {\n    date: Date;\n    isSuccess: boolean;\n}\n\nexport type GetIntegrationRecipient = (integrationId: UUID) => Promise<string> | string;\n","import { Schemas } from '../generated/OpenapiNotifications';\nimport { UserIntegration } from './Integration';\nimport { NotificationRecipient } from './Recipient';\n\nexport type UUID = Schemas.UUID;\n\nexport interface NotificationBase {\n    id: UUID;\n    applicationDisplayName: string;\n    eventTypeDisplayName: string;\n}\n\nexport interface Notification extends NotificationBase {\n    actions?: Array<Action>;\n    useDefault?: boolean;\n}\n\nexport interface NotificationBehaviorGroup extends NotificationBase {\n    readonly behaviors: ReadonlyArray<BehaviorGroup>;\n}\n\nexport type IntegrationRef = Pick<UserIntegration, 'id' | 'name' | 'type' | 'isEnabled'>\n\nexport interface DefaultNotificationBehavior {\n    actions: Array<Action>;\n}\n\nexport interface ActionBase {\n    type: NotificationType;\n}\n\nexport interface ActionIntegration extends ActionBase {\n    type: NotificationType.INTEGRATION;\n    integration: IntegrationRef;\n}\n\nexport interface ActionNotify extends ActionBase {\n    type: NotificationType.EMAIL_SUBSCRIPTION | NotificationType.DRAWER;\n    recipient: ReadonlyArray<NotificationRecipient>;\n}\n\nexport type Action = ActionIntegration | ActionNotify;\n\nexport const isActionNotify = (action: Action): action is ActionNotify =>\n    action.type === NotificationType.EMAIL_SUBSCRIPTION || action.type === NotificationType.DRAWER;\n\nexport const isActionIntegration = (action: Action): action is ActionIntegration =>\n    action.type === NotificationType.INTEGRATION;\n\nexport enum NotificationType {\n    EMAIL_SUBSCRIPTION = 'EMAIL_SUBSCRIPTION',\n    DRAWER = 'DRAWER',\n    INTEGRATION = 'INTEGRATION'\n}\n\nexport type Facet = Schemas.Facet;\n\nexport type ServerNotificationRequest = Schemas.EventType;\nexport type ServerNotificationResponse = Schemas.EventType;\n\nexport type BehaviorGroup = {\n    readonly id: UUID;\n    readonly actions: ReadonlyArray<Action>;\n    readonly bundleId: UUID,\n    readonly displayName: string;\n    readonly bundleName: string;\n    readonly isDefault: boolean;\n}\n\nexport type NewBehaviorGroup = Partial<Pick<BehaviorGroup, 'id'>> & Omit<BehaviorGroup, 'id'>;\n\nexport type BehaviorGroupRequest = Omit<BehaviorGroup | NewBehaviorGroup, 'isDefault'>;\n\nexport type EmailSystemProperties = {\n    type: NotificationType.EMAIL_SUBSCRIPTION;\n    props: {\n        onlyAdmins: boolean;\n        ignorePreferences: false;\n        groupId: undefined;\n    }\n}\nexport type SystemProperties = EmailSystemProperties;\n","import { DeepReadonly } from 'ts-essentials';\n\nimport { IntegrationType, UserIntegrationType } from '../types/Integration';\nimport { NotificationType } from '../types/Notification';\n\nconst apiVersion = 'v1.0';\nconst apiBaseUrl = `/api/notifications/${apiVersion}`;\n\nexport const withBaseUrl = (path: string) => `${apiBaseUrl}${path}`;\n\ninterface IntegrationTypeConfigBase {\n    name: string;\n}\n\ninterface IntegrationTypeConfig extends IntegrationTypeConfigBase {\n    action: string;\n}\n\ninterface NotificationTypeConfig {\n    name: string;\n}\n\nconst integrationTypes: Record<IntegrationType, IntegrationTypeConfigBase> = {\n    [IntegrationType.SPLUNK]: {\n        name: 'Splunk'\n    },\n    [IntegrationType.WEBHOOK]: {\n        name: 'Webhook'\n    },\n    [IntegrationType.EMAIL_SUBSCRIPTION]: {\n        name: 'Email'\n    }\n};\n\nconst notificationTypes: Record<NotificationType, NotificationTypeConfig> = {\n    [NotificationType.EMAIL_SUBSCRIPTION]: {\n        name: 'Send an email'\n    },\n    [NotificationType.DRAWER]: {\n        name: 'Send to notification drawer'\n    },\n    [NotificationType.INTEGRATION]: {\n        name: 'Integration'\n    }\n};\n\nconst computeIntegrationConfig = (base: Record<IntegrationType, IntegrationTypeConfigBase>) : Record<IntegrationType, IntegrationTypeConfig> => {\n    const complete = {} as Record<IntegrationType, IntegrationTypeConfig>;\n\n    const transform = (type: IntegrationType, element: IntegrationTypeConfigBase): IntegrationTypeConfig => ({\n        ...element,\n        action: type === IntegrationType.EMAIL_SUBSCRIPTION ? element.name : `Integration: ${element.name}`\n    });\n\n    Object.keys(base).forEach((key) => {\n        complete[key] = transform(key as IntegrationType, base[key]);\n    });\n\n    return complete;\n};\n\nconst Config = {\n    integrations: {\n        subAppId: 'integrations',\n        title: 'Integrations | Settings',\n        types: computeIntegrationConfig(integrationTypes),\n        actions: {\n            released: [\n                UserIntegrationType.WEBHOOK\n            ],\n            experimental: [\n                UserIntegrationType.WEBHOOK,\n                UserIntegrationType.SPLUNK\n            ]\n        }\n    },\n    notifications: {\n        subAppId: 'notifications',\n        title: 'Notifications | Settings',\n        types: notificationTypes,\n        actions: {\n            released: [\n                NotificationType.EMAIL_SUBSCRIPTION\n            ],\n            experimental: [\n                NotificationType.EMAIL_SUBSCRIPTION, NotificationType.DRAWER\n            ]\n        }\n    },\n    pages: {\n    },\n    paging: {\n        defaultPerPage: 20\n    }\n};\n\nconst ReadonlyConfig: DeepReadonly<typeof Config> = Config;\nexport default ReadonlyConfig;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n    notifications: {\n        id: 'notifications',\n        description: 'Application name',\n        defaultMessage: 'Notifications'\n    },\n    integrations: {\n        id: 'integrations',\n        description: 'Application name',\n        defaultMessage: 'Integrations'\n    },\n    integrationsEmptyStateTitle: {\n        id: 'integrationsEmptyStateTitle',\n        description: 'Integrations Empty State title',\n        defaultMessage: 'No integrations'\n    },\n    integrationsTableEmptyStateBody: {\n        id: 'integrationsTableEmptyStateBody',\n        description: 'Integrations Empty State body',\n        defaultMessage: 'Connect to webhooks and external applications.'\n    }\n});\n","import * as React from 'react';\nimport { Redirect } from 'react-router';\n\nimport { linkTo } from '../Routes';\n\nexport const defaultBundleName = 'rhel';\n\nexport const RedirectToDefaultBundle = () => <Redirect from={ linkTo.notifications('') } to={ linkTo.notifications(defaultBundleName) } />;\n","import { intlHelper } from '@redhat-cloud-services/frontend-components-translations';\nimport { createIntl, createIntlCache } from 'react-intl';\nimport { DeepReadonly } from 'ts-essentials';\n\nimport messages from './DefinedMessages';\n\nconst cache = createIntlCache();\nconst locale = navigator.language.slice(0, 2);\nconst intl = createIntl({\n    // eslint-disable-next-line no-console\n    onError: console.log,\n    locale\n}, cache);\nconst intlSettings = { locale };\n\nconst MutableMessages = {\n    appName: intlHelper(intl.formatMessage(messages.notifications), intlSettings),\n    appNameIntegrations: intlHelper(intl.formatMessage(messages.integrations), intlSettings),\n    pages: {\n        integrations: {\n            list: {\n                title: 'Integrations'\n            },\n            add: {\n                title: 'Add integration'\n            },\n            edit: {\n                title: 'Edit integration'\n            }\n        },\n        notifications: {\n            list: {\n                title: 'Notifications',\n                viewHistory: 'View event log'\n            },\n            eventLog: {\n                title: 'Event Log',\n                subtitle: 'View all the events affecting your organization',\n                viewNotifications: 'View notification settings'\n            }\n        },\n        error: {\n            title: 'Notifications',\n            emptyState: {\n                title: 'Unhandled error',\n                content: 'There was a problem trying to process your request.',\n                showDetails: 'Show details',\n                actions: {\n                    goToIndex: 'Go back'\n                }\n            }\n        }\n    },\n    components: {\n        integrations: {\n            toolbar: {\n                actions: {\n                    addIntegration: 'Add integration',\n                    editIntegration: 'Edit integration'\n                }\n            },\n            table: {\n                title: 'Integrations',\n                columns: {\n                    name: 'Name',\n                    type: 'Type',\n                    lastConnectionAttempt: 'Last connection attempt',\n                    enabled: 'Enabled'\n                }\n            },\n            enableError: {\n                title: 'Unable to enable the Integration',\n                description: 'There was a problem trying to enable the integration: \"{0}\".\\nPlease try again.'\n            },\n            disableError: {\n                title: 'Unable to disable the Integration',\n                description: 'There was a problem trying to disable the integration: \"{0}\".\\nPlease try again.'\n            }\n        },\n        notifications: {\n            toolbar: {\n                actions: {\n\n                }\n            },\n            table: {\n                title: 'Notifications',\n                columns: {\n                    event: 'Event type',\n                    action: 'Action',\n                    recipient: 'Recipient'\n                }\n            }\n        }\n    },\n    common: {\n        choose: 'Please choose'\n    }\n};\n\nexport const Messages: DeepReadonly<typeof MutableMessages> = MutableMessages;\n","import { ErrorBoundaryPage } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport { Messages } from '../../properties/Messages';\n\ntype ErrorPageProps = RouteComponentProps<any>;\n\nexport const ErrorPageInternal: React.FunctionComponent<ErrorPageProps> = (props) => {\n    const goToListPage = React.useCallback(() => {\n        props.history.goBack();\n    }, [ props.history ]);\n\n    return (\n        <ErrorBoundaryPage\n            action={ goToListPage }\n            actionLabel={ Messages.pages.error.emptyState.actions.goToIndex }\n            pageHeader={ Messages.pages.error.title }\n            title={ Messages.pages.error.emptyState.title }\n            description={ Messages.pages.error.emptyState.content }\n        >\n            { props.children }\n        </ErrorBoundaryPage>\n    );\n};\n\nexport const ErrorPage = withRouter(ErrorPageInternal);\n","export enum ServerStatus {\n    RUNNING = 'RUNNING',\n    MAINTENANCE = 'MAINTENANCE'\n}\n\ntype ServerRunning = {\n    status: ServerStatus.RUNNING;\n}\n\ntype ServerMaintenance = {\n    status: ServerStatus.MAINTENANCE;\n    from: Date,\n    to: Date\n}\n\nexport type Server = ServerRunning | ServerMaintenance;\n","import * as React from 'react';\nimport { useContext } from 'react';\n\nimport { Server, ServerStatus } from '../types/Server';\n\nexport interface AppContext {\n    rbac: {\n        canWriteIntegrationsEndpoints: boolean;\n        canReadIntegrationsEndpoints: boolean;\n        canWriteNotifications: boolean;\n        canReadNotifications: boolean;\n    },\n    isOrgAdmin: boolean,\n    server: Server\n}\n\nexport const AppContext = React.createContext<AppContext>({\n    rbac: {\n        canReadIntegrationsEndpoints: false,\n        canReadNotifications: false,\n        canWriteIntegrationsEndpoints: false,\n        canWriteNotifications: false\n    },\n    isOrgAdmin: false,\n    server: {\n        status: ServerStatus.RUNNING\n    }\n});\n\nexport const useAppContext = () => useContext(AppContext);\n","import { getOuiaPropsFactory } from '@redhat-cloud-services/insights-common-typescript';\n\nexport const getOuiaProps = getOuiaPropsFactory('Notifications');\n","import { CheckCircleIcon, ExclamationCircleIcon } from '@patternfly/react-icons';\nimport { global_danger_color_100, global_spacer_xs, global_success_color_100 } from '@patternfly/react-tokens';\nimport { toUtc } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport format from 'date-fns/format';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nexport interface ConnectionAttemptProps {\n    type: ConnectionAttemptType;\n    date: Date;\n}\n\nexport enum ConnectionAttemptType {\n    SUCCESS,\n    FAILED\n}\n\nconst dateClassName = style({\n    marginLeft: global_spacer_xs.var\n});\n\nconst dateFormatString = 'MMM d, HH:mm:ss';\n\nconst getIcon = (type: ConnectionAttemptType) => {\n    switch (type) {\n        case ConnectionAttemptType.SUCCESS:\n            return <CheckCircleIcon color={ global_success_color_100.value } />;\n        case ConnectionAttemptType.FAILED:\n            return <ExclamationCircleIcon color={ global_danger_color_100.value } />;\n        default:\n            assertNever(type);\n    }\n};\n\nexport const ConnectionAttempt: React.FunctionComponent<ConnectionAttemptProps> = (props) => {\n    const formattedDate = format(toUtc(props.date), dateFormatString);\n    return (\n        <>\n            { getIcon(props.type) } <span className={ dateClassName }> { formattedDate } UTC </span>\n        </>\n    );\n};\n","import { Alert, AlertVariant } from '@patternfly/react-core';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { ConnectionAttempt, ConnectionAttemptType } from './ConnectionAttempt';\n\ninterface ConnectionAlertProps extends OuiaComponentProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n    alertVariant: AlertVariant;\n    description: string;\n    title: string;\n}\n\nconst connectionAttemptClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst marginTopClassName = style({\n    marginTop: global_spacer_sm.var\n});\n\nexport const ConnectionAlert: React.FunctionComponent<ConnectionAlertProps> = (props) => {\n    return (\n        <div { ...getOuiaProps('ConnectionAlert', props) }>\n            <Alert title={ props.title } variant={ props.alertVariant } isInline>\n                <p className={ marginTopClassName }>\n                    { props.description }\n                </p>\n                <p className={ marginTopClassName }>\n                    Last attempts: { props.attempts.map(\n                        (attempt, index) =>\n                            <span key={ index } className={ connectionAttemptClassName }>\n                                <ConnectionAttempt\n                                    type={ attempt.isSuccess ? ConnectionAttemptType.SUCCESS : ConnectionAttemptType.FAILED }\n                                    date={ attempt.date }\n                                />\n                            </span>\n                    ) }\n                </p>\n            </Alert>\n        </div>\n    );\n};\n","import { AlertVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { ConnectionAlert } from './ConnectionAlert';\n\ninterface ConnectionDegradedProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n}\n\nexport const ConnectionDegraded: React.FunctionComponent<ConnectionDegradedProps> = (props) => {\n    const description = React.useMemo(() => {\n        const failures = props.attempts.filter(a => !a.isSuccess).length;\n        const attempts = props.attempts.length;\n\n        if (failures === 1) {\n            return `This connection has had 1 failure in the last ${ attempts } connection attempts.`;\n        }\n\n        return `This connection has had ${ failures } failures in the last ${ attempts } connection attempts.`;\n    }, [ props.attempts ]);\n\n    return <ConnectionAlert\n        attempts={ props.attempts }\n        alertVariant={ AlertVariant.warning }\n        description={ description }\n        title=\"Connection is degraded\"\n    />;\n};\n","import { AlertVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { ConnectionAlert } from './ConnectionAlert';\n\ninterface ConnectionFailedProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n}\n\nexport const ConnectionFailed: React.FunctionComponent<ConnectionFailedProps> = (props) => {\n    return <ConnectionAlert\n        attempts={ props.attempts }\n        alertVariant={ AlertVariant.danger }\n        description=\"This connection has failed the most recent connection attempts.\"\n        title=\"Failed connection\"\n    />;\n};\n","import { TextContent, TextList, TextListItem, TextListItemVariants, TextListVariants } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { UserIntegration } from '../../../types/Integration';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\n\nconst titleClass = style({\n    fontWeight: 400\n});\n\ninterface ExpandedContentProps extends OuiaComponentProps {\n    integration: UserIntegration;\n}\n\nexport const ExpandedContent: React.FunctionComponent<ExpandedContentProps> = (props) => {\n    return (\n        <TextContent { ...getOuiaProps('Integrations/Table/ExpandedContent', props) }>\n            <TextList component={ TextListVariants.dl }>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    Endpoint URL\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.url }\n                </TextListItem>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    SSL verification\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.sslVerificationEnabled ? 'Enabled' : 'Disabled' }\n                </TextListItem>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    Authentication type\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.secretToken !== undefined ? 'Secret token' : 'None' }\n                </TextListItem>\n            </TextList>\n        </TextContent>\n    );\n};\n","import {\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateVariant,\n    Spinner,\n    Switch,\n    Text,\n    Title\n} from '@patternfly/react-core';\nimport { CheckCircleIcon, CubesIcon, ExclamationCircleIcon, OffIcon } from '@patternfly/react-icons';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/Table/table';\nimport {\n    expandable,\n    IActions,\n    IActionsResolver,\n    ICell,\n    IRow,\n    IRowData,\n    RowWrapperProps,\n    Table,\n    TableBody,\n    TableHeader\n} from '@patternfly/react-table';\nimport {\n    global_danger_color_100,\n    global_spacer_md,\n    global_spacer_sm,\n    global_success_color_100,\n    global_warning_color_200\n} from '@patternfly/react-tokens';\nimport { SkeletonTable } from '@redhat-cloud-services/frontend-components';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport { important } from 'csx';\nimport * as React from 'react';\nimport { useIntl } from 'react-intl';\nimport { style } from 'typestyle';\n\nimport Config from '../../config/Config';\nimport messages from '../../properties/DefinedMessages';\nimport { Messages } from '../../properties/Messages';\nimport { IntegrationConnectionAttempt, UserIntegration } from '../../types/Integration';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { ConnectionDegraded } from './Table/ConnectionDegraded';\nimport { ConnectionFailed } from './Table/ConnectionFailed';\nimport { ExpandedContent } from './Table/ExpandedContent';\n\nexport type OnEnable = (integration: IntegrationRow, index: number, isChecked: boolean) => void;\n\ninterface IntegrationsTableProps extends OuiaComponentProps {\n    isLoading: boolean;\n    loadingCount?: number;\n    integrations: Array<IntegrationRow>;\n    onCollapse?: (integration: IntegrationRow, index: number, isOpen: boolean) => void;\n    onEnable?: OnEnable;\n    actionResolver: (row: IntegrationRow, index: number) => IActions;\n}\n\nexport type IntegrationRow = UserIntegration & {\n    isOpen: boolean;\n    isSelected: boolean;\n    isEnabledLoading: boolean;\n    isConnectionAttemptLoading: boolean;\n    lastConnectionAttempts?: Array<IntegrationConnectionAttempt>;\n}\n\nenum LastConnectionAttemptStatus {\n    UNKNOWN,\n    SUCCESS,\n    WARNING,\n    ERROR\n}\n\nconst connectionAlertClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\nconst expandedContentClassName = style({\n    paddingLeft: 0,\n    paddingBottom: 0\n});\n\nconst isEnabledLoadingClassName = style({\n    marginLeft: 10\n});\n\nconst smallMarginLeft = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst degradedClassName = style({\n    fontWeight: 600,\n    color: global_warning_color_200.var,\n    fontSize: 'var(--pf-global--FontSize--sm)'\n});\n\nconst getLastConnectionAttemptStatus = (attempts: Array<IntegrationConnectionAttempt>): LastConnectionAttemptStatus => {\n    if (attempts.length === 0) {\n        return LastConnectionAttemptStatus.UNKNOWN;\n    }\n\n    const failures = attempts.filter(a => !a.isSuccess).length;\n\n    if (failures === attempts.length) {\n        return LastConnectionAttemptStatus.ERROR;\n    } else if (failures > 0) {\n        return LastConnectionAttemptStatus.WARNING;\n    }\n\n    return LastConnectionAttemptStatus.SUCCESS;\n};\n\nconst getConnectionAlert = (attempts: Array<IntegrationConnectionAttempt>) => {\n    const status = getLastConnectionAttemptStatus(attempts);\n    switch (status) {\n        case LastConnectionAttemptStatus.UNKNOWN:\n        case LastConnectionAttemptStatus.SUCCESS:\n            return null;\n        case LastConnectionAttemptStatus.ERROR:\n            return (\n                <div className={ connectionAlertClassName }>\n                    <ConnectionFailed attempts={ attempts } />\n                </div>\n            );\n        case LastConnectionAttemptStatus.WARNING:\n            return (\n                <div className={ connectionAlertClassName }>\n                    <ConnectionDegraded attempts={ attempts } />\n                </div>\n            );\n        default:\n            assertNever(status);\n    }\n};\n\nconst LastConnectionAttemptSuccess: React.FunctionComponent = () => (\n    <>\n        <span>\n            <CheckCircleIcon color={ global_success_color_100.value } data-testid=\"success-icon\" />\n            <span className={ smallMarginLeft }>Success</span>\n        </span>\n    </>\n);\n\nconst LastConnectionAttemptError: React.FunctionComponent = () => (\n    <>\n        <span>\n            <ExclamationCircleIcon color={ global_danger_color_100.value } data-testid=\"fail-icon\" />\n            <span className={ smallMarginLeft }>Failure</span>\n        </span>\n    </>\n);\n\nconst getConnectionAttemptCell = (attempts: Array<IntegrationConnectionAttempt> | undefined, isLoading: boolean) => {\n    if (attempts === undefined) {\n        return 'Error fetching connection attempts';\n    }\n\n    if (isLoading) {\n        return <Spinner size=\"md\" />;\n    }\n\n    const status = getLastConnectionAttemptStatus(attempts);\n    switch (status) {\n        case LastConnectionAttemptStatus.UNKNOWN:\n            return <>\n                <span>\n                    <OffIcon data-testid=\"off-icon\" />\n                    <span className={ smallMarginLeft }>Unknown</span>\n                </span>\n            </>;\n        case LastConnectionAttemptStatus.SUCCESS:\n            return <><LastConnectionAttemptSuccess /></>;\n        case LastConnectionAttemptStatus.ERROR:\n            return <><LastConnectionAttemptError /></>;\n        case LastConnectionAttemptStatus.WARNING:\n            return <>\n                { attempts[0].isSuccess ? <LastConnectionAttemptSuccess /> : <LastConnectionAttemptError />}\n                <br />\n                <Text className={ degradedClassName }>Degraded connection</Text>\n            </>;\n        default:\n            assertNever(status);\n    }\n};\n\nconst toTableRows = (integrations: Array<IntegrationRow>, onEnable?: OnEnable): Array<IRow> => {\n    return integrations.reduce((rows, integration, idx) => {\n        rows.push({\n            id: integration.id,\n            key: integration.id,\n            isOpen: integration.isOpen,\n            selected: integration.isSelected,\n            cells: [\n                {\n                    title: integration.name\n                },\n                {\n                    title: Config.integrations.types[integration.type].name\n                },\n                {\n                    title: getConnectionAttemptCell(integration.lastConnectionAttempts, integration.isConnectionAttemptLoading)\n                },\n                {\n                    title: <>\n                        { integration.isEnabledLoading ? (\n                            <Spinner className={ isEnabledLoadingClassName } size=\"md\" />\n                        ) : (\n                            <Switch\n                                id={ `table-row-switch-id-${integration.id}` }\n                                aria-label=\"Enabled\"\n                                isChecked={ integration.isEnabled }\n                                onChange={ isChecked => onEnable && onEnable(integration, idx, isChecked) }\n                                isDisabled={ !onEnable }\n                                ouiaId={ `enabled-${integration.id}` }\n                            />\n                        )}\n                    </>\n                }\n            ]\n        });\n        rows.push({\n            fullWidth: true,\n            parent: idx * 2,\n            cells: [\n                {\n                    title: <>\n                        {integration.lastConnectionAttempts !== undefined && getConnectionAlert(integration.lastConnectionAttempts)}\n                        <div className={ expandedContentClassName }>\n                            <ExpandedContent integration={ integration } ouiaId={ integration.id } />\n                        </div>\n                    </>,\n                    props: {\n                        colSpan: 6\n                    }\n                }\n            ]\n        });\n        return rows;\n    }, [] as Array<IRow>);\n};\n\nconst columns: Array<ICell> = [\n    {\n        title: Messages.components.integrations.table.columns.name,\n        cellFormatters: [ expandable ],\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.type,\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.lastConnectionAttempt,\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.enabled,\n        transforms: []\n    }\n];\n\nconst buildClassNames = () => {\n    const noneStyle = important('none');\n    const borderStyle = important('var(--pf-c-table--border-width--base) solid var(--pf-c-table--BorderColor)');\n\n    const noBorderBottom = {\n        borderBottom: noneStyle\n    };\n\n    const rowExpandedContentClassName = style(noBorderBottom);\n    const rowWrapperClassName = style(noBorderBottom, {\n        borderTop: borderStyle\n    });\n    const tableClassName = style({\n        borderBottom: borderStyle\n    });\n\n    return {\n        rowExpandedContentClassName,\n        rowWrapperClassName,\n        tableClassName\n    };\n};\n\nconst {\n    rowExpandedContentClassName,\n    rowWrapperClassName,\n    tableClassName\n} = buildClassNames();\n\nconst RowWrapper: React.FunctionComponent<RowWrapperProps> = (props) => {\n    const { trRef, className, rowProps, row, ...rest } = props;\n    if (!row) {\n        return <></>;\n    }\n\n    return (\n        <tr\n            { ...rest }\n            ref={ trRef as any }\n            className={ css(\n                className,\n                row.isExpanded === true ? rowExpandedContentClassName : rowWrapperClassName,\n                row.isExpanded !== undefined && styles.tableExpandableRow,\n                row.isExpanded && styles.modifiers.expanded\n            ) }\n            hidden={ row?.isExpanded !== undefined && !row.isExpanded }\n        >\n            { props.children}\n        </tr>\n    );\n};\n\nexport const IntegrationsTable: React.FunctionComponent<IntegrationsTableProps> = (props) => {\n    const intl = useIntl();\n    const onCollapseHandler = React.useCallback((_event, _index: number, isOpen: boolean, data: IRowData) => {\n        const integrations = props.integrations;\n        const onCollapse = props.onCollapse;\n        const index = integrations.findIndex(integration => integration.id === data.id);\n        if (onCollapse && index !== -1) {\n            const integration = integrations[index];\n            onCollapse(integration, index, isOpen);\n        }\n    }, [ props.integrations, props.onCollapse ]);\n\n    const rows = React.useMemo(() => {\n        return toTableRows(props.integrations, props.onEnable);\n    }, [ props.integrations, props.onEnable ]);\n\n    const actionsResolverCallback: IActionsResolver = React.useCallback(rowData => {\n        const actionResolver = props.actionResolver;\n        if (rowData.parent === undefined && rowData && props.integrations) {\n            const integrationIndex = props.integrations.findIndex(i => i.id === rowData.id);\n            const integrationRow = props.integrations[integrationIndex];\n            if (integrationRow) {\n                return actionResolver(integrationRow, integrationIndex);\n            }\n        }\n\n        return [];\n    }, [ props.actionResolver, props.integrations ]);\n\n    if (props.isLoading) {\n        return (\n            <div { ...getOuiaProps('Integrations/Table',  { ...props, ouiaSafe: false }) }>\n                <SkeletonTable\n                    rowSize={ (props.loadingCount && props.loadingCount > 0) ? props.loadingCount : 10 }\n                    columns={ columns }\n                    paddingColumnSize={ 0 }\n                    sortBy={ undefined }\n                />\n            </div>\n        );\n    }\n\n    return (\n        <div { ...getOuiaProps('Integrations/Table', props) }>\n            {rows.length === 0 ?  (<EmptyState variant={ EmptyStateVariant.full }>\n                <EmptyStateIcon icon={ CubesIcon } />\n                <Title headingLevel=\"h2\" size=\"lg\">\n                    {intl.formatMessage(messages.integrationsEmptyStateTitle)}\n                </Title>\n                <EmptyStateBody>\n                    {intl.formatMessage(messages.integrationsTableEmptyStateBody)}\n                </EmptyStateBody>\n            </EmptyState>) :\n                (<Table\n                    className={ tableClassName }\n                    aria-label={ Messages.components.integrations.table.title }\n                    rows={ rows }\n                    cells={ columns }\n                    onCollapse={ onCollapseHandler }\n                    rowWrapper={ RowWrapper as (props: RowWrapperProps) => React.ReactElement }\n                    actionResolver={ actionsResolverCallback }\n                    isStickyHeader={ true }\n                >\n                    <TableHeader />\n                    <TableBody />\n                </Table>)}\n        </div>\n    );\n};\n","import { ExporterType, exporterTypeFromString } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\ntype OnExport = (type: ExporterType) => void;\n\nexport const useTableExportConfig = (onExport: OnExport) => {\n    return React.useMemo(() => {\n        if (onExport) {\n            return {\n                extraItems: [],\n                onSelect: (_event, type: string) => {\n                    onExport(exporterTypeFromString(type));\n                }\n            };\n        }\n\n        return undefined;\n    }, [ onExport ]);\n};\n","import { Environment, getInsights, getInsightsEnvironment, InsightsType } from '@redhat-cloud-services/insights-common-typescript';\n\nexport const stagingAndProd: Array<Environment> = [\n    'stage-beta',\n    'prod-beta',\n    'stage',\n    'prod'\n];\n\nexport const stagingAndProdStable: Array<Environment> = [\n    'stage',\n    'prod'\n];\n\nexport const stagingStableAndAnyProd: Array<Environment> = [\n    'stage',\n    'prod-beta',\n    'prod'\n];\n\nexport const isStagingOrProd = (insights: InsightsType) => {\n    return stagingAndProd.includes(getInsightsEnvironment(insights));\n};\n\nexport const isStagingStableOrAnyProd = (insights: InsightsType) => {\n    return stagingStableAndAnyProd.includes(getInsightsEnvironment(insights));\n};\n\nexport const isReleased = () => {\n    const insights = getInsights();\n    return isStagingStableOrAnyProd(insights);\n};\n","import { ClearFilters, Filters, SetFilters } from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum IntegrationFilterColumn {\n    NAME = 'name',\n    ENABLED = 'enabled'\n}\n\nexport type IntegrationFilters = Filters<typeof IntegrationFilterColumn>;\nexport type SetIntegrationFilters = SetFilters<typeof IntegrationFilterColumn>;\nexport type ClearIntegrationFilters = ClearFilters<typeof IntegrationFilterColumn>;\n","import { PaginationProps, PaginationVariant } from '@patternfly/react-core';\nimport { PrimaryToolbar } from '@redhat-cloud-services/frontend-components';\nimport {\n    ColumnsMetada,\n    ExporterType,\n    getInsights,\n    OuiaComponentProps,\n    useInsightsEnvironmentFlag,\n    usePrimaryToolbarFilterConfig\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport { cssRaw, style } from 'typestyle';\n\nimport { useTableExportConfig } from '../../hooks/useTableExportConfig';\nimport { Messages } from '../../properties/Messages';\nimport { stagingAndProd } from '../../types/Environments';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { DisabledIntegrationIcon, EnabledIntegrationIcon } from '../Icons';\nimport { ClearIntegrationFilters, IntegrationFilterColumn, IntegrationFilters, SetIntegrationFilters } from './Filters';\n\ncssRaw(`\n    @media only screen and (max-width: 768px) {\n        #integrations-bottom-toolbar .ins-c-primary-toolbar__pagination {\n            flex: 1;\n        }\n    }\n`);\n\ninterface IntegrationsToolbarProps extends OuiaComponentProps {\n    onAddIntegration?: () => void;\n    onExport: (type: ExporterType) => void;\n    filters: IntegrationFilters;\n    setFilters: SetIntegrationFilters;\n    clearFilters: ClearIntegrationFilters;\n    pageCount: number;\n    count: number;\n    page: number;\n    perPage: number;\n    pageChanged: (page: number) => void;\n    perPageChanged: (page: number) => void;\n}\n\nconst enabledTextClassName = style({\n    marginLeft: 4\n});\n\nconst filterMetadata: ColumnsMetada<typeof IntegrationFilterColumn> = {\n    [IntegrationFilterColumn.NAME]: {\n        label: 'Name',\n        placeholder: 'Filter by name'\n    },\n    [IntegrationFilterColumn.ENABLED]: {\n        label: 'Enabled',\n        placeholder: 'Filter by enabled',\n        options: {\n            exclusive: false,\n            items: [\n                {\n                    value: 'Enabled',\n                    label: <><EnabledIntegrationIcon /> <span className={ enabledTextClassName }>Enabled</span></>\n                },\n                {\n                    value: 'Disabled',\n                    label: <><DisabledIntegrationIcon /> <span className={ enabledTextClassName }>Disabled</span></>\n                }\n            ]\n        }\n    }\n};\n\nexport const IntegrationsToolbar: React.FunctionComponent<IntegrationsToolbarProps> = (props) => {\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n        IntegrationFilterColumn,\n        props.filters,\n        props.setFilters,\n        props.clearFilters,\n        filterMetadata\n    );\n\n    const actionsConfig = React.useMemo(() => {\n        const actions = [\n            {\n                key: 'add-integration',\n                label: Messages.components.integrations.toolbar.actions.addIntegration,\n                onClick: props.onAddIntegration,\n                props: {\n                    isDisabled: !props.onAddIntegration\n                }\n            }\n        ];\n\n        return {\n            actions,\n            kebabToggleProps: {\n                isDisabled: false\n            }\n        };\n    }, [ props.onAddIntegration ]);\n\n    const exportConfig = useTableExportConfig(props.onExport);\n\n    const filterConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.filterConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const activeFiltersConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.activeFiltersConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const pageChanged = React.useCallback((_event: unknown, page: number) => {\n        const inner = props.pageChanged;\n        inner(page);\n    }, [ props.pageChanged ]);\n\n    const perPageChanged = React.useCallback((_event: unknown, perPage: number) => {\n        const inner = props.perPageChanged;\n        inner(perPage);\n    }, [ props.perPageChanged ]);\n\n    const topPaginationProps = React.useMemo<PaginationProps>(() => ({\n        itemCount: props.count,\n        page: props.page,\n        perPage: props.perPage,\n        isCompact: true,\n        variant: PaginationVariant.top,\n        onSetPage: pageChanged,\n        onFirstClick: pageChanged,\n        onPreviousClick: pageChanged,\n        onNextClick: pageChanged,\n        onLastClick: pageChanged,\n        onPageInput: pageChanged,\n        onPerPageSelect: perPageChanged\n    }), [ props.count, props.page, props.perPage, pageChanged, perPageChanged ]);\n\n    const bottomPaginationProps = React.useMemo<PaginationProps>(() => ({\n        ...topPaginationProps,\n        isCompact: false,\n        variant: PaginationVariant.bottom\n    }), [ topPaginationProps ]);\n\n    return (\n        <div { ...getOuiaProps('Integrations/DualToolbar', props) }>\n            <PrimaryToolbar\n                actionsConfig={ actionsConfig }\n                exportConfig={ exportConfig }\n                filterConfig={ filterConfig }\n                activeFiltersConfig={ activeFiltersConfig }\n                pagination={ topPaginationProps }\n                id=\"integrations-top-toolbar\"\n            />\n            { props.children }\n            <PrimaryToolbar id=\"integrations-bottom-toolbar\" pagination={ bottomPaginationProps } />\n        </div>\n    );\n};\n","import { CheckCircleIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\n\nexport const EnabledIntegrationIcon: React.FunctionComponent = () => {\n    return <CheckCircleIcon color=\"green\" />;\n};\n","import { OffIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\n\nexport const DisabledIntegrationIcon: React.FunctionComponent = () => {\n    return <OffIcon />;\n};\n","import { assertNever } from 'assert-never';\nimport { useMemo, useReducer } from 'react';\n\nenum UseDeleteModalReducerActionType {\n    DELETE = 'delete',\n    RESET = 'reset'\n}\n\ninterface UseDeleteModalActionDelete<T> {\n    type: UseDeleteModalReducerActionType.DELETE;\n    data: T;\n}\n\ninterface UseDeleteModalActionReset {\n    type: UseDeleteModalReducerActionType.RESET;\n}\n\ntype UseDeleteModalReducerAction<T> = UseDeleteModalActionDelete<T> | UseDeleteModalActionReset;\n\ntype UseDeleteModalReducerState<T> = {\n    isOpen: false;\n    data: undefined;\n} | {\n    isOpen: true;\n    data: T;\n}\n\nconst initialState: UseDeleteModalReducerState<undefined> = {\n    isOpen: false,\n    data: undefined\n};\n\ntype ReducerFunction<T> = (state: UseDeleteModalReducerState<T>, action: UseDeleteModalReducerAction<T>) => UseDeleteModalReducerState<T>;\ntype ReducerActions<T> = {\n    delete: (data: T) => void;\n    reset: () => void;\n}\n\nconst reducer = <T>(\n    state: UseDeleteModalReducerState<T>,\n    action: UseDeleteModalReducerAction<T>\n): UseDeleteModalReducerState<T> => {\n    switch (action.type) {\n        case UseDeleteModalReducerActionType.DELETE:\n            return {\n                isOpen: true,\n                data: action.data\n            };\n        case UseDeleteModalReducerActionType.RESET:\n            return initialState;\n        default:\n            assertNever(action);\n\n    }\n};\n\nconst makeDeleteAction = <T>(data: T): UseDeleteModalActionDelete<T> => ({\n    type: UseDeleteModalReducerActionType.DELETE,\n    data\n});\n\nconst makeResetAction = (): UseDeleteModalActionReset => ({\n    type: UseDeleteModalReducerActionType.RESET\n});\n\nexport const useDeleteModalReducer = <T>(): [ UseDeleteModalReducerState<T>, ReducerActions<T> ] => {\n    const [ state, dispatch ] = useReducer<ReducerFunction<T>>(reducer, initialState);\n\n    const actions = useMemo<ReducerActions<T>>(() => ({\n        delete: data => dispatch(makeDeleteAction(data)),\n        reset: () => dispatch(makeResetAction())\n    }), [ dispatch ]);\n\n    return [ state, actions ];\n};\n","import { assertNever } from 'assert-never';\nimport { useMemo, useReducer } from 'react';\n\nenum UseFormModalReducerActionType {\n    EDIT = 'edit',\n    CREATE = 'create',\n    RESET = 'reset'\n}\n\ninterface UseFormModalReducerActionCreate<T> {\n    type: UseFormModalReducerActionType.CREATE;\n    template?: Partial<T>;\n}\n\ninterface UseFormModalReducerActionEdit<T> {\n    type: UseFormModalReducerActionType.EDIT;\n    template: T;\n}\n\ninterface UseFormModalReducerActionReset {\n    type: UseFormModalReducerActionType.RESET;\n}\n\ntype UseFormModalReducerAction<T> = UseFormModalReducerActionCreate<T> | UseFormModalReducerActionEdit<T> | UseFormModalReducerActionReset;\ntype ReducerAction<T> = {\n    create: (template?: Partial<T>) => void;\n    edit: (template: T) => void;\n    reset: () => void;\n};\n\ninterface UseFormModalReducerState<T> {\n    isOpen: boolean;\n    isEdit: boolean;\n    template: T | Partial<T> | undefined;\n    isCopy: boolean;\n}\n\nconst initialState: UseFormModalReducerState<undefined> = {\n    isOpen: false,\n    isEdit: false,\n    template: undefined,\n    isCopy: false\n};\n\ntype CopyFunction<T> = (from: Partial<T>) => Partial<T>;\n\nconst buildReducer = <T>(copyFunction?: CopyFunction<T>) => {\n    const reducer = (\n        state: UseFormModalReducerState<T>,\n        action: UseFormModalReducerAction<T>\n    ): UseFormModalReducerState<T> => {\n        switch (action.type) {\n            case UseFormModalReducerActionType.CREATE:\n                return {\n                    isOpen: true,\n                    isEdit: false,\n                    template: action.template ? copyFunction ? copyFunction(action.template) : action.template : undefined,\n                    isCopy: !!action.template\n                };\n            case UseFormModalReducerActionType.EDIT:\n                return {\n                    isOpen: true,\n                    isEdit: true,\n                    template: action.template,\n                    isCopy: false\n                };\n            case UseFormModalReducerActionType.RESET:\n                return initialState;\n            default:\n                assertNever(action);\n        }\n    };\n\n    return reducer;\n};\n\nconst makeCreateAction = <T>(template?: Partial<T>): UseFormModalReducerActionCreate<T> => ({\n    type: UseFormModalReducerActionType.CREATE,\n    template\n});\n\nconst makeEditAction = <T>(template: T): UseFormModalReducerActionEdit<T> => ({\n    type: UseFormModalReducerActionType.EDIT,\n    template\n});\n\nconst makeResetAction = (): UseFormModalReducerActionReset => ({\n    type: UseFormModalReducerActionType.RESET\n});\n\nexport const useFormModalReducer = <T>(copyFunction?: CopyFunction<T>): [ UseFormModalReducerState<T>, ReducerAction<T> ] => {\n    const reducer = useMemo(() => {\n        return buildReducer(copyFunction);\n    }, [ copyFunction ]);\n\n    const [ state, dispatch ] = useReducer(reducer, initialState);\n\n    const actions = useMemo<ReducerAction<T>>(() => ({\n        create: (data?: Partial<T>) => dispatch(makeCreateAction(data)),\n        edit: (data: T) => dispatch(makeEditAction(data)),\n        reset: () => dispatch(makeResetAction())\n    }), [ dispatch ]);\n\n    return [ state, actions ];\n};\n","import { Filter, Page, Sort } from '@redhat-cloud-services/insights-common-typescript';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nexport interface UsePageReturn {\n    page: Page;\n    changePage: (page: number) => void;\n    changeItemsPerPage: (perPage: number) => void;\n}\n\nexport type FilterBuilder<T> = (filters: T | undefined) => Filter | undefined;\n\nexport const usePage = <T>(defaultPerPage: number, filterBuilder: FilterBuilder<T>, filters?: T, sort?: Sort): UsePageReturn => {\n    const [ currentPage, setCurrentPage ] = useState(1);\n    const [ itemsPerPage, setItemsPerPage ] = useState(defaultPerPage);\n\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [ filters, setCurrentPage, itemsPerPage ]);\n\n    const page = useMemo(() => {\n        const filter = filterBuilder ? filterBuilder(filters) : undefined;\n        return Page.of(currentPage, itemsPerPage, filter, sort);\n    }, [ currentPage, itemsPerPage, filters, sort, filterBuilder ]);\n\n    const changePage = useCallback((page: number) => {\n        setCurrentPage(page);\n    },  [ setCurrentPage ]);\n\n    const changeItemsPerPage = useCallback((perPage: number) => {\n        setItemsPerPage(perPage);\n    }, [ setItemsPerPage ]);\n\n    return {\n        page,\n        changePage,\n        changeItemsPerPage\n    };\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle?: Bundle | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    default_behavior?: boolean | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const CamelProperties = zodSchemaCamelProperties();\n  export type CamelProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    extras?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    secret_token?: string | undefined | null;\n    sub_type?: string | undefined | null;\n    url: string;\n  };\n\n  export const CurrentStatus = zodSchemaCurrentStatus();\n  export type CurrentStatus = {\n    end_time?: string | undefined | null;\n    start_time?: string | undefined | null;\n    status: Status;\n  };\n\n  export const EmailSubscriptionProperties =\n    zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = {\n    group_id?: UUID | undefined | null;\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties | CamelProperties)\n      | undefined\n      | null;\n    sub_type?: string | undefined | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType =\n    | 'webhook'\n    | 'email_subscription'\n    | 'default'\n    | 'camel';\n\n  export const EventLogEntry = zodSchemaEventLogEntry();\n  export type EventLogEntry = {\n    actions: Array<EventLogEntryAction>;\n    application: string;\n    bundle: string;\n    created: string;\n    event_type: string;\n    id: UUID;\n    payload?: string | undefined | null;\n  };\n\n  export const EventLogEntryAction = zodSchemaEventLogEntryAction();\n  export type EventLogEntryAction = {\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpoint_id?: UUID | undefined | null;\n    endpoint_sub_type?: string | undefined | null;\n    endpoint_type: EndpointType;\n    id: UUID;\n    invocation_result: boolean;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const PageEventLogEntry = zodSchemaPageEventLogEntry();\n  export type PageEventLogEntry = {\n    data: Array<EventLogEntry>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const RenderEmailTemplateRequest =\n    zodSchemaRenderEmailTemplateRequest();\n  export type RenderEmailTemplateRequest = {\n    body_template: string;\n    payload: string;\n    subject_template: string;\n  };\n\n  export const RequestDefaultBehaviorGroupPropertyList =\n    zodSchemaRequestDefaultBehaviorGroupPropertyList();\n  export type RequestDefaultBehaviorGroupPropertyList = {\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const RequestEmailSubscriptionProperties =\n    zodSchemaRequestEmailSubscriptionProperties();\n  export type RequestEmailSubscriptionProperties = {\n    only_admins: boolean;\n  };\n\n  export const Status = zodSchemaStatus();\n  export type Status = 'MAINTENANCE' | 'UP';\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  export const __Empty = zodSchema__Empty();\n  export type __Empty = string | undefined;\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle: zodSchemaBundle().optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          default_behavior: z.boolean().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCamelProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          extras: z.record(z.string()).optional().nullable(),\n          secret_token: z.string().optional().nullable(),\n          sub_type: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCurrentStatus() {\n      return z\n      .object({\n          end_time: z.string().optional().nullable(),\n          start_time: z.string().optional().nullable(),\n          status: zodSchemaStatus()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z\n      .object({\n          group_id: zodSchemaUUID().optional().nullable(),\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties(),\n              zodSchemaCamelProperties()\n          ])\n          .optional()\n          .nullable(),\n          sub_type: z.string().optional().nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default', 'camel' ]);\n  }\n\n  function zodSchemaEventLogEntry() {\n      return z\n      .object({\n          actions: z.array(zodSchemaEventLogEntryAction()),\n          application: z.string(),\n          bundle: z.string(),\n          created: z.string(),\n          event_type: z.string(),\n          id: zodSchemaUUID(),\n          payload: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventLogEntryAction() {\n      return z\n      .object({\n          details: z.record(z.unknown()).optional().nullable(),\n          endpoint_id: zodSchemaUUID().optional().nullable(),\n          endpoint_sub_type: z.string().optional().nullable(),\n          endpoint_type: zodSchemaEndpointType(),\n          id: zodSchemaUUID(),\n          invocation_result: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageEventLogEntry() {\n      return z\n      .object({\n          data: z.array(zodSchemaEventLogEntry()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRenderEmailTemplateRequest() {\n      return z\n      .object({\n          body_template: z.string(),\n          payload: z.string(),\n          subject_template: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestDefaultBehaviorGroupPropertyList() {\n      return z\n      .object({\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestEmailSubscriptionProperties() {\n      return z\n      .object({\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatus() {\n      return z.enum([ 'MAINTENANCE', 'UP' ]);\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchema__Empty() {\n      return z.string().max(0).optional();\n  }\n}\n\nexport namespace Operations {\n  // GET /endpoints\n  export namespace EndpointServiceGetEndpoints {\n    const Active = z.boolean();\n    type Active = boolean;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Type = z.array(z.string());\n    type Type = Array<string>;\n    export interface Params {\n      active?: Active;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n      type?: Type;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'EndpointPage', 200, Schemas.EndpointPage>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints';\n        const query = {} as Record<string, any>;\n        if (params.active !== undefined) {\n            query.active = params.active;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        if (params.type !== undefined) {\n            query.type = params.type;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.EndpointPage, 'EndpointPage', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // POST /endpoints\n  export namespace EndpointServiceCreateEndpoint {\n    export interface Params {\n      body: Schemas.Endpoint;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.Endpoint, 'Endpoint', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/email/subscription/{bundleName}/{applicationName}/{type}\n  export namespace EndpointServiceSubscribeEmail {\n    const ApplicationName = z.string();\n    type ApplicationName = string;\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      applicationName: ApplicationName;\n      bundleName: BundleName;\n      type: Schemas.EmailSubscriptionType;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/integrations/v1.0/endpoints/email/subscription/{bundleName}/{applicationName}/{type}'\n        .replace('{applicationName}', params.applicationName.toString())\n        .replace('{bundleName}', params.bundleName.toString())\n        .replace('{type}', params.type.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/email/subscription/{bundleName}/{applicationName}/{type}\n  export namespace EndpointServiceUnsubscribeEmail {\n    const ApplicationName = z.string();\n    type ApplicationName = string;\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      applicationName: ApplicationName;\n      bundleName: BundleName;\n      type: Schemas.EmailSubscriptionType;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/integrations/v1.0/endpoints/email/subscription/{bundleName}/{applicationName}/{type}'\n        .replace('{applicationName}', params.applicationName.toString())\n        .replace('{bundleName}', params.bundleName.toString())\n        .replace('{type}', params.type.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // POST /endpoints/system/email_subscription\n  export namespace EndpointServiceGetOrCreateEmailSubscriptionEndpoint {\n    export interface Params {\n      body: Schemas.RequestEmailSubscriptionProperties;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/system/email_subscription';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.Endpoint, 'Endpoint', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}\n  export namespace EndpointServiceGetEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.Endpoint, 'Endpoint', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/{id}\n  export namespace EndpointServiceUpdateEndpoint {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      id: Schemas.UUID;\n      body: Schemas.Endpoint;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/{id}\n  export namespace EndpointServiceDeleteEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.__Empty, '__Empty', 204),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/{id}/enable\n  export namespace EndpointServiceEnableEndpoint {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/enable'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/{id}/enable\n  export namespace EndpointServiceDisableEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/enable'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.__Empty, '__Empty', 204),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}/history\n  export namespace EndpointServiceGetEndpointHistory {\n    const IncludeDetail = z.boolean();\n    type IncludeDetail = boolean;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.NotificationHistory);\n    type Response200 = Array<Schemas.NotificationHistory>;\n    export interface Params {\n      id: Schemas.UUID;\n      includeDetail?: IncludeDetail;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/history'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        if (params.includeDetail !== undefined) {\n            query.includeDetail = params.includeDetail;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}/history/{history_id}/details\n  export namespace EndpointServiceGetDetailedEndpointHistory {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      historyId: Schemas.UUID;\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/integrations/v1.0/endpoints/{id}/history/{history_id}/details'\n        .replace('{history_id}', params.historyId.toString())\n        .replace('{id}', params.id.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n}\n","import { assertNever } from 'assert-never';\n\nimport { Schemas } from '../../generated/OpenapiIntegrations';\nimport {\n    CamelIntegrationType,\n    Integration,\n    IntegrationBase,\n    IntegrationCamel,\n    IntegrationEmailSubscription,\n    IntegrationHttp,\n    IntegrationType, isCamelType,\n    NewIntegration,\n    ServerIntegrationRequest,\n    ServerIntegrationResponse\n} from '../Integration';\n\ninterface ExternalCompositeTyped {\n    type: string;\n    sub_type?: string | null;\n}\n\nexport const getIntegrationType = (serverIntegration: ExternalCompositeTyped): IntegrationType => {\n    for (const integration of Object.values(IntegrationType)) {\n        if (serverIntegration.sub_type) {\n            if (integration === `${serverIntegration.type}:${serverIntegration.sub_type}`) {\n                return integration as IntegrationType;\n            }\n        } else if (integration === serverIntegration.type) {\n            return integration as IntegrationType;\n        }\n    }\n\n    throw new Error(`Unexpected type: ${serverIntegration.type} with subtype: ${serverIntegration.sub_type}`);\n};\n\nconst getEndpointType = (type: IntegrationType): { type: Schemas.EndpointType, subType?: string } => {\n    const splitType = type.split(':', 2);\n    return {\n        type: splitType[0] as Schemas.EndpointType,\n        subType: splitType.length === 2 ? splitType[1] : undefined\n    };\n};\n\ntype NotNullType = {\n    <T>(value: T | undefined | null): T | undefined;\n    <T>(value: T | undefined | null, defaultValue: T): T;\n}\n\nconst notNull: NotNullType = <T>(value: T | undefined | null, defaultValue?: T): T | undefined => value === null ? defaultValue : value;\n\nconst toIntegrationWebhook = (\n    integrationBase: IntegrationBase<IntegrationType.WEBHOOK>,\n    properties?: Schemas.WebhookProperties): IntegrationHttp => ({\n    ...integrationBase,\n    url: properties?.url ?? '',\n    sslVerificationEnabled: !properties?.disable_ssl_verification ?? false,\n    secretToken: notNull(properties?.secret_token),\n    method: properties?.method ?? Schemas.HttpType.Enum.GET\n});\n\nconst toIntegrationCamel = (\n    integrationBase: IntegrationBase<CamelIntegrationType>,\n    properties?: Schemas.CamelProperties): IntegrationCamel => ({\n    ...integrationBase,\n    url: properties?.url ?? '',\n    sslVerificationEnabled: !properties?.disable_ssl_verification ?? false,\n    secretToken: notNull(properties?.secret_token),\n    basicAuth: properties?.basic_authentication === null ?\n        undefined\n        :\n        {\n            user: notNull(properties?.basic_authentication?.username, ''),\n            pass: notNull(properties?.basic_authentication?.password, '')\n        },\n    extras: notNull(properties?.extras)\n});\n\nconst toIntegrationEmail = (\n    integrationBase: IntegrationBase<IntegrationType.EMAIL_SUBSCRIPTION>,\n    properties: Schemas.EmailSubscriptionProperties): IntegrationEmailSubscription => ({\n    ...integrationBase,\n    ignorePreferences: properties.ignore_preferences,\n    groupId: properties.group_id === null ? undefined : properties.group_id,\n    onlyAdmin: properties.only_admins\n});\n\nexport const toIntegration = (serverIntegration: ServerIntegrationResponse): Integration => {\n\n    const integrationBase: IntegrationBase<IntegrationType> = {\n        id: serverIntegration.id || '',\n        name: serverIntegration.name || '',\n        isEnabled: !!serverIntegration.enabled,\n        type: getIntegrationType(serverIntegration)\n    };\n\n    if (isCamelType(integrationBase.type)) {\n        return toIntegrationCamel(\n            integrationBase as IntegrationBase<CamelIntegrationType>,\n            serverIntegration.properties as Schemas.CamelProperties\n        );\n    }\n\n    switch (integrationBase.type) {\n        case IntegrationType.WEBHOOK:\n            return toIntegrationWebhook(\n                integrationBase as IntegrationBase<IntegrationType.WEBHOOK>,\n                serverIntegration.properties as Schemas.WebhookProperties\n            );\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            return toIntegrationEmail(\n                integrationBase as IntegrationBase<IntegrationType.EMAIL_SUBSCRIPTION>,\n                serverIntegration.properties as Schemas.EmailSubscriptionProperties\n            );\n        default:\n            assertNever(integrationBase.type);\n    }\n};\n\nexport const toIntegrations = (serverIntegrations: Array<ServerIntegrationResponse>): Array<Integration> => {\n    return serverIntegrations\n    .filter(filterOutDefaultAction)\n    .map(toIntegration);\n};\n\ntype ServerIntegrationProperties = Schemas.EmailSubscriptionProperties | Schemas.WebhookProperties | Schemas.CamelProperties\n\nexport const toIntegrationProperties = (integration: Integration | NewIntegration): ServerIntegrationProperties => {\n\n    const type = integration.type;\n\n    if (isCamelType(type)) {\n        const integrationCamel: IntegrationCamel = integration as IntegrationCamel;\n        return {\n            url: integrationCamel.url,\n            disable_ssl_verification: !integrationCamel.sslVerificationEnabled,\n            secret_token: integrationCamel.secretToken,\n            basic_authentication: {\n                username: integrationCamel.basicAuth?.user,\n                password: integrationCamel.basicAuth?.pass\n            },\n            extras: integrationCamel.extras\n        };\n    }\n\n    switch (type) {\n        case IntegrationType.WEBHOOK:\n            const integrationHttp: IntegrationHttp = integration as IntegrationHttp;\n            return {\n                url: integrationHttp.url,\n                method: integrationHttp.method,\n                disable_ssl_verification: !integrationHttp.sslVerificationEnabled,\n                secret_token: integrationHttp.secretToken\n            };\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            const integrationEmail: IntegrationEmailSubscription = integration as IntegrationEmailSubscription;\n            return {\n                only_admins: integrationEmail.onlyAdmin,\n                group_id: integrationEmail.groupId,\n                ignore_preferences: integrationEmail.ignorePreferences\n            };\n        default:\n            assertNever(type);\n    }\n};\n\nexport const toServerIntegrationRequest =\n    (integration: Integration | NewIntegration): ServerIntegrationRequest => {\n        const { type, subType } = getEndpointType(integration.type);\n        return {\n            id: integration.id,\n            name: integration.name,\n            enabled: integration.isEnabled,\n            type,\n            sub_type: subType,\n            description: '',\n            properties: toIntegrationProperties(integration)\n        };\n    };\n\nexport const filterOutDefaultAction = (serverNotification: ServerIntegrationResponse) =>\n    serverNotification.type !== Schemas.EndpointType.enum.default;\n","import { Page, useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useParameterizedQuery, useQuery } from 'react-fetching-library';\n\nimport {\n    Operations\n} from '../generated/OpenapiIntegrations';\nimport { toIntegrations } from '../types/adapters/IntegrationAdapter';\nimport { IntegrationType, UserIntegration } from '../types/Integration';\n\nexport const listIntegrationsActionCreator = (pager?: Page) => {\n    const query = (pager ?? Page.defaultPage()).toQuery();\n    return Operations.EndpointServiceGetEndpoints.actionCreator({\n        limit: +query.limit,\n        offset: +query.offset,\n        type: query.filterType ? (query.filterType as Array<IntegrationType>) : undefined,\n        active: query.filterActive ? query.filterActive === 'true' : undefined\n    });\n};\n\nexport const listIntegrationIntegrationDecoder = validationResponseTransformer((payload: Operations.EndpointServiceGetEndpoints.Payload) => {\n    if (payload?.status === 200) {\n        return validatedResponse(\n            'IntegrationPage',\n            200,\n            {\n                data: toIntegrations(payload.value.data) as Array<UserIntegration>,\n                count: payload.value.meta.count\n            },\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useListIntegrationsQuery = (pager?: Page, initFetch?: boolean) => useTransformQueryResponse(\n    useQuery(listIntegrationsActionCreator(pager), initFetch),\n    listIntegrationIntegrationDecoder\n);\n\nexport const useListIntegrationPQuery = () => useTransformQueryResponse(\n    useParameterizedQuery(listIntegrationsActionCreator),\n    listIntegrationIntegrationDecoder\n);\n","import { ExporterCsv, ExporterHeaders } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { UserIntegration } from '../../../types/Integration';\n\nexport class IntegrationExporterCsv extends ExporterCsv<UserIntegration> {\n\n    public serialize(integration: UserIntegration) {\n        return {\n            ...integration\n        };\n    }\n\n    public headers(): ExporterHeaders<IntegrationExporterCsv, UserIntegration> {\n        return [\n            [ 'id', 'id' ],\n            [ 'name', 'name' ],\n            [ 'isEnabled', 'isEnabled' ],\n            [ 'type', 'type' ],\n            // This works now, but what will happen when there are multiple types (slack, webhook, etc)\n            [ 'url', 'url' ]\n        ];\n    }\n}\n","import { ExporterJson } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { UserIntegration } from '../../../types/Integration';\n\nexport class IntegrationExporterJson extends ExporterJson<UserIntegration> {\n\n}\n","import { Exporter, ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\n\nimport { UserIntegration } from '../../../types/Integration';\nimport { IntegrationExporterCsv } from './Csv';\nimport { IntegrationExporterJson } from './Json';\n\nexport const integrationExporterFactory = (type: ExporterType): Exporter<UserIntegration> => {\n    switch (type) {\n        case ExporterType.CSV:\n            return new IntegrationExporterCsv();\n        case ExporterType.JSON:\n            return new IntegrationExporterJson();\n    }\n\n    assertNever(type);\n};\n","import { Button, ButtonVariant, Spinner } from '@patternfly/react-core';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { IntegrationRef } from '../../types/Notification';\n\ninterface AddNotificationBodyProps {\n    integration: IntegrationRef;\n    isLoading: boolean;\n    switchEnabled: () => void;\n}\n\nconst buttonClassname = style({\n    paddingLeft: 0\n});\n\nexport const AddNotificationBody: React.FunctionComponent<AddNotificationBodyProps> = (props) => {\n\n    const text = props.integration.isEnabled ? 'This integration is enabled and ready to use.' : 'This integration is disabled.';\n    const buttonText = props.integration.isEnabled ? 'Disable integration' : 'Enable integration';\n\n    return (\n        <>\n            <div>{ text }</div>\n            <Button\n                className={ buttonClassname }\n                isDisabled={ props.isLoading }\n                variant={ ButtonVariant.link }\n                onClick={ props.switchEnabled }\n            >\n                {buttonText}\n            </Button>\n            { props.isLoading && (\n                <Spinner size=\"sm\" />\n            ) }\n        </>\n    );\n};\n","import * as Yup from 'yup';\nimport Lazy from 'yup/lib/Lazy';\n\nimport { Schemas } from '../../generated/OpenapiIntegrations';\nimport {\n    CamelIntegrationType,\n    IntegrationCamel,\n    IntegrationHttp,\n    IntegrationType,\n    isCamelType,\n    NewIntegration,\n    NewIntegrationBase,\n    NewIntegrationTemplate\n} from '../../types/Integration';\n\nexport const maxIntegrationNameLength = 150;\n\nexport const IntegrationSchemaBase: Yup.SchemaOf<NewIntegrationBase> = Yup.object({\n    id: Yup.string().optional(),\n    name: Yup.string().required('Write a name for this Integration.').max(maxIntegrationNameLength).trim(),\n    type: Yup.mixed<IntegrationType>().oneOf(Object.values(IntegrationType)).default(IntegrationType.WEBHOOK).optional(),\n    isEnabled: Yup.boolean().default(true).required()\n});\n\nexport const IntegrationHttpSchema: Yup.SchemaOf<NewIntegrationTemplate<IntegrationHttp>> = IntegrationSchemaBase.concat(Yup.object().shape({\n    type: Yup.mixed<IntegrationType.WEBHOOK>().oneOf([ IntegrationType.WEBHOOK ]).required(),\n    url: Yup.string().url().required('Write a valid url for this Integration.'),\n    sslVerificationEnabled: Yup.boolean().default(true),\n    secretToken: Yup.string().notRequired(),\n    method: Yup.mixed<Schemas.HttpType>().oneOf(Object.values(Schemas.HttpType.Enum)).default(Schemas.HttpType.Enum.POST)\n}));\n\nexport const IntegrationCamelSchema: Yup.SchemaOf<NewIntegrationTemplate<IntegrationCamel>> = IntegrationSchemaBase.concat(Yup.object().shape({\n    type: Yup.mixed<CamelIntegrationType>().oneOf(\n        Object.values(IntegrationType).filter(v => isCamelType(v)) as Array<CamelIntegrationType>\n    ).required(),\n    url: Yup.string().url().required('Provide a url/host for this Integration.'),\n    sslVerificationEnabled: Yup.boolean().default(true),\n    secretToken: Yup.string().notRequired(),\n    basicAuth: Yup.object().shape({\n        user: Yup.string().when('pass',\n            {\n                is: pass => pass && pass.length > 0,\n                then: Yup.string().required('Provide an user')\n            }\n        ),\n        pass: Yup.string().when('user',\n            {\n                is: user => user && user.length > 0,\n                then: Yup.string().required('Provide a password.')\n            }\n        )\n    }, [ [ 'user', 'pass' ] ]).optional(),\n    extras: Yup.mixed()\n    .default({})\n    .transform(s => {\n        try {\n            return JSON.parse(s);\n        } catch (e) {\n            return null;\n        }\n    })\n    .test('valid-json-object', 'Provide a valid json object', extras => extras && typeof extras === 'object')\n}));\n\nexport const IntegrationSchema: Lazy<Yup.SchemaOf<NewIntegration | NewIntegrationBase | NewIntegrationBase>> = Yup.lazy(value => {\n    if (value) {\n        if (value.type === IntegrationType.WEBHOOK) {\n            return IntegrationHttpSchema;\n        }\n\n        if (isCamelType(value.type)) {\n            return IntegrationCamelSchema;\n        }\n    }\n\n    return IntegrationSchemaBase;\n});\n","import { FormSection } from '@patternfly/react-core';\nimport { Checkbox, FormTextArea, FormTextInput, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './IntegrationTypeForm';\n\nexport const IntegrationTypeCamelForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n    return (\n        <div className=\"pf-c-form\" { ...getOuiaProps('Integrations/HttpForm', props) } >\n            <FormTextInput\n                isRequired={ true }\n                label=\"Endpoint URL\"\n                type=\"text\"\n                name=\"url\"\n                id=\"integration-type-camel-url\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'endpoint-url') }\n            />\n            <Checkbox\n                id=\"integration-type-camel-ssl-verification-enabled\"\n                label=\"Enable SSL verification\"\n                name=\"sslVerificationEnabled\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'is-ssl-verification-enabled') }\n            />\n            <FormTextInput\n                isRequired={ false }\n                label=\"Secret token\"\n                id=\"integration-type-camel-secret-token\"\n                name=\"secretToken\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'secret-token') }\n            />\n            <FormSection title=\"Basic auth\">\n                <FormTextInput\n                    id=\"basic-auth-user\"\n                    name=\"basicAuth.user\"\n                    label=\"User\"\n                    ouiaId={ ouiaIdConcat(props.ouiaId, 'basic-auth-user') }\n                />\n                <FormTextInput\n                    id=\"basic-auth-pass\"\n                    name=\"basicAuth.pass\"\n                    label=\"Password\"\n                    ouiaId={ ouiaIdConcat(props.ouiaId, 'basic-auth-pass') }\n                />\n            </FormSection>\n            <FormTextArea id=\"form-extras\" name=\"extras\" label=\"Extras\" ouiaId={ ouiaIdConcat(props.ouiaId, 'extras') } />\n        </div>\n    );\n};\n","import { Checkbox, FormTextInput, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './IntegrationTypeForm';\n\nexport const IntegrationTypeHttpForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n    return (\n        <div className=\"pf-c-form\" { ...getOuiaProps('Integrations/HttpForm', props) } >\n            <FormTextInput\n                isRequired={ true }\n                label=\"Endpoint URL\"\n                type=\"url\"\n                name=\"url\"\n                id=\"integration-type-http-url\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'endpoint-url') }\n            />\n            <Checkbox\n                id=\"integration-type-http-ssl-verification-enabled\"\n                label=\"Enable SSL verification\"\n                name=\"sslVerificationEnabled\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'is-ssl-verification-enabled') }\n            />\n            <FormTextInput\n                isRequired={ false }\n                label=\"Secret token\"\n                id=\"integration-type-http-secret-token\"\n                name=\"secretToken\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'secret-token') }\n            />\n        </div>\n    );\n};\n","import { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\n\nimport { IntegrationType, isCamelType, UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationTypeCamelForm } from './IntegrationTypeCamelForm';\nimport { IntegrationTypeHttpForm } from './IntegrationTypeHttpForm';\n\nexport interface IntegrationTypeForm extends OuiaComponentProps {\n    type: UserIntegrationType;\n}\n\nexport const IntegrationTypeForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n\n    if (isCamelType(props.type)) {\n        return <IntegrationTypeCamelForm { ...props } />;\n    }\n\n    switch (props.type) {\n        case IntegrationType.WEBHOOK:\n            return <IntegrationTypeHttpForm { ...props } />;\n        default:\n            assertNever(props.type);\n    }\n};\n","import { FormSelectOption } from '@patternfly/react-core';\nimport { Form, FormSelect, FormTextInput, OuiaComponentProps, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport { useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport Config from '../../config/Config';\nimport { maxIntegrationNameLength } from '../../schemas/Integrations/Integration';\nimport { isReleased } from '../../types/Environments';\nimport { NewUserIntegration } from '../../types/Integration';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './Form/IntegrationTypeForm';\n\nexport const IntegrationsForm: React.FunctionComponent<OuiaComponentProps> = (props) => {\n\n    const { values } = useFormikContext<NewUserIntegration>();\n    const released = isReleased();\n\n    const options = React.useMemo(() => {\n        const options = released ?\n            Config.integrations.actions.released :\n            Config.integrations.actions.experimental;\n\n        return options\n        .map(type => (<FormSelectOption key={ type } label={ Config.integrations.types[type].name } value={ type } />));\n    }, [ released ]);\n\n    return (\n        <Form { ...getOuiaProps('Integrations/Form', props) }>\n            <FormTextInput\n                maxLength={ maxIntegrationNameLength }\n                isRequired={ true }\n                label=\"Integration name\"\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'name') }\n            />\n            <FormSelect\n                isRequired={ true }\n                label=\"Type\"\n                name=\"type\"\n                id=\"integration-type\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'type') }\n            >\n                { options }\n            </FormSelect>\n            <IntegrationTypeForm\n                type={ values.type }\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'type-form') }\n            />\n        </Form>\n    );\n};\n","import { ActionModalError, SaveModal, SaveModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { Messages } from '../../properties/Messages';\nimport { IntegrationSchema } from '../../schemas/Integrations/Integration';\nimport { isCamelIntegrationType, NewUserIntegration, UserIntegration } from '../../types/Integration';\nimport { IntegrationsForm } from './Form';\n\ntype PartialIntegration = Partial<UserIntegration>;\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onSave';\n\nexport interface IntegrationSaveModalProps extends Omit<SaveModalProps, UsedProps>{\n    initialIntegration?: PartialIntegration;\n    onSave: (integration: UserIntegration | NewUserIntegration) => boolean | Promise<boolean>;\n    isEdit: boolean;\n}\n\ninterface InternalIntegrationSaveModalProps {\n    isEdit: boolean;\n    onClose: (saved: boolean) => void;\n    error?: ActionModalError;\n}\n\nconst InternalIntegrationSaveModal: React.FunctionComponent<InternalIntegrationSaveModalProps> = (props) => {\n\n    const pageMessages = props.isEdit ? Messages.pages.integrations.edit : Messages.pages.integrations.add;\n    const pageTitle =  pageMessages.title;\n    const { handleSubmit, isValid, isSubmitting } = useFormikContext<NewUserIntegration>();\n\n    const onSaveClicked = React.useCallback(() => {\n        handleSubmit();\n        return false;\n    }, [ handleSubmit ]);\n\n    return (\n        <SaveModal\n            isOpen={ true }\n            isSaving={ isSubmitting }\n            onSave={ onSaveClicked }\n            title={ pageTitle }\n            content={ <IntegrationsForm /> }\n            onClose={ props.onClose }\n            error={ props.error }\n            actionButtonDisabled={ !isValid }\n        />\n    );\n};\n\nexport const IntegrationSaveModal: React.FunctionComponent<IntegrationSaveModalProps> = (props) => {\n\n    const [ initialIntegration ] = React.useState<PartialIntegration>(() => {\n        const initial = {\n            // The call is twice, because we use lazy evaluation for the integration base type.\n            // To ensure we get the defaults on the second level (webhook, slack, etc) we need to call it again\n            ...IntegrationSchema.cast(IntegrationSchema.cast({})),\n            ...props.initialIntegration\n        } as PartialIntegration;\n\n        // patch extras to be a string for CAMEL\n        if (isCamelIntegrationType(initial) && typeof initial.extras === 'object') {\n            // We are casting as any, because `extras` is an object, but we need it to be a string for the form\n            initial.extras = JSON.stringify(initial.extras, undefined, 2) as any;\n        }\n\n        return initial;\n    });\n\n    const onSubmit = React.useCallback(async (integration: PartialIntegration) => {\n        const onSave = props.onSave;\n        const onClose = props.onClose;\n        const transformedIntegration = IntegrationSchema.cast(integration) as NewUserIntegration;\n        const saved = await onSave(transformedIntegration);\n        if (saved) {\n            onClose(true);\n        }\n    }, [ props.onSave, props.onClose ]);\n\n    return (\n        <Formik<PartialIntegration>\n            initialValues={ initialIntegration }\n            validationSchema={ IntegrationSchema }\n            onSubmit={ onSubmit }\n            validateOnMount={ true }\n        >\n            <InternalIntegrationSaveModal\n                isEdit={ props.isEdit }\n                onClose={ props.onClose }\n                error={ props.error }\n            />\n        </Formik>\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiIntegrations';\nimport { toIntegration, toServerIntegrationRequest } from '../types/adapters/IntegrationAdapter';\nimport { Integration, NewIntegration, UserIntegration } from '../types/Integration';\n\nexport const createIntegrationActionCreator = (integration: NewIntegration) => {\n    return Operations.EndpointServiceCreateEndpoint.actionCreator({\n        body: toServerIntegrationRequest(integration)\n    });\n};\n\nexport const saveIntegrationActionCreator = (integration: Integration | NewIntegration | UserIntegration) => {\n    if (integration.id) {\n        return Operations.EndpointServiceUpdateEndpoint.actionCreator({\n            body: toServerIntegrationRequest(integration),\n            id: integration.id\n        });\n    }\n\n    return createIntegrationActionCreator(integration);\n};\n\nconst decoder = (response: Operations.EndpointServiceCreateEndpoint.Payload | Operations.EndpointServiceUpdateEndpoint.Payload) => {\n    if (response.type === 'Endpoint') {\n        return {\n            ...response,\n            type: 'Integration',\n            value: toIntegration(response.value)\n        };\n    }\n\n    return response;\n};\n\nexport const useSaveIntegrationMutation = () => useTransformQueryResponse(\n    useMutation(saveIntegrationActionCreator),\n    decoder\n);\n","import { useMutation } from 'react-fetching-library';\n\nimport {\n    Operations\n} from '../generated/OpenapiIntegrations';\nimport { Integration, ServerIntegrationResponse } from '../types/Integration';\n\nexport const switchIntegrationEnabledStatusActionCreator = (integration: Integration) => {\n    if (integration.isEnabled) {\n        return Operations.EndpointServiceDisableEndpoint.actionCreator({\n            id: integration.id\n        });\n    } else {\n        return Operations.EndpointServiceEnableEndpoint.actionCreator({\n            id: integration.id\n        });\n    }\n};\n\nexport const useSwitchIntegrationEnabledStatus =\n    () => useMutation<ServerIntegrationResponse>(switchIntegrationEnabledStatusActionCreator);\n","import { NotificationAppState } from '../types/NotificationAppState';\nimport { SavedNotificationScopeState } from '../types/SavedNotificationScopeTypes';\n\nexport const savedNotificationScopeSelector = (state: NotificationAppState): SavedNotificationScopeState => state.savedNotificationScope;\n\nexport const savedNotificationScopeEqualFn = (left: SavedNotificationScopeState, right: SavedNotificationScopeState): boolean => {\n    return left?.integration === right?.integration && left?.status === right?.status;\n};\n","import { ActionModalError, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\n\nimport { AddNotificationBody } from '../../../components/Integrations/AddNotificationBody';\nimport { IntegrationSaveModal } from '../../../components/Integrations/SaveModal';\nimport { useSaveIntegrationMutation } from '../../../services/useSaveIntegration';\nimport { useSwitchIntegrationEnabledStatus } from '../../../services/useSwitchIntegrationEnabledStatus';\nimport { SavedNotificationScopeActions } from '../../../store/actions/SavedNotificationScopeAction';\nimport {\n    savedNotificationScopeSelector\n} from '../../../store/selectors/SavedNotificationScopeSelector';\nimport { NotificationAppState } from '../../../store/types/NotificationAppState';\nimport { SavedNotificationScopeState, Status } from '../../../store/types/SavedNotificationScopeTypes';\nimport { Integration, NewUserIntegration, UserIntegration, UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationRef } from '../../../types/Notification';\n\ninterface CreatePageProps {\n    isEdit: boolean;\n    initialIntegration: Partial<UserIntegration>;\n    onClose: (saved: boolean) => void;\n}\n\ninterface AddNotificationBodyContainer {\n    integration: IntegrationRef;\n    reduxDispatch: Dispatch;\n    savedNotificationScope: SavedNotificationScopeState;\n}\n\nconst AddNotificationBodyContainer: React.FunctionComponent<AddNotificationBodyContainer> = (props) => {\n    const switchIntegrationEnabledStatus = useSwitchIntegrationEnabledStatus();\n\n    const onClick = React.useCallback((): void => {\n        const reduxDispatch = props.reduxDispatch;\n        const mutate = switchIntegrationEnabledStatus.mutate;\n        const savedNotificationScope = props.savedNotificationScope;\n        if (savedNotificationScope) {\n            reduxDispatch(SavedNotificationScopeActions.start());\n            const integration = savedNotificationScope.integration;\n            mutate(integration).then(response => {\n                if (!response.error) {\n                    reduxDispatch(SavedNotificationScopeActions.finish(!integration.isEnabled));\n                } else {\n                    reduxDispatch(SavedNotificationScopeActions.finish(integration.isEnabled));\n                }\n            });\n        }\n    }, [ switchIntegrationEnabledStatus.mutate, props.reduxDispatch, props.savedNotificationScope ]);\n\n    React.useEffect(() => {\n        const reduxDispatch = props.reduxDispatch;\n        reduxDispatch(SavedNotificationScopeActions.setIntegration(props.integration));\n        return () => {\n            reduxDispatch(SavedNotificationScopeActions.unset());\n        };\n    }, [ props.reduxDispatch, props.integration ]);\n\n    if (!props.savedNotificationScope) {\n        return <React.Fragment />;\n    }\n\n    return <AddNotificationBody\n        integration={ props.savedNotificationScope.integration }\n        isLoading={ props.savedNotificationScope.status === Status.LOADING }\n        switchEnabled={ onClick }\n    />;\n};\n\nconst ConnectedAddNotificationBodyContainer = connect(\n    (state: NotificationAppState) => ({\n        savedNotificationScope: savedNotificationScopeSelector(state)\n    }),\n    dispatch => ({\n        reduxDispatch: dispatch\n    })\n)(AddNotificationBodyContainer);\n\nexport const CreatePage: React.FunctionComponent<CreatePageProps> = props => {\n\n    const saveIntegrationMutation = useSaveIntegrationMutation();\n    const [ hasError, setError ] = React.useState(false);\n\n    const onSaveIntegration = React.useCallback((integration: NewUserIntegration) => {\n        if (!integration.id) {\n            integration.isEnabled = true;\n        }\n\n        setError(false);\n\n        return saveIntegrationMutation.mutate(integration).then(response => {\n            if (response.payload?.status === 200) {\n\n                const savedIntegration: IntegrationRef =  response.payload?.type === 'Integration' ? {\n                    ...response.payload.value as Integration,\n                    type: response.payload.value.type as unknown as UserIntegrationType\n                } : integration as IntegrationRef;\n\n                const title = props.isEdit ? `${savedIntegration.name} saved successfully` : `${savedIntegration.name} added successfully`;\n\n                addSuccessNotification(\n                    title,\n                    <ConnectedAddNotificationBodyContainer integration={ savedIntegration } />,\n                    true\n                );\n\n                return true;\n            } else {\n                setError(true);\n                return false;\n            }\n        });\n    }, [ saveIntegrationMutation, props.isEdit ]);\n\n    const error = React.useMemo<ActionModalError | undefined>(() => {\n        if (hasError) {\n            if (props.isEdit) {\n                return {\n                    title: 'Integration failed to update',\n                    description: <p>There was an error trying to update the Integration. Please try again.</p>\n                };\n            } else {\n                return {\n                    title: 'Failed to create Integration',\n                    description: <p>There was an error trying to create the Integration. Please try again.</p>\n                };\n            }\n        }\n\n        return undefined;\n    }, [ hasError, props.isEdit ]);\n\n    return (\n        <IntegrationSaveModal\n            initialIntegration={ props.initialIntegration }\n            onSave={ onSaveIntegration }\n            isEdit={ props.isEdit }\n            isSaving={ saveIntegrationMutation.loading }\n            onClose={ props.onClose }\n            error={ error }\n        />\n    );\n};\n","import { ExpandableSection, List, ListItem, Skeleton } from '@patternfly/react-core';\nimport { DeleteModal, DeleteModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { UserIntegration } from '../../types/Integration';\nimport { BehaviorGroup } from '../../types/Notification';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onDelete';\n\ninterface IntegrationDeleteModalProps extends Omit<DeleteModalProps, UsedProps> {\n    integration?: UserIntegration;\n    onDelete: (integration: UserIntegration) => boolean | Promise<boolean>;\n    behaviorGroups?: Array<BehaviorGroup>;\n}\n\nexport const IntegrationDeleteModal: React.FunctionComponent<IntegrationDeleteModalProps> = (props) => {\n\n    const onDeleteInternal = React.useCallback(() => {\n        const integration = props.integration;\n        const onDelete = props.onDelete;\n        if (integration) {\n            return onDelete(integration);\n        }\n\n        return false;\n    }, [ props.onDelete, props.integration ]);\n\n    const content = React.useMemo(() => {\n        if (props.behaviorGroups === undefined) {\n            return (\n                <span data-testid=\"loading\">\n                    <Skeleton />\n                </span>\n            );\n        } else if (props.behaviorGroups.length === 0) {\n            return <span\n                data-testid=\"removing-integration-without-notifications\"\n            >\n                Deleting integration <strong>{ props.integration?.name }</strong> does not affect any behavior group.\n            </span>;\n        } else {\n            const behaviorGroupText = props.behaviorGroups.length !== 1 ? 'behavior groups' : 'behavior group';\n            return (\n                <span data-testid={ `removing-integration-with-notifications-${props.behaviorGroups.length}` }>\n                    Delete integration <strong>{ props.integration?.name }</strong> affects {props.behaviorGroups.length} {behaviorGroupText}.\n                    The end point associated with this integration will not recieve notifications for the following events.\n                    { props.behaviorGroups.length > 0 &&\n                    <ExpandableSection toggleText={ `View ${props.behaviorGroups.length} ${behaviorGroupText}` }>\n                        <List>\n                            { props.behaviorGroups.map(behaviorGroup => (\n                                <ListItem\n                                    key={ behaviorGroup.id }\n                                >\n                                    { behaviorGroup.bundleName }: { behaviorGroup.displayName }\n                                </ListItem>\n                            )) }\n                        </List>\n                    </ExpandableSection> }\n                </span>\n            );\n        }\n    }, [ props.behaviorGroups, props.integration ]);\n\n    if (!props.integration) {\n        return null;\n    }\n\n    return (\n        <DeleteModal\n            isOpen={ true }\n            isDeleting={ props.isDeleting }\n            title={ 'Delete integration' }\n            content={ content }\n            onClose={ props.onClose }\n            onDelete={ onDeleteInternal }\n            error={ props.error }\n            titleIconVariant=\"warning\"\n            actionButtonTitle='Delete'\n        />\n    );\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle?: Bundle | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    default_behavior?: boolean | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const CamelProperties = zodSchemaCamelProperties();\n  export type CamelProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    extras?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    secret_token?: string | undefined | null;\n    sub_type?: string | undefined | null;\n    url: string;\n  };\n\n  export const CurrentStatus = zodSchemaCurrentStatus();\n  export type CurrentStatus = {\n    end_time?: string | undefined | null;\n    start_time?: string | undefined | null;\n    status: Status;\n  };\n\n  export const EmailSubscriptionProperties =\n    zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = {\n    group_id?: UUID | undefined | null;\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties | CamelProperties)\n      | undefined\n      | null;\n    sub_type?: string | undefined | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType =\n    | 'webhook'\n    | 'email_subscription'\n    | 'default'\n    | 'camel';\n\n  export const EventLogEntry = zodSchemaEventLogEntry();\n  export type EventLogEntry = {\n    actions: Array<EventLogEntryAction>;\n    application: string;\n    bundle: string;\n    created: string;\n    event_type: string;\n    id: UUID;\n    payload?: string | undefined | null;\n  };\n\n  export const EventLogEntryAction = zodSchemaEventLogEntryAction();\n  export type EventLogEntryAction = {\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpoint_id?: UUID | undefined | null;\n    endpoint_sub_type?: string | undefined | null;\n    endpoint_type: EndpointType;\n    id: UUID;\n    invocation_result: boolean;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const PageEventLogEntry = zodSchemaPageEventLogEntry();\n  export type PageEventLogEntry = {\n    data: Array<EventLogEntry>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const RenderEmailTemplateRequest =\n    zodSchemaRenderEmailTemplateRequest();\n  export type RenderEmailTemplateRequest = {\n    body_template: string;\n    payload: string;\n    subject_template: string;\n  };\n\n  export const RequestDefaultBehaviorGroupPropertyList =\n    zodSchemaRequestDefaultBehaviorGroupPropertyList();\n  export type RequestDefaultBehaviorGroupPropertyList = {\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const RequestEmailSubscriptionProperties =\n    zodSchemaRequestEmailSubscriptionProperties();\n  export type RequestEmailSubscriptionProperties = {\n    only_admins: boolean;\n  };\n\n  export const Status = zodSchemaStatus();\n  export type Status = 'MAINTENANCE' | 'UP';\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  export const __Empty = zodSchema__Empty();\n  export type __Empty = string | undefined;\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle: zodSchemaBundle().optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          default_behavior: z.boolean().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCamelProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          extras: z.record(z.string()).optional().nullable(),\n          secret_token: z.string().optional().nullable(),\n          sub_type: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCurrentStatus() {\n      return z\n      .object({\n          end_time: z.string().optional().nullable(),\n          start_time: z.string().optional().nullable(),\n          status: zodSchemaStatus()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z\n      .object({\n          group_id: zodSchemaUUID().optional().nullable(),\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties(),\n              zodSchemaCamelProperties()\n          ])\n          .optional()\n          .nullable(),\n          sub_type: z.string().optional().nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default', 'camel' ]);\n  }\n\n  function zodSchemaEventLogEntry() {\n      return z\n      .object({\n          actions: z.array(zodSchemaEventLogEntryAction()),\n          application: z.string(),\n          bundle: z.string(),\n          created: z.string(),\n          event_type: z.string(),\n          id: zodSchemaUUID(),\n          payload: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventLogEntryAction() {\n      return z\n      .object({\n          details: z.record(z.unknown()).optional().nullable(),\n          endpoint_id: zodSchemaUUID().optional().nullable(),\n          endpoint_sub_type: z.string().optional().nullable(),\n          endpoint_type: zodSchemaEndpointType(),\n          id: zodSchemaUUID(),\n          invocation_result: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageEventLogEntry() {\n      return z\n      .object({\n          data: z.array(zodSchemaEventLogEntry()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRenderEmailTemplateRequest() {\n      return z\n      .object({\n          body_template: z.string(),\n          payload: z.string(),\n          subject_template: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestDefaultBehaviorGroupPropertyList() {\n      return z\n      .object({\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestEmailSubscriptionProperties() {\n      return z\n      .object({\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatus() {\n      return z.enum([ 'MAINTENANCE', 'UP' ]);\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchema__Empty() {\n      return z.string().max(0).optional();\n  }\n}\n\nexport namespace Operations {\n  // POST /notifications/behaviorGroups\n  // Create a behavior group.\n  export namespace NotificationServiceCreateBehaviorGroup {\n    export interface Params {\n      body: Schemas.BehaviorGroup;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'BehaviorGroup', 200, Schemas.BehaviorGroup>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/behaviorGroups';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.BehaviorGroup, 'BehaviorGroup', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/behaviorGroups/affectedByRemovalOfEndpoint/{endpointId}\n  // Retrieve the behavior groups affected by the removal of an endpoint.\n  export namespace NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint {\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      endpointId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/affectedByRemovalOfEndpoint/{endpointId}'.replace(\n            '{endpointId}',\n            params.endpointId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/behaviorGroups/{behaviorGroupId}/actions\n  // Update the list of actions of a behavior group.\n  export namespace NotificationServiceUpdateBehaviorGroupActions {\n    const Body = z.array(z.string());\n    type Body = Array<string>;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      behaviorGroupId: Schemas.UUID;\n      body: Body;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/{behaviorGroupId}/actions'.replace(\n            '{behaviorGroupId}',\n            params.behaviorGroupId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/behaviorGroups/{id}\n  // Update a behavior group.\n  export namespace NotificationServiceUpdateBehaviorGroup {\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      id: Schemas.UUID;\n      body: Schemas.BehaviorGroup;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // DELETE /notifications/behaviorGroups/{id}\n  // Delete a behavior group.\n  export namespace NotificationServiceDeleteBehaviorGroup {\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/bundles/{bundleId}/behaviorGroups\n  // Retrieve the behavior groups of a bundle.\n  export namespace NotificationServiceFindBehaviorGroupsByBundleId {\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      bundleId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/bundles/{bundleId}/behaviorGroups'.replace(\n            '{bundleId}',\n            params.bundleId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes\n  // Retrieve all event types. The returned list can be filtered by bundle or application.\n  export namespace NotificationServiceGetEventTypes {\n    const ApplicationIds = z.array(z.string());\n    type ApplicationIds = Array<string>;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      applicationIds?: ApplicationIds;\n      bundleId?: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes';\n        const query = {} as Record<string, any>;\n        if (params.applicationIds !== undefined) {\n            query.applicationIds = params.applicationIds;\n        }\n\n        if (params.bundleId !== undefined) {\n            query.bundleId = params.bundleId;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes/affectedByRemovalOfBehaviorGroup/{behaviorGroupId}\n  // Retrieve the event types affected by the removal of a behavior group.\n  export namespace NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup {\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      behaviorGroupId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/eventTypes/affectedByRemovalOfBehaviorGroup/{behaviorGroupId}'.replace(\n            '{behaviorGroupId}',\n            params.behaviorGroupId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes/{eventTypeId}/behaviorGroups\n  // Retrieve the behavior groups linked to an event type.\n  export namespace NotificationServiceGetLinkedBehaviorGroups {\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      eventTypeId: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups'.replace(\n            '{eventTypeId}',\n            params.eventTypeId.toString()\n        );\n        const query = {} as Record<string, any>;\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/eventTypes/{eventTypeId}/behaviorGroups\n  // Update the list of behavior groups of an event type.\n  export namespace NotificationServiceUpdateEventTypeBehaviors {\n    const Body = z.array(z.string());\n    type Body = Array<string>;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      eventTypeId: Schemas.UUID;\n      body: Body;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups'.replace(\n            '{eventTypeId}',\n            params.eventTypeId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Response200, 'unknown', 200),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/events\n  // Retrieve the event log entries.\n  export namespace EventServiceGetEvents {\n    const AppIds = z.array(z.string());\n    type AppIds = Array<string>;\n    const BundleIds = z.array(z.string());\n    type BundleIds = Array<string>;\n    const EndDate = z.string();\n    type EndDate = string;\n    const EndpointTypes = z.array(Schemas.EndpointType);\n    type EndpointTypes = Array<Schemas.EndpointType>;\n    const EventTypeDisplayName = z.string();\n    type EventTypeDisplayName = string;\n    const IncludeDetails = z.boolean();\n    type IncludeDetails = boolean;\n    const IncludePayload = z.boolean();\n    type IncludePayload = boolean;\n    const InvocationResults = z.array(z.boolean());\n    type InvocationResults = Array<boolean>;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const StartDate = z.string();\n    type StartDate = string;\n    export interface Params {\n      appIds?: AppIds;\n      bundleIds?: BundleIds;\n      endDate?: EndDate;\n      endpointTypes?: EndpointTypes;\n      eventTypeDisplayName?: EventTypeDisplayName;\n      includeDetails?: IncludeDetails;\n      includePayload?: IncludePayload;\n      invocationResults?: InvocationResults;\n      limit?: Limit;\n      offset?: Offset;\n      sortBy?: SortBy;\n      startDate?: StartDate;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'PageEventLogEntry', 200, Schemas.PageEventLogEntry>\n      | ValidatedResponse<'__Empty', 401, Schemas.__Empty>\n      | ValidatedResponse<'__Empty', 403, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/events';\n        const query = {} as Record<string, any>;\n        if (params.appIds !== undefined) {\n            query.appIds = params.appIds;\n        }\n\n        if (params.bundleIds !== undefined) {\n            query.bundleIds = params.bundleIds;\n        }\n\n        if (params.endDate !== undefined) {\n            query.endDate = params.endDate;\n        }\n\n        if (params.endpointTypes !== undefined) {\n            query.endpointTypes = params.endpointTypes;\n        }\n\n        if (params.eventTypeDisplayName !== undefined) {\n            query.eventTypeDisplayName = params.eventTypeDisplayName;\n        }\n\n        if (params.includeDetails !== undefined) {\n            query.includeDetails = params.includeDetails;\n        }\n\n        if (params.includePayload !== undefined) {\n            query.includePayload = params.includePayload;\n        }\n\n        if (params.invocationResults !== undefined) {\n            query.invocationResults = params.invocationResults;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sortBy = params.sortBy;\n        }\n\n        if (params.startDate !== undefined) {\n            query.startDate = params.startDate;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(\n                    Schemas.PageEventLogEntry,\n                    'PageEventLogEntry',\n                    200\n                ),\n                new ValidateRule(Schemas.__Empty, '__Empty', 401),\n                new ValidateRule(Schemas.__Empty, '__Empty', 403)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/facets/applications\n  // Return a thin list of configured applications. This can be used to configure a filter in the UI\n  export namespace NotificationServiceGetApplicationsFacets {\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.array(Schemas.Facet);\n    type Response200 = Array<Schemas.Facet>;\n    export interface Params {\n      bundleName?: BundleName;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/facets/applications';\n        const query = {} as Record<string, any>;\n        if (params.bundleName !== undefined) {\n            query.bundleName = params.bundleName;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/facets/bundles\n  // Return a thin list of configured bundles. This can be used to configure a filter in the UI\n  export namespace NotificationServiceGetBundleFacets {\n    const Response200 = z.array(Schemas.Facet);\n    type Response200 = Array<Schemas.Facet>;\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/facets/bundles';\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /notifications/{id}\n  export namespace NotificationServiceMarkRead {\n    const Id = z.number().int();\n    type Id = number;\n    const Response204 = z.string();\n    type Response204 = string;\n    export interface Params {\n      id: Id;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 204, Response204>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response204, 'unknown', 204) ]\n        })\n        .build();\n    };\n  }\n}\n","import { IntegrationRef, UUID } from './Notification';\n\nexport abstract class Recipient {\n    readonly displayName: string;\n\n    protected constructor(displayName: string) {\n        this.displayName = displayName;\n    }\n\n    public abstract getKey();\n    public abstract equals(recipient: Recipient);\n}\n\nexport class IntegrationRecipient extends Recipient {\n    readonly integration: IntegrationRef;\n\n    public constructor(integration: IntegrationRef) {\n        super(integration.name + (integration.isEnabled ? '' : ' - Disabled'));\n        this.integration = integration;\n    }\n\n    public getKey() {\n        return this.integration.id;\n    }\n\n    public equals(recipient: Recipient) {\n        if (recipient instanceof IntegrationRecipient) {\n            return recipient.integration.id === this.integration.id;\n        }\n\n        return false;\n    }\n}\n\nexport class NotificationRecipient extends Recipient {\n    readonly sendToAdmin: boolean;\n    readonly integrationId: UUID | undefined;\n    readonly key: string;\n    readonly description: string | undefined;\n\n    public constructor(integrationId: UUID | undefined, sendToAdmin: boolean) {\n        let displayName = 'Users:';\n        let description = '';\n        if (sendToAdmin) {\n            displayName += ' Admins';\n            description = 'Organization administrators for your account';\n        } else {\n            displayName += ' All';\n            description = 'All users in your organization who subscribed to this email in their User Preferences';\n        }\n\n        super(displayName);\n        this.key = sendToAdmin ? 'admin' : 'user';\n        this.sendToAdmin = sendToAdmin;\n        this.integrationId = integrationId;\n        this.description = description;\n    }\n\n    public getKey() {\n        return this.key;\n    }\n\n    public equals(recipient: Recipient) {\n        if (recipient instanceof NotificationRecipient) {\n            return recipient.sendToAdmin === this.sendToAdmin;\n        }\n\n        return false;\n    }\n}\n\n","import { assertNever } from 'assert-never';\nimport produce, { castDraft } from 'immer';\n\nimport { Schemas } from '../../generated/OpenapiNotifications';\nimport { IntegrationEmailSubscription, ServerIntegrationResponse, UserIntegration } from '../Integration';\nimport {\n    Action, ActionNotify,\n    NotificationBase,\n    NotificationType,\n    ServerNotificationResponse,\n    SystemProperties\n} from '../Notification';\nimport { NotificationRecipient } from '../Recipient';\nimport { toIntegration } from './IntegrationAdapter';\n\nconst _toAction = (type: NotificationType, serverAction: ServerIntegrationResponse): Action => {\n    if (type === NotificationType.INTEGRATION) {\n        const userIntegration = toIntegration(serverAction) as UserIntegration;\n        return {\n            type,\n            integration: userIntegration\n        };\n    }\n\n    const integration = toIntegration(serverAction) as IntegrationEmailSubscription;\n\n    return {\n        type,\n        recipient: [ new NotificationRecipient(integration.id, integration.onlyAdmin) ]\n    };\n};\n\nexport const usesDefault = (endpoints: Array<Schemas.Endpoint>): boolean =>\n    endpoints.findIndex(e => e.type === Schemas.EndpointType.enum.default) !== -1;\n\nexport const toNotification = (serverNotification: ServerNotificationResponse): NotificationBase => {\n    if (!serverNotification.id || !serverNotification.application) {\n        throw new Error(`Unexpected notification from server ${JSON.stringify(serverNotification)}`);\n    }\n\n    return {\n        id: serverNotification.id,\n        applicationDisplayName: serverNotification.application.display_name,\n        eventTypeDisplayName: serverNotification.display_name\n    };\n};\n\nexport const toAction = (serverAction: ServerIntegrationResponse): Action => {\n    switch (serverAction.type) {\n        case Schemas.EndpointType.enum.webhook:\n            return _toAction(NotificationType.INTEGRATION, serverAction);\n        case Schemas.EndpointType.enum.camel:\n            return _toAction(NotificationType.INTEGRATION, serverAction);\n        case Schemas.EndpointType.enum.email_subscription:\n            return _toAction(NotificationType.EMAIL_SUBSCRIPTION, serverAction);\n        case Schemas.EndpointType.enum.default:\n            throw new Error('EndpointType.default should not reach this point');\n        default:\n            assertNever(serverAction.type);\n    }\n};\n\nexport const reduceActions = (actions: ReadonlyArray<Action>): ReadonlyArray<Action> => actions.reduce((actions, current) => {\n    return produce(actions, draft => {\n        if (current.type === NotificationType.EMAIL_SUBSCRIPTION) {\n            const existingAction = draft.find(a => a.type === current.type) as ActionNotify;\n            if (existingAction) {\n                castDraft(existingAction.recipient).push(current.recipient[0]);\n            } else {\n                draft.push(castDraft(current));\n            }\n        } else {\n            draft.push(castDraft(current));\n        }\n    });\n}, [] as ReadonlyArray<Action>);\n\nexport const toNotifications = (serverNotifications: Array<ServerNotificationResponse>) => serverNotifications.map(toNotification);\n\nexport const toSystemProperties = (action: Action): ReadonlyArray<SystemProperties> => {\n    if (action.type === NotificationType.EMAIL_SUBSCRIPTION) {\n        return action.recipient.map(r => ({\n            type: NotificationType.EMAIL_SUBSCRIPTION,\n            props: {\n                onlyAdmins: r.sendToAdmin,\n                ignorePreferences: false,\n                groupId: undefined\n            }\n        }));\n    } else {\n        throw new Error(`No system properties for type ${action.type}`);\n    }\n};\n","import { Schemas } from '../../generated/OpenapiNotifications';\nimport { BehaviorGroup, BehaviorGroupRequest } from '../Notification';\nimport { reduceActions, toAction } from './NotificationAdapter';\n\ntype ServerBehaviorGroup = Schemas.BehaviorGroup;\n\nconst reportBehaviorGroup = (element: ServerBehaviorGroup): never => {\n    throw new Error('Invalid behavior group:' + JSON.stringify(element));\n};\n\nexport const toBehaviorGroup = (serverBehaviorGroup: ServerBehaviorGroup): BehaviorGroup => {\n    const actions = serverBehaviorGroup.actions?.map((behaviorAction) => {\n        if (behaviorAction.endpoint) {\n            return toAction(behaviorAction.endpoint);\n        }\n\n        return reportBehaviorGroup(serverBehaviorGroup);\n    }) || [];\n\n    return {\n        actions: reduceActions(actions),\n        bundleId: serverBehaviorGroup.bundle_id,\n        displayName: serverBehaviorGroup.display_name,\n        id: serverBehaviorGroup.id ?? reportBehaviorGroup(serverBehaviorGroup),\n        bundleName: serverBehaviorGroup.bundle?.display_name ?? '',\n        isDefault: !!serverBehaviorGroup.default_behavior\n    };\n};\n\nexport const toShallowBehaviorGroupRequest = (behaviorGroup: BehaviorGroupRequest): ServerBehaviorGroup => {\n    return {\n        bundle_id: behaviorGroup.bundleId,\n        display_name: behaviorGroup.displayName\n    };\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useParameterizedQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toBehaviorGroup } from '../../types/adapters/BehaviorGroupAdapter';\n\nconst behaviorGroupsForEndpointActionCreator = (integrationId: string) => {\n    return Operations.NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint.actionCreator({\n        endpointId: integrationId\n    });\n};\n\nconst defaultBehaviorGroupDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroups',\n                200,\n                payload.value.map(toBehaviorGroup),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetAffectedBehaviorGroupsByEndpoint = () =>\n    useTransformQueryResponse(useParameterizedQuery(behaviorGroupsForEndpointActionCreator), defaultBehaviorGroupDecoder);\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiIntegrations';\n\nexport const deleteIntegrationActionCreator = (integrationId: string) => {\n    return Operations.EndpointServiceDeleteEndpoint.actionCreator({\n        id: integrationId\n    });\n};\n\nexport const useDeleteIntegration = () => useMutation<boolean>(deleteIntegrationActionCreator);\n","import {\n    ActionModalError,\n    addSuccessNotification,\n    OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { IntegrationDeleteModal } from '../../../components/Integrations/DeleteModal';\nimport { useGetAffectedBehaviorGroupsByEndpoint } from '../../../services/Notifications/GetAffectedBehaviorGroupsByEndpoint';\nimport { useDeleteIntegration } from '../../../services/useDeleteIntegration';\nimport { UserIntegration } from '../../../types/Integration';\n\ninterface IntegrationDeleteModalPageProps extends OuiaComponentProps {\n    onClose: (deleted: boolean) => void;\n    integration: UserIntegration;\n}\n\nexport const IntegrationDeleteModalPage: React.FunctionComponent<IntegrationDeleteModalPageProps> = (props) => {\n\n    const deleteIntegrationMutation = useDeleteIntegration();\n    const getBehaviorGroupsQuery = useGetAffectedBehaviorGroupsByEndpoint();\n    const [ hasError, setError ] = React.useState(false);\n\n    const onDelete = React.useCallback((integration: UserIntegration) => {\n        const deleteIntegration = deleteIntegrationMutation.mutate;\n        setError(false);\n        return deleteIntegration(integration.id).then((response) => {\n            if (!response.error) {\n                addSuccessNotification('Integration removed', 'The integration was removed.');\n                return true;\n            } else {\n                setError(true);\n                return false;\n            }\n        });\n    }, [ deleteIntegrationMutation.mutate, setError ]);\n\n    const error = React.useMemo<ActionModalError | undefined>(() => {\n        if (hasError) {\n            return {\n                title: 'Failed to remove Integration',\n                description: <p>There was an error trying to remove the Integration. Please try again.</p>\n            };\n        }\n\n        return undefined;\n    }, [ hasError ]);\n\n    React.useEffect(() => {\n        const query = getBehaviorGroupsQuery.query;\n        query(props.integration.id);\n    }, [ props.integration, getBehaviorGroupsQuery.query ]);\n\n    const behaviorGroups = React.useMemo(() => {\n        const payload = getBehaviorGroupsQuery.payload;\n        if (payload && payload.type === 'BehaviorGroups') {\n            return payload.value;\n        }\n\n        return undefined;\n    }, [ getBehaviorGroupsQuery.payload ]);\n\n    return (\n        <IntegrationDeleteModal\n            integration={ props.integration }\n            behaviorGroups={ behaviorGroups }\n            isDeleting={ deleteIntegrationMutation.loading }\n            onClose={ props.onClose }\n            onDelete={ onDelete }\n            error={ error }\n        />\n    );\n};\n","import {\n    useFilters,\n    useUrlStateMultipleOptions,\n    useUrlStateString\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\n\nimport { IntegrationFilterColumn } from '../../../components/Integrations/Filters';\n\nconst DEBOUNCE_MS = 250;\n\nconst useUrlStateName = (defaultValue?: string) => useUrlStateString('name', defaultValue);\nconst useUrlStateEnabled = (_defaultValue?: string) => useUrlStateMultipleOptions('enabled', [ 'Enabled', 'Disabled' ]);\n\nconst useStateFactory = (column: IntegrationFilterColumn) => {\n    switch (column) {\n        case IntegrationFilterColumn.NAME:\n            return useUrlStateName;\n        case IntegrationFilterColumn.ENABLED:\n            return useUrlStateEnabled;\n        default:\n            assertNever(column);\n    }\n};\n\nexport const useIntegrationFilter = (debounce = DEBOUNCE_MS) => {\n    return useFilters(IntegrationFilterColumn, debounce, useStateFactory);\n};\n","import { Operations } from '../generated/OpenapiIntegrations';\n\ntype IntegrationHistoryParams = {\n    integrationId: string;\n    limit?: number;\n    sortBy?: 'nh.created:desc'\n}\n\nexport const listIntegrationHistoryActionCreator = (params: IntegrationHistoryParams) => {\n    return Operations.EndpointServiceGetEndpointHistory.actionCreator({\n        id: params.integrationId,\n        limit: params.limit,\n        sortBy: params.sortBy\n    });\n};\n","import { Main, PageHeader, PageHeaderTitle, Section } from '@redhat-cloud-services/frontend-components';\nimport {\n    addDangerNotification,\n    ExporterType,\n    Filter,\n    Operator,\n    Page\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { format } from 'date-fns';\nimport inBrowserDownload from 'in-browser-download';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\n\nimport { AppContext } from '../../../app/AppContext';\nimport { IntegrationFilters } from '../../../components/Integrations/Filters';\nimport { IntegrationsTable } from '../../../components/Integrations/Table';\nimport { IntegrationsToolbar } from '../../../components/Integrations/Toolbar';\nimport Config from '../../../config/Config';\nimport { useDeleteModalReducer } from '../../../hooks/useDeleteModalReducer';\nimport { useFormModalReducer } from '../../../hooks/useFormModalReducer';\nimport { usePage } from '../../../hooks/usePage';\nimport { Messages } from '../../../properties/Messages';\nimport { useListIntegrationPQuery, useListIntegrationsQuery } from '../../../services/useListIntegrations';\nimport { NotificationAppState } from '../../../store/types/NotificationAppState';\nimport { SavedNotificationScopeState } from '../../../store/types/SavedNotificationScopeTypes';\nimport { isReleased } from '../../../types/Environments';\nimport { UserIntegration } from '../../../types/Integration';\nimport { integrationExporterFactory } from '../../../utils/exporters/Integration/Factory';\nimport { CreatePage } from '../Create/CreatePage';\nimport { IntegrationDeleteModalPage } from '../Delete/DeleteModal';\nimport { useActionResolver } from './useActionResolver';\nimport { useIntegrationFilter } from './useIntegrationFilter';\nimport { useIntegrationRows } from './useIntegrationRows';\n\nconst userIntegrationCopier = (userIntegration: Partial<UserIntegration>) => ({\n    ...userIntegration,\n    name: `Copy of ${userIntegration.name}`\n});\n\ninterface IntegrationsListPageProps {\n    reduxDispatch: Dispatch;\n    savedNotificationScope: SavedNotificationScopeState;\n}\n\nexport const IntegrationsListPage: React.FunctionComponent<IntegrationsListPageProps> = props => {\n\n    const { rbac: { canWriteIntegrationsEndpoints }} = useContext(AppContext);\n    const integrationFilter = useIntegrationFilter();\n\n    const released = isReleased();\n    const integrationFilterBuilder = React.useCallback((filters?: IntegrationFilters) => {\n        const filter = new Filter();\n        if (filters?.enabled?.length === 1) {\n            const isEnabled = filters.enabled[0].toLocaleLowerCase() === 'enabled';\n            filter.and('active', Operator.EQUAL, isEnabled.toString());\n        }\n\n        return filter.and(\n            'type',\n            Operator.EQUAL,\n            released ?\n                Config.integrations.actions.released as Array<string> :\n                Config.integrations.actions.experimental as Array<string>\n        );\n    }, [ released ]);\n\n    const pageData = usePage<IntegrationFilters>(10, integrationFilterBuilder, integrationFilter.filters);\n    const integrationsQuery = useListIntegrationsQuery(pageData.page);\n    const exportIntegrationsQuery = useListIntegrationPQuery();\n\n    const integrations = React.useMemo(() => {\n        const payload = integrationsQuery.payload;\n        if (payload?.type === 'IntegrationPage') {\n            return payload.value;\n        }\n\n        return {\n            data: [],\n            count: 0\n        };\n    }, [ integrationsQuery.payload ]);\n\n    const integrationRows = useIntegrationRows(integrations.data, props.reduxDispatch, props.savedNotificationScope);\n    const [ modalIsOpenState, modalIsOpenActions ] = useFormModalReducer<UserIntegration>(userIntegrationCopier);\n    const [ deleteModalState, deleteModalActions ] = useDeleteModalReducer<UserIntegration>();\n\n    const onAddIntegrationClicked = React.useCallback(() => {\n        modalIsOpenActions.create();\n    }, [ modalIsOpenActions ]);\n\n    const onEdit = React.useCallback((integration: UserIntegration) => {\n        modalIsOpenActions.edit(integration);\n    }, [ modalIsOpenActions ]);\n\n    const onDelete = React.useCallback((integration: UserIntegration) => {\n        deleteModalActions.delete(integration);\n    }, [ deleteModalActions ]);\n\n    const onExport = React.useCallback(async (type: ExporterType) => {\n        const query = exportIntegrationsQuery.query;\n        const exporter = integrationExporterFactory(type);\n        const exportedIntegrations: Array<UserIntegration> = [];\n        let page = Page.of(1, 100, new Filter().and('type', Operator.EQUAL, 'webhook'));\n        while (true) {\n            const data = await query(page);\n            if (data?.payload?.status !== 200) {\n                if (exportedIntegrations.length === 0) {\n                    addDangerNotification(\n                        'Unable to download integrations',\n                        'We were unable to download the integrations for exporting. Please try again.'\n                    );\n                    return;\n                } else {\n                    addDangerNotification(\n                        'Unable to download all integrations',\n                        `We were unable to download all the integrations for exporting. Downloading: ${exportedIntegrations.length}.`\n                    );\n                    break;\n                }\n            }\n\n            if (data.payload.value.data.length === 0) {\n                break;\n            }\n\n            page = page.nextPage();\n            exportedIntegrations.push(...data.payload.value.data);\n        }\n\n        if (exportedIntegrations) {\n            inBrowserDownload(\n                exporter.export(exportedIntegrations),\n                `integrations-${format(new Date(Date.now()), 'y-dd-MM')}.${exporter.type}`\n            );\n        }\n    }, [ exportIntegrationsQuery ]);\n\n    const actionResolver = useActionResolver({\n        canWrite: canWriteIntegrationsEndpoints,\n        onEdit,\n        onDelete,\n        onEnable: integrationRows.onEnable\n    });\n\n    const closeFormModal = React.useCallback((saved: boolean) => {\n        const query = integrationsQuery.query;\n        modalIsOpenActions.reset();\n        if (saved) {\n            query();\n        }\n    }, [ modalIsOpenActions, integrationsQuery.query ]);\n\n    const closeDeleteModal = React.useCallback((deleted: boolean) => {\n        const query = integrationsQuery.query;\n        if (deleted) {\n            query();\n        }\n\n        deleteModalActions.reset();\n    }, [ deleteModalActions, integrationsQuery.query ]);\n\n    // This is an estimate of how many rows are in the next page (Won't be always correct because a new row could be added while we are browsing)\n    // Is used for the skeleton loading\n    const loadingCount = Math.min(pageData.page.size, integrations.count - (pageData.page.index - 1) * pageData.page.size)  || 10;\n\n    return (\n        <>\n            <PageHeader>\n                <PageHeaderTitle title={ Messages.pages.integrations.list.title } />\n            </PageHeader>\n            <Main>\n                <Section className='pf-c-page__main-section pf-m-light'>\n                    <IntegrationsToolbar\n                        onAddIntegration={ canWriteIntegrationsEndpoints ? onAddIntegrationClicked : undefined }\n                        onExport={ onExport }\n                        filters={ integrationFilter.filters }\n                        setFilters={ integrationFilter.setFilters }\n                        clearFilters={ integrationFilter.clearFilter }\n                        count={ integrations.count || 0 }\n                        pageCount={ integrations.data.length }\n                        page={ pageData.page.index }\n                        perPage={ pageData.page.size }\n                        pageChanged={ pageData.changePage }\n                        perPageChanged={ pageData.changeItemsPerPage }\n                    >\n                        <IntegrationsTable\n                            isLoading={ integrationsQuery.loading }\n                            loadingCount={ loadingCount }\n                            integrations={ integrationRows.rows }\n                            onCollapse={ integrationRows.onCollapse }\n                            onEnable={ canWriteIntegrationsEndpoints ? integrationRows.onEnable : undefined }\n                            actionResolver={ actionResolver }\n                        />\n                    </IntegrationsToolbar>\n                    { modalIsOpenState.isOpen && (\n                        <CreatePage\n                            isEdit={ modalIsOpenState.isEdit }\n                            initialIntegration={ modalIsOpenState.template || {} }\n                            onClose={ closeFormModal }\n                        />\n                    ) }\n                    { deleteModalState.data && (\n                        <IntegrationDeleteModalPage\n                            onClose={ closeDeleteModal }\n                            integration={ deleteModalState.data }\n                        />\n                    )}\n                </Section>\n            </Main>\n        </>\n    );\n};\n\nconst notificationAppStateSelector = (state: NotificationAppState) => ({\n    savedNotificationScope: state.savedNotificationScope\n});\n\nexport const ConnectedIntegrationsListPage = connect(\n    notificationAppStateSelector,\n    dispatch => ({\n        reduxDispatch: dispatch\n    })\n)(IntegrationsListPage);\n","import { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport pLimit from 'p-limit';\nimport { useCallback, useContext, useEffect, useState } from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { format } from 'react-string-format';\nimport { usePrevious } from 'react-use';\nimport { Dispatch } from 'redux';\n\nimport { IntegrationRow } from '../../../components/Integrations/Table';\nimport { Messages } from '../../../properties/Messages';\nimport { listIntegrationHistoryActionCreator } from '../../../services/useListIntegrationHistory';\nimport {\n    switchIntegrationEnabledStatusActionCreator\n} from '../../../services/useSwitchIntegrationEnabledStatus';\nimport { SavedNotificationScopeActions } from '../../../store/actions/SavedNotificationScopeAction';\nimport { SavedNotificationScopeState, Status } from '../../../store/types/SavedNotificationScopeTypes';\nimport { UserIntegration } from '../../../types/Integration';\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nexport const useIntegrationRows = (\n    integrations: Array<UserIntegration>,\n    reduxDispatch: Dispatch,\n    savedNotificationScope: SavedNotificationScopeState) => {\n    const [ integrationRows, setIntegrationRows ] = useState<Array<IntegrationRow>>([]);\n    const prevIntegrationsInput = usePrevious(integrations);\n\n    const { query } = useContext(ClientContext);\n    const [ limit ] = useState<pLimit.Limit>(() => pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS));\n\n    const setIntegrationRowByIndex = useCallback((index: number, partialIntegration: Partial<IntegrationRow>) => {\n        setIntegrationRows(prevIntegrations => {\n            const newIntegrations = [ ...prevIntegrations ];\n            newIntegrations[index] = { ...newIntegrations[index], ...partialIntegration } as IntegrationRow;\n            return newIntegrations;\n        });\n    }, [ setIntegrationRows ]);\n\n    const setIntegrationRowById = useCallback((id: string, partialIntegration: Partial<IntegrationRow>) => {\n        setIntegrationRows(prevIntegrations => {\n            const index = prevIntegrations.findIndex(integration => integration.id === id);\n            if (index === -1) {\n                return prevIntegrations;\n            }\n\n            const newIntegrations = [ ...prevIntegrations ];\n            newIntegrations[index] = { ...newIntegrations[index], ...partialIntegration } as IntegrationRow;\n            return newIntegrations;\n        });\n    }, [ setIntegrationRows ]);\n\n    useEffect(() => {\n        if (integrations !== prevIntegrationsInput) {\n            setIntegrationRows(prev => {\n                return integrations.map(integration => ({\n                    isOpen: false,\n                    isSelected: false,\n                    isEnabledLoading: false,\n                    lastConnectionAttempts: [],\n                    isConnectionAttemptLoading: true,\n                    ...prev.find(i => i.id === integration.id),\n                    ...integration\n                }));\n            });\n\n            if (integrations) {\n                limit.clearQueue();\n\n                integrations.map(integration => integration.id).forEach(integrationId => {\n                    limit(() => query(listIntegrationHistoryActionCreator({\n                        integrationId,\n                        limit: 5,\n                        sortBy: 'nh.created:desc'\n                    }))).then(response => {\n\n                        if (response.payload && response.payload.status === 200) {\n                            const last5 = response.payload.value.map(p => ({\n                                isSuccess: p.invocationResult,\n                                date: new Date(p.created as string)\n                            }));\n                            setIntegrationRowById(integrationId, {\n                                isConnectionAttemptLoading: false,\n                                lastConnectionAttempts: last5\n                            });\n                        } else {\n                            setIntegrationRowById(integrationId, {\n                                isConnectionAttemptLoading: false,\n                                lastConnectionAttempts: undefined\n                            });\n                        }\n                    });\n                });\n            }\n        }\n    }, [ prevIntegrationsInput, integrations, setIntegrationRowById, limit, query ]);\n\n    const onCollapse = useCallback((_integration: IntegrationRow, index: number, isOpen: boolean) => {\n        setIntegrationRowByIndex(index, {\n            isOpen\n        });\n    }, [ setIntegrationRowByIndex ]);\n\n    const onEnable = useCallback((_integration: UserIntegration, index: number, isEnabled: boolean) => {\n        setIntegrationRowByIndex(index, {\n            isEnabledLoading: true\n        });\n\n        if (savedNotificationScope) {\n            if (_integration.id === savedNotificationScope.integration.id) {\n                reduxDispatch(SavedNotificationScopeActions.start());\n            }\n        }\n\n        query(switchIntegrationEnabledStatusActionCreator(_integration)).then((response) => {\n            if (!response.error) {\n                setIntegrationRowByIndex(index, {\n                    isEnabled,\n                    isEnabledLoading: false\n                });\n                if (savedNotificationScope) {\n                    if (_integration.id === savedNotificationScope.integration.id) {\n                        reduxDispatch(SavedNotificationScopeActions.finish(isEnabled));\n                    }\n                }\n            } else {\n                const message = isEnabled ? Messages.components.integrations.enableError : Messages.components.integrations.disableError;\n\n                if (savedNotificationScope) {\n                    if (_integration.id === savedNotificationScope.integration.id) {\n                        reduxDispatch(SavedNotificationScopeActions.finish(_integration.isEnabled));\n                    }\n                }\n\n                addDangerNotification(\n                    message.title,\n                    format(message.description, _integration.name),\n                    true);\n                setIntegrationRowByIndex(index, {\n                    isEnabled: _integration.isEnabled,\n                    isEnabledLoading: false\n                });\n            }\n        });\n\n    }, [ setIntegrationRowByIndex, query, reduxDispatch, savedNotificationScope ]);\n\n    useEffect(() => {\n        if (savedNotificationScope) {\n            if (savedNotificationScope.status === Status.LOADING) {\n                setIntegrationRowById(\n                    savedNotificationScope.integration.id,\n                    { isEnabledLoading: true }\n                );\n            } else {\n                setIntegrationRowById(\n                    savedNotificationScope.integration.id,\n                    { isEnabledLoading: false, isEnabled: savedNotificationScope.integration.isEnabled }\n                );\n            }\n        }\n    }, [ savedNotificationScope, setIntegrationRowById ]);\n\n    return {\n        rows: integrationRows,\n        onCollapse,\n        onEnable\n    };\n};\n","import { useCallback } from 'react';\n\nimport { IntegrationRow, OnEnable } from '../../../components/Integrations/Table';\nimport { UserIntegration } from '../../../types/Integration';\n\ninterface ActionResolverParams {\n    onEdit: (integration: UserIntegration) => void;\n    onDelete: (integration: UserIntegration) => void;\n    canWrite: boolean;\n    onEnable: OnEnable;\n}\n\nexport const useActionResolver = (params: ActionResolverParams) => {\n\n    return useCallback((integration: IntegrationRow, index: number) => {\n        const onEdit = params.onEdit;\n        const onDelete = params.onDelete;\n        const onEnable = params.onEnable;\n\n        const isDisabled = !params.canWrite;\n\n        return [\n            {\n                title: 'Edit',\n                isDisabled,\n                onClick: () => onEdit(integration)\n            }, {\n                title: 'Delete',\n                isDisabled,\n                onClick: () => onDelete(integration)\n            }, {\n                title: integration.isEnabled ? 'Disable' : 'Enable',\n                isDisabled,\n                onClick: () => onEnable(integration, index, !integration.isEnabled)\n            }\n        ];\n\n    }, [ params.onEdit, params.onDelete, params.canWrite, params.onEnable ]);\n};\n","import { Button, ButtonVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nexport const ButtonLink: React.FunctionComponent<{ navigate: () => void }> = (props) => {\n    return <Button variant={ ButtonVariant.secondary } onClick={ props.navigate }>{ props.children }</Button>;\n};\n","import {\n    Bullseye,\n    DatePicker,\n    DatePickerRef,\n    Select,\n    SelectOption,\n    SelectOptionObject,\n    SelectVariant,\n    Split,\n    SplitItem,\n    TextInputProps\n} from '@patternfly/react-core';\nimport { global_active_color_100, global_palette_black_600, global_spacer_sm } from '@patternfly/react-tokens';\nimport { important } from 'csx';\nimport { add, format, isAfter, isBefore, min, parseISO } from 'date-fns';\nimport produce from 'immer';\nimport * as React from 'react';\nimport { Dispatch, useRef } from 'react';\nimport { SetStateAction } from 'react';\nimport { style } from 'typestyle';\n\nimport { EventPeriod } from '../../../types/Event';\n\nexport enum EventLogDateFilterValue {\n    TODAY = 'today',\n    YESTERDAY = 'yesterday',\n    LAST_7 = 'last_7',\n    LAST_14 = 'last_14',\n    CUSTOM = 'custom'\n}\n\nconst labels: Record<EventLogDateFilterValue, string> = {\n    [EventLogDateFilterValue.TODAY]: 'Today',\n    [EventLogDateFilterValue.YESTERDAY]: 'Yesterday',\n    [EventLogDateFilterValue.LAST_7]: 'Last 7 days',\n    [EventLogDateFilterValue.LAST_14]: 'Last 14 days',\n    [EventLogDateFilterValue.CUSTOM]: 'Custom'\n};\n\nconst toClassName = style({\n    paddingLeft: global_spacer_sm.value,\n    paddingRight: global_spacer_sm.value,\n    color: global_palette_black_600.value\n});\n\nconst datePickerClassName = style({\n    backgroundColor: important('white'),\n    cursor: 'pointer',\n    $nest: {\n        '&::placeholder': {\n            color: important('black')\n        },\n        '&:hover': {\n            borderBottomColor: global_active_color_100.value\n        }\n    }\n});\n\nclass EventLogSelectObject implements SelectOptionObject {\n\n    readonly value: EventLogDateFilterValue;\n\n    constructor(value: EventLogDateFilterValue) {\n        this.value = value;\n    }\n\n    toString(): string {\n        return labels[this.value];\n    }\n    compareTo(selectOption: any): boolean {\n        if (selectOption instanceof EventLogSelectObject) {\n            return selectOption.value === this.value;\n        }\n\n        return false;\n    }\n}\n\nconst dateInputProps: TextInputProps = {\n    isReadOnly: true,\n    className: datePickerClassName\n};\n\ninterface CustomDateFilterProps {\n    retentionDays: number;\n    period: EventPeriod;\n    setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nconst CustomDateFilter: React.FunctionComponent<CustomDateFilterProps> = props => {\n    const maxDate = React.useMemo(() => new Date(), []);\n    const minDate = React.useMemo(() => add(maxDate, {\n        days: -14\n    }), [ maxDate ]);\n\n    const startRangeValidators = React.useMemo(() => [ (date) => {\n        if (isBefore(date, minDate)) {\n            return 'Date is before the retention policy';\n        } else if (isAfter(date, maxDate)) {\n            return 'Date is after today';\n        } else if (props.period[1] && isAfter(date, props.period[1])) {\n            return 'Start date must be before end date';\n        }\n\n        return '';\n    } ], [ minDate, maxDate, props.period ]);\n\n    const endRangeValidators = React.useMemo(() => [ (date) => {\n        if (isBefore(date, minDate)) {\n            return 'Date is before the retention policy';\n        } else if (isAfter(date, maxDate)) {\n            return 'Date is after today';\n        } else if (props.period[0] && isBefore(date, props.period[0])) {\n            return 'End date must be after start date';\n        }\n\n        return '';\n    } ], [ minDate, maxDate, props.period ]);\n\n    const setStartDate = React.useCallback((start: string) => {\n        const setPeriod = props.setPeriod;\n        const startDate = parseISO(start);\n        setPeriod(produce(draft => {\n            draft[0] = startDate;\n            if (!draft[1]) {\n                draft[1] = min([ add(startDate, { days: 1 }), maxDate ]);\n            }\n        }));\n    }, [\n        props.setPeriod,\n        maxDate\n    ]);\n\n    const setEndDate = React.useCallback((end: string) => {\n        const setPeriod = props.setPeriod;\n        setPeriod(produce(draft => {\n            draft[1] = parseISO(end);\n        }));\n    }, [ props.setPeriod ]);\n\n    const startValue: string | undefined = React.useMemo(() => props.period[0] ? format(props.period[0], 'yyyy-MM-dd') : undefined, [ props.period ]);\n    const endValue: string | undefined = React.useMemo(() => props.period[1] ? format(props.period[1], 'yyyy-MM-dd') : undefined, [ props.period ]);\n\n    const startDateRef = useRef<DatePickerRef>(null);\n    const endDateRef = useRef<DatePickerRef>(null);\n\n    const onClickStartDateInput = React.useCallback(() => {\n        startDateRef.current?.setCalendarOpen(true);\n    }, [ startDateRef ]);\n\n    const onClickEndDateInput = React.useCallback(() => {\n        endDateRef.current?.setCalendarOpen(true);\n    }, [ endDateRef ]);\n\n    const startDateInputProps = React.useMemo<TextInputProps>(() => ({\n        ...dateInputProps,\n        onClick: onClickStartDateInput\n    }), [ onClickStartDateInput ]);\n\n    const endDateInputProps = React.useMemo<TextInputProps>(() => ({\n        ...dateInputProps,\n        onClick: onClickEndDateInput\n    }), [ onClickEndDateInput ]);\n\n    return (\n        <Split>\n            <SplitItem>\n                <DatePicker\n                    placeholder=\"Start\"\n                    inputProps={ startDateInputProps }\n                    validators={ startRangeValidators }\n                    onChange={ setStartDate }\n                    value={ startValue }\n                    ref={ startDateRef }\n                />\n            </SplitItem>\n            <SplitItem>\n                <Bullseye>\n                    <span className={ toClassName }>to</span>\n                </Bullseye>\n            </SplitItem>\n            <SplitItem>\n                <DatePicker\n                    placeholder=\"End\"\n                    inputProps={ endDateInputProps }\n                    validators={ endRangeValidators }\n                    onChange={ setEndDate }\n                    value={ endValue }\n                    ref={ endDateRef }\n                />\n            </SplitItem>\n        </Split>\n    );\n};\n\nexport interface EventLogDateFilterProps {\n    value: EventLogDateFilterValue;\n    setValue: (value: EventLogDateFilterValue) => void;\n    retentionDays: number;\n    period: EventPeriod;\n    setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nexport const EventLogDateFilter: React.FunctionComponent<EventLogDateFilterProps> = props => {\n\n    const options = React.useMemo(\n        () => Object.values(EventLogDateFilterValue).map(v => <SelectOption key={ v } value={ new EventLogSelectObject(v) } />),\n        []\n    );\n    const [ isOpen, setOpen ] = React.useState(false);\n    const onToggle = React.useCallback(() => setOpen(prev => !prev), [ setOpen ]);\n    const value = React.useMemo(() => new EventLogSelectObject(props.value), [ props.value ]);\n    const onSelect = React.useCallback((_e: any, selectObject: SelectOptionObject | string) => {\n        const setValue = props.setValue;\n        if (selectObject instanceof EventLogSelectObject) {\n            setValue(selectObject.value);\n            setOpen(false);\n        }\n    }, [ props.setValue ]);\n\n    return (\n        <Split>\n            <SplitItem>\n                <Select\n                    isOpen={ isOpen }\n                    variant={ SelectVariant.single }\n                    onToggle={ onToggle }\n                    selections={ value }\n                    onSelect={ onSelect }\n                >\n                    { options }\n                </Select>\n            </SplitItem>\n            { props.value === EventLogDateFilterValue.CUSTOM && (\n                <SplitItem>\n                    <CustomDateFilter\n                        period={ props.period }\n                        setPeriod={ props.setPeriod }\n                        retentionDays={ props.retentionDays }\n                    />\n                </SplitItem>\n            ) }\n        </Split>\n    );\n};\n","import { IntegrationType } from './Integration';\nimport { UUID } from './Notification';\n\nexport enum NotificationEventStatus {\n    SUCCESS,\n    ERROR,\n    WARNING\n}\n\nexport interface NotificationEventAction {\n    id?: UUID;\n    status: NotificationEventStatus;\n    endpointType: IntegrationType;\n    successCount: number;\n    errorCount: number;\n}\n\nexport interface NotificationEvent {\n    id: UUID;\n    event: string;\n    application: string;\n    bundle: string;\n    actions: ReadonlyArray<NotificationEventAction>;\n    date: Date;\n}\n\nexport type EventPeriod = [ Date | undefined, Date | undefined ];\n","import { toUtc } from '@redhat-cloud-services/insights-common-typescript';\nimport format from 'date-fns/format';\nimport * as React from 'react';\n\nexport interface UtcDateProps {\n    date: Date;\n    isUtc?: boolean;\n}\n\nconst dateFormatString = 'dd MMM yyyy HH:mm:ss';\n\nexport const UtcDate: React.FunctionComponent<UtcDateProps> = props => {\n    const { date, isUtc } = props;\n    const formatted = React.useMemo(() => format(isUtc ? date : toUtc(date), dateFormatString), [ date, isUtc ]);\n\n    return (\n        <>\n            { formatted } UTC\n        </>\n    );\n};\n","import { Skeleton, Tooltip } from '@patternfly/react-core';\nimport { CheckCircleIcon, ExclamationCircleIcon, ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport { TableComposable, TableVariant, Tbody, Td, Th, Thead, Tr } from '@patternfly/react-table';\nimport { c_alert_m_warning__icon_Color, global_palette_black_700, global_spacer_xs } from '@patternfly/react-tokens';\nimport assertNever from 'assert-never';\nimport { important } from 'csx';\nimport * as React from 'react';\nimport { useAsync } from 'react-use';\nimport { style } from 'typestyle';\n\nimport Config from '../../../config/Config';\nimport { NotificationEventAction, NotificationEventStatus } from '../../../types/Event';\nimport { GetIntegrationRecipient, IntegrationType } from '../../../types/Integration';\n\nconst headerClass = style({\n    minWidth: important('90px')\n});\n\nconst grayFontClassName = style({\n    color: global_palette_black_700.value\n});\n\nconst leftMargin = style({\n    marginLeft: global_spacer_xs.value\n});\n\ninterface EventLogActionPopoverContentProps {\n    action: NotificationEventAction;\n    getIntegrationRecipient: GetIntegrationRecipient;\n}\n\nconst toDisplayStatus = (status: NotificationEventStatus) => {\n    switch (status) {\n        case NotificationEventStatus.ERROR:\n            return <> <ExclamationCircleIcon color=\"red\" /> <span className={ leftMargin }>Failure</span></>;\n        case NotificationEventStatus.SUCCESS:\n            return <> <CheckCircleIcon color=\"green\" /> <span className={ leftMargin }>Success</span></>;\n        case NotificationEventStatus.WARNING:\n            return <> <ExclamationTriangleIcon color={ c_alert_m_warning__icon_Color.value } /> <span className={ leftMargin }>Warning</span></>;\n        default:\n            assertNever(status);\n    }\n};\n\nconst succeeded = (action: NotificationEventAction) => {\n    if (action.endpointType === IntegrationType.EMAIL_SUBSCRIPTION) {\n        return 'emails sent';\n    }\n\n    return 'succeeded';\n};\n\nconst failed = (action: NotificationEventAction) => {\n    if (action.endpointType === IntegrationType.EMAIL_SUBSCRIPTION) {\n        return 'emails failed';\n    }\n\n    return 'failed';\n};\n\nexport const EventLogActionPopoverContent: React.FunctionComponent<EventLogActionPopoverContentProps> = props => {\n\n    const { action: { id }, getIntegrationRecipient } = props;\n    const recipient = useAsync(async () => id && getIntegrationRecipient(id), [ id, getIntegrationRecipient ]);\n\n    return (\n        <TableComposable\n            borders={ false }\n            variant={ TableVariant.compact }\n            isStickyHeader={ true }\n        >\n            <Thead>\n                <Tr>\n                    <Th className={ headerClass }>Action</Th>\n                    <Th className={ headerClass }>Recipient</Th>\n                    <Th className={ headerClass }>Status</Th>\n                </Tr>\n            </Thead>\n            <Tbody>\n                <Tr>\n                    <Td>{ Config.integrations.types[props.action.endpointType].action }</Td>\n                    <Td>\n                        { id ? recipient.loading ?  <Skeleton width=\"150px\"  /> : recipient.value : (\n                            <Tooltip content=\"The integration no longer exists, it could have been deleted.\">\n                                <span>Unknown integration</span>\n                            </Tooltip>\n                        ) }\n                    </Td>\n                    <Td>\n                        <div>{ toDisplayStatus(props.action.status) }</div>\n                        { props.action.successCount > 1 && (\n                            <div className={ grayFontClassName }>{ props.action.successCount } { succeeded(props.action) } </div>\n                        ) }\n                        { props.action.errorCount > 1 && (\n                            <div className={ grayFontClassName }>{ props.action.errorCount } { failed(props.action) } </div>\n                        ) }\n                    </Td>\n                </Tr>\n            </Tbody>\n        </TableComposable>\n    );\n};\n","import { Label, LabelGroup, LabelProps, Popover, Skeleton } from '@patternfly/react-core';\nimport { CheckCircleIcon, ExclamationCircleIcon, ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport { IExtraColumnData, SortByDirection, TableComposable, Tbody, Td, Th, Thead, ThProps, Tr } from '@patternfly/react-table';\nimport { c_alert_m_warning__icon_Color } from '@patternfly/react-tokens';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport Config from '../../../config/Config';\nimport { NotificationEvent, NotificationEventAction, NotificationEventStatus } from '../../../types/Event';\nimport { GetIntegrationRecipient } from '../../../types/Integration';\nimport { UtcDate } from '../../UtcDate';\nimport { EventLogActionPopoverContent } from './EventLogActionPopoverContent';\n\nexport type SortDirection = 'asc' | 'desc';\n\nexport interface EventLogTableProps {\n    events: ReadonlyArray<NotificationEvent>;\n    loading: boolean;\n    onSort: (column: EventLogTableColumns, direction: SortDirection) => void;\n    sortColumn: EventLogTableColumns;\n    sortDirection: SortDirection;\n    getIntegrationRecipient: GetIntegrationRecipient;\n}\n\nexport enum EventLogTableColumns {\n    EVENT,\n    APPLICATION,\n    DATE\n}\n\nconst labelClassName = style({\n    cursor: 'pointer'\n});\n\nexport const toLabelProps = (action: NotificationEventAction): Pick<LabelProps, 'color' | 'icon'> => {\n    switch (action.status) {\n        case NotificationEventStatus.SUCCESS:\n            return {\n                color: 'green',\n                icon: <CheckCircleIcon />\n            };\n        case NotificationEventStatus.ERROR:\n            return {\n                color: 'red',\n                icon: <ExclamationCircleIcon />\n            };\n        case NotificationEventStatus.WARNING:\n            return {\n                color: undefined,\n                icon: <ExclamationTriangleIcon color={ c_alert_m_warning__icon_Color.value } />\n            };\n        default:\n            assertNever(action.status);\n    }\n};\n\nexport const EventLogTable: React.FunctionComponent<EventLogTableProps> = props => {\n    const onSort = React.useCallback((\n        _event: React.MouseEvent,\n        columnIndex: number,\n        sortByDirection: SortByDirection,\n        _extraData: IExtraColumnData) => {\n        const externalOnSort = props.onSort;\n        externalOnSort(columnIndex, sortByDirection);\n    }, [ props.onSort ]);\n\n    const sortOptions: Record<EventLogTableColumns, undefined | ThProps['sort']> = React.useMemo(() => ({\n        [EventLogTableColumns.EVENT]: undefined,\n        [EventLogTableColumns.APPLICATION]: undefined,\n        [EventLogTableColumns.DATE]: {\n            sortBy: {\n                direction: props.sortDirection,\n                index: props.sortColumn\n            },\n            columnIndex: EventLogTableColumns.DATE,\n            onSort\n        }\n    }), [ props.sortColumn, props.sortDirection, onSort ]);\n\n    const rows = React.useMemo(() => {\n        const events = props.events;\n        if (props.loading) {\n            return (\n                [ ...Array(10) ].map((_, i) => (\n                    <Tr key={ `loading-row-${i}` }>\n                        <Td><Skeleton /></Td>\n                        <Td><Skeleton /></Td>\n                        <Td><Skeleton /></Td>\n                        <Td><Skeleton /></Td>\n                    </Tr>\n                ))\n            );\n        } else {\n            return events.map(e => (\n                <Tr key={ e.id }>\n                    <Td>{ e.event }</Td>\n                    <Td>{ e.application } - { e.bundle }</Td>\n                    <Td>\n                        { e.actions.length > 0 ? (\n                            <LabelGroup>\n                                { e.actions.map(a => (<Popover\n                                    key={ a.id }\n                                    hasAutoWidth\n                                    bodyContent={ <EventLogActionPopoverContent\n                                        action={ a }\n                                        getIntegrationRecipient={ props.getIntegrationRecipient }\n                                    /> }\n                                >\n                                    <Label\n                                        className={ labelClassName }\n                                        { ...toLabelProps(a) }\n                                    >\n                                        { Config.integrations.types[a.endpointType].action }\n                                    </Label>\n                                </Popover>))}\n                            </LabelGroup>\n                        ) : ('No actions')}\n\n                    </Td>\n                    <Td><UtcDate date={ e.date } /></Td>\n                </Tr>\n            ));\n        }\n    }, [ props.loading, props.events, props.getIntegrationRecipient ]);\n\n    return (\n        <TableComposable\n            isStickyHeader={ true }\n        >\n            <Thead>\n                <Tr>\n                    <Th\n                        sort={ sortOptions[EventLogTableColumns.EVENT] }\n                    >\n                        Event\n                    </Th>\n                    <Th\n                        sort={ sortOptions[EventLogTableColumns.APPLICATION] }\n                    >\n                        Application\n                    </Th>\n                    <Th>\n                        Actions\n                    </Th>\n                    <Th\n                        sort={ sortOptions[EventLogTableColumns.DATE] }\n                    >\n                        Date and time\n                    </Th>\n                </Tr>\n            </Thead>\n            <Tbody>\n                { rows }\n            </Tbody>\n        </TableComposable>\n    );\n};\n","import { ClearFilters, Filters, SetFilters } from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum EventLogFilterColumn {\n    EVENT = 'event',\n    APPLICATION = 'application',\n    BUNDLE = 'bundle'\n}\n\nexport type EventLogFilters = Filters<typeof EventLogFilterColumn>;\nexport type SetEventLogFilters = SetFilters<typeof EventLogFilterColumn>;\nexport type ClearEventLogFilters = ClearFilters<typeof EventLogFilterColumn>;\n","import { PaginationProps, PaginationVariant } from '@patternfly/react-core';\nimport { PrimaryToolbar } from '@redhat-cloud-services/frontend-components';\nimport {\n    ColumnsMetada,\n    OuiaComponentProps,\n    usePrimaryToolbarFilterConfig\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { Dispatch } from 'react';\nimport { SetStateAction } from 'react';\n\nimport { EventPeriod } from '../../../types/Event';\nimport { Facet } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { EventLogDateFilter, EventLogDateFilterValue } from './EventLogDateFilter';\nimport { ClearEventLogFilters, EventLogFilterColumn, EventLogFilters, SetEventLogFilters } from './EventLogFilter';\n\ninterface EventLogToolbarProps extends OuiaComponentProps {\n    filters: EventLogFilters,\n    setFilters: SetEventLogFilters,\n    clearFilter: ClearEventLogFilters\n\n    bundleOptions: ReadonlyArray<Facet>;\n    applicationOptions: ReadonlyArray<Facet>;\n\n    pageCount: number;\n    count: number;\n    page: number;\n    perPage: number;\n    pageChanged: (page: number) => void;\n    perPageChanged: (page: number) => void;\n\n    dateFilter: EventLogDateFilterValue;\n    setDateFilter: (value: EventLogDateFilterValue) => void;\n\n    retentionDays: number;\n    period: EventPeriod;\n    setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nexport const EventLogToolbar: React.FunctionComponent<EventLogToolbarProps> = (props) => {\n\n    const filterMetadata = React.useMemo<ColumnsMetada<typeof EventLogFilterColumn>>(() => {\n        const bundleOptions = props.bundleOptions;\n        const applicationOptions = props.applicationOptions;\n        return {\n            [EventLogFilterColumn.EVENT]: {\n                label: 'Event',\n                placeholder: 'Filter by event'\n            },\n            [EventLogFilterColumn.BUNDLE]: {\n                label: 'Bundle',\n                placeholder: 'Filter by bundle',\n                options: {\n                    exclusive: false,\n                    items: bundleOptions.map(b => ({\n                        value: b.name,\n                        chipValue: b.displayName,\n                        label: b.displayName\n                    }))\n                }\n            },\n            [EventLogFilterColumn.APPLICATION]: {\n                label: 'Application',\n                placeholder: 'Filter by application',\n                options: {\n                    exclusive: false,\n                    items: applicationOptions.map(a => ({\n                        value: a.name,\n                        chipValue: a.displayName,\n                        label: a.displayName\n                    }))\n                }\n            }\n        };\n    }, [ props.bundleOptions, props.applicationOptions ]);\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n        EventLogFilterColumn,\n        props.filters,\n        props.setFilters,\n        props.clearFilter,\n        filterMetadata\n    );\n\n    const pageChanged = React.useCallback((_event: unknown, page: number) => {\n        const inner = props.pageChanged;\n        inner(page);\n    }, [ props.pageChanged ]);\n\n    const perPageChanged = React.useCallback((_event: unknown, perPage: number) => {\n        const inner = props.perPageChanged;\n        inner(perPage);\n    }, [ props.perPageChanged ]);\n\n    const topPaginationProps = React.useMemo<PaginationProps>(() => ({\n        itemCount: props.count,\n        page: props.page,\n        perPage: props.perPage,\n        isCompact: true,\n        variant: PaginationVariant.top,\n        onSetPage: pageChanged,\n        onFirstClick: pageChanged,\n        onPreviousClick: pageChanged,\n        onNextClick: pageChanged,\n        onLastClick: pageChanged,\n        onPageInput: pageChanged,\n        onPerPageSelect: perPageChanged\n    }), [ props.count, props.page, props.perPage, pageChanged, perPageChanged ]);\n\n    const bottomPaginationProps = React.useMemo<PaginationProps>(() => ({\n        ...topPaginationProps,\n        isCompact: false,\n        variant: PaginationVariant.bottom\n    }), [ topPaginationProps ]);\n\n    return (\n        <div { ...getOuiaProps('Notifications/EventLog/DualToolbar', props) }>\n            <PrimaryToolbar\n                { ...primaryToolbarFilterConfig }\n                dedicatedAction={ <EventLogDateFilter\n                    value={ props.dateFilter }\n                    setValue={ props.setDateFilter }\n                    retentionDays={ props.retentionDays }\n                    setPeriod={ props.setPeriod }\n                    period={ props.period }\n                /> }\n                pagination={ topPaginationProps }\n            />\n            { props.children }\n            <PrimaryToolbar\n                pagination={ bottomPaginationProps }\n            />\n        </div>\n    );\n};\n","import { fromUtc } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { Schemas } from '../../generated/OpenapiNotifications';\nimport { NotificationEvent, NotificationEventAction, NotificationEventStatus } from '../Event';\nimport { UUID } from '../Notification';\nimport { getIntegrationType } from './IntegrationAdapter';\n\ntype ServerEvent = Schemas.EventLogEntry;\n\nexport const toNotificationEvent = (serverEvent: ServerEvent): NotificationEvent => ({\n    id: serverEvent.id,\n    bundle: serverEvent.bundle,\n    application: serverEvent.application,\n    event: serverEvent.event_type,\n    date: fromUtc(new Date(serverEvent.created)),\n    actions: sortEventActions(groupActions(serverEvent.actions))\n});\n\nconst sortEventActions = (actions: Array<NotificationEventAction>) => {\n    return actions.sort(\n        (first, second) => first.endpointType.localeCompare(second.endpointType)\n    );\n};\n\nconst groupActions = (actions: ServerEvent['actions']): Array<NotificationEventAction> => {\n    const actionsById: Record<UUID, NotificationEventAction> = {};\n    const actionsWithoutEndpoint: Array<NotificationEventAction> = [];\n\n    actions.forEach(action => {\n        if (!action.endpoint_id) {\n            actionsWithoutEndpoint.push(initAction(action));\n            return;\n        }\n\n        if (!actionsById[action.endpoint_id]) {\n            actionsById[action.endpoint_id] = initAction(action);\n        } else {\n            const newAction = initAction(action);\n            const current = actionsById[action.endpoint_id];\n\n            if (newAction.status !== current.status) {\n                current.status = NotificationEventStatus.WARNING;\n            }\n\n            current.errorCount += newAction.errorCount;\n            current.successCount += newAction.successCount;\n        }\n    });\n\n    return [ ...Object.values(actionsById), ...actionsWithoutEndpoint ];\n};\n\nconst initAction = (action: ServerEvent['actions'][number]): NotificationEventAction => ({\n    id: action.endpoint_id ?? undefined,\n    endpointType: getIntegrationType({\n        type: action.endpoint_type,\n        sub_type: action.endpoint_sub_type\n    }),\n    status: action.invocation_result ? NotificationEventStatus.SUCCESS : NotificationEventStatus.ERROR,\n    successCount: action.invocation_result ? 1 : 0,\n    errorCount: action.invocation_result ? 0 : 1\n});\n","import { Page, useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toNotificationEvent } from '../../types/adapters/NotificationEventAdapter';\n\nconst eventDecoder = validationResponseTransformer(\n    (payload: Operations.EventServiceGetEvents.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'Events',\n                200,\n                {\n                    ...payload.value,\n                    data: payload.value.data.map(toNotificationEvent)\n                },\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetEvents = (page?: Page) => {\n    const query = (page ?? Page.defaultPage()).toQuery();\n    return useTransformQueryResponse(\n        useQuery(Operations.EventServiceGetEvents.actionCreator({\n            limit: +query.limit,\n            offset: +query.offset,\n            bundleIds: query.filterBundleIds as [],\n            appIds: query.filterAppIds as [],\n            startDate: query.filterStart as string,\n            endDate: query.filterEnd as string,\n            eventTypeDisplayName: query.filterEvent as string,\n            sortBy: `${query.sortColumn}:${query.sortDirection}`\n        })),\n        eventDecoder\n    );\n};\n","import { Operations } from '../../generated/OpenapiIntegrations';\nimport { UUID } from '../../types/Notification';\n\nexport const getEndpointAction = (id: UUID) => {\n    return Operations.EndpointServiceGetEndpoint.actionCreator({\n        id\n    });\n};\n","import { useParameterizedQuery, useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const getApplicationsAction = (bundleName?: string) => Operations.NotificationServiceGetApplicationsFacets.actionCreator({\n    bundleName\n});\n\nexport const useGetApplicationsLazy = () => useParameterizedQuery(getApplicationsAction);\nexport const useGetApplications = (bundleName?: string) => useQuery(getApplicationsAction(bundleName));\n","import { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const getBundlesAction = () => Operations.NotificationServiceGetBundleFacets.actionCreator();\n\nexport const useGetBundles = () => useQuery(getBundlesAction());\n","import { Filter, Operator, toUtc } from '@redhat-cloud-services/insights-common-typescript';\nimport { format, sub, toDate } from 'date-fns';\nimport { useCallback } from 'react';\n\nimport { EventLogDateFilterValue } from '../../../components/Notifications/EventLog/EventLogDateFilter';\nimport { EventLogFilters } from '../../../components/Notifications/EventLog/EventLogFilter';\nimport { EventPeriod } from '../../../types/Event';\nimport { Facet } from '../../../types/Notification';\n\nconst DATE_FORMAT = 'yyyy-MM-dd';\n\nexport const useFilterBuilder = (\n    bundles: ReadonlyArray<Facet>,\n    applications: ReadonlyArray<Facet>,\n    dateFilter: EventLogDateFilterValue,\n    period: EventPeriod) => {\n    return useCallback((filters?: EventLogFilters) => {\n        const filter = new Filter();\n        if (filters?.bundle) {\n            const selectedBundleNames = filters?.bundle;\n            const selectedBundles = bundles.filter(b => selectedBundleNames.includes(b.name)).map(b => b.id);\n            filter.and('bundleIds', Operator.EQUAL, selectedBundles);\n        }\n\n        if (filters?.application) {\n            const selectedAppNames = filters?.application;\n            const selectedApps = applications.filter(a => selectedAppNames.includes(a.name)).map(a => a.id);\n            filter.and('appIds', Operator.EQUAL, selectedApps);\n        }\n\n        if (filters?.event) {\n            filter.and('event', Operator.EQUAL, filters.event);\n        }\n\n        let filterPeriod = [ undefined, undefined ] as [ Date | undefined, Date | undefined ];\n        const today = toUtc(new Date());\n\n        switch (dateFilter) {\n            case EventLogDateFilterValue.LAST_14:\n                filterPeriod = [ sub(toDate(today), {\n                    days: 14\n                }), today ];\n                break;\n            case EventLogDateFilterValue.LAST_7:\n                filterPeriod = [ sub(toDate(today), {\n                    days: 7\n                }), today ];\n                break;\n            case EventLogDateFilterValue.TODAY:\n                filterPeriod = [ today, today ];\n                break;\n            case EventLogDateFilterValue.YESTERDAY:\n                const yesterday = sub(toDate(today), {\n                    days: 1\n                });\n                filterPeriod = [ yesterday, yesterday ];\n                break;\n            case EventLogDateFilterValue.CUSTOM:\n                filterPeriod = period;\n                break;\n        }\n\n        if (filterPeriod[0] && filterPeriod[1]) {\n            filter.and('start', Operator.EQUAL, format(filterPeriod[0], DATE_FORMAT));\n            filter.and('end', Operator.EQUAL, format(filterPeriod[1], DATE_FORMAT));\n        }\n\n        return filter;\n    }, [ bundles, applications, dateFilter, period ]);\n};\n","import { Split, SplitItem, Text, TextContent } from '@patternfly/react-core';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport { Main, PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components';\nimport { Direction, Sort } from '@redhat-cloud-services/insights-common-typescript';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\nimport { useParameterizedQuery } from 'react-fetching-library';\nimport { Link } from 'react-router-dom';\nimport { style } from 'typestyle';\n\nimport { ButtonLink } from '../../../components/ButtonLink';\nimport { EventLogDateFilterValue } from '../../../components/Notifications/EventLog/EventLogDateFilter';\nimport { EventLogFilters } from '../../../components/Notifications/EventLog/EventLogFilter';\nimport {\n    EventLogTable,\n    EventLogTableColumns,\n    SortDirection\n} from '../../../components/Notifications/EventLog/EventLogTable';\nimport { EventLogToolbar } from '../../../components/Notifications/EventLog/EventLogToolbar';\nimport Config from '../../../config/Config';\nimport { Schemas } from '../../../generated/OpenapiIntegrations';\nimport { usePage } from '../../../hooks/usePage';\nimport { Messages } from '../../../properties/Messages';\nimport { linkTo } from '../../../Routes';\nimport { useGetEvents } from '../../../services/EventLog/GetNotificationEvents';\nimport { getEndpointAction } from '../../../services/Integrations/GetEndpoint';\nimport { useGetApplications } from '../../../services/Notifications/GetApplications';\nimport { useGetBundles } from '../../../services/Notifications/GetBundles';\nimport { EventPeriod } from '../../../types/Event';\nimport { UUID } from '../../../types/Notification';\nimport { useEventLogFilter } from './useEventLogFilter';\nimport { useFilterBuilder } from './useFilterBuilder';\n\nconst RETENTION_DAYS = 14;\n\nconst subtitleClassName = style({\n    paddingTop: global_spacer_sm.value\n});\n\nexport const EventLogPage: React.FunctionComponent = () => {\n    const getEndpoint = useParameterizedQuery(getEndpointAction);\n    const getBundles = useGetBundles();\n    const bundles = React.useMemo(() => {\n        const payload = getBundles.payload;\n        if (payload?.status === 200) {\n            return payload.value;\n        }\n\n        return [];\n    }, [ getBundles.payload ]);\n\n    const getApplications = useGetApplications();\n    const applications = React.useMemo(() => {\n        const payload = getApplications.payload;\n        if (payload?.status === 200) {\n            return payload.value;\n        }\n\n        return [];\n    }, [ getApplications.payload ]);\n\n    const [ dateFilter, setDateFilter ] = React.useState<EventLogDateFilterValue>(EventLogDateFilterValue.LAST_14);\n\n    const eventLogFilters = useEventLogFilter();\n\n    const [ period, setPeriod ] = React.useState<EventPeriod>([ undefined, undefined ]);\n\n    const [ sortDirection, setSortDirection ] = React.useState<SortDirection>('desc');\n    const [ sortColumn, setSortColumn ] = React.useState<EventLogTableColumns>(EventLogTableColumns.DATE);\n\n    const onSort = React.useCallback((column: EventLogTableColumns, direction: SortDirection) => {\n        setSortDirection(direction);\n        setSortColumn(column);\n    }, [ setSortDirection, setSortColumn ]);\n\n    const filterBuilder = useFilterBuilder(bundles, applications, dateFilter, period);\n\n    const sort: Sort = React.useMemo(() => {\n        const direction = sortDirection.toUpperCase() as Direction;\n        let column: string;\n        if (sortColumn === EventLogTableColumns.DATE) {\n            column = 'created';\n        } else {\n            throw new Error(`Invalid sorting index: ${sortColumn}`);\n        }\n\n        return Sort.by(column, direction);\n    }, [ sortColumn, sortDirection ]);\n\n    const eventsPage = usePage<EventLogFilters>(Config.paging.defaultPerPage, filterBuilder, eventLogFilters.filters, sort);\n\n    const eventsQuery = useGetEvents(eventsPage.page);\n\n    const events = React.useMemo(() => {\n        if (eventsQuery.payload?.status === 200) {\n            return {\n                data: eventsQuery.payload.value.data,\n                count: eventsQuery.payload.value.meta.count\n            };\n        }\n\n        return {\n            data: [],\n            count: 0\n        };\n    }, [ eventsQuery ]);\n\n    const eventNotificationPageUrl = React.useMemo(() => {\n        const bundles = eventLogFilters.filters.bundle as Array<string> | undefined;\n        if (bundles && bundles.length > 0) {\n            return linkTo.notifications(bundles[0]);\n        }\n\n        return linkTo.notifications('');\n    }, [ eventLogFilters.filters ]);\n\n    const getIntegrationRecipient = React.useCallback(async (id: UUID) => {\n        const query = getEndpoint.query;\n        const endpoint = await query(id);\n        if (endpoint.payload?.type === 'Endpoint') {\n            const type = endpoint.payload.value.type;\n            switch (type) {\n                case 'camel':\n                case 'webhook':\n                    return endpoint.payload.value.name;\n                case 'email_subscription':\n                    const properties = endpoint.payload.value.properties as Schemas.EmailSubscriptionProperties;\n                    if (properties.only_admins) {\n                        return 'Users: Admin';\n                    }\n\n                    return 'Users: All';\n                case 'default':\n                    throw new Error('Invalid integration type');\n                default:\n                    assertNever(type);\n            }\n        }\n\n        return 'Error while loading';\n    }, [ getEndpoint.query ]);\n\n    return (\n        <>\n            <PageHeader>\n                <Split>\n                    <SplitItem isFilled>\n                        <PageHeaderTitle title={ Messages.pages.notifications.eventLog.title } />\n                        <TextContent className={ subtitleClassName }>\n                            <Text>{ Messages.pages.notifications.eventLog.subtitle }</Text>\n                        </TextContent>\n                    </SplitItem>\n                    <SplitItem>\n                        <Link component={ ButtonLink } to={ eventNotificationPageUrl } >\n                            { Messages.pages.notifications.eventLog.viewNotifications }\n                        </Link>\n                    </SplitItem>\n                </Split>\n            </PageHeader>\n            <Main>\n                <EventLogToolbar\n                    { ...eventLogFilters }\n                    bundleOptions={ bundles }\n                    applicationOptions={ applications }\n                    dateFilter={ dateFilter }\n                    setDateFilter={ setDateFilter }\n                    count={ events.count }\n                    perPageChanged={ eventsPage.changeItemsPerPage }\n                    pageChanged={ eventsPage.changePage }\n                    perPage={ eventsPage.page.size }\n                    page={ eventsPage.page.index }\n                    pageCount={ events.data.length }\n                    retentionDays={ RETENTION_DAYS }\n                    period={ period }\n                    setPeriod={ setPeriod }\n                >\n                    <EventLogTable\n                        events={ events.data }\n                        loading={ eventsQuery.loading }\n                        onSort={ onSort }\n                        sortColumn={ sortColumn }\n                        sortDirection={ sortDirection }\n                        getIntegrationRecipient={ getIntegrationRecipient }\n                    />\n                </EventLogToolbar>\n            </Main>\n        </>\n    );\n};\n","export const emptyImmutableArray = Object.freeze([]);\nexport const emptyImmutableObject = Object.freeze({});\n","interface HasId<ID> {\n    id: ID\n}\n\nexport const findByKey = <T, KEY extends keyof T>(val: T[KEY], key: KEY) => (value: T) => value[key] === val;\nexport const findById = <T extends HasId<T['id']>>(id: T['id']) => findByKey<T, 'id'>(id, 'id');\n","import {\n    Chip, ChipGroup,\n    OptionsMenu,\n    OptionsMenuItem,\n    OptionsMenuToggle,\n    Split,\n    SplitItem, Tooltip\n} from '@patternfly/react-core';\nimport { BellSlashIcon, LockIcon } from '@patternfly/react-icons';\nimport { TableText } from '@patternfly/react-table';\nimport { global_palette_black_400, global_palette_black_700, global_spacer_sm, global_spacer_xs } from '@patternfly/react-tokens';\nimport { join } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroupContent } from '../../../pages/Notifications/List/useBehaviorGroupContent';\nimport { BehaviorGroup, NotificationBehaviorGroup } from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\nimport { emptyImmutableObject } from '../../../utils/Immutable';\n\nconst grayFontClassName = style({\n    color: global_palette_black_700.value\n});\n\nconst noBehaviorGroupsClassName = style({\n    textAlign: 'left'\n});\n\nconst rightSpacerSm = style({\n    marginRight: global_spacer_sm.value\n});\n\nconst inlineSpacer = style({\n    marginRight: global_spacer_xs.value\n});\n\ninterface BehaviorGroupCellProps {\n    id: string;\n    notification: NotificationBehaviorGroup;\n    behaviorGroupContent: BehaviorGroupContent;\n    selected: ReadonlyArray<BehaviorGroup>;\n    onSelect?: (notification: NotificationBehaviorGroup, behaviorGroup: BehaviorGroup, linkBehavior: boolean) => void;\n    isEditMode: boolean;\n}\n\ninterface BehaviorGroupChip {\n    behaviorGroup: BehaviorGroup;\n    notification: BehaviorGroupCellProps['notification'];\n    onSelect?: BehaviorGroupCellProps['onSelect'];\n}\n\nconst CommaSeparator: React.FunctionComponent = () => <span>, </span>;\n\nconst BehaviorGroupChip: React.FunctionComponent<BehaviorGroupChip> = props => {\n    const unlink = React.useCallback(() => {\n        const onSelect = props.onSelect;\n        if (onSelect) {\n            onSelect(props.notification, props.behaviorGroup, false);\n        }\n    }, [ props.onSelect, props.behaviorGroup, props.notification ]);\n\n    return <Chip onClick={ unlink } isReadOnly={ props.behaviorGroup.isDefault } >\n        { props.behaviorGroup.displayName }\n    </Chip>;\n};\n\nexport const BehaviorGroupCell: React.FunctionComponent<BehaviorGroupCellProps> = props => {\n\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const onSelected = React.useCallback((event?: React.MouseEvent<HTMLAnchorElement> | React.KeyboardEvent) => {\n        const dataset = (event?.currentTarget?.firstChild as HTMLElement)?.dataset ?? emptyImmutableObject;\n        const onSelect = props.onSelect;\n        if (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError && onSelect) {\n            if (dataset.behaviorGroupId) {\n                const found = props.behaviorGroupContent.content.find(findById(dataset.behaviorGroupId));\n                if (found) {\n                    const isSelected = !!props.selected.find(findById(found.id));\n                    onSelect(props.notification, found, !isSelected);\n                }\n            }\n        }\n    }, [ props.onSelect, props.behaviorGroupContent, props.notification, props.selected ]);\n\n    const items = React.useMemo(() => {\n        if (props.behaviorGroupContent.isLoading || props.behaviorGroupContent.hasError) {\n            return [\n                <OptionsMenuItem key=\"is-loading\" isDisabled>Loading</OptionsMenuItem>\n            ];\n        }\n\n        if (props.behaviorGroupContent.content.length === 0) {\n            return [\n                <OptionsMenuItem key=\"empty\" isDisabled>\n                    <span className={ noBehaviorGroupsClassName }>\n                        You have no behavior groups. <br />\n                        Create a new group by clicking on the <br />\n                        &apos;Create new group&apos; button above.\n                    </span>\n                </OptionsMenuItem>\n            ];\n        }\n\n        const behaviorGroups = [\n            ...props.selected.filter(b => b.isDefault),\n            ...props.behaviorGroupContent.content.filter(b => !b.isDefault)\n        ];\n        return behaviorGroups.map(bg => {\n            const selected = !!props.selected.find(findById(bg.id));\n\n            return (\n                <OptionsMenuItem\n                    key={ bg.id }\n                    onSelect={ onSelected }\n                    data-behavior-group-id={ bg.id }\n                    isSelected={ selected }\n                    isDisabled={ bg.isDefault }\n                >\n                    { bg.isDefault && <LockIcon className={ rightSpacerSm } /> } { bg.displayName }\n                </OptionsMenuItem>\n            );\n        });\n    }, [ props.behaviorGroupContent, props.selected, onSelected ]);\n\n    const sortedSelected = React.useMemo(() => [\n        ...props.selected.filter(b => b.isDefault),\n        ...props.selected.filter(b => !b.isDefault)\n    ], [ props.selected ]);\n\n    const toggle = React.useMemo(() => {\n        return (\n            <OptionsMenuToggle onToggle={ setOpen } toggleTemplate={ (\n                sortedSelected.length === 0 ? (\n                    <span className={ grayFontClassName }>Select behavior group</span>\n                ) : (\n                    <ChipGroup>\n                        { sortedSelected.map(value => (\n                            <BehaviorGroupChip\n                                key={ value.id }\n                                behaviorGroup={ value }\n                                notification={ props.notification }\n                                onSelect={ props.onSelect }\n                            />\n                        )) }\n                    </ChipGroup>\n                )\n            ) } />\n        );\n    }, [ sortedSelected, props.notification, props.onSelect ]);\n\n    const readonlyText = React.useMemo(() => {\n        if (sortedSelected.length === 0) {\n            return <Split>\n                <SplitItem className={ rightSpacerSm }><BellSlashIcon color={ global_palette_black_400.value } /></SplitItem>\n                <SplitItem>Mute</SplitItem>\n            </Split>;\n        }\n\n        return join(sortedSelected.map(b => <>\n            { b.isDefault && <Tooltip\n                content={ `${b.displayName} behavior is attached to this event and cannot be changed.` +\n                'Add additional behavior groups to assign different actions or recipients.' }\n            >\n                <LockIcon color={ global_palette_black_400.value } className={ inlineSpacer } />\n            </Tooltip>} { b.displayName }\n        </>), CommaSeparator);\n    }, [ sortedSelected ]);\n\n    if (!props.isEditMode) {\n        return <TableText wrapModifier=\"truncate\"> { readonlyText } </TableText>;\n    }\n\n    return <OptionsMenu id={ props.id } direction=\"down\" menuItems={ items } toggle={ toggle } isOpen={ isOpen } menuAppendTo={ document.body } />;\n};\n","import { Button, ButtonVariant, Skeleton } from '@patternfly/react-core';\nimport { CheckIcon, CloseIcon, PencilAltIcon } from '@patternfly/react-icons';\nimport { cellWidth, IActions, ICell, IRowData, Table, TableBody, TableHeader, TableVariant } from '@patternfly/react-table';\nimport { global_active_color_100, global_disabled_color_100, global_palette_black_600 } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroupContent } from '../../pages/Notifications/List/useBehaviorGroupContent';\nimport { BehaviorGroupNotificationRow } from '../../pages/Notifications/List/useBehaviorGroupNotificationRows';\nimport { BehaviorGroup, NotificationBehaviorGroup, UUID } from '../../types/Notification';\nimport { emptyImmutableArray } from '../../utils/Immutable';\nimport { ouia } from '../Ouia';\nimport { BehaviorGroupCell } from './Table/BehaviorGroupCell';\n\ntype OnNotificationIdHandler = (notificationId: UUID) => void;\nexport type OnBehaviorGroupLinkUpdated = (notification: NotificationBehaviorGroup, behaviorGroup: BehaviorGroup, isLinked: boolean) => void;\n\nexport interface NotificationsBehaviorGroupTableProps {\n    behaviorGroupContent: BehaviorGroupContent;\n    notifications: Array<BehaviorGroupNotificationRow>;\n    onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n    onStartEditing?: OnNotificationIdHandler;\n    onFinishEditing?: OnNotificationIdHandler;\n    onCancelEditing?: OnNotificationIdHandler;\n}\n\nconst actionButtonClassName = style({\n    float: 'right'\n});\n\ntype Callbacks = {\n    onStartEditing: OnNotificationIdHandler;\n    onFinishEditing:  OnNotificationIdHandler;\n    onCancelEditing: OnNotificationIdHandler;\n    onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n};\n\nconst toTableRows = (\n    notifications: Array<BehaviorGroupNotificationRow>,\n    behaviorGroupContent: BehaviorGroupContent,\n    callbacks?: Callbacks) => {\n    return notifications.map((notification => ({\n        id: notification.id,\n        key: notification.id,\n        notification,\n        cells: [\n            {\n                title: <span>{ notification.eventTypeDisplayName }</span>\n            },\n            {\n                title: <span>{ notification.applicationDisplayName }</span>\n            },\n            {\n                title: notification.loadingActionStatus === 'loading' ?\n                    <Skeleton width=\"90%\" /> :\n                    <span>\n                        <BehaviorGroupCell\n                            id={ `behavior-group-cell-${notification.id}` }\n                            notification={ notification }\n                            behaviorGroupContent={ behaviorGroupContent }\n                            selected={ notification.behaviors ?? emptyImmutableArray }\n                            onSelect={ callbacks?.onBehaviorGroupLinkUpdated }\n                            isEditMode={ notification.isEditMode }\n                        />\n                    </span>\n            }\n        ]\n    })));\n};\n\nconst cells: Array<ICell> = [\n    {\n        title: 'Event',\n        transforms: [],\n        cellFormatters: []\n    },\n    {\n        title: 'Application',\n        transforms: []\n    },\n    {\n        title: 'Behavior',\n        transforms: [ cellWidth(35) ]\n    }\n];\n\n// This will actually silence lots of warning we are having in the console about unwanted elements.\nconst EmptySpan: React.FunctionComponent<any> = _props => <span />;\nconst emptySpanProducer = () => <EmptySpan />;\n\nexport const NotificationsBehaviorGroupTable = ouia<NotificationsBehaviorGroupTableProps>(props => {\n\n    const callbacks: Callbacks | undefined = React.useMemo(() => {\n\n        if (props.onStartEditing && props.onFinishEditing && props.onCancelEditing) {\n            return {\n                onStartEditing: props.onStartEditing,\n                onFinishEditing: props.onFinishEditing,\n                onCancelEditing: props.onCancelEditing,\n                onBehaviorGroupLinkUpdated: props.onBehaviorGroupLinkUpdated\n            };\n        }\n\n        return undefined;\n    }, [ props.onStartEditing, props.onFinishEditing, props.onCancelEditing, props.onBehaviorGroupLinkUpdated ]);\n\n    const rows = React.useMemo(() => {\n        return toTableRows(props.notifications, props.behaviorGroupContent, callbacks);\n    }, [ props.notifications, props.behaviorGroupContent, callbacks ]);\n\n    const actionResolver = React.useCallback((rowData: IRowData): IActions => {\n        const notification: BehaviorGroupNotificationRow = rowData.notification;\n\n        const isDisabled = notification.loadingActionStatus !== 'done';\n\n        if (!notification.isEditMode) {\n            return [\n                {\n                    key: 'edit',\n                    className: actionButtonClassName,\n                    title: <Button aria-label=\"edit\" variant={ ButtonVariant.plain } isDisabled={ isDisabled }>\n                        <PencilAltIcon />\n                    </Button>,\n                    isOutsideDropdown: true,\n                    onClick: () => callbacks?.onStartEditing(notification.id),\n                    isDisabled: isDisabled || !callbacks\n                }\n            ];\n        }\n\n        return [\n            {\n                key: 'done',\n                className: actionButtonClassName,\n                title: <Button aria-label=\"done\" variant={ ButtonVariant.plain } isDisabled={ isDisabled }>\n                    <CheckIcon color={ isDisabled ? global_disabled_color_100.value : global_active_color_100.value } />\n                </Button>,\n                isOutsideDropdown: true,\n                onClick: () => callbacks?.onFinishEditing(notification.id),\n                isDisabled: isDisabled || !callbacks\n            },\n            {\n                key: 'cancel',\n                className: actionButtonClassName,\n                title: <Button aria-label=\"cancel\" variant={ ButtonVariant.plain } isDisabled={ isDisabled }>\n                    <CloseIcon color={ isDisabled ? global_disabled_color_100.value : global_palette_black_600.value } />\n                </Button>,\n                isOutsideDropdown: true,\n                onClick: () => callbacks?.onCancelEditing(notification.id),\n                isDisabled: isDisabled || !callbacks\n            }\n        ];\n    }, [ callbacks ]);\n\n    return (\n        <Table\n            aria-label=\"Notifications\"\n            rows={ rows }\n            cells={ cells }\n            variant={ TableVariant.compact }\n            actionResolver={ actionResolver }\n            actionsToggle={ emptySpanProducer as any }\n            isStickyHeader={ true }\n        >\n            <TableHeader />\n            <TableBody />\n        </Table>\n    );\n}, 'Notifications/Table');\n","import { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../utils/getOuiaProps';\n\nexport const ouia = <P extends any>(Component: React.FunctionComponent<P>, type: string): React.FunctionComponent<OuiaComponentProps & P> => {\n\n    const Wrapped: React.FunctionComponent<OuiaComponentProps & P> = props => {\n        return (\n            <div { ...getOuiaProps(type, props) }>\n                <Component { ...props } />\n            </div>\n        );\n    };\n\n    Wrapped.displayName = `Ouia(${Component.displayName ?? Component.name})`;\n\n    return Wrapped;\n};\n","import { ClearFilters, Filters, SetFilters } from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum NotificationFilterColumn {\n    NAME = 'name',\n    APPLICATION = 'application',\n    ACTION = 'action'\n}\n\nexport type NotificationFilters = Filters<typeof NotificationFilterColumn>;\nexport type SetNotificationFilters = SetFilters<typeof NotificationFilterColumn>;\nexport type ClearNotificationFilters = ClearFilters<typeof NotificationFilterColumn>;\n","export enum GroupByEnum {\n    Application = 'application',\n    None = 'none'\n}\n","import { Dropdown, DropdownItem, DropdownToggle } from '@patternfly/react-core';\nimport { CaretDownIcon } from '@patternfly/react-icons';\nimport camelcase from 'camelcase';\nimport * as React from 'react';\n\nimport { GroupByEnum } from '../Types';\n\nexport interface GroupByProps {\n    groupBy: (selected: GroupByEnum) => void;\n    selected: GroupByEnum;\n}\n\nexport const GroupBy: React.FunctionComponent<GroupByProps> = (props) => {\n    const items = [\n        <DropdownItem data-group-by={ GroupByEnum.Application } key=\"application\">Application</DropdownItem>,\n        <DropdownItem data-group-by={ GroupByEnum.None } key=\"none\">None</DropdownItem>\n    ];\n\n    const [ isOpen, setOpen ] = React.useState<boolean>(false);\n\n    const onSelect = React.useCallback((event) => {\n        const groupBy = props.groupBy;\n        const selected = props.selected;\n\n        if (event.target.dataset.groupBy !== selected) {\n            switch (event.target.dataset.groupBy) {\n                case GroupByEnum.Application:\n                    groupBy(GroupByEnum.Application);\n                    break;\n                case GroupByEnum.None:\n                    groupBy(GroupByEnum.None);\n                    break;\n            }\n        }\n\n        setOpen(false);\n    }, [ props.groupBy, props.selected ]);\n\n    const onToggle = React.useCallback((shouldBeOpen) => {\n        setOpen(shouldBeOpen);\n    }, [ setOpen ]);\n\n    const content = React.useMemo(() => {\n        return `Group by: ${camelcase(props.selected, {\n            pascalCase: true\n        })}`;\n    }, [ props.selected ]);\n\n    return (\n        <Dropdown\n            onSelect={ onSelect }\n            isOpen={ isOpen }\n            toggle={ <DropdownToggle\n                id=\"group-by-dropdown-toggle\"\n                toggleIndicator={ CaretDownIcon }\n                onToggle={ onToggle }\n            >\n                { content }\n            </DropdownToggle> }\n            dropdownItems={ items }\n        />\n    );\n};\n","import { PrimaryToolbar } from '@redhat-cloud-services/frontend-components';\nimport {\n    ExporterType,\n    getInsights,\n    OptionalColumnsMetada,\n    OuiaComponentProps,\n    useInsightsEnvironmentFlag,\n    usePrimaryToolbarFilterConfig\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useCallback, useMemo } from 'react';\n\nimport { useTableExportConfig } from '../../hooks/useTableExportConfig';\nimport { isStagingOrProd, stagingAndProd } from '../../types/Environments';\nimport { Facet } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport {\n    ClearNotificationFilters,\n    NotificationFilterColumn,\n    NotificationFilters,\n    SetNotificationFilters\n} from './Filter';\nimport { GroupBy } from './Table/GroupBy';\nimport { GroupByEnum } from './Types';\n\ninterface NotificationsToolbarProps extends OuiaComponentProps {\n    filters: NotificationFilters;\n    setFilters: SetNotificationFilters;\n    clearFilter: ClearNotificationFilters;\n\n    appFilterOptions: Array<Facet>;\n\n    groupBy?: GroupByEnum;\n    onGroupBySelected?: (selected: GroupByEnum) => void;\n\n    onExport: (type: ExporterType) => void;\n}\n\nexport const NotificationsToolbar: React.FunctionComponent<NotificationsToolbarProps> = (props) => {\n\n    const insights = getInsights();\n    const filterMetadata = useMemo<OptionalColumnsMetada<typeof NotificationFilterColumn>>(() => {\n\n        const appFilterItems = props.appFilterOptions.map(a => ({\n            value: a.displayName,\n            label: <> {a.displayName}</>\n        }));\n\n        return {\n            [NotificationFilterColumn.NAME]: isStagingOrProd(insights) ? undefined : {\n                label: 'Event type',\n                placeholder: 'Filter by event type'\n            },\n            [NotificationFilterColumn.APPLICATION]: {\n                label: 'Application',\n                placeholder: 'Filter by application',\n                options: {\n                    exclusive: false,\n                    default: [] as any,\n                    items: appFilterItems\n                }\n            },\n            [NotificationFilterColumn.ACTION]: isStagingOrProd(insights) ? undefined : {\n                label: 'Action',\n                placeholder: 'Filter by action'\n            }\n        };\n    }, [ props.appFilterOptions, insights ]);\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n        NotificationFilterColumn,\n        props.filters,\n        props.setFilters,\n        props.clearFilter,\n        filterMetadata\n    );\n\n    const exportConfigInternal = useTableExportConfig(props.onExport);\n\n    const filterConfig = primaryToolbarFilterConfig.filterConfig;\n    const activeFiltersConfig = primaryToolbarFilterConfig.activeFiltersConfig;\n\n    const exportConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => exportConfigInternal, [ exportConfigInternal ])\n    );\n\n    return (\n        <div { ...getOuiaProps('Notifications/DualToolbar', props) }>\n            <PrimaryToolbar\n                filterConfig={ filterConfig }\n                activeFiltersConfig={ activeFiltersConfig }\n                dedicatedAction={ (props.groupBy && props.onGroupBySelected) ?\n                    <GroupBy selected={ props.groupBy } groupBy={ props.onGroupBySelected } /> :\n                    undefined }\n                exportConfig={ exportConfig }\n            />\n            { props.children }\n            <PrimaryToolbar />\n        </div>\n    );\n};\n","import { Page, useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Schemas } from '../generated/OpenapiIntegrations';\nimport { Operations } from '../generated/OpenapiNotifications';\nimport { toNotifications } from '../types/adapters/NotificationAdapter';\n\nexport const listNotificationsActionCreator = (pager?: Page) => {\n    const query = (pager ?? Page.defaultPage()).toQuery();\n    return Operations.NotificationServiceGetEventTypes.actionCreator({\n        limit: +query.limit,\n        offset: +query.offset,\n        applicationIds: query.filterApplicationId as unknown as Array<Schemas.UUID>,\n        bundleId: query.filterBundleId as unknown as string\n    });\n};\n\nconst decoder = validationResponseTransformer((payload: Operations.NotificationServiceGetEventTypes.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'eventTypesArray',\n            200,\n            toNotifications(payload.value),\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useListNotifications = (pager?: Page) => useTransformQueryResponse(\n    useQuery(listNotificationsActionCreator(pager)),\n    decoder\n);\n","export default __webpack_public_path__ + \"fonts/WebhookIcon.svg\";","import { SVGIconProps } from '@patternfly/react-icons/dist/js/createIcon';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport icon from './WebhookIcon.svg';\nconst className = style({\n    verticalAlign: '-0.125em',\n    width: '1em',\n    height: '1em'\n});\n\nexport const WebhookIcon: React.FunctionComponent<SVGIconProps> = () => {\n    return (\n        <img alt=\"Webhook\" className={ className } src={ icon } />\n    );\n};\n","import { Spinner } from '@patternfly/react-core';\nimport { EnvelopeIcon } from '@patternfly/react-icons';\nimport BellIcon from '@patternfly/react-icons/dist/js/icons/bell-icon';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport Config from '../../config/Config';\nimport { Action, NotificationType } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { WebhookIcon } from '../Icons/WebhookIcon';\n\nexport interface ActionComponentText extends OuiaComponentProps{\n    isDefault: boolean;\n    action: Action | undefined;\n    loading?: boolean;\n    hasError?: boolean;\n}\n\ninterface ActionTypeToIconProps {\n    actionType: NotificationType;\n}\n\nconst marginLeftClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst grayFontClassName = style({\n    color: '#888'\n});\n\nconst ActionTypeToIcon: React.FunctionComponent<ActionTypeToIconProps> = (props) => {\n    switch (props.actionType) {\n        case NotificationType.DRAWER:\n            return <BellIcon />;\n        case NotificationType.EMAIL_SUBSCRIPTION:\n            return <EnvelopeIcon />;\n        case NotificationType.INTEGRATION:\n            return <WebhookIcon />;\n        default:\n            assertNever(props.actionType);\n    }\n};\n\nconst ActionComponentWrapper: React.FunctionComponent<ActionComponentText> = (props) => (\n    <div { ...getOuiaProps('Notifications/ActionComponent', props) }>\n        { props.children }\n    </div>\n);\n\nexport const ActionComponent: React.FunctionComponent<ActionComponentText> = (props) => {\n\n    if (props.loading) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <Spinner size=\"md\" />\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (props.hasError) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span>Error loading actions</span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (props.isDefault) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span>Default behavior</span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (!props.action) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span className={ grayFontClassName }>\n                    <div>No actions.</div>\n                    <div>Users will not be notified.</div>\n                </span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    return (\n        <ActionComponentWrapper { ...props }>\n            <ActionTypeToIcon actionType={ props.action.type } />\n            <span className={ marginLeftClassName }>{ Config.notifications.types[props.action.type].name }</span>\n            { props.action.type === NotificationType.INTEGRATION && (\n                <span>: { Config.integrations.types[props.action.integration.type].name }</span>\n            ) }\n        </ActionComponentWrapper>\n    );\n};\n","import { Tooltip } from '@patternfly/react-core';\nimport { BanIcon } from '@patternfly/react-icons';\nimport { global_disabled_color_100, global_spacer_sm } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { Action, NotificationType } from '../../types/Notification';\n\ninterface RecipientProps {\n    action: Action;\n    hasOutline?: boolean;\n}\n\nconst disabledLabelClassName = style({\n    marginLeft: global_spacer_sm.var,\n    color: global_disabled_color_100.value\n\n});\n\nexport const Recipient: React.FunctionComponent<RecipientProps> = (props) => {\n    if (props.action.type === NotificationType.INTEGRATION) {\n        return (\n            <>\n                <span>{ props.action.integration.name }</span>\n                { !props.action.integration.isEnabled && (\n                    <>\n                        <Tooltip content=\"This integration has been disabled. This action wil not fire until it is enabled.\" position=\"bottom\">\n                            <BanIcon className={ disabledLabelClassName } />\n                        </Tooltip>\n                    </>\n                )}\n            </>\n        );\n    }\n\n    return <span>{ props.action.recipient.map(r => r.displayName).join(', ') }</span>;\n};\n","import {\n    Card,\n    CardActions,\n    CardBody,\n    CardHeader,\n    CardHeaderMain,\n    Dropdown,\n    DropdownItem,\n    DropdownPosition,\n    Grid,\n    GridItem,\n    KebabToggle,\n    Skeleton,\n    Text,\n    TextContent,\n    TextVariants, Tooltip\n} from '@patternfly/react-core';\nimport { LockIcon } from '@patternfly/react-icons';\nimport { c_form__label_FontSize, global_spacer_form_element, global_spacer_md } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { ActionComponent } from '../ActionComponent';\nimport { Recipient } from '../Recipient';\n\nconst cardClassName = style({\n    width: 450,\n    height: '100%'\n});\n\nconst lockedSpacer = style({\n    marginTop: global_spacer_form_element.value,\n    marginBottom: global_spacer_form_element.value,\n    marginLeft: global_spacer_md.value,\n    marginRight: global_spacer_md.value\n});\n\nconst contentTitleStyle = {\n    fontSize: c_form__label_FontSize.value\n};\n\nexport interface BehaviorGroupProps extends OuiaComponentProps {\n    behaviorGroup: BehaviorGroup;\n    onEdit?: (behaviorGroup: BehaviorGroup) => void;\n    onDelete?: (behaviorGroup: BehaviorGroup) => void;\n}\n\nexport interface BehaviorGroupCardLayout {\n    title: React.ReactNode;\n    dropdownItems?: Array<React.ReactNode>;\n    contents: Array<{\n        key: string;\n        action: React.ReactNode;\n        recipient: React.ReactNode;\n    }>;\n    isDefaultBehavior?: boolean;\n}\n\nconst BehaviorGroupCardLayout: React.FunctionComponent<BehaviorGroupCardLayout> = props => {\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const switchOpen = React.useCallback(() => setOpen(prev => !prev), [ setOpen ]);\n\n    return (\n        <Card isFlat className={ cardClassName }>\n            <CardHeader>\n                <CardHeaderMain><TextContent><Text component={ TextVariants.h4 }> { props.title } </Text></TextContent></CardHeaderMain>\n                <CardActions>\n                    { props.isDefaultBehavior ? (\n                        <div className={ lockedSpacer }>\n                            <Tooltip content=\"This behavior group is system specified and cannot be edited.\">\n                                <LockIcon />\n                            </Tooltip>\n                        </div>\n                    ) : (\n                        <Dropdown\n                            onSelect={ switchOpen }\n                            toggle={ <KebabToggle onToggle={ setOpen } isDisabled={ !props.dropdownItems } /> }\n                            isOpen={ isOpen }\n                            isPlain\n                            dropdownItems={ props.dropdownItems }\n                            position={ DropdownPosition.right }\n                            menuAppendTo={ () => document.body }\n                        />\n                    ) }\n                </CardActions>\n            </CardHeader>\n            <CardBody>\n                <Grid hasGutter>\n                    <GridItem span={ 6 }>\n                        <TextContent>\n                            <Text component={ TextVariants.h5 } style={ contentTitleStyle }>Action</Text>\n                        </TextContent>\n                    </GridItem>\n                    <GridItem span={ 6 }>\n                        <TextContent>\n                            <Text component={ TextVariants.h5 } style={ contentTitleStyle }>Recipient</Text>\n                        </TextContent>\n                    </GridItem>\n                    { props.contents.map(content => (\n                        <React.Fragment key={ content.key }>\n                            <GridItem span={ 6 }>\n                                { content.action }\n                            </GridItem>\n                            <GridItem span={ 6 }>\n                                { content.recipient }\n                            </GridItem>\n                        </React.Fragment>\n                    )) }\n                </Grid>\n            </CardBody>\n        </Card>\n    );\n};\n\nexport const BehaviorGroupCard: React.FunctionComponent<BehaviorGroupProps> = props => {\n    const onClickEdit = React.useCallback(() => {\n        const onEdit = props.onEdit;\n        if (onEdit) {\n            onEdit(props.behaviorGroup);\n        }\n    }, [ props.behaviorGroup, props.onEdit ]);\n\n    const onClickDelete = React.useCallback(() => {\n        const onDelete = props.onDelete;\n        if (onDelete) {\n            onDelete(props.behaviorGroup);\n        }\n    }, [ props.behaviorGroup, props.onDelete ]);\n\n    const dropdownItems = React.useMemo(() => [\n        <DropdownItem key=\"on-edit\" onClick={ onClickEdit } isDisabled={ !onClickEdit } > Edit </DropdownItem>,\n        <DropdownItem key=\"on-delete\" onClick={ onClickDelete } isDisabled={ !onClickDelete }> Delete </DropdownItem>\n    ], [ onClickEdit, onClickDelete ]);\n\n    return (\n        <BehaviorGroupCardLayout\n            title={ props.behaviorGroup.displayName }\n            dropdownItems={ dropdownItems }\n            contents={ props.behaviorGroup.actions.map((action, index) => ({\n                key: `${index}-${action.type}`,\n                recipient: <Recipient action={ action } />,\n                action: <ActionComponent isDefault={ false } action={ action } />\n            })) }\n            isDefaultBehavior={ !!props.behaviorGroup.isDefault }\n        />\n    );\n};\n\nexport const BehaviorGroupCardSkeleton: React.FunctionComponent = () => {\n    const contentWidth = '150px';\n\n    return (\n        <BehaviorGroupCardLayout\n            title={ <Skeleton width=\"300px\" /> }\n            contents={ [\n                {\n                    key: 'skeleton-1',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                },\n                {\n                    key: 'skeleton-2',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                },\n                {\n                    key: 'skeleton-3',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                }\n            ] }\n        />\n    );\n};\n","import { Flex, FlexItem } from '@patternfly/react-core';\nimport { global_spacer_md } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { useMeasure } from 'react-use';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { BehaviorGroupCard, BehaviorGroupCardSkeleton } from './BehaviorGroupCard';\n\nconst cardsWrapperClassName = style({\n    overflow: 'auto'\n});\n\nconst cardWrapperClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\ninterface BehaviorGroupCardListProps {\n    onEdit?: (behaviorGroup: BehaviorGroup) => void;\n    onDelete?: (behaviorGroup: BehaviorGroup) => void;\n    behaviorGroups: ReadonlyArray<BehaviorGroup>;\n}\n\ninterface BehaviorGroupCardListLayoutProps {\n    contents: Array<{\n        key: string;\n        element: React.ReactNode;\n    }>;\n}\n\nconst BehaviorGroupCardListLayout: React.FunctionComponent<BehaviorGroupCardListLayoutProps> = props => {\n\n    const [ measureRef, measuredSizing ] = useMeasure<HTMLDivElement>();\n    const container = React.useRef<HTMLDivElement>();\n    const ref = React.useCallback(refContainer => {\n        container.current = refContainer;\n        measureRef(refContainer);\n    }, [ container, measureRef ]);\n\n    React.useEffect(() => {\n        if (container.current?.firstChild?.firstChild) {\n            const element = container.current.firstChild as HTMLElement;\n            const height = (element.firstChild as HTMLElement).getBoundingClientRect().height;\n            element.style['max-height'] = `${height}px`;\n        }\n    }, [ measuredSizing ]);\n\n    return (\n        <div ref={ ref } data-testid=\"ref-card-list-container\">\n            <Flex\n                alignItems={ { default: 'alignItemsStretch' } }\n                alignContent={ { default: 'alignContentSpaceBetween' } }\n                className={ cardsWrapperClassName }\n                data-testid=\"card-list-container\"\n            >\n                { props.contents.map(content => (\n                    <FlexItem key={ content.key } className={ cardWrapperClassName }>\n                        { content.element }\n                    </FlexItem>\n                ))}\n            </Flex>\n        </div>\n    );\n};\n\nexport const BehaviorGroupCardList: React.FunctionComponent<BehaviorGroupCardListProps> = props => {\n\n    return (\n        <BehaviorGroupCardListLayout\n            contents={ props.behaviorGroups.map(behaviorGroup => ({\n                key: behaviorGroup.id,\n                element: <BehaviorGroupCard\n                    behaviorGroup={ behaviorGroup }\n                    onEdit={ props.onEdit }\n                    onDelete={ props.onDelete }\n                />\n            })) }\n        />\n    );\n};\n\nexport const BehaviorGroupCardListSkeleton: React.FunctionComponent = () => {\n    return (\n        <BehaviorGroupCardListLayout\n            contents={ [\n                {\n                    key: 'skeleton-1',\n                    element: <BehaviorGroupCardSkeleton />\n                },\n                {\n                    key: 'skeleton-2',\n                    element: <BehaviorGroupCardSkeleton />\n                },\n                {\n                    key: 'skeleton-3',\n                    element: <BehaviorGroupCardSkeleton />\n                }\n            ] }\n        />\n    );\n};\n","import {\n    ButtonVariant,\n    Checkbox,\n    ExpandableSection,\n    List,\n    ListItem,\n    Skeleton,\n    Stack,\n    StackItem\n} from '@patternfly/react-core';\nimport { ActionModalProps, DeleteModal, DeleteModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { useOnDeleteWrapper } from '../../../hooks/useOnDeleteWrapper';\nimport { OnDelete } from '../../../types/Callbacks';\nimport { BehaviorGroup, Notification } from '../../../types/Notification';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onDelete';\n\ninterface BehaviorGroupDeleteModalProps extends Omit<DeleteModalProps, UsedProps> {\n    behaviorGroup: BehaviorGroup;\n    onDelete: OnDelete<BehaviorGroup>;\n    conflictingNotifications: Array<Notification>;\n}\n\ntype BehaviorGroupDeleteModalSkeletonProps = Pick<ActionModalProps, 'onClose'>;\n\nexport const BehaviorGroupDeleteModal: React.FunctionComponent<BehaviorGroupDeleteModalProps> = props => {\n    const onDelete = useOnDeleteWrapper(props.onDelete, props.behaviorGroup);\n\n    const cancelButtonTitle = React.useMemo(\n        () => props.conflictingNotifications.length === 0 ? 'Cancel' : 'Close',\n        [ props.conflictingNotifications ]\n    );\n\n    const cancelButtonVariant = React.useMemo(\n        () => props.conflictingNotifications.length === 0 ? ButtonVariant.link : ButtonVariant.secondary,\n        [ props.conflictingNotifications ]\n    );\n\n    const [ ackDelete, setAckDelete ] = React.useState(false);\n\n    const content = React.useMemo(() => {\n        if (props.conflictingNotifications.length === 0) {\n            return (\n                <Stack hasGutter>\n                    <StackItem>\n                        Action and recipient pairings assigned in <b>{ props.behaviorGroup.displayName }</b> will lost. You\n                        will no longer be able to assign this behavior group to events.\n                    </StackItem>\n                    <StackItem>\n                        <Checkbox\n                            id=\"checkbox-delete-i-acknowledge\"\n                            label=\"I acknowledge that this action cannot be undone\"\n                            onChange={ setAckDelete }\n                            isChecked={ ackDelete }\n                        />\n                    </StackItem>\n                </Stack>\n            );\n        } else {\n            const events = props.conflictingNotifications;\n\n            return (\n                <Stack hasGutter>\n                    <StackItem>\n                        <b>{ props.behaviorGroup.displayName }</b> is associated to { events.length } events.\n                        Please remove the behavior group from these events in order  to continue.\n                    </StackItem>\n                    <StackItem>\n                        <ExpandableSection\n                            toggleText={ `View ${ events.length } event${ events.length === 0 ? '' : 's' }` }\n                        >\n                            <List>\n                                { events.map(event =>\n                                    (<ListItem key={ event.id }>{ `${event.applicationDisplayName} - ${event.eventTypeDisplayName}` }</ListItem>)\n                                ) }\n                            </List>\n                        </ExpandableSection>\n                    </StackItem>\n                </Stack>\n            );\n        }\n    }, [ props.conflictingNotifications, props.behaviorGroup, ackDelete, setAckDelete ]);\n\n    return (\n        <DeleteModal\n            isOpen={ true }\n            isDeleting={ props.isDeleting }\n            title=\"Delete behavior group\"\n            content={ content }\n            onClose={ props.onClose }\n            onDelete={ onDelete }\n            error={ props.error }\n            titleIconVariant=\"warning\"\n            actionButtonDisabled={ !ackDelete }\n            actionButtonHidden={ props.conflictingNotifications.length > 0 }\n            cancelButtonTitle={ cancelButtonTitle }\n            cancelButtonVariant={ cancelButtonVariant }\n        />\n    );\n};\n\nconst onDelete = () => false;\n\nexport const BehaviorGroupDeleteModalSkeleton: React.FunctionComponent<BehaviorGroupDeleteModalSkeletonProps> = props => {\n    return (\n        <DeleteModal\n            isOpen={ true }\n            title=\"Delete behavior group\"\n            actionButtonDisabled={ true }\n            titleIconVariant=\"warning\"\n            content={ <Stack hasGutter>\n                <StackItem><Skeleton width=\"500px\" /></StackItem>\n                <StackItem><Skeleton width=\"500px\" /></StackItem>\n            </Stack> }\n            onClose={ props.onClose }\n            isDeleting={ false }\n            onDelete={ onDelete }\n        />\n    );\n};\n","import { useCallback } from 'react';\n\nimport { OnDelete } from '../types/Callbacks';\n\nexport const useOnDeleteWrapper = <T>(onDelete: OnDelete<T>, toDelete: T) => {\n    return useCallback(() => {\n        return  onDelete(toDelete);\n    }, [ onDelete, toDelete ]);\n};\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\nconst deleteBehaviorGroupAction = (id: UUID) => {\n    return Operations.NotificationServiceDeleteBehaviorGroup.actionCreator({\n        id\n    });\n};\n\nexport const useDeleteBehaviorGroupMutation = () => useMutation(deleteBehaviorGroupAction);\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toNotifications } from '../../types/adapters/NotificationAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst getAffectedNotificationsByBehaviorGroupAction = (id: UUID) => {\n    return Operations.NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup.actionCreator({\n        behaviorGroupId: id\n    });\n};\n\nconst defaultNotificationsDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'Notifications',\n                200,\n                toNotifications(payload.value),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetAffectedNotificationsByBehaviorGroupQuery = (id: UUID) =>\n    useTransformQueryResponse(\n        useQuery(getAffectedNotificationsByBehaviorGroupAction(id)),\n        defaultNotificationsDecoder\n    );\n","import { addDangerNotification, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useEffect } from 'react';\n\nimport {\n    BehaviorGroupDeleteModal,\n    BehaviorGroupDeleteModalSkeleton\n} from '../../../components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal';\nimport { useDeleteBehaviorGroupMutation } from '../../../services/Notifications/DeleteBehaviorGroup';\nimport { useGetAffectedNotificationsByBehaviorGroupQuery } from '../../../services/Notifications/GetAffectedNotificationsByBehaviorGroup';\nimport { BehaviorGroup } from '../../../types/Notification';\n\nexport interface DeleteBehaviorGroupPageProps {\n    behaviorGroup: BehaviorGroup;\n    onClose: (deleted: boolean) => void;\n}\n\nexport const DeleteBehaviorGroupPage: React.FunctionComponent<DeleteBehaviorGroupPageProps> = props => {\n\n    const deleteBehaviorGroup = useDeleteBehaviorGroupMutation();\n    const affected = useGetAffectedNotificationsByBehaviorGroupQuery(props.behaviorGroup.id);\n\n    const onDelete = React.useCallback(async (behaviorGroup: BehaviorGroup) => {\n        const mutate = deleteBehaviorGroup.mutate;\n        const response = await mutate(behaviorGroup.id);\n\n        if (response.payload?.status === 200) {\n            addSuccessNotification(\n                'Behavior group deleted',\n                <>\n                    Group <b>{ behaviorGroup.displayName }</b> deleted successfully.\n                </>\n            );\n            return true;\n        }\n\n        addDangerNotification(\n            'Behavior group failed to be deleted',\n            <>\n                Failed to delete group <b> { behaviorGroup.displayName }</b>.\n                <br />\n                Please try again.\n            </>\n        );\n\n        return false;\n    }, [ deleteBehaviorGroup.mutate ]);\n\n    useEffect(() => {\n        const payload = affected.payload;\n        const onClose = props.onClose;\n        if (payload && payload.status !== 200) {\n            addDangerNotification(\n                'Associated events failed to load ',\n                <>\n                    Failed to load associated events for group <b> { props.behaviorGroup.displayName }</b>.\n                    <br />\n                    Please try again.\n                </>\n            );\n\n            onClose(false);\n        }\n    }, [ affected.payload, props.behaviorGroup, props.onClose ]);\n\n    if (affected.loading) {\n        return <BehaviorGroupDeleteModalSkeleton\n            onClose={ props.onClose }\n        />;\n    }\n\n    if (affected.payload?.status !== 200) {\n        return null;\n    }\n\n    return <BehaviorGroupDeleteModal\n        onDelete={ onDelete }\n        isDeleting={ deleteBehaviorGroup.loading }\n        onClose={ props.onClose }\n        behaviorGroup={ props.behaviorGroup }\n        conflictingNotifications={ affected.payload.value }\n    />;\n};\n","import * as Yup from 'yup';\n\nimport { NotificationType } from '../../types/Notification';\n\nconst ActionIntegration = Yup.object({\n    type: Yup.mixed().oneOf([ NotificationType.INTEGRATION ]).required(),\n    integration: Yup.object({\n        id: Yup.string().required()\n    }).required(),\n    integrationId: Yup.string().min(1)\n});\n\nconst ActionNotify = Yup.object({\n    type: Yup.mixed().oneOf([ NotificationType.EMAIL_SUBSCRIPTION /*, NotificationType.DRAWER */ ]).required(),\n    recipient: Yup.array(Yup.object()).min(1),\n    integrationId: Yup.string().min(0)\n});\n\ntype ActionsType = Yup.TypeOf<typeof ActionIntegration> | Yup.TypeOf<typeof ActionNotify>;\n\nexport const ActionsArray = Yup.array(Yup.lazy(obj => {\n    if (obj && (obj as any).hasOwnProperty('type')) {\n        if ((obj as any).type === NotificationType.INTEGRATION) {\n            return ActionIntegration;\n        }\n    }\n\n    return ActionNotify;\n})).test('no-repeated', '${path} can\\'t contain repeated actions', (value: Array<ActionsType>  | undefined, context) => {\n    const errors: Array<ReturnType<Yup.TestContext['createError']>> = [];\n\n    let foundEmail = false;\n    const integrationIds: Array<string> = [];\n\n    if (!value) {\n        return true;\n    }\n\n    for (let i = 0; i < value.length; ++i) {\n        const action = value[i];\n        const integrationId = action.integrationId;\n        if (action.type === NotificationType.EMAIL_SUBSCRIPTION) {\n            if (foundEmail) {\n                errors.push(context.createError({\n                    message: 'Only 1 send email action is allowed',\n                    path: `actions.${i}`\n                }));\n            }\n\n            foundEmail = true;\n        } else if (integrationId) {\n            if (integrationIds.includes(integrationId)) {\n                errors.push(context.createError({\n                    message: 'Integration already used in the group, please select other',\n                    path: `actions.${i}`\n                }));\n            } else {\n                integrationIds.push(integrationId);\n            }\n        }\n    }\n\n    if (errors.length === 0) {\n        return true;\n    }\n\n    return {\n        ...context.createError(),\n        inner: errors\n    };\n});\n\nexport const WithActions = Yup.object({\n    actions: ActionsArray\n});\n\nexport const BehaviorGroupSchema = Yup.object({\n    displayName: Yup.string().required('You must specify a name for the behavior group'),\n    actions: ActionsArray\n});\n","import { createContext, useContext } from 'react';\n\nimport { UserIntegrationType } from '../../types/Integration';\nimport { IntegrationRef } from '../../types/Notification';\nimport { Recipient } from '../../types/Recipient';\n\nexport type GetIntegrations = (type: UserIntegrationType, search?: string) => Promise<ReadonlyArray<IntegrationRef>>;\nexport type GetNotificationRecipients = (filter?: string) => Promise<ReadonlyArray<Recipient>>;\n\nexport interface RecipientContext {\n    getIntegrations: GetIntegrations,\n    getNotificationRecipients: GetNotificationRecipients\n}\n\nconst RecipientContext = createContext<RecipientContext>({\n    getIntegrations: async () => {\n        throw new Error('No IntegrationContext found');\n    },\n    getNotificationRecipients: async () => {\n        throw new Error('No RecipientContext found');\n    }\n});\n\nexport const useRecipientContext = () => useContext(RecipientContext);\nexport const RecipientContextProvider = RecipientContext.Provider;\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport { Recipient } from '../../../types/Recipient';\n\nexport class RecipientOption implements SelectOptionObject {\n    readonly recipient: Recipient;\n\n    constructor(recipient: Recipient) {\n        this.recipient = recipient;\n    }\n\n    compareTo(selectOption: any): boolean {\n        if (selectOption instanceof RecipientOption) {\n            return this.recipient.equals(selectOption.recipient);\n        }\n\n        return false;\n    }\n\n    toString(): string {\n        return this.recipient.displayName;\n    }\n}\n","import { SelectOption } from '@patternfly/react-core';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\n\nimport { NotificationRecipient, Recipient } from '../../../types/Recipient';\nimport { RecipientOption } from './RecipientOption';\nimport { ReducerState } from './useTypeaheadReducer';\n\nconst mapper = (r: Recipient) => {\n    let description;\n    if (r instanceof NotificationRecipient) {\n        description = r.description;\n    }\n\n    return <SelectOption key={ r.getKey() } value={ new RecipientOption(r) } description={ description } />;\n};\n\nexport const useRecipientOptionMemo = (state: ReducerState<Recipient>) => {\n    return React.useMemo(() => {\n        if (state.show === 'default') {\n            if (state.loadingDefault) {\n                return [ <SelectOption\n                    key=\"loading-option\"\n                    isNoResultsOption={ true }\n                    value=\"Loading...\"\n                /> ];\n            } else {\n                return state.defaultValues.map(mapper);\n            }\n        } else if (state.show === 'filter') {\n            if (state.loadingFilter) {\n                return [ <SelectOption\n                    key=\"loading-option\"\n                    isNoResultsOption={ true }\n                    value=\"Loading...\"\n                /> ];\n            } else {\n                return state.filterValues.map(mapper);\n            }\n        }\n\n        assertNever(state.show);\n    }, [ state ]);\n};\n","import assertNever from 'assert-never';\nimport { Reducer, useCallback, useMemo, useReducer } from 'react';\n\nexport interface ReducerState<T> {\n    filterValues: ReadonlyArray<T>;\n    defaultValues: ReadonlyArray<T>;\n    show: 'default' | 'filter';\n    loadingFilter: boolean;\n    loadingDefault: boolean;\n    lastSearch: string;\n}\n\nenum ReducerActionType {\n    LOAD_FILTER_VALUE,\n    SET_FILTER_VALUE,\n    USE_DEFAULTS,\n    SET_DEFAULTS\n}\n\ntype ReducerAction<T> = {\n    type: ReducerActionType.USE_DEFAULTS;\n} | {\n    type: ReducerActionType.LOAD_FILTER_VALUE;\n    search: string;\n} | {\n    type: ReducerActionType.SET_FILTER_VALUE;\n    search: string;\n    values: ReadonlyArray<T>;\n} | {\n    type: ReducerActionType.SET_DEFAULTS;\n    values: ReadonlyArray<T>;\n}\n\nconst reducerFunction = <T>(state: ReducerState<T>, action: ReducerAction<T>): ReducerState<T> => {\n    switch (action.type) {\n        case ReducerActionType.SET_FILTER_VALUE:\n            if (action.search === state.lastSearch) {\n                if (action.values === state.filterValues) {\n                    return state;\n                }\n\n                return {\n                    ...state,\n                    loadingFilter: false,\n                    filterValues: action.values\n                };\n            }\n\n            return state;\n        case ReducerActionType.LOAD_FILTER_VALUE:\n            if (action.search !== state.lastSearch || state.show !== 'filter') {\n                return {\n                    ...state,\n                    loadingFilter: true,\n                    filterValues: [],\n                    lastSearch: action.search,\n                    show: 'filter'\n                };\n            }\n\n            return state;\n        case ReducerActionType.USE_DEFAULTS:\n            if (state.show !== 'default') {\n                return {\n                    ...state,\n                    show: 'default'\n                };\n            }\n\n            return state;\n        case ReducerActionType.SET_DEFAULTS:\n            return {\n                ...state,\n                defaultValues: action.values,\n                loadingDefault: false\n            };\n        default:\n            assertNever(action);\n    }\n};\n\nexport const useTypeaheadReducer = <T>() => {\n    const [ state, dispatch ] = useReducer<Reducer<ReducerState<T>, ReducerAction<T>>>(reducerFunction, {\n        filterValues: [],\n        defaultValues: [],\n        show: 'default',\n        loadingFilter: false,\n        loadingDefault: true,\n        lastSearch: ''\n    } as ReducerState<T>);\n\n    const setFilterValue = useCallback((search: string, values: ReadonlyArray<T>) => dispatch({\n        type: ReducerActionType.SET_FILTER_VALUE,\n        values,\n        search\n    }), [ dispatch ]);\n\n    const loadFilterValue = useCallback((search: string) => dispatch({\n        type: ReducerActionType.LOAD_FILTER_VALUE,\n        search\n    }), [ dispatch ]);\n\n    const setDefaults = useCallback((values: ReadonlyArray<T>) => dispatch({\n        type: ReducerActionType.SET_DEFAULTS,\n        values\n    }), [ dispatch ]);\n\n    const useDefaults = useCallback(() => dispatch({\n        type: ReducerActionType.USE_DEFAULTS\n    }), [ dispatch ]);\n\n    const dispatchers = useMemo(() => ({\n        setFilterValue,\n        loadFilterValue,\n        setDefaults,\n        useDefaults\n    }), [ setFilterValue, loadFilterValue, setDefaults, useDefaults ]);\n\n    return [ state, dispatchers ] as [ typeof state, typeof dispatchers ];\n};\n","import { Select, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { usePrevious } from 'react-use';\n\nimport Config from '../../../config/Config';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationRef } from '../../../types/Notification';\nimport { IntegrationRecipient } from '../../../types/Recipient';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { useRecipientContext } from '../RecipientContext';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface IntegrationRecipientTypeaheadProps extends OuiaComponentProps {\n    selected: Partial<IntegrationRef> | undefined;\n    integrationType: UserIntegrationType;\n    isDisabled?: boolean;\n    onSelected: (recipientOption: RecipientOption) => void;\n    onOpenChange?: (isOpen: boolean) => void;\n    error?: boolean;\n}\n\nexport const IntegrationRecipientTypeahead: React.FunctionComponent<IntegrationRecipientTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n    const prevOpen = usePrevious(isOpen);\n    const { getIntegrations } = useRecipientContext();\n\n    const [ state, dispatchers ] = useTypeaheadReducer<IntegrationRecipient>();\n\n    const toggle = React.useCallback((isOpen: boolean) => {\n        setOpen(isOpen);\n    }, [ setOpen ]);\n\n    React.useEffect(() => {\n        const onOpenChange = props.onOpenChange;\n        if (prevOpen !== undefined && prevOpen !== isOpen) {\n            onOpenChange && onOpenChange(isOpen);\n        }\n    }, [ prevOpen, isOpen, props.onOpenChange ]);\n\n    React.useEffect(() => {\n        getIntegrations(props.integrationType, '').then(integrations => dispatchers.setDefaults(integrations.map(i => new IntegrationRecipient(i))));\n    }, [ getIntegrations, props.integrationType, dispatchers ]);\n\n    React.useEffect(() => {\n        if (state.loadingFilter) {\n            getIntegrations(props.integrationType, state.lastSearch).then(integrations => dispatchers.setFilterValue(\n                state.lastSearch,\n                integrations.map(i => new IntegrationRecipient(i))\n            ));\n        }\n    }, [ getIntegrations, props.integrationType, state.loadingFilter, state.lastSearch, dispatchers ]);\n\n    const options = useRecipientOptionMemo(state);\n\n    const onFilter = React.useCallback((e: React.ChangeEvent<HTMLInputElement> | null) => {\n        // Ignore filter calls with null event\n        if (e === null) {\n            return options;\n        }\n\n        const search = e.target.value?.trim();\n        if (search === '') {\n            dispatchers.useDefaults();\n        } else {\n            dispatchers.loadFilterValue(search);\n        }\n\n        return options;\n    }, [ dispatchers, options ]);\n\n    const selection = React.useMemo(() => {\n        const sel = props.selected;\n        if (sel === undefined || sel.name === undefined || sel.id === undefined || sel.type === undefined) {\n            return undefined;\n        }\n\n        return new RecipientOption(new IntegrationRecipient(sel as IntegrationRef));\n    }, [ props.selected ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const integrationSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n            integrationSelected(value);\n            setOpen(false);\n        }\n\n    }, [ props.onSelected ]);\n\n    const chooseText = `Choose ${Config.integrations.types[props.integrationType].name.toLowerCase()}`;\n\n    return (\n        <div { ...getOuiaProps('IntegrationRecipientTypeahead', props) }>\n            <Select\n                variant={ SelectVariant.typeahead }\n                typeAheadAriaLabel={ chooseText }\n                placeholderText={ chooseText }\n                selections={ selection }\n                onSelect={ onSelect }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onFilter={ onFilter }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n                validated={ props.error ? 'error' : undefined  }\n            >\n                { options }\n            </Select>\n        </div>\n    );\n};\n","import { Select, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { NotificationRecipient, Recipient } from '../../../types/Recipient';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { useRecipientContext } from '../RecipientContext';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface RecipientTypeaheadProps extends OuiaComponentProps {\n    selected: ReadonlyArray<NotificationRecipient>;\n    onSelected: (value: RecipientOption) => void;\n    isDisabled?: boolean;\n    onClear: () => void;\n    onOpenChange?: (isOpen: boolean) => void;\n    error?: boolean;\n}\n\nexport const RecipientTypeahead: React.FunctionComponent<RecipientTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n    const [ state, dispatchers ] = useTypeaheadReducer<Recipient>();\n    const prevOpen = usePrevious(isOpen);\n    const { getNotificationRecipients } = useRecipientContext();\n\n    React.useEffect(() => {\n        getNotificationRecipients('').then(recipients => dispatchers.setDefaults(recipients));\n    }, [ getNotificationRecipients, dispatchers ]);\n\n    React.useEffect(() => {\n        if (state.loadingFilter) {\n            getNotificationRecipients(state.lastSearch).then(recipients => dispatchers.setFilterValue(\n                state.lastSearch,\n                recipients\n            ));\n        }\n    }, [ getNotificationRecipients, state.loadingFilter, state.lastSearch, dispatchers ]);\n\n    const toggle = React.useCallback((isOpen: boolean) => {\n        setOpen(isOpen);\n    }, [ setOpen ]);\n\n    React.useEffect(() => {\n        const onOpenChange = props.onOpenChange;\n        if (prevOpen !== undefined && prevOpen !== isOpen) {\n            onOpenChange && onOpenChange(isOpen);\n        }\n    }, [ prevOpen, isOpen, props.onOpenChange ]);\n\n    const options = useRecipientOptionMemo(state);\n\n    const onFilter = React.useCallback((e: React.ChangeEvent<HTMLInputElement> | null) => {\n        // Ignore filter calls with null event\n        if (e === null) {\n            return options;\n        }\n\n        const search = e.target.value?.trim();\n        if (search === '') {\n            dispatchers.useDefaults();\n        } else {\n            dispatchers.loadFilterValue(search);\n        }\n\n        return options;\n    }, [ dispatchers, options ]);\n\n    const selection = React.useMemo(() => {\n        const sel = props.selected;\n        if (sel === undefined) {\n            return undefined;\n        }\n\n        return (sel as ReadonlyArray<NotificationRecipient>).map(s => new RecipientOption(s));\n\n    }, [ props.selected ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const onSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n            onSelected(value);\n        }\n\n    }, [ props.onSelected ]);\n\n    return (\n        <div { ...getOuiaProps('RecipientTypeahead', props) }>\n            <Select\n                variant={ SelectVariant.typeaheadMulti }\n                typeAheadAriaLabel=\"Select the recipients\"\n                selections={ selection }\n                onSelect={ onSelect }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onFilter={ onFilter }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n                onClear={ props.onClear }\n                validated={ props.error ? 'error' : undefined  }\n            >\n                { options }\n            </Select>\n        </div>\n    );\n};\n","import { FormHelperText, Select, SelectVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationType } from '../../../types/Integration';\nimport { Action, NotificationType } from '../../../types/Notification';\nimport { UseBehaviorGroupActionHandlers } from '../BehaviorGroup/useBehaviorGroupActionHandlers';\nimport { IntegrationRecipientTypeahead } from '../Form/IntegrationRecipientTypeahead';\nimport { RecipientTypeahead } from '../Form/RecipientTypeahead';\n\ninterface RecipientFormProps {\n    action?: Action;\n    integrationSelected: ReturnType<UseBehaviorGroupActionHandlers['handleIntegrationSelected']>;\n    recipientSelected: ReturnType<UseBehaviorGroupActionHandlers['handleRecipientSelected']>;\n    recipientOnClear: ReturnType<UseBehaviorGroupActionHandlers['handleRecipientOnClear']>;\n    onOpenChange?: (isOpen: boolean) => void;\n    error?: string;\n}\n\nconst dummyOnToggle = () => false;\n\nexport const RecipientForm: React.FunctionComponent<RecipientFormProps> = props => {\n    let recipient: React.ReactNode;\n\n    if (!props.action) {\n        recipient = (\n            <div><Select variant={ SelectVariant.typeahead } isDisabled onToggle={ dummyOnToggle } isOpen={ false } /></div>\n        );\n    } else if (props.action.type === NotificationType.INTEGRATION) {\n        recipient = (\n            <IntegrationRecipientTypeahead\n                onSelected={ props.integrationSelected }\n                integrationType={ props.action.integration?.type ?? IntegrationType.WEBHOOK }\n                selected={ props.action.integration }\n                onOpenChange={ props.onOpenChange }\n                error={ !!props.error }\n            />\n        );\n    } else {\n        recipient = (\n            <RecipientTypeahead\n                onSelected={ props.recipientSelected }\n                selected={ props.action.recipient }\n                onClear={ props.recipientOnClear }\n                onOpenChange={ props.onOpenChange }\n                error={ !!props.error }\n            />\n        );\n    }\n\n    return (\n        <> { recipient }\n            { props.error && (\n                <FormHelperText isError isHidden={ !props.error }>{ props.error }\n                </FormHelperText>\n            ) }\n        </>\n    );\n};\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport Config from '../../../config/Config';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { NotificationType } from '../../../types/Notification';\n\ntype ActionTypeOrIntegration = {\n    kind: 'integration';\n    type: UserIntegrationType;\n} | {\n    kind: 'notification';\n    type: NotificationType;\n}\n\nexport class ActionOption implements SelectOptionObject {\n    readonly integrationType: UserIntegrationType | undefined;\n    readonly notificationType: NotificationType;\n\n    constructor(type: ActionTypeOrIntegration) {\n        if (type.kind === 'integration') {\n            this.notificationType = NotificationType.INTEGRATION;\n            this.integrationType = type.type;\n        } else {\n            this.notificationType = type.type;\n            this.integrationType = undefined;\n        }\n    }\n\n    compareTo(selectOption: any): boolean {\n        if (selectOption instanceof ActionOption) {\n            return selectOption.notificationType === this.notificationType && selectOption.integrationType === this.integrationType;\n        }\n\n        return false;\n    }\n\n    toString(): string {\n        const actionName = Config.notifications.types[this.notificationType].name;\n        if (this.integrationType) {\n            const integrationName = Config.integrations.types[this.integrationType].name;\n            return `${actionName}: ${integrationName}`;\n        }\n\n        return actionName;\n    }\n}\n","import { Select, SelectOption, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport Config from '../../../config/Config';\nimport { isReleased } from '../../../types/Environments';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { Action, NotificationType } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { ActionOption } from './ActionOption';\n\nconst getSelectOptions = (\n    availableNotificationTypes: ReadonlyArray<NotificationType>,\n    availableIntegrationTypes: ReadonlyArray<UserIntegrationType>,\n    selectedNotifications: ReadonlyArray<NotificationType>) => [\n    ...availableNotificationTypes\n    .filter(type => !selectedNotifications.includes(type))\n    .map(type => new ActionOption({\n        kind: 'notification',\n        type\n    })),\n    ...availableIntegrationTypes.map(type => new ActionOption({\n        kind: 'integration',\n        type\n    }))\n];\n\nexport interface ActionTypeaheadProps extends OuiaComponentProps {\n    selectedNotifications: ReadonlyArray<NotificationType>;\n    action?: Action;\n    isDisabled?: boolean;\n    onSelected: (actionOption: ActionOption) => void;\n}\n\nexport const ActionTypeahead: React.FunctionComponent<ActionTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const toggle = React.useCallback((isExpanded: boolean) => {\n        setOpen(isExpanded);\n    }, [ setOpen ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const actionSelected = props.onSelected;\n        if (value instanceof ActionOption) {\n            actionSelected(value);\n            setOpen(false);\n        }\n\n    }, [ props.onSelected, setOpen ]);\n\n    const selectedOption = React.useMemo(() => {\n        if (!props.action) {\n            return undefined;\n        }\n\n        if (props.action.type === NotificationType.INTEGRATION) {\n            return new ActionOption({\n                kind: 'integration',\n                type: props.action.integration.type\n            });\n        }\n\n        return new ActionOption({\n            kind: 'notification',\n            type: props.action.type\n        });\n    }, [ props.action ]);\n\n    const released = isReleased();\n\n    const selectableOptions = React.useMemo(() => {\n        const notificationTypes = released ?\n            Config.notifications.actions.released :\n            Config.notifications.actions.experimental;\n        const integrationTypes = released ?\n            Config.integrations.actions.released :\n            Config.integrations.actions.experimental;\n\n        return getSelectOptions(notificationTypes, integrationTypes, props.selectedNotifications)\n        .map(o => <SelectOption key={ o.toString() } value={ o } />);\n    }, [ released, props.selectedNotifications ]);\n\n    return (\n        <div { ...getOuiaProps('ActionTypeahead', props) } >\n            <Select\n                variant={ SelectVariant.typeahead }\n                typeAheadAriaLabel=\"Select action\"\n                aria-label=\"Select action\"\n                placeholderText=\"Select action\"\n                selections={ selectedOption }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onSelect={ onSelect }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n            >\n                { selectableOptions }\n            </Select>\n        </div>\n    );\n};\n","import { Button, ButtonVariant, GridItem } from '@patternfly/react-core';\nimport { MinusCircleIcon, PlusCircleIcon } from '@patternfly/react-icons';\nimport {\n    cellWidth,\n    IActions,\n    ICell,\n    IRow,\n    IRowData,\n    Table,\n    TableBody,\n    TableHeader,\n    TableVariant } from '@patternfly/react-table';\nimport { important } from 'csx';\nimport { FieldArrayRenderProps, FormikProps } from 'formik';\nimport produce, { castDraft, Draft } from 'immer';\nimport * as React from 'react';\nimport { DeepPartial } from 'ts-essentials';\nimport { cssRaw, style } from 'typestyle';\n\nimport { Action, BehaviorGroup, NewBehaviorGroup, NotificationType } from '../../../types/Notification';\nimport { RecipientForm } from '../EditableActionRow/RecipientForm';\nimport { ActionTypeahead } from '../Form/ActionTypeahead';\nimport {\n    SetActionUpdater,\n    UseBehaviorGroupActionHandlers,\n    useBehaviorGroupActionHandlers\n} from './useBehaviorGroupActionHandlers';\n\ncssRaw(`\n    @media only screen and (max-width: 768px) {\n        .pf-c-select .pf-c-select__toggle-typeahead {\n            --pf-c-select__toggle-typeahead--FlexBasis: 0;\n        }\n    }\n`);\n\nexport type BehaviorGroupFormTableProps =\n    FieldArrayRenderProps & {\n    form: FormikProps<FormType>;\n}\n\ntype FormType = DeepPartial<BehaviorGroup | NewBehaviorGroup>;\n\nconst tableHeaderClassName = style({\n    $nest: {\n        '& tr': {\n            borderBottom: important(0)\n        },\n        '& th:first-child': {\n            paddingLeft: important(0)\n        },\n        '& th:last-child, & td:last-child': {\n            paddingRight: important(0)\n        }\n    }\n});\n\nconst tableBodyClassName = style({\n    $nest: {\n        '& td:first-child': {\n            paddingLeft: important(0)\n        },\n        '& td:last-child': {\n            paddingRight: important(0)\n        }\n    }\n});\n\nconst alignLeftClassName = style({\n    textAlign: 'left',\n    paddingLeft: 0\n});\n\nconst cells: Array<ICell> = [\n    {\n        title: 'Actions',\n        transforms: [ cellWidth(50) ]\n    },\n    {\n        title: 'Recipient'\n    }\n];\n\nconst toTableRows = (\n    actions: ReadonlyArray<Action | undefined>,\n    errors: any,\n    touched: any,\n    selectedNotifications: ReadonlyArray<NotificationType>,\n    rowHandlers: UseBehaviorGroupActionHandlers,\n    setFieldTouched: (field: string, isTouched?: boolean, shouldValidate?: boolean) => void\n): Array<IRow> => {\n    return actions.map((action, index) => {\n        let error: string | undefined = undefined;\n        let isTouched = false;\n        let path;\n\n        if (action?.type === NotificationType.INTEGRATION) {\n            path = `actions.${index}.integration`;\n        } else {\n            path = `actions.${index}.recipient`;\n        }\n\n        if (action?.type === NotificationType.INTEGRATION) {\n            if (touched[index]?.integration) {\n                isTouched = true;\n            }\n\n            if (isTouched && errors[index]?.integration) {\n                error = 'Select a recipient for this integration.';\n            }\n        }\n\n        if (!error && isTouched) {\n            setFieldTouched(path, false, false);\n        }\n\n        return {\n            id: index,\n            key: index,\n            cells: [\n                {\n                    title: <ActionTypeahead\n                        selectedNotifications={ selectedNotifications }\n                        action={ action }\n                        onSelected={ rowHandlers.handleActionSelected(index) }\n                    />\n                },\n                {\n                    title: <RecipientForm\n                        action={ action }\n                        integrationSelected={ rowHandlers.handleIntegrationSelected(index) }\n                        recipientSelected={ rowHandlers.handleRecipientSelected(index) }\n                        recipientOnClear={ rowHandlers.handleRecipientOnClear(index) }\n                        error={ error }\n                        onOpenChange={ isOpen => {\n                            if (!isOpen) {\n                                setFieldTouched(path, true, false);\n                            }\n                        } }\n                    />\n                }\n            ]\n        };\n    });\n};\n\nconst emptySpan = () => <span />;\n\nexport const BehaviorGroupFormActionsTable: React.FunctionComponent<BehaviorGroupFormTableProps> = (props) => {\n\n    const { values, setValues, isSubmitting, errors, touched, setFieldTouched } = props.form;\n    const actions = React.useMemo<ReadonlyArray<Action | undefined>>(() => values.actions ?? [] as ReadonlyArray<Action>, [ values ]);\n    const touchedActions = React.useMemo(() => touched?.actions ?? [], [ touched ]);\n    const errorActions = React.useMemo(() => errors?.actions ?? [], [ errors ]);\n\n    const selectedNotifications = React.useMemo(\n        () => new Array(...new Set<NotificationType>(\n            (actions.filter(a => a) as ReadonlyArray<Action>).map(a => a.type)\n        )) as ReadonlyArray<NotificationType>,\n        [ actions ]\n    );\n\n    const setValueDispatch = React.useCallback((updater: SetActionUpdater) => {\n        setValues(produce(prev => {\n            const form = (prev as Draft<FormType>);\n            if (updater instanceof Function) {\n                form.actions = castDraft(updater(form.actions as ReadonlyArray<DeepPartial<Action>>));\n            } else {\n                form.actions = castDraft(updater);\n            }\n        }), false);\n    }, [ setValues ]);\n\n    const addAction = React.useCallback(() => {\n        const push = props.push;\n        push(undefined);\n    }, [ props.push ]);\n\n    React.useEffect(() => {\n        if (actions.length === 0) {\n            addAction();\n        }\n    }, [ actions, addAction ]);\n\n    const rowHandlers = useBehaviorGroupActionHandlers(setValueDispatch);\n\n    const rows = React.useMemo(\n        () => toTableRows(actions, errorActions, touchedActions, selectedNotifications, rowHandlers, setFieldTouched),\n        [ actions, errorActions, touchedActions, selectedNotifications, rowHandlers, setFieldTouched ]\n    );\n\n    const actionResolver = React.useCallback((rowData: IRowData): IActions => {\n        const handleRemove = props.handleRemove;\n        if (rows.length > 1) {\n            return [\n                {\n                    key: 'delete',\n                    title: <Button aria-label=\"delete-action\" variant={ ButtonVariant.plain }>\n                        <MinusCircleIcon />\n                    </Button>,\n                    isOutsideDropdown: true,\n                    onClick: handleRemove(rowData.id)\n                }\n            ];\n        }\n\n        return [];\n    }, [ rows, props.handleRemove ]);\n\n    return (\n        <>\n            <Table\n                aria-label=\"behavior-group-actions-form\"\n                rows={ rows }\n                cells={ cells }\n                actionResolver={ actionResolver }\n                actionsToggle={ emptySpan as any }\n                borders={ false }\n                variant={ TableVariant.compact }\n                isStickyHeader={ true }\n            >\n                <TableHeader className={ tableHeaderClassName } />\n                <TableBody className={ tableBodyClassName } />\n            </Table>\n            <GridItem span={ 12 }>\n                <Button\n                    className={ alignLeftClassName }\n                    variant={ ButtonVariant.link }\n                    icon={ <PlusCircleIcon /> }\n                    onClick={ addAction }\n                    isDisabled={ isSubmitting }\n                >\n                    Add action\n                </Button>\n            </GridItem>\n        </>\n    );\n};\n","import produce from 'immer';\nimport { SetStateAction, useCallback } from 'react';\nimport { DeepPartial } from 'ts-essentials';\n\nimport { Action, ActionIntegration, ActionNotify, NotificationType } from '../../../types/Notification';\nimport { IntegrationRecipient, NotificationRecipient } from '../../../types/Recipient';\nimport { ActionOption } from '../Form/ActionOption';\nimport { RecipientOption } from '../Form/RecipientOption';\n\nexport interface UseBehaviorGroupActionHandlers {\n    handleActionSelected: (index: number) => (value: ActionOption) => void;\n    handleIntegrationSelected: (index: number) => (value: RecipientOption) => void;\n    handleRecipientSelected: (index: number) => (value: RecipientOption) => void;\n    handleRecipientOnClear: (index: number) => () => void;\n}\n\nexport type SetActionUpdater = SetStateAction<ReadonlyArray<DeepPartial<Action>>>;\n\nexport const useBehaviorGroupActionHandlers = (\n    setActions: (updater: SetActionUpdater) => void\n): UseBehaviorGroupActionHandlers => {\n\n    const handleActionSelected = useCallback((index: number) => (value: ActionOption) => {\n        setActions(produce(prev => {\n            if (!prev[index]) {\n                prev[index] = {};\n            }\n\n            const row = prev[index];\n            row.type = value.notificationType;\n            if (value.integrationType) {\n                const rowAsIntegration = row as DeepPartial<ActionIntegration>;\n                rowAsIntegration.integration = {\n                    type: value.integrationType\n                };\n            } else {\n                const rowAsNotification = row as DeepPartial<ActionNotify>;\n                rowAsNotification.recipient = [];\n            }\n        }));\n    }, [ setActions ]);\n\n    const handleIntegrationSelected = useCallback((index: number) => (value: RecipientOption) => {\n        setActions(produce(prev => {\n            if (value.recipient instanceof IntegrationRecipient) {\n                const rowAsIntegration = prev[index] as DeepPartial<ActionIntegration>;\n                rowAsIntegration.integration = value.recipient.integration;\n            }\n        }));\n    }, [ setActions ]);\n\n    const handleRecipientSelected = useCallback((index: number) => (value: RecipientOption) => {\n        setActions(produce(prev => {\n            const row = prev[index];\n            if (row.type !== NotificationType.INTEGRATION) {\n                const rowAsNotification = row as DeepPartial<ActionNotify>;\n                if (rowAsNotification.recipient) {\n                    const index = rowAsNotification.recipient.findIndex(r => value.recipient.equals(r as NotificationRecipient));\n                    if (index === -1) {\n                        rowAsNotification.recipient = [ ...rowAsNotification.recipient, value.recipient ];\n                    } else {\n                        rowAsNotification.recipient = rowAsNotification.recipient.filter((_, i) => i !== index);\n                    }\n                }\n            }\n        }));\n    }, [ setActions ]);\n\n    const handleRecipientOnClear = useCallback((index: number) => () => {\n        setActions(produce(prev => {\n            const row = prev[index];\n            if (row.type !== NotificationType.INTEGRATION) {\n                const rowAsNotification = row as DeepPartial<ActionNotify>;\n                rowAsNotification.recipient = [];\n            }\n        }));\n    }, [ setActions ]);\n\n    return {\n        handleActionSelected,\n        handleIntegrationSelected,\n        handleRecipientSelected,\n        handleRecipientOnClear\n    };\n};\n","import { Form, Grid, GridItem } from '@patternfly/react-core';\nimport { global_spacer_md } from '@patternfly/react-tokens';\nimport { FormTextInput, OuiaComponentProps, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport { FieldArray } from 'formik';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { BehaviorGroupFormActionsTable } from './BehaviorGroupFormActionsTable';\n\nexport interface EditBehaviorGroupProps extends OuiaComponentProps {\n    behaviorGroup?: Partial<BehaviorGroup>;\n}\n\nconst subtitleClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\nexport const EditBehaviorGroupForm: React.FunctionComponent<EditBehaviorGroupProps> = props => {\n\n    return (\n        <div { ... getOuiaProps('Notifications/BehaviorGroupForm', props) }>\n            <div className={ subtitleClassName }>{`${ props.behaviorGroup?.id ?\n                'Edit your existing behavior group' : 'Enter a name and add actions for your new group.'}` } </div>\n            <Form>\n                <Grid hasGutter>\n                    <GridItem span={ 12 }>\n                        <FormTextInput\n                            ouiaId={ ouiaIdConcat(props.ouiaId, 'group-name') }\n                            label=\"Group name\"\n                            name=\"displayName\"\n                            id=\"group-name\"\n                        />\n                    </GridItem>\n                    <FieldArray name=\"actions\">\n                        { helpers => (\n                            <>\n                                <BehaviorGroupFormActionsTable\n                                    { ...helpers }\n                                />\n                            </>\n                        ) }\n                    </FieldArray>\n                </Grid>\n            </Form>\n        </div>\n    );\n};\n","import { ModalVariant } from '@patternfly/react-core';\nimport { SaveModal, SaveModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { BehaviorGroupSchema } from '../../../schemas/Integrations/Notifications';\nimport { BehaviorGroup, DefaultNotificationBehavior, Notification } from '../../../types/Notification';\nimport { EditBehaviorGroupForm } from './BehaviorGroupForm';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onSave';\nexport type BehaviorGroupSaveModalProps = Omit<SaveModalProps, UsedProps> & {\n    data?: Partial<BehaviorGroup>;\n    onSave: (behaviorGroup: BehaviorGroup) => boolean | Promise<boolean>;\n};\n\ninterface InternalProps {\n    onClose: (saved: boolean) => void;\n    data: BehaviorGroupSaveModalProps['data'];\n}\n\nconst InternalBehaviorGroupSaveModal: React.FunctionComponent<InternalProps> = props => {\n    const title =  `${props.data?.id ? 'Edit' : 'Create new'} behavior group`;\n\n    const { handleSubmit, isValid, isSubmitting } = useFormikContext<Notification | DefaultNotificationBehavior>();\n\n    const onSaveClicked = React.useCallback(() => {\n        handleSubmit();\n        return false;\n    }, [ handleSubmit ]);\n\n    return (\n        <SaveModal\n            content={ <EditBehaviorGroupForm\n                behaviorGroup={ props.data }\n            /> }\n            isSaving={ isSubmitting }\n            onSave={ onSaveClicked }\n            isOpen={ true }\n            title={ title }\n            onClose={ props.onClose }\n            variant={ ModalVariant.large }\n            actionButtonDisabled={ !isValid }\n        />\n    );\n};\n\nexport const BehaviorGroupSaveModal: React.FunctionComponent<BehaviorGroupSaveModalProps> = props => {\n    const onSubmit = React.useCallback(async (data: Partial<BehaviorGroup>) => {\n        const onClose = props.onClose;\n        const onSave = props.onSave;\n\n        const saved = await onSave(data as BehaviorGroup);\n\n        if (saved) {\n            onClose(true);\n        }\n    }, [ props.onClose, props.onSave ]);\n\n    return (\n        <Formik<Partial<BehaviorGroup>>\n            initialValues={ props.data ?? { } }\n            validationSchema={ BehaviorGroupSchema }\n            onSubmit={ onSubmit }\n            validateOnMount={ true }\n        >\n            <InternalBehaviorGroupSaveModal\n                onClose={ props.onClose }\n                data={ props.data }\n\n            />\n        </Formik>\n    );\n};\n","import { NotificationRecipient } from '../../types/Recipient';\nimport { GetNotificationRecipients } from './RecipientContext';\n\nconst all: ReadonlyArray<NotificationRecipient> = [\n    new NotificationRecipient(undefined, false),\n    new NotificationRecipient(undefined, true)\n];\n\nconst getRecipients = async (search?: string) => {\n    if (search) {\n        const lowerCaseSearch = search.toLowerCase();\n        return all.filter(r => r.displayName.toLowerCase().includes(lowerCaseSearch));\n    }\n\n    return all;\n};\n\nexport const useGetRecipients = (): GetNotificationRecipients => {\n    return getRecipients;\n};\n","import assertNever from 'assert-never';\n\nimport { Operations } from '../../generated/OpenapiIntegrations';\nimport { NotificationType, SystemProperties } from '../../types/Notification';\n\nexport const getDefaultSystemEndpointAction = (systemProperties: SystemProperties) => {\n    if (systemProperties.type === NotificationType.EMAIL_SUBSCRIPTION) {\n        return Operations.EndpointServiceGetOrCreateEmailSubscriptionEndpoint.actionCreator({\n            body: {\n                only_admins: systemProperties.props.onlyAdmins\n            }\n        });\n    }\n\n    assertNever(systemProperties.type);\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toBehaviorGroup, toShallowBehaviorGroupRequest } from '../../types/adapters/BehaviorGroupAdapter';\nimport { BehaviorGroupRequest } from '../../types/Notification';\n\ntype Payload = Operations.NotificationServiceCreateBehaviorGroup.Payload\n    | Operations.NotificationServiceUpdateBehaviorGroup.Payload;\n\nconst decoder = validationResponseTransformer(\n    (payload: Payload) => {\n        if (payload.type === 'BehaviorGroup') {\n            return validatedResponse(\n                'BehaviorGroup',\n                payload.status,\n                toBehaviorGroup(payload.value),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nconst saveBehaviorGroupActionCreator =  (behaviorGroup: BehaviorGroupRequest) => {\n    if (behaviorGroup.id === undefined) {\n        return Operations.NotificationServiceCreateBehaviorGroup.actionCreator({\n            body: toShallowBehaviorGroupRequest(behaviorGroup)\n        });\n    }\n\n    return Operations.NotificationServiceUpdateBehaviorGroup.actionCreator({\n        id: behaviorGroup.id,\n        body: toShallowBehaviorGroupRequest(behaviorGroup)\n    });\n};\n\nexport const useSaveBehaviorGroupMutation = () => useTransformQueryResponse(\n    useMutation(saveBehaviorGroupActionCreator),\n    decoder\n);\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\ntype UpdateBehaviorGroupActionsParams = {\n    behaviorGroupId: UUID;\n    endpointIds: Array<UUID>;\n}\n\nconst updateBehaviorGroupActionsActionCreator =  (params: UpdateBehaviorGroupActionsParams) => {\n    return Operations.NotificationServiceUpdateBehaviorGroupActions.actionCreator({\n        behaviorGroupId: params.behaviorGroupId,\n        body: params.endpointIds\n    });\n};\n\nexport const useUpdateBehaviorGroupActionsMutation = () => useMutation(updateBehaviorGroupActionsActionCreator);\n","import produce from 'immer';\nimport isEqual from 'lodash/isEqual';\nimport uniqWith from 'lodash/uniqWith';\nimport { Dispatch, SetStateAction, useCallback, useContext, useMemo, useState } from 'react';\nimport { ClientContext, useClient } from 'react-fetching-library';\n\nimport { getDefaultSystemEndpointAction } from '../../../services/Integrations/GetDefaultSystemEndpoint';\nimport { useSaveBehaviorGroupMutation } from '../../../services/Notifications/SaveBehaviorGroup';\nimport { useUpdateBehaviorGroupActionsMutation } from '../../../services/Notifications/UpdateBehaviorGroupActions';\nimport { toSystemProperties } from '../../../types/adapters/NotificationAdapter';\nimport {\n    BehaviorGroup, BehaviorGroupRequest,\n    isActionIntegration,\n    isActionNotify,\n    NewBehaviorGroup,\n    NotificationType,\n    SystemProperties,\n    UUID\n} from '../../../types/Notification';\n\nconst behaviorGroupNeedsUpdate = (original: Partial<BehaviorGroup> | undefined, updated: BehaviorGroupRequest) => {\n    return original?.id === undefined || original.displayName !== updated.displayName;\n};\n\nconst saveBehaviorGroup = async (\n    original: Partial<BehaviorGroup> | undefined,\n    updated: BehaviorGroupRequest,\n    save: ReturnType<typeof useSaveBehaviorGroupMutation>['mutate']\n) => {\n    // Determine if we need to save the behavior group before updating the actions\n    if (behaviorGroupNeedsUpdate(original, updated)) {\n        const result = await save(updated);\n        if (result.payload?.type === 'BehaviorGroup') {\n            return result.payload.value.id;\n        } else if (result.payload?.status === 200) {\n            return updated.id;\n        }\n\n        throw new Error('Behavior group wasn\\'t saved');\n    } else {\n        return updated.id;\n    }\n};\n\ninterface ActionToIdList {\n    (actions: BehaviorGroup['actions']): Array<UUID | undefined>;\n    (actions: BehaviorGroup['actions'], ids: Array<UUID>): Array<UUID>;\n}\n\nconst actionsToIdList: ActionToIdList = (actions: BehaviorGroup['actions'], ids?: Array<UUID>) => {\n    const remainingIds = ids ? [ ... ids ] as UUID[] : undefined;\n    const endpointsToAdd = actions.reduce(\n        (toAdd, action) => {\n            if (isActionNotify(action)) {\n                action.recipient.forEach(recipient => {\n                    if (recipient.integrationId) {\n                        toAdd.push(recipient.integrationId);\n                    } else if (remainingIds === undefined) {\n                        toAdd.push(undefined);\n                    } else if (remainingIds.length > 0) {\n                        toAdd.push(remainingIds.shift() as UUID);\n                    } else {\n                        throw new Error(`No more ids remaining to assign: actions ${actions} newIds: ${ids}`);\n                    }\n                });\n            } else if (isActionIntegration(action)) {\n                toAdd.push(action.integration.id);\n            } else {\n                throw new Error(`Unknown action type: ${action}`);\n            }\n\n            return toAdd;\n        },\n        [] as Array<UUID | undefined>\n    );\n\n    return endpointsToAdd as Array<UUID>;\n};\n\nconst actionsNeedsUpdate = (\n    original: Partial<BehaviorGroup>['actions'] | undefined,\n    updated: (BehaviorGroup | NewBehaviorGroup)['actions']\n) => {\n    return original?.length !== updated?.length || !isEqual(actionsToIdList(original), actionsToIdList(updated));\n};\n\nexport enum SaveBehaviorGroupResult {\n    CREATE,\n    UPDATE\n}\n\ntype SaveActionsResponse = {\n    operation: SaveBehaviorGroupResult,\n    status: boolean;\n}\n\nconst saveActions = async (\n    behaviorGroupId: UUID | undefined,\n    original: Partial<BehaviorGroup>['actions'] | undefined,\n    updated: (BehaviorGroup | NewBehaviorGroup)['actions'],\n    save: ReturnType<typeof useUpdateBehaviorGroupActionsMutation>['mutate'],\n    query: ReturnType<typeof useClient>['query'],\n    setFetchingIntegrations: Dispatch<SetStateAction<boolean>>\n): Promise<SaveActionsResponse> => {\n    if (actionsNeedsUpdate(original, updated)) {\n        // Determine what system Integrations we need to fetch\n        const toFetch: ReadonlyArray<SystemProperties> = uniqWith(\n            ([] as Array<SystemProperties>)\n            .concat(...updated.filter(isActionNotify)\n            .map(action => produce(action, draft => {\n                draft.recipient = draft.recipient.filter(r => !r.integrationId);\n            }))\n            .map(action => toSystemProperties(action))),\n            isEqual\n        );\n\n        if (toFetch.find(props => props.type !== NotificationType.EMAIL_SUBSCRIPTION)) {\n            throw new Error('Only email subscriptions are created when assigning behavior groups');\n        }\n\n        if (toFetch.length > 0) {\n            setFetchingIntegrations(true);\n        }\n\n        const response = await Promise.all(\n            toFetch.map(systemProps => query(getDefaultSystemEndpointAction(systemProps))\n            .then(result => result.payload?.type === 'Endpoint' ? result.payload.value.id : undefined)\n            )\n        ).then(newIds => {\n            if (newIds.includes(undefined)) {\n                throw new Error('Unexpected ids were returned when querying for system endpoints');\n            }\n\n            // We want to preserve the order\n            const remainingIds = [ ... newIds ] as UUID[];\n            const endpointsToAdd = actionsToIdList(updated, remainingIds);\n\n            return save({\n                behaviorGroupId: behaviorGroupId as UUID,\n                endpointIds: endpointsToAdd\n            });\n        });\n\n        if (response.payload?.status === 200) {\n            if (behaviorGroupId === undefined) {\n                return {\n                    operation: SaveBehaviorGroupResult.CREATE,\n                    status: true\n                };\n            } else {\n                return {\n                    operation: SaveBehaviorGroupResult.UPDATE,\n                    status: true\n                };\n            }\n        } else if (behaviorGroupId === undefined) {\n            return {\n                operation: SaveBehaviorGroupResult.CREATE,\n                status: false\n            };\n        } else {\n            return {\n                operation: SaveBehaviorGroupResult.UPDATE,\n                status: false\n            };\n        }\n    }\n\n    if (behaviorGroupId === undefined) {\n        return {\n            operation: SaveBehaviorGroupResult.CREATE,\n            status: true\n        };\n    }\n\n    return {\n        operation: SaveBehaviorGroupResult.UPDATE,\n        status: true\n    };\n};\n\nexport const useSaveBehaviorGroup = (behaviorGroup?: Partial<BehaviorGroup>) => {\n\n    const saveBehaviorGroupMutation = useSaveBehaviorGroupMutation();\n    const updateBehaviorGroupActionsMutation = useUpdateBehaviorGroupActionsMutation();\n    const { query } = useContext(ClientContext);\n\n    const [ fetchingIntegrations, setFetchingIntegrations ] = useState<boolean>(false);\n\n    const save = useCallback(async (data: BehaviorGroupRequest) => {\n        const updateBehaviorGroupActions = updateBehaviorGroupActionsMutation.mutate;\n\n        return saveBehaviorGroup(behaviorGroup, data, saveBehaviorGroupMutation.mutate)\n        .then(behaviorGroupId => saveActions(\n            behaviorGroupId,\n            behaviorGroup?.actions,\n            data.actions,\n            updateBehaviorGroupActions,\n            query,\n            setFetchingIntegrations\n        )).catch(err => {\n            console.error('Error saving behavior groups', err);\n            throw err;\n        });\n    }, [ saveBehaviorGroupMutation.mutate, updateBehaviorGroupActionsMutation.mutate, query, behaviorGroup ]);\n\n    const isSaving = useMemo(() => {\n        return fetchingIntegrations || saveBehaviorGroupMutation.loading || updateBehaviorGroupActionsMutation.loading;\n    }, [ fetchingIntegrations, saveBehaviorGroupMutation.loading, updateBehaviorGroupActionsMutation.loading ]);\n\n    return {\n        save,\n        isSaving\n    };\n};\n","import { addDangerNotification, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { BehaviorGroupSaveModal } from '../../../components/Notifications/BehaviorGroup/BehaviorGroupSaveModal';\nimport { RecipientContextProvider } from '../../../components/Notifications/RecipientContext';\nimport { useGetIntegrations } from '../../../components/Notifications/useGetIntegrations';\nimport { useGetRecipients } from '../../../components/Notifications/useGetRecipients';\nimport {\n    BehaviorGroup\n} from '../../../types/Notification';\nimport { SaveBehaviorGroupResult, useSaveBehaviorGroup } from './useSaveBehaviorGroup';\n\ninterface EditBehaviorGroupPageProps {\n    behaviorGroup?: Partial<BehaviorGroup>;\n    onClose: (saved: boolean) => void;\n}\n\nexport const EditBehaviorGroupPage: React.FunctionComponent<EditBehaviorGroupPageProps> = props => {\n    const getRecipients = useGetRecipients();\n    const getIntegrations = useGetIntegrations();\n\n    const actionsContextValue = React.useMemo(() => ({\n        getIntegrations,\n        getNotificationRecipients: getRecipients\n    }), [ getIntegrations, getRecipients ]);\n\n    const saving = useSaveBehaviorGroup(props.behaviorGroup);\n\n    const onSave = React.useCallback(async (behaviorGroup: BehaviorGroup) => {\n        const save = saving.save;\n        const result = await save(behaviorGroup);\n\n        if (result.status) {\n            if (result.operation === SaveBehaviorGroupResult.CREATE) {\n                addSuccessNotification(\n                    'New behavior group created',\n                    <>\n                        Group <b> { behaviorGroup.displayName } </b> created successfully.\n                    </>\n                );\n            } else {\n                addSuccessNotification(\n                    'Behavior group saved',\n                    <>\n                        Group <b> { behaviorGroup.displayName } </b> was saved successfully.\n                    </>\n                );\n            }\n        } else {\n            if (result.operation === SaveBehaviorGroupResult.CREATE) {\n                addDangerNotification(\n                    'Behavior group failed to be created',\n                    <>\n                        Failed to create group <b> { behaviorGroup.displayName }</b>.\n                        <br />\n                        Please try again.\n                    </>\n                );\n            } else {\n                addDangerNotification(\n                    'Behavior group failed to save',\n                    <>\n                        Failed to save group <b> { behaviorGroup.displayName }</b>.\n                        <br />\n                        Please try again.\n                    </>\n                );\n            }\n        }\n\n        return result.status;\n    }, [ saving.save ]);\n\n    return (\n        <RecipientContextProvider value={ actionsContextValue }>\n            <BehaviorGroupSaveModal\n                data={ props.behaviorGroup }\n                isSaving={ saving.isSaving }\n                onClose={ props.onClose }\n                onSave={ onSave }\n            />\n        </RecipientContextProvider>\n    );\n};\n","import { Filter, Operator, Page } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport { listIntegrationIntegrationDecoder, listIntegrationsActionCreator } from '../../services/useListIntegrations';\nimport { UserIntegrationType } from '../../types/Integration';\nimport { IntegrationRef } from '../../types/Notification';\nimport { GetIntegrations } from './RecipientContext';\n\nexport const useGetIntegrations = (): GetIntegrations => {\n    const { query } = useContext(ClientContext);\n\n    return React.useCallback(async (type: UserIntegrationType, _search?: string) => {\n        return query(listIntegrationsActionCreator(\n            Page.of(\n                1,\n                20,\n                new Filter()\n                .and('type', Operator.EQUAL, [ type ])\n            )\n        )).then(response => {\n            let integrations: ReadonlyArray<IntegrationRef> = [];\n            const payload = response.payload ? listIntegrationIntegrationDecoder(response.payload) : undefined;\n\n            if (payload?.type === 'IntegrationPage') {\n                integrations = payload.value.data;\n            }\n\n            return integrations;\n        });\n    }, [ query ]);\n};\n","import {\n    Badge,\n    Button, ButtonProps,\n    ButtonVariant,\n    ExpandableSection,\n    ExpandableSectionToggle,\n    SearchInput, Split,\n    SplitItem,\n    Stack,\n    StackItem,\n    Title, Tooltip\n} from '@patternfly/react-core';\nimport { global_BackgroundColor_100, global_palette_black_1000, global_spacer_lg } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport {\n    BehaviorGroupCardList,\n    BehaviorGroupCardListSkeleton\n} from '../../../components/Notifications/BehaviorGroup/BehaviorGroupCardList';\nimport { useDeleteModalReducer } from '../../../hooks/useDeleteModalReducer';\nimport {\n    useFormModalReducer } from '../../../hooks/useFormModalReducer';\nimport { BehaviorGroup, UUID } from '../../../types/Notification';\nimport { emptyImmutableArray } from '../../../utils/Immutable';\nimport { DeleteBehaviorGroupPage } from '../Form/DeleteBehaviorGroupPage';\nimport { EditBehaviorGroupPage } from '../Form/EditBehaviorGroupPage';\nimport { BehaviorGroupContent } from './useBehaviorGroupContent';\n\nconst expandableSectionClassName = {\n    backgroundColor: global_BackgroundColor_100.var,\n    paddingLeft: global_spacer_lg.var,\n    paddingRight: global_spacer_lg.var\n};\n\nconst sectionClassName = style(\n    expandableSectionClassName,\n    {\n        paddingBottom: global_spacer_lg.var\n    }\n);\n\nconst sectionTitleClassName = style(\n    expandableSectionClassName,\n    {\n        paddingTop: global_spacer_lg.var\n    }\n);\n\nconst titleClassName = style({\n    marginTop: '-0.15em',\n    color: global_palette_black_1000.var\n});\n\nconst emptyAddButtonClassName = style({\n    marginTop: '-0.2em'\n});\n\ninterface BehaviorGroupSectionProps {\n    bundleId: UUID;\n    behaviorGroupContent: BehaviorGroupContent;\n}\n\ntype BehaviorGroupAddButtonProps = Pick<ButtonProps, 'className' | 'onClick' | 'isDisabled' | 'component'>;\n\nconst BehaviorGroupAddButton: React.FunctionComponent<BehaviorGroupAddButtonProps> = props => {\n    const { isDisabled, ...buttonProps } = props;\n    const { isOrgAdmin } = useAppContext();\n\n    const button = <Button\n        { ...buttonProps }\n        isAriaDisabled={ isDisabled }\n        variant={ ButtonVariant.primary }\n    >\n        Create new group\n    </Button>;\n\n    if (isDisabled) {\n        const content = isOrgAdmin ?\n            'You need the Notifications administrator role to perform this action' :\n            'You do not have permissions to perform this action. Contact your org admin for more information';\n        return <Tooltip content={ content }>\n            { button }\n        </Tooltip>;\n    }\n\n    return button;\n};\n\nexport const BehaviorGroupsSection: React.FunctionComponent<BehaviorGroupSectionProps> = props => {\n\n    const [ isExpanded, setExpanded ] = React.useState(true);\n    const [ filter, setFilter ] = React.useState<string>('');\n    const { rbac } = useAppContext();\n\n    const filteredBehaviors = React.useMemo(() => {\n        if (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError) {\n            const lowerCaseFilter = filter.toLowerCase();\n            return props.behaviorGroupContent.content.filter(bg => bg.displayName.toLowerCase().includes(lowerCaseFilter));\n        }\n\n        return emptyImmutableArray;\n    }, [ filter, props.behaviorGroupContent ]);\n\n    const [ editModalState, editModalActions ] = useFormModalReducer<BehaviorGroup>();\n    const [ deleteModalState, deleteModalActions ] = useDeleteModalReducer<BehaviorGroup>();\n\n    const createGroup = React.useCallback((event) => {\n        event.stopPropagation();\n        editModalActions.create({\n            bundleId: props.bundleId\n        });\n    }, [ editModalActions, props.bundleId ]);\n\n    const onCloseModal = React.useCallback((saved: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (saved) {\n            reload();\n        }\n\n        editModalActions.reset();\n    }, [ editModalActions, props.behaviorGroupContent.reload ]);\n\n    const onEdit = React.useCallback((behaviorGroup: BehaviorGroup) => {\n        editModalActions.edit(behaviorGroup);\n    }, [ editModalActions ]);\n\n    const onDelete = React.useCallback((behaviorGroup: BehaviorGroup) => {\n        deleteModalActions.delete(behaviorGroup);\n    }, [ deleteModalActions ]);\n\n    const onCloseDelete = React.useCallback((deleted: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (deleted) {\n            reload();\n        }\n\n        deleteModalActions.reset();\n    }, [ deleteModalActions, props.behaviorGroupContent.reload ]);\n\n    const onClearFilter = React.useCallback(() => {\n        setFilter('');\n    }, [ setFilter ]);\n\n    const contentId = 'behavior-group-section-content';\n\n    return (\n        <div>\n            <div className={ sectionTitleClassName }>\n                <ExpandableSectionToggle\n                    isExpanded={ isExpanded }\n                    onToggle={ setExpanded }\n                    contentId={ contentId }\n                    direction=\"down\"\n                >\n                    <Split hasGutter>\n                        <SplitItem>\n                            <Title className={ titleClassName } headingLevel=\"h2\">Behavior groups</Title>\n                        </SplitItem>\n                        <SplitItem>\n                            { (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError) && (\n                                props.behaviorGroupContent.content.length > 0 ?\n                                    <Badge isRead>{ props.behaviorGroupContent.content.length }</Badge> :\n                                    <BehaviorGroupAddButton\n                                        className={ emptyAddButtonClassName }\n                                        component='a'\n                                        onClick={ createGroup }\n                                        isDisabled={ !rbac.canWriteNotifications }\n                                    />\n                            ) }\n                        </SplitItem>\n                    </Split>\n                </ExpandableSectionToggle>\n            </div>\n            <ExpandableSection\n                className={ sectionClassName }\n                contentId={ contentId }\n                isExpanded={ isExpanded }\n                onToggle={ setExpanded }\n                isDetached\n            >\n                <Stack hasGutter>\n                    <StackItem>\n                        Configure default actions for notifications recipients. Keep in mind that users will be able\n                        to change settings for all entitled events in User Preferences. You can prevent users from\n                        changing assigned actions by locking action / recipient pairings when creating or editing\n                        behavior groups.\n                    </StackItem>\n                    { (props.behaviorGroupContent.isLoading ||\n                        props.behaviorGroupContent.hasError ||\n                        props.behaviorGroupContent.content.length > 0) && (\n                        <>\n                            <StackItem>\n                                <Split hasGutter>\n                                    <SplitItem>\n                                        <SearchInput\n                                            value={ filter }\n                                            onChange={ setFilter }\n                                            onClear={ onClearFilter }\n                                            type=\"text\"\n                                            aria-label=\"Search by name\"\n                                            placeholder=\"Search by name\"\n                                            isDisabled={ props.behaviorGroupContent.isLoading }\n                                        />\n                                    </SplitItem>\n                                    <SplitItem>\n                                        <BehaviorGroupAddButton\n                                            isDisabled={ props.behaviorGroupContent.isLoading || !rbac.canWriteNotifications }\n                                            onClick={ createGroup }\n                                        />\n                                    </SplitItem>\n                                </Split>\n                            </StackItem>\n                            <StackItem>\n                                { props.behaviorGroupContent.isLoading ? (\n                                    <BehaviorGroupCardListSkeleton />\n                                ) : props.behaviorGroupContent.hasError ? (\n                                    <div>Error loading behavior groups</div>\n                                ) : (\n                                    <BehaviorGroupCardList\n                                        onEdit={ rbac.canWriteNotifications ? onEdit : undefined }\n                                        onDelete={ rbac.canWriteNotifications ? onDelete : undefined }\n                                        behaviorGroups={ filteredBehaviors }\n                                    />\n                                ) }\n                            </StackItem>\n                        </>\n                    ) }\n                </Stack>\n                { editModalState.isOpen && (\n                    <EditBehaviorGroupPage\n                        behaviorGroup={ editModalState.template }\n                        onClose={ onCloseModal }\n                    />\n                )}\n                { deleteModalState.isOpen && (\n                    <DeleteBehaviorGroupPage\n                        behaviorGroup={ deleteModalState.data }\n                        onClose={ onCloseDelete }\n                    />\n                ) }\n            </ExpandableSection>\n        </div>\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toBehaviorGroup } from '../../types/adapters/BehaviorGroupAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst behaviorGroupDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceFindBehaviorGroupsByBundleId.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroups',\n                200,\n                payload.value.map(toBehaviorGroup),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetBehaviorGroups = (bundleId: UUID) => {\n    return useTransformQueryResponse(\n        useQuery(Operations.NotificationServiceFindBehaviorGroupsByBundleId.actionCreator({\n            bundleId\n        })),\n        behaviorGroupDecoder\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\nexport const getBehaviorGroupByNotificationDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetLinkedBehaviorGroups.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroupId',\n                200,\n                payload.value.map(value => value.id),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const getBehaviorGroupByNotificationAction = (notificationId: UUID) =>\n    Operations.NotificationServiceGetLinkedBehaviorGroups.actionCreator({\n        eventTypeId: notificationId\n    });\n\nexport const useGetBehaviorGroupByNotification = (notificationId: UUID) => {\n    return useTransformQueryResponse(\n        useQuery(getBehaviorGroupByNotificationAction(notificationId)),\n        getBehaviorGroupByNotificationDecoder\n    );\n};\n","import { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\nimport NotificationServiceUpdateEventTypeBehaviors = Operations.NotificationServiceUpdateEventTypeBehaviors;\n\nexport const linkBehaviorGroupAction = (notificationId: UUID, behaviorGroupIds: Array<UUID>) => {\n    return NotificationServiceUpdateEventTypeBehaviors.actionCreator({\n        body: behaviorGroupIds,\n        eventTypeId: notificationId\n    });\n};\n","import { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport produce, { castDraft } from 'immer';\nimport pLimit from 'p-limit';\nimport * as React from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { usePrevious } from 'react-use';\n\nimport { getBehaviorGroupByNotificationAction } from '../../../services/Notifications/GetBehaviorGroupByNotificationId';\nimport { linkBehaviorGroupAction } from '../../../services/Notifications/LinkBehaviorGroup';\nimport { toBehaviorGroup } from '../../../types/adapters/BehaviorGroupAdapter';\nimport { BehaviorGroup, Notification, NotificationBehaviorGroup, UUID } from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nexport type BehaviorGroupNotificationRow = NotificationBehaviorGroup & {\n    readonly loadingActionStatus: 'loading' | 'done' | 'error';\n    readonly behaviors: ReadonlyArray<BehaviorGroup>;\n} & (\n    {\n        readonly isEditMode: false;\n    } |\n    {\n        readonly isEditMode: true;\n        readonly oldBehaviors: ReadonlyArray<BehaviorGroup>;\n    }\n);\n\nconst getNotification = <T extends ReadonlyArray<BehaviorGroupNotificationRow>>(\n    rows: T,\n    notificationId: UUID): T[number] => {\n    const notification = rows.find(findById(notificationId));\n    if (!notification) {\n        throw new Error('Notification not found in rows');\n    }\n\n    return notification;\n};\n\nexport const useBehaviorGroupNotificationRows = (notifications: Array<Notification>) => {\n    const [ notificationRows, setNotificationRows ] = React.useState<Array<BehaviorGroupNotificationRow>>([]);\n    const prevNotificationInput = usePrevious(notifications);\n    const { query } = React.useContext(ClientContext);\n    const [ limit ] = React.useState<pLimit.Limit>(() => pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS));\n\n    const removeBehaviorGroup = React.useCallback((notificationId: UUID, behaviorGroupId: UUID) => {\n        setNotificationRows(produce(draft => {\n            const notification = getNotification(draft, notificationId);\n            const index = notification.behaviors.findIndex(findById(behaviorGroupId));\n            if (index === -1) {\n                throw new Error('Behavior group not found in rows');\n            }\n\n            notification.behaviors.splice(index, 1);\n        }));\n    }, [ setNotificationRows ]);\n\n    const updateBehaviorGroups = React.useCallback((behaviorGroups: ReadonlyArray<BehaviorGroup>) => {\n        setNotificationRows(produce(draft => {\n            for (const content of draft) {\n                content.behaviors = castDraft(content.behaviors.map(ob => behaviorGroups.find(nb => nb.id === ob.id) || ob));\n            }\n        }));\n    }, [ setNotificationRows ]);\n\n    const updateBehaviorGroupLink = React.useCallback((notificationId: UUID, behaviorGroup: BehaviorGroup, linkBehavior: boolean) => {\n        if (linkBehavior) {\n            setNotificationRows(produce(draft => {\n                const notification = getNotification(draft, notificationId);\n                notification.behaviors.push({\n                    ...castDraft(behaviorGroup)\n                });\n            }));\n        } else {\n            removeBehaviorGroup(notificationId, behaviorGroup.id);\n        }\n    }, [ removeBehaviorGroup, setNotificationRows ]);\n\n    const setEditMode = React.useCallback(async (notificationId: UUID, command: 'edit' | 'finish' | 'cancel') => {\n\n        if (command === 'finish') {\n            const notification = getNotification(notificationRows, notificationId);\n            if (notification.isEditMode) {\n                setNotificationRows(produce(draft => {\n                    const draftNotification = getNotification(draft, notificationId);\n                    draftNotification.loadingActionStatus = 'loading';\n                }));\n\n                const response = await query(linkBehaviorGroupAction(notificationId, notification.behaviors.map(b => b.id)));\n                if (response.payload?.status === 200) {\n                    setNotificationRows(produce(draft => {\n                        const draftNotification = getNotification(draft, notificationId);\n                        draftNotification.isEditMode = false;\n                        draftNotification.loadingActionStatus = 'done';\n                    }));\n                } else {\n                    addDangerNotification(\n                        'Saving behavior',\n                        <>\n                            There was an error saving the behavior\n                             of <b>{notification.applicationDisplayName} - {notification.eventTypeDisplayName}</b>.\n                        </>\n                    );\n                    setNotificationRows(produce(draft => {\n                        const draftNotification = getNotification(draft, notificationId);\n                        draftNotification.isEditMode = true;\n                        draftNotification.loadingActionStatus = 'done';\n                    }));\n                }\n            }\n        } else {\n            setNotificationRows(produce(draft => {\n                const notification = getNotification(draft, notificationId);\n\n                if (notification.isEditMode && command === 'cancel') {\n                    notification.behaviors = notification.oldBehaviors;\n                }\n\n                notification.isEditMode = command === 'edit';\n                if (notification.isEditMode) {\n                    notification.oldBehaviors = notification.behaviors;\n                }\n            }));\n        }\n    }, [ setNotificationRows, notificationRows, query ]);\n\n    const startEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'edit');\n    }, [ setEditMode ]);\n\n    const finishEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'finish');\n    }, [ setEditMode ]);\n\n    const cancelEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'cancel');\n    }, [ setEditMode ]);\n\n    React.useEffect(() => {\n        if (notifications !== prevNotificationInput) {\n            setNotificationRows(_prev => notifications.map(notification => ({\n                ...notification,\n                loadingActionStatus: 'loading',\n                behaviors: [],\n                isEditMode: false\n            })));\n\n            if (notifications) {\n                limit.clearQueue();\n\n                notifications.map(notification => notification.id).forEach(notificationId => {\n                    limit(() => query(getBehaviorGroupByNotificationAction(notificationId))).then(response => {\n                        setNotificationRows(produce(draft => {\n                            const draftNotification = getNotification(draft, notificationId);\n                            if (response.payload?.status === 200) {\n                                draftNotification.loadingActionStatus = 'done';\n                                draftNotification.behaviors = response.payload.value.map(toBehaviorGroup).map(bg => ({\n                                    ...bg,\n                                    isLoading: false,\n                                    actions: castDraft(bg.actions)\n                                }));\n                            } else {\n                                draftNotification.loadingActionStatus = 'error';\n                                draftNotification.behaviors = [];\n                            }\n                        }));\n                    });\n                });\n            }\n        }\n\n    }, [ notifications, limit, query, prevNotificationInput, setNotificationRows ]);\n\n    return {\n        rows: notificationRows,\n        updateBehaviorGroupLink,\n        updateBehaviorGroups,\n        startEditMode,\n        finishEditMode,\n        cancelEditMode\n    };\n};\n","import { global_spacer_xl } from '@patternfly/react-tokens';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport { ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport { NotificationsBehaviorGroupTable } from '../../../components/Notifications/NotificationsBehaviorGroupTable';\nimport { NotificationsToolbar } from '../../../components/Notifications/Toolbar';\nimport { useListNotifications } from '../../../services/useListNotifications';\nimport { BehaviorGroup, Facet, NotificationBehaviorGroup, UUID } from '../../../types/Notification';\nimport { BehaviorGroupsSection } from './BehaviorGroupsSection';\nimport { useBehaviorGroupContent } from './useBehaviorGroupContent';\nimport { useBehaviorGroupNotificationRows } from './useBehaviorGroupNotificationRows';\nimport { useNotificationFilter } from './useNotificationFilter';\nimport { useNotificationPage } from './useNotificationPage';\n\ninterface BundlePageBehaviorGroupContentProps {\n    applications: Array<Facet>;\n    bundle: Facet;\n}\n\nconst behaviorGroupSectionClassName = style({\n    marginBottom: global_spacer_xl.var\n});\n\nconst emptyArray = [];\n\nexport const BundlePageBehaviorGroupContent: React.FunctionComponent<BundlePageBehaviorGroupContentProps> = props => {\n\n    const notificationsFilter = useNotificationFilter(props.applications.map(a => a.displayName.toString()));\n    const behaviorGroupContent = useBehaviorGroupContent(props.bundle.id);\n\n    const { rbac } = useAppContext();\n\n    const onExport = React.useCallback((type: ExporterType) => {\n        console.log('Export to', type);\n    }, []);\n\n    const notificationPage = useNotificationPage(notificationsFilter.debouncedFilters, props.bundle, props.applications, 10);\n    const useNotifications = useListNotifications(notificationPage.page);\n    const {\n        rows: notificationRows,\n        updateBehaviorGroupLink,\n        startEditMode,\n        finishEditMode,\n        cancelEditMode,\n        updateBehaviorGroups\n    } = useBehaviorGroupNotificationRows(\n        useNotifications.payload?.type === 'eventTypesArray' ? useNotifications.payload.value : emptyArray\n    );\n\n    const behaviorGroups = !behaviorGroupContent.isLoading && !behaviorGroupContent.hasError ? behaviorGroupContent.content : undefined;\n\n    React.useEffect(() => {\n        if (behaviorGroups) {\n            updateBehaviorGroups(behaviorGroups);\n        }\n    }, [ behaviorGroups, updateBehaviorGroups ]);\n\n    const onBehaviorGroupLinkUpdated = React.useCallback((\n        notification: NotificationBehaviorGroup,\n        behaviorGroup: BehaviorGroup,\n        isLinked: boolean) => {\n        if (behaviorGroup) {\n            updateBehaviorGroupLink(notification.id, behaviorGroup, isLinked);\n        }\n    }, [ updateBehaviorGroupLink ]);\n\n    const onStartEditing = React.useCallback((notificationId: UUID) => {\n        startEditMode(notificationId);\n    }, [ startEditMode ]);\n\n    const onFinishEditing = React.useCallback((notificationId: UUID) => {\n        finishEditMode(notificationId);\n    }, [ finishEditMode ]);\n\n    const onCancelEditing = React.useCallback((notificationId: UUID) => {\n        cancelEditMode(notificationId);\n    }, [ cancelEditMode ]);\n\n    return (\n        <Section>\n            <div className={ behaviorGroupSectionClassName }>\n                <BehaviorGroupsSection\n                    bundleId={ props.bundle.id }\n                    behaviorGroupContent={ behaviorGroupContent }\n                />\n            </div>\n            <NotificationsToolbar\n                filters={ notificationsFilter.filters }\n                setFilters={ notificationsFilter.setFilters }\n                clearFilter={ notificationsFilter.clearFilter }\n                appFilterOptions={ props.applications }\n                onExport={ onExport }\n            >\n                <NotificationsBehaviorGroupTable\n                    notifications={ notificationRows }\n                    behaviorGroupContent={ behaviorGroupContent }\n                    onBehaviorGroupLinkUpdated={ onBehaviorGroupLinkUpdated }\n                    onStartEditing={ rbac.canWriteNotifications ? onStartEditing : undefined }\n                    onFinishEditing={ rbac.canWriteNotifications ? onFinishEditing : undefined }\n                    onCancelEditing={ rbac.canWriteNotifications ? onCancelEditing : undefined }\n                />\n            </NotificationsToolbar>\n        </Section>\n    );\n};\n","import { useFilters, useUrlStateMultipleOptions, useUrlStateString } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport { useMemo } from 'react';\n\nimport { NotificationFilterColumn } from '../../../components/Notifications/Filter';\n\nconst DEBOUNCE_MS = 250;\n\nexport const useNotificationFilter = (initialAppOptions: Array<string>, debounce = DEBOUNCE_MS) => {\n    const useStateFactory = useMemo(() => {\n        const useUrlStateName = (defaultValue?: string) => useUrlStateString('name', defaultValue);\n        const useUrlStateApplication = (defaultValue?: Array<string>) => useUrlStateMultipleOptions(\n            'app',\n            initialAppOptions,\n            defaultValue\n        );\n        const useUrlStateAction = (defaultValue?: string) => useUrlStateString('action', defaultValue);\n\n        const useStateFactoryInternal = (column: NotificationFilterColumn) => {\n            switch (column) {\n                case NotificationFilterColumn.NAME:\n                    return useUrlStateName;\n                case NotificationFilterColumn.ACTION:\n                    return useUrlStateAction;\n                case NotificationFilterColumn.APPLICATION:\n                    return useUrlStateApplication;\n                default:\n                    assertNever(column);\n            }\n        };\n\n        return useStateFactoryInternal;\n        // This is an init param, so it doesn't need to recompute on change.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return useFilters(NotificationFilterColumn, debounce, useStateFactory);\n};\n","import * as React from 'react';\n\nimport { useGetBehaviorGroups } from '../../../services/Notifications/GetBehaviorGroups';\nimport { BehaviorGroup, UUID } from '../../../types/Notification';\n\nexport type BehaviorGroupContent = {\n    isLoading: true;\n    reload: () => void;\n} | {\n    isLoading: false;\n    hasError: true;\n    error: string;\n    reload: () => void;\n} | {\n    isLoading: false;\n    hasError: false;\n    content: ReadonlyArray<BehaviorGroup>;\n    reload: () => void;\n}\n\nexport const useBehaviorGroupContent = (bundleId: UUID) => {\n    const behaviorGroups = useGetBehaviorGroups(bundleId);\n\n    return React.useMemo<BehaviorGroupContent>(() => {\n        const payload = behaviorGroups.payload;\n        const error = behaviorGroups.errorObject;\n        const loading = behaviorGroups.loading;\n        const reload = behaviorGroups.query;\n\n        if (loading) {\n            return {\n                isLoading: true,\n                reload\n            };\n        }\n\n        if (payload?.status === 200) {\n            return {\n                isLoading: false,\n                hasError: false,\n                content: payload.value,\n                reload\n            };\n        }\n\n        return {\n            isLoading: false,\n            hasError: true,\n            error: error.toString(),\n            reload\n        };\n\n    }, [ behaviorGroups.payload, behaviorGroups.loading, behaviorGroups.errorObject, behaviorGroups.query ]);\n};\n","import { arrayValue, Filter, Operator, Page, Sort } from '@redhat-cloud-services/insights-common-typescript';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NotificationFilterColumn, NotificationFilters } from '../../../components/Notifications/Filter';\nimport { Facet } from '../../../types/Notification';\n\nexport interface UseNotificationPageReturn {\n    page: Page;\n    changePage: (page: number) => void;\n    changeItemsPerPage: (perPage: number) =>  void;\n}\n\nexport const useNotificationPage = (\n    filters: NotificationFilters,\n    bundle: Facet,\n    appFilterOptions: Array<Facet>,\n    defaultPerPage: number,\n    sort?: Sort): UseNotificationPageReturn => {\n    const [ currentPage, setCurrentPage ] = useState<number>(1);\n    const [ itemsPerPage, setItemsPerPage ] = useState<number>(defaultPerPage);\n\n    useEffect(() => setCurrentPage(1), [ setCurrentPage, filters ]);\n\n    const page = useMemo(() => {\n        const filter = new Filter();\n\n        const appFilter = filters[NotificationFilterColumn.APPLICATION];\n\n        if (appFilter) {\n            const appIds: Array<string> = [];\n            for (const appName of arrayValue(appFilter)) {\n                const filterOption = appFilterOptions.find(a => a.displayName === appName);\n                if (filterOption) {\n                    appIds.push(filterOption.id);\n                }\n            }\n\n            filter.and('applicationId', Operator.EQUAL, appIds);\n        }\n\n        filter.and('bundleId', Operator.EQUAL, bundle.id);\n\n        return Page.of(currentPage, itemsPerPage, filter, sort);\n    }, [ currentPage, itemsPerPage, sort, filters, appFilterOptions, bundle ]);\n\n    const changePage = useCallback((page: number) => setCurrentPage(page), [ setCurrentPage ]);\n    const changeItemsPerPage = useCallback((perPage: number) => {\n        setCurrentPage(1);\n        setItemsPerPage(perPage);\n    }, [ setCurrentPage ]);\n\n    return {\n        page,\n        changePage,\n        changeItemsPerPage\n    };\n};\n","import { Split, SplitItem } from '@patternfly/react-core';\nimport { Main, PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components';\nimport {\n    getInsights,\n    InsightsEnvDetector,\n    RenderIfFalse\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { default as React } from 'react';\nimport { Link } from 'react-router-dom';\nimport { style } from 'typestyle';\n\nimport { ButtonLink } from '../../../components/ButtonLink';\nimport { Messages } from '../../../properties/Messages';\nimport { linkTo } from '../../../Routes';\nimport { stagingAndProdStable } from '../../../types/Environments';\nimport { Facet } from '../../../types/Notification';\nimport { BundlePageBehaviorGroupContent } from './BundlePageBehaviorGroupContent';\n\ninterface NotificationListBundlePageProps {\n    bundle: Facet;\n    applications: Array<Facet>;\n}\n\nconst displayInlineClassName = style({\n    display: 'inline'\n});\n\nexport const NotificationListBundlePage: React.FunctionComponent<NotificationListBundlePageProps> = (props) => {\n\n    const pageHeaderTitleProps = {\n        className: displayInlineClassName,\n        title: Messages.pages.notifications.list.title\n    };\n\n    const eventLogPageUrl = React.useMemo(() => linkTo.eventLog(props.bundle.name), [ props.bundle.name ]);\n\n    return (\n        <>\n            <PageHeader>\n                <Split>\n                    <SplitItem isFilled><PageHeaderTitle { ...pageHeaderTitleProps } /></SplitItem>\n                    <SplitItem>\n                        <InsightsEnvDetector insights={ getInsights() } onEnvironment={ stagingAndProdStable }>\n                            <RenderIfFalse>\n                                <Link component={ ButtonLink } to={ eventLogPageUrl } >{ Messages.pages.notifications.list.viewHistory }</Link>\n                            </RenderIfFalse>\n                        </InsightsEnvDetector>\n                    </SplitItem>\n                </Split>\n            </PageHeader>\n            <Main>\n                <BundlePageBehaviorGroupContent applications={ props.applications } bundle={ props.bundle } />\n            </Main>\n        </>\n    );\n};\n","import { AppSkeleton } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { defaultBundleName, RedirectToDefaultBundle } from '../../../components/RedirectToDefaultBundle';\nimport { useGetApplicationsLazy } from '../../../services/Notifications/GetApplications';\nimport { useGetBundles } from '../../../services/Notifications/GetBundles';\nimport { Facet } from '../../../types/Notification';\nimport { NotificationListBundlePage } from './BundlePage';\n\ninterface NotificationListPageParams {\n    bundleName: string;\n}\n\nenum BundleStatus {\n    LOADING,\n    NOT_FOUND,\n    FAILED_TO_LOAD\n}\n\nconst isBundleStatus = (bundle: Facet | BundleStatus): bundle is BundleStatus => typeof bundle === 'number';\n\nexport const NotificationsListPage: React.FunctionComponent = () => {\n\n    const params = useParams<NotificationListPageParams>();\n\n    const getBundles = useGetBundles();\n    const getApplications = useGetApplicationsLazy();\n\n    const bundle: Facet | BundleStatus = useMemo(() => {\n        if (getBundles.payload?.status === 200) {\n            return getBundles.payload.value.find(b => b.name === params.bundleName) ?? BundleStatus.NOT_FOUND;\n        } else if (getBundles.payload) {\n            return BundleStatus.FAILED_TO_LOAD;\n        }\n\n        return BundleStatus.LOADING;\n    }, [ getBundles.payload, params.bundleName ]);\n\n    React.useEffect(() => {\n        const query = getApplications.query;\n        if (!isBundleStatus(bundle)) {\n            query(bundle.name);\n        }\n    }, [ bundle, getApplications.query ]);\n\n    const applications: Array<Facet> | null | undefined = useMemo(\n        () => {\n            if (getApplications.payload) {\n                return getApplications.payload.status === 200 ? getApplications.payload.value : null;\n            }\n\n            return undefined;\n        },\n        [ getApplications.payload ]\n    );\n\n    if (bundle === BundleStatus.NOT_FOUND) {\n        if (params.bundleName === defaultBundleName) {\n            throw new Error('Default bundle information not found');\n        }\n\n        return <RedirectToDefaultBundle />;\n    }\n\n    if (bundle === BundleStatus.FAILED_TO_LOAD) {\n        throw new Error('Unable to load bundle information');\n    }\n\n    if (applications === null) {\n        throw new Error('Unable to load application facets');\n    }\n\n    if (bundle === BundleStatus.LOADING || !applications) {\n        return (\n            <AppSkeleton />\n        );\n    }\n\n    return (\n        <NotificationListBundlePage\n            bundle={ bundle }\n            applications={ applications }\n        />\n    );\n};\n","import { getInsights } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport { matchPath, Route, RouteProps, Switch, useHistory } from 'react-router';\n\nimport { RedirectToDefaultBundle } from './components/RedirectToDefaultBundle';\nimport { ErrorPage } from './pages/Error/Page';\nimport { ConnectedIntegrationsListPage } from './pages/Integrations/List/Page';\nimport { EventLogPage } from './pages/Notifications/EventLog/EventLogPage';\nimport { NotificationsListPage } from './pages/Notifications/List/Page';\nimport { getBaseName } from './utils/Basename';\n\ninterface Path {\n    path: string;\n    component: React.ComponentType;\n}\n\nexport const linkTo = {\n    integrations: () => '/integrations',\n    notifications: (bundle: string) => `/notifications/${bundle}`,\n    eventLog: (bundle?: string) => `/notifications/eventlog${bundle ? `?bundle=${bundle}` : ''}`\n};\n\nconst EmptyPage: React.FunctionComponent = () => null;\n\nconst pathRoutes: Path[] = [\n    {\n        path: '/',\n        component: EmptyPage\n    },\n    {\n        path: linkTo.integrations(),\n        component: ConnectedIntegrationsListPage\n    },\n    {\n        path: linkTo.eventLog(),\n        component: EventLogPage\n    },\n    {\n        path: linkTo.notifications(':bundleName'),\n        component: NotificationsListPage\n    }\n];\n\ntype InsightsRouteProps = RouteProps;\n\nconst InsightsRoute: React.FunctionComponent<InsightsRouteProps> = (props: InsightsRouteProps) => {\n    return (\n        <ErrorPage>\n            <Route { ...props } />\n        </ErrorPage>\n    );\n};\n\nexport const Routes: React.FunctionComponent = () => {\n    const insights = getInsights();\n    const history = useHistory();\n\n    useEffect(() => {\n        const on = insights.chrome.on;\n        if (on) {\n            return on('APP_NAVIGATION', event => {\n                const pathname = event.domEvent.href;\n                const base = getBaseName(pathname);\n                const relative = pathname.substr(base.length);\n\n                for (const route of pathRoutes) {\n                    if (matchPath(relative, {\n                        path: route.path,\n                        exact: true\n                    })) {\n                        if (history.location.pathname !== relative) {\n                            history.replace(relative);\n                        }\n\n                        break;\n                    }\n                }\n\n            });\n        }\n    }, [ insights.chrome.on, history ]);\n\n    return (\n        <Switch>\n            { pathRoutes.map(pathRoute => (\n                <InsightsRoute\n                    key={ pathRoute.path }\n                    component={ pathRoute.component }\n                    path={ pathRoute.path }\n                    exact={ true }\n                />\n            ))}\n            <RedirectToDefaultBundle />\n        </Switch>\n    );\n};\n","import {\n    useFilters,\n    useUrlStateMultipleOptions,\n    useUrlStateString\n} from '@redhat-cloud-services/insights-common-typescript';\nimport assertNever from 'assert-never';\nimport { useMemo } from 'react';\n\nimport { EventLogFilterColumn } from '../../../components/Notifications/EventLog/EventLogFilter';\n\nconst DEBOUNCE_MS = 250;\n\nexport const useEventLogFilter = (debounce = DEBOUNCE_MS) => {\n    const useStateFactory = useMemo(() => {\n\n        const useApplication = () => useUrlStateMultipleOptions('application');\n        const useBundle = () => useUrlStateMultipleOptions('bundle');\n        const useEvent = () => useUrlStateString('event');\n\n        return (column: EventLogFilterColumn) => {\n            switch (column) {\n                case EventLogFilterColumn.APPLICATION:\n                    return useApplication;\n                case EventLogFilterColumn.BUNDLE:\n                    return useBundle;\n                case EventLogFilterColumn.EVENT:\n                    return useEvent;\n                default:\n                    assertNever(column);\n            }\n        };\n    }, []);\n\n    return useFilters(EventLogFilterColumn, debounce, useStateFactory);\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle?: Bundle | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    default_behavior?: boolean | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const CamelProperties = zodSchemaCamelProperties();\n  export type CamelProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    extras?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    secret_token?: string | undefined | null;\n    sub_type?: string | undefined | null;\n    url: string;\n  };\n\n  export const CurrentStatus = zodSchemaCurrentStatus();\n  export type CurrentStatus = {\n    end_time?: string | undefined | null;\n    start_time?: string | undefined | null;\n    status: Status;\n  };\n\n  export const EmailSubscriptionProperties =\n    zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = {\n    group_id?: UUID | undefined | null;\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties | CamelProperties)\n      | undefined\n      | null;\n    sub_type?: string | undefined | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType =\n    | 'webhook'\n    | 'email_subscription'\n    | 'default'\n    | 'camel';\n\n  export const EventLogEntry = zodSchemaEventLogEntry();\n  export type EventLogEntry = {\n    actions: Array<EventLogEntryAction>;\n    application: string;\n    bundle: string;\n    created: string;\n    event_type: string;\n    id: UUID;\n    payload?: string | undefined | null;\n  };\n\n  export const EventLogEntryAction = zodSchemaEventLogEntryAction();\n  export type EventLogEntryAction = {\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpoint_id?: UUID | undefined | null;\n    endpoint_sub_type?: string | undefined | null;\n    endpoint_type: EndpointType;\n    id: UUID;\n    invocation_result: boolean;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const PageEventLogEntry = zodSchemaPageEventLogEntry();\n  export type PageEventLogEntry = {\n    data: Array<EventLogEntry>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const RenderEmailTemplateRequest =\n    zodSchemaRenderEmailTemplateRequest();\n  export type RenderEmailTemplateRequest = {\n    body_template: string;\n    payload: string;\n    subject_template: string;\n  };\n\n  export const RequestDefaultBehaviorGroupPropertyList =\n    zodSchemaRequestDefaultBehaviorGroupPropertyList();\n  export type RequestDefaultBehaviorGroupPropertyList = {\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const RequestEmailSubscriptionProperties =\n    zodSchemaRequestEmailSubscriptionProperties();\n  export type RequestEmailSubscriptionProperties = {\n    only_admins: boolean;\n  };\n\n  export const Status = zodSchemaStatus();\n  export type Status = 'MAINTENANCE' | 'UP';\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle: zodSchemaBundle().optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          default_behavior: z.boolean().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCamelProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          extras: z.record(z.string()).optional().nullable(),\n          secret_token: z.string().optional().nullable(),\n          sub_type: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCurrentStatus() {\n      return z\n      .object({\n          end_time: z.string().optional().nullable(),\n          start_time: z.string().optional().nullable(),\n          status: zodSchemaStatus()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z\n      .object({\n          group_id: zodSchemaUUID().optional().nullable(),\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties(),\n              zodSchemaCamelProperties()\n          ])\n          .optional()\n          .nullable(),\n          sub_type: z.string().optional().nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default', 'camel' ]);\n  }\n\n  function zodSchemaEventLogEntry() {\n      return z\n      .object({\n          actions: z.array(zodSchemaEventLogEntryAction()),\n          application: z.string(),\n          bundle: z.string(),\n          created: z.string(),\n          event_type: z.string(),\n          id: zodSchemaUUID(),\n          payload: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventLogEntryAction() {\n      return z\n      .object({\n          details: z.record(z.unknown()).optional().nullable(),\n          endpoint_id: zodSchemaUUID().optional().nullable(),\n          endpoint_sub_type: z.string().optional().nullable(),\n          endpoint_type: zodSchemaEndpointType(),\n          id: zodSchemaUUID(),\n          invocation_result: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageEventLogEntry() {\n      return z\n      .object({\n          data: z.array(zodSchemaEventLogEntry()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRenderEmailTemplateRequest() {\n      return z\n      .object({\n          body_template: z.string(),\n          payload: z.string(),\n          subject_template: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestDefaultBehaviorGroupPropertyList() {\n      return z\n      .object({\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestEmailSubscriptionProperties() {\n      return z\n      .object({\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatus() {\n      return z.enum([ 'MAINTENANCE', 'UP' ]);\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n}\n\nexport namespace Operations {\n  // GET /api/notifications/v1.0/status\n  export namespace StatusServiceGetCurrentStatus {\n    export type Payload =\n      | ValidatedResponse<'CurrentStatus', 200, Schemas.CurrentStatus>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (): ActionCreator => {\n        const path = '/api/notifications/v1.0/status';\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.CurrentStatus, 'CurrentStatus', 200)\n            ]\n        })\n        .build();\n    };\n  }\n}\n","import { fromUtc } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { Schemas } from '../../generated/OpenapiNotifications';\nimport { Server, ServerStatus } from '../Server';\n\nexport const toServer = (currentStatus: Schemas.CurrentStatus): Server => {\n    if (currentStatus.status === Schemas.Status.Enum.MAINTENANCE) {\n        return {\n            status: ServerStatus.MAINTENANCE,\n            from: fromUtc(currentStatus.start_time ? new Date(currentStatus.start_time) : new Date()),\n            to: fromUtc(currentStatus.end_time ? new Date(currentStatus.end_time) : new Date())\n        };\n    }\n\n    return {\n        status: ServerStatus.RUNNING\n    };\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiPrivate';\nimport { toServer } from '../types/adapters/ServerAdapter';\n\nconst adapter = validationResponseTransformer((payload: Operations.StatusServiceGetCurrentStatus.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'ServerStatus',\n            200,\n            toServer(payload.value),\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useGetServerStatus = () => {\n    return useTransformQueryResponse(\n        useQuery(Operations.StatusServiceGetCurrentStatus.actionCreator()),\n        adapter\n    );\n};\n","import './App.scss';\n\nimport { Maintenance, NotAuthorized } from '@redhat-cloud-services/frontend-components';\nimport { NotificationsPortal } from '@redhat-cloud-services/frontend-components-notifications';\nimport { AppSkeleton, toUtc } from '@redhat-cloud-services/insights-common-typescript';\nimport format from 'date-fns/format';\nimport * as React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useLocation } from 'react-router';\n\nimport Config from '../config/Config';\nimport messages from '../properties/DefinedMessages';\nimport { Routes } from '../Routes';\nimport { ServerStatus } from '../types/Server';\nimport { getSubApp } from '../utils/Basename';\nimport { AppContext } from './AppContext';\nimport { useApp } from './useApp';\n\nconst utcFormat = 'HH:mm';\nconst regularFormat = 'hh:mma';\nconst timezoneFormat = 'O';\n\nconst App: React.ComponentType = () => {\n    const intl = useIntl();\n    const { rbac, server, isOrgAdmin } = useApp();\n    const location = useLocation();\n\n    const serviceName = React.useMemo(() => {\n        switch (getSubApp(location.pathname)) {\n            case Config.integrations.subAppId:\n                return intl.formatMessage(messages.integrations);\n            case Config.notifications.subAppId:\n                return intl.formatMessage(messages.notifications);\n            default:\n                return '';\n        }\n    }, [ intl, location.pathname ]);\n\n    const hasReadPermissions = React.useMemo(() => {\n        const appId = getSubApp(location.pathname);\n        switch (appId) {\n            case Config.integrations.subAppId:\n                return rbac?.canReadIntegrationsEndpoints;\n            case Config.notifications.subAppId:\n                return rbac?.canReadNotifications;\n        }\n\n        return false;\n    }, [ rbac, location.pathname ]);\n\n    if (!rbac || !server) {\n        return (\n            <AppSkeleton />\n        );\n    }\n\n    if (server.status === ServerStatus.MAINTENANCE) {\n\n        const utcStartTime = format(toUtc(server.from), utcFormat);\n        const utcEndTime = format(toUtc(server.to), utcFormat);\n        const startTime = format(server.from, regularFormat);\n        const endTime = format(server.to, regularFormat);\n        const timezone = format(server.to, timezoneFormat);\n\n        return <Maintenance\n            utcStartTime={ utcStartTime }\n            utcEndTime={ utcEndTime }\n            startTime={ startTime }\n            endTime={ endTime }\n            timeZone={ timezone }\n        />;\n    }\n\n    return (\n        <AppContext.Provider value={ {\n            rbac,\n            server,\n            isOrgAdmin: !!isOrgAdmin\n        } }>\n            { hasReadPermissions ? (\n                <>\n                    <NotificationsPortal />\n                    <Routes />\n                </>\n            ) : (\n                <NotAuthorized serviceName={ serviceName } />\n            ) }\n        </AppContext.Provider>\n    );\n};\n\nexport default App;\n","import { fetchRBAC, Rbac, waitForInsights } from '@redhat-cloud-services/insights-common-typescript';\nimport { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport Config from '../config/Config';\nimport { useGetServerStatus } from '../services/GetServerStatus';\nimport { Server } from '../types/Server';\nimport { AppContext } from './AppContext';\n\nexport const useApp = (): Partial<AppContext> => {\n\n    const history = useHistory();\n    const serverStatus = useGetServerStatus();\n    const [ rbac, setRbac ] = useState<Rbac>();\n    const [ server, setServer ] = useState<Server>();\n    const [ isOrgAdmin, setOrgAdmin ] = useState<boolean>(false);\n\n    useEffect(() => {\n        waitForInsights().then((insights) => {\n            insights.chrome.init();\n            const appId = insights.chrome.getApp();\n            switch (appId) {\n                case Config.notifications.subAppId:\n                    document.title = Config.notifications.title;\n                    break;\n                case Config.integrations.subAppId:\n                    document.title = Config.integrations.title;\n                    break;\n            }\n\n            insights.chrome.identifyApp(appId);\n        });\n    }, [ history ]);\n\n    useEffect(() => {\n        if (serverStatus.payload?.type === 'ServerStatus') {\n            setServer(serverStatus.payload.value);\n        }\n    }, [ serverStatus.payload ]);\n\n    useEffect(() => {\n        waitForInsights().then(insights => {\n            insights.chrome.auth.getUser().then(user => {\n                setOrgAdmin(user.identity.user.is_org_admin);\n                fetchRBAC(`${Config.notifications.subAppId},${Config.integrations.subAppId}`).then(setRbac);\n            });\n        });\n    }, []);\n\n    return {\n        rbac: rbac ? {\n            canWriteNotifications: rbac.hasPermission('notifications', 'notifications', 'write'),\n            canReadNotifications: rbac.hasPermission('notifications', 'notifications', 'read'),\n            canWriteIntegrationsEndpoints: rbac.hasPermission('integrations', 'endpoints', 'write'),\n            canReadIntegrationsEndpoints: rbac.hasPermission('integrations', 'endpoints', 'read')\n        } : undefined,\n        isOrgAdmin,\n        server\n    };\n};\n","import { getType } from 'typesafe-actions';\n\nimport { NotificationAppAction } from '../actions/NotificationAppAction';\nimport { SavedNotificationScopeActions } from '../actions/SavedNotificationScopeAction';\nimport { SavedNotificationScopeState, Status } from '../types/SavedNotificationScopeTypes';\n\nexport const INITIAL_STATE: SavedNotificationScopeState = null;\n\nexport const SavedNotificationScopeReducer = (\n    state: SavedNotificationScopeState = INITIAL_STATE,\n    action: NotificationAppAction): SavedNotificationScopeState => {\n    switch (action.type) {\n        case getType(SavedNotificationScopeActions.setIntegration):\n            return {\n                integration: action.payload,\n                status: Status.DONE\n            };\n        case getType(SavedNotificationScopeActions.start):\n            if (!state) {\n                return state;\n            }\n\n            return {\n                ...state,\n                status: Status.LOADING\n            };\n        case getType(SavedNotificationScopeActions.finish):\n            if (!state) {\n                return state;\n            }\n\n            return {\n                integration: { ...state.integration, isEnabled: action.payload },\n                status: Status.DONE\n            };\n        case getType(SavedNotificationScopeActions.unset):\n            return null;\n        default:\n            return state;\n    }\n};\n","import { initStore, restoreStore } from '@redhat-cloud-services/insights-common-typescript';\nimport { Middleware } from 'redux';\n\nimport { INITIAL_STATE as SNS_INITIAL_STATE, SavedNotificationScopeReducer } from './reducers/SavedNotificationScopeReducer';\nimport { NotificationAppState } from './types/NotificationAppState';\n\nexport const createStore = (...middleware: Middleware[]) => {\n    return initStore(\n        {\n            savedNotificationScope: SNS_INITIAL_STATE\n        } as NotificationAppState,\n        {\n            savedNotificationScope: SavedNotificationScopeReducer\n        },\n        ...middleware);\n};\n\nexport const resetStore = () => restoreStore();\n","import { ActionType, createAction } from 'typesafe-actions';\n\nimport { IntegrationRef } from '../../types/Notification';\n\nexport enum SavedNotificationScopeKeys {\n    SET_INTEGRATION = 'SET_INTEGRATION',\n    START = 'START',\n    FINISH = 'FINISH',\n    UNSET = 'UNSET'\n}\n\nexport const SavedNotificationScopeActions = {\n    setIntegration: createAction(SavedNotificationScopeKeys.SET_INTEGRATION)<IntegrationRef>(),\n    start: createAction(SavedNotificationScopeKeys.START)(),\n    finish: createAction(SavedNotificationScopeKeys.FINISH)<boolean>(),\n    unset: createAction(SavedNotificationScopeKeys.UNSET)()\n};\n\nexport type SavedNotificationScopeAction = ActionType<typeof SavedNotificationScopeActions>;\n","import { IntegrationRef } from '../../types/Notification';\n\nexport enum Status {\n    LOADING,\n    DONE\n}\n\nexport type SavedNotificationScopeState = {\n    integration: IntegrationRef;\n    status: Status;\n} | null;\n","// This is a custom getBaseName that doesn't add the appId\n// The reason is that this 'app' is in 2 menus (integrations and notifications), so is easier to just add that into our\n// paths for easier navigation.\nexport const getBaseName = (pathname: string) => {\n    let release = '/';\n    const pathName = pathname.split('/');\n\n    pathName.shift();\n\n    if (pathName[0] === 'beta') {\n        pathName.shift();\n        release = `/beta/`;\n    }\n\n    return `${release}${pathName[0]}`;\n};\n\nexport const getSubApp = (pathname: string) => {\n    const pathName = pathname.split('/');\n    pathName.shift();\n    if (pathName[0] === 'beta') {\n        return pathName[1];\n    }\n\n    return pathName[0];\n};\n"],"sourceRoot":""}