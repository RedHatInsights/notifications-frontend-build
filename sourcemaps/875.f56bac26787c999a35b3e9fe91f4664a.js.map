{"version":3,"file":"js/875.f5d9a4c048ec0431cd36.js","mappings":"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","sources":["webpack:///./src/services/Notifications/GetBundles.ts","webpack:///./src/components/NotAuthorized.tsx","webpack:///./src/components/CheckReadPermissions.tsx","webpack:///./src/pages/Integrations/List/Page.tsx","webpack:///./src/pages/Integrations/SplunkSetup/Constants.ts","webpack:///./src/pages/Integrations/SplunkSetup/SplunkSetupFinished.tsx","webpack:///./src/services/useListNotifications.ts","webpack:///./src/services/Notifications/GetBehaviorGroupByNotificationId.ts","webpack:///./src/services/Notifications/LinkBehaviorGroup.ts","webpack:///./src/services/Notifications/SaveBehaviorGroup.ts","webpack:///./src/services/Notifications/UpdateBehaviorGroupActions.ts","webpack:///./src/pages/Integrations/SplunkSetup/useSplunkSetup.tsx","webpack:///./src/services/GetEventTypes.ts","webpack:///./src/pages/Integrations/SplunkSetup/SplunkSetupForm.tsx","webpack:///./src/pages/Integrations/SplunkSetup/SplunkSetupPage.tsx","webpack:///./src/components/ButtonLink.tsx","webpack:///./src/components/Notifications/EventLog/EventLogDateFilter.tsx","webpack:///./src/components/Notifications/NotificationStatus.tsx","webpack:///./src/components/Notifications/EventLog/ActionsHelpPopover.tsx","webpack:///./src/components/Notifications/EventLog/EventLogActionPopoverContent.tsx","webpack:///./src/components/Notifications/EventLog/EventLogTable.tsx","webpack:///./src/hooks/useNotifications.ts","webpack:///./src/components/Notifications/EventLog/EventLogFilter.ts","webpack:///./src/utils/Arrays.ts","webpack:///./src/components/Notifications/EventLog/EventLogTreeFilter.tsx","webpack:///./src/components/Notifications/EventLog/EventLogToolbar.tsx","webpack:///./src/components/Notifications/EventLog/usePrimaryToolbarFilterConfigWrapper.tsx","webpack:///./src/components/PageHeader.tsx","webpack:///./src/types/adapters/NotificationEventAdapter.ts","webpack:///./src/services/EventLog/GetNotificationEvents.ts","webpack:///./src/services/Integrations/GetEndpoint.ts","webpack:///./src/pages/Notifications/EventLog/useFilterBuilder.ts","webpack:///./src/pages/Notifications/EventLog/EventLogPage.tsx","webpack:///./src/pages/Notifications/EventLog/useEventLogFilter.ts","webpack:///./src/app/AppSkeleton.tsx","webpack:///./src/services/Notifications/GetApplications.ts","webpack:///./src/components/Notifications/TabComponent.tsx","webpack:///./src/types/SortDirection.ts","webpack:///./src/utils/Immutable.ts","webpack:///./src/components/Notifications/EmptyTableState.tsx","webpack:///./src/utils/Find.ts","webpack:///./src/components/Notifications/Table/BehaviorGroupCell.tsx","webpack:///./src/components/Notifications/NotificationsBehaviorGroupTable.tsx","webpack:///./src/components/Ouia.tsx","webpack:///./src/components/Notifications/Filter.ts","webpack:///./src/components/Notifications/Toolbar.tsx","webpack:///./src/pages/Notifications/hooks/useEventTypesPage.ts","webpack:///./src/pages/Notifications/List/useNotificationFilter.ts","webpack:///./src/pages/Notifications/hooks/useEventTypesFilterBuilder.ts","webpack:///./src/components/Icons/WebhookIcon.tsx","webpack:///./src/components/Notifications/ActionComponent.tsx","webpack:///./src/components/Notifications/Rbac/GroupNotFound.tsx","webpack:///./src/components/Notifications/Recipient.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupActionsSummary.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCard.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCardList.tsx","webpack:///./src/components/Notifications/BehaviorGroup/Wizard/BehaviorGroupWizardFooter.tsx","webpack:///./src/components/Notifications/BehaviorGroup/Wizard/BehaviorGroupWizard.tsx","webpack:///./src/components/Notifications/RecipientContext.ts","webpack:///./src/pages/Notifications/BehaviorGroupWizard/useSaveBehaviorGroup.tsx","webpack:///./src/components/Notifications/Form/RecipientOption.ts","webpack:///./src/components/Notifications/Form/useRecipientOptionMemo.tsx","webpack:///./src/components/Notifications/Form/useTypeaheadReducer.ts","webpack:///./src/components/Notifications/Form/IntegrationRecipientTypeahead.tsx","webpack:///./src/components/Notifications/Form/RecipientTypeahead.tsx","webpack:///./src/components/Notifications/EditableActionRow/RecipientForm.tsx","webpack:///./src/components/Notifications/Form/ActionOption.ts","webpack:///./src/components/Notifications/Form/ActionTypeahead.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupFormActionsTable.tsx","webpack:///./src/components/Notifications/BehaviorGroup/useBehaviorGroupActionHandlers.ts","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupForm.tsx","webpack:///./src/schemas/Integrations/Notifications.ts","webpack:///./src/pages/Notifications/BehaviorGroupWizard/Steps/ActionAndRecipientsStep.tsx","webpack:///./src/components/Notifications/BehaviorGroup/Wizard/SelectableEventTypeTable.tsx","webpack:///./src/pages/Notifications/BehaviorGroupWizard/Steps/AssociateEventTypesStep.tsx","webpack:///./src/pages/Notifications/BehaviorGroupWizard/Steps/BasicInformationStep.tsx","webpack:///./src/pages/Notifications/BehaviorGroupWizard/Steps/ReviewStep.tsx","webpack:///./src/pages/Notifications/BehaviorGroupWizard/BehaviorGroupWizardPage.tsx","webpack:///./src/services/Integrations/GetDefaultSystemEndpoint.ts","webpack:///./src/pages/Notifications/BehaviorGroupWizard/useSteps.ts","webpack:///./src/components/Notifications/useGetRecipients.ts","webpack:///./src/components/Notifications/useGetIntegrations.ts","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal.tsx","webpack:///./src/hooks/useOnDeleteWrapper.ts","webpack:///./src/services/Notifications/DeleteBehaviorGroup.ts","webpack:///./src/services/Notifications/GetAffectedNotificationsByBehaviorGroup.ts","webpack:///./src/pages/Notifications/Form/DeleteBehaviorGroupPage.tsx","webpack:///./src/pages/Notifications/List/BehaviorGroupsSection.tsx","webpack:///./src/services/Notifications/GetBehaviorGroups.ts","webpack:///./src/pages/Notifications/List/useBehaviorGroupNotificationRows.tsx","webpack:///./src/pages/Notifications/List/BundlePageBehaviorGroupContent.tsx","webpack:///./src/pages/Notifications/List/useBehaviorGroupContent.ts","webpack:///./src/pages/Notifications/List/BundlePage.tsx","webpack:///./src/pages/Notifications/List/Page.tsx","webpack:///./src/components/Notifications/NotificationsLog/NotificationsLogDateFilter.tsx","webpack:///./src/components/Notifications/NotificationsLog/NotificationsLogEmptyState.tsx","webpack:///./src/components/Notifications/NotificationsLog/NotificationsLogTable.tsx","webpack:///./src/components/Notifications/NotificationsLog/NotificationsLogToolbar.tsx","webpack:///./src/pages/Notifications/NotificationsLog/Page.tsx","webpack:///./src/pages/Notifications/Overview/CustomDataListItem.tsx","webpack:///./src/pages/Notifications/Overview/Page.tsx","webpack:///./src/Routes.tsx","webpack:///./src/app/App.tsx","webpack:///./src/services/Notifications/GetTimePreference.ts","webpack:///./src/services/Notifications/SaveTimePreference.ts"],"sourcesContent":["import { useQuery } from 'react-fetching-library';\n\nimport { Operations, Schemas } from '../../generated/OpenapiNotifications';\n\nconst getBundlesAction = (includeApplications: boolean) =>\n  Operations.NotificationResourceGetBundleFacets.actionCreator({\n    includeApplications,\n  });\n\nexport const useGetBundles = (\n  includeApplications?: boolean,\n  initFetch = true\n) => useQuery(getBundlesAction(!!includeApplications), initFetch);\n\nexport const useGetBundleByName = () => {\n  const { query } = useGetBundles(false, false); // includeApplications = false, initFetch = false\n  return async (bundleName: string) => {\n    const response = await query();\n    const payload =\n      response.payload as Operations.NotificationResourceGetApplicationsFacets.Payload;\n    if (response.errorObject) {\n      throw response.errorObject;\n    }\n\n    if (response.error || !payload) {\n      throw new Error(`Unable to retrieve bundles, status ${payload.status}`);\n    }\n\n    const value = payload.value as Schemas.Bundle[];\n    return value.find((bundle) => bundle.name === bundleName);\n  };\n};\n","import { Split, SplitItem, StackItem } from '@patternfly/react-core';\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\nimport PageHeaderTitle from '@redhat-cloud-services/frontend-components/PageHeader/PageHeaderTitle';\nimport NotAuthorized from '@redhat-cloud-services/frontend-components/NotAuthorized';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport { localUrl } from '@redhat-cloud-services/insights-common-typescript';\nimport { default as React, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useLocation, useParams } from 'react-router-dom';\n\nimport Config from '../config/Config';\nimport messages from '../properties/DefinedMessages';\nimport { linkTo } from '../Routes';\nimport { useGetBundles } from '../services/Notifications/GetBundles';\nimport { Facet } from '../types/Notification';\n\nconst eventLogService = 'Event Log';\n\nexport const NotAuthorizedPage: React.FunctionComponent = () => {\n  const chrome = useChrome();\n  const { bundleName } = useParams<Record<string, string | undefined>>();\n  const getBundles = useGetBundles();\n  const bundles: Facet | undefined = useMemo(() => {\n    if (getBundles.payload?.status === 200) {\n      return getBundles.payload.value.find((b) => b.name === bundleName);\n    }\n  }, [bundleName, getBundles.payload?.status, getBundles.payload?.value]);\n\n  const location = useLocation();\n  const intl = useIntl();\n\n  const userPreferences = (\n    <a href={localUrl(`/user-preferences/notifications/`, chrome.isBeta())}>\n      {' '}\n      User Preferences\n    </a>\n  );\n  const myUserAccess = (\n    <a\n      href={localUrl(`/settings/my-user-access?bundle=rhel }`, chrome.isBeta())}\n    >\n      {' '}\n      My User Access{' '}\n    </a>\n  );\n\n  const serviceName = React.useMemo(() => {\n    switch (chrome.getApp()) {\n      case Config.integrations.subAppId:\n        return intl.formatMessage(messages.integrations);\n      case Config.notifications.subAppId:\n        if (location.pathname === linkTo.eventLog()) {\n          return eventLogService;\n        }\n\n        return intl.formatMessage(messages.notifications);\n      default:\n        return '';\n    }\n  }, [intl, location.pathname, chrome]);\n\n  const pageHeaderTitleProps = {\n    paddingBottom: '8px',\n  };\n\n  const title = React.useMemo(() => {\n    if (serviceName === 'Notifications' && bundles) {\n      return `${serviceName} | ${bundles?.displayName}`;\n    } else {\n      return `${serviceName}`;\n    }\n  }, [bundles, serviceName]);\n\n  const description = React.useMemo(() => {\n    if (serviceName === 'Notifications') {\n      return (\n        <span>\n          Configure which event notifications different users within your\n          organization are entitled to receive.\n        </span>\n      );\n    } else {\n      return <span></span>;\n    }\n  }, [serviceName, chrome]);\n\n  return (\n    <>\n      <PageHeader>\n        <Split>\n          <SplitItem isFilled>\n            <PageHeaderTitle title={title} {...pageHeaderTitleProps}>\n              {' '}\n            </PageHeaderTitle>\n            <StackItem>{description}</StackItem>\n          </SplitItem>\n        </Split>\n      </PageHeader>\n      <NotAuthorized\n        description={\n          <>\n            Contact your organization administrator for more information or\n            visit\n            {myUserAccess} to learn more about your permissions. To manage your\n            notifications, go to your {userPreferences}.\n          </>\n        }\n        serviceName={serviceName}\n      />\n    </>\n  );\n};\n","import useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport React from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { useAppContext } from '../app/AppContext';\nimport Config from '../config/Config';\nimport { linkTo } from '../Routes';\nimport { NotAuthorizedPage } from './NotAuthorized';\n\nexport const CheckReadPermissions: React.FunctionComponent = (props) => {\n  const chrome = useChrome();\n  const { rbac } = useAppContext();\n  const location = useLocation();\n\n  const hasReadPermissions = React.useMemo(() => {\n    const appId = chrome.getApp();\n    switch (appId) {\n      case Config.integrations.subAppId:\n        return rbac?.canReadIntegrationsEndpoints;\n      case Config.notifications.subAppId:\n        if (location.pathname === linkTo.eventLog()) {\n          return rbac?.canReadEvents;\n        }\n\n        return rbac?.canReadNotifications;\n    }\n\n    return false;\n  }, [rbac, location, chrome]);\n  return <>{!hasReadPermissions ? <NotAuthorizedPage /> : props.children}</>;\n};\n","import { Button, Split, SplitItem } from '@patternfly/react-core';\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\nimport PageHeaderTitle from '@redhat-cloud-services/frontend-components/PageHeader/PageHeaderTitle';\nimport Section from '@redhat-cloud-services/frontend-components/Section';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport { useFlag } from '@unleash/proxy-client-react';\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { Messages } from '../../../properties/Messages';\nimport { linkTo } from '../../../Routes';\nimport IntegrationsList from './List';\n\nexport const IntegrationsListPage: React.FunctionComponent = () => {\n  const { updateDocumentTitle, getBundle } = useChrome();\n\n  updateDocumentTitle?.('Integrations');\n\n  const notificationsOverhaul = useFlag('platform.notifications.overhaul');\n\n  return (\n    <Section className=\"pf-c-page__main-section pf-m-light\">\n      <PageHeader>\n        <Split>\n          <SplitItem isFilled>\n            <PageHeaderTitle title={Messages.pages.integrations.list.title} />\n          </SplitItem>\n          {!notificationsOverhaul && (\n            <SplitItem>\n              <Button\n                variant=\"secondary\"\n                component={() => (\n                  <Link\n                    to={`/${getBundle()}/notifications${linkTo.eventLog()}`}\n                  />\n                )}\n              >\n                {' '}\n                View event log{' '}\n              </Button>\n            </SplitItem>\n          )}\n        </Split>\n      </PageHeader>\n      <IntegrationsList />\n    </Section>\n  );\n};\n","// Constants, like link to docs and cases\n\nimport { Messages } from '../../../properties/Messages';\n\nexport const DOCUMENTATION_URL = Messages.pages.splunk.page.helpUrl;\nexport const SPLUNK_CLOUD_HEC_DOC =\n  'https://docs.splunk.com/Documentation/SplunkCloud/latest/Data/' +\n  'UsetheHTTPEventCollector#Send_data_to_HTTP_Event_Collector';\nexport const OPEN_CASE_URL =\n  'https://access.redhat.com/support/cases/#/case/new/open-case/describe-issue' +\n  '?intcmp=hp|a|a3|case&caseCreate=true&product=Red%20Hat%20Insights' +\n  '&version=Red%20Hat%20Insights';\n","import {\n  Button,\n  EmptyState,\n  EmptyStateBody,\n  EmptyStateIcon,\n  EmptyStateSecondaryActions,\n  Title,\n} from '@patternfly/react-core';\nimport {\n  CheckCircleIcon,\n  ExclamationCircleIcon,\n} from '@patternfly/react-icons';\nimport React from 'react';\n\nimport { DOCUMENTATION_URL, OPEN_CASE_URL } from './Constants';\n\ninterface SplunkSetupFinishedProps {\n  isSuccess: boolean;\n  error: Error | undefined;\n}\n\nexport const SplunkSetupFinished: React.FunctionComponent<SplunkSetupFinishedProps> =\n  ({ isSuccess, error }) =>\n    isSuccess ? (\n      <SplunkSetupFinishedSuccess />\n    ) : (\n      <SplunkSetupFinishedFailure error={error} />\n    );\n\nexport const SplunkSetupFinishedSuccess: React.FunctionComponent = () => (\n  <EmptyState>\n    <EmptyStateIcon\n      icon={CheckCircleIcon}\n      color=\"var(--pf-global--success-color--100)\"\n    />\n    <Title headingLevel=\"h4\" size=\"lg\">\n      Splunk integration in Insights completed\n    </Title>\n    <EmptyStateBody>\n      Splunk integration in Insights was completed. To confirm these changes,{' '}\n      <strong>go back to Splunk application</strong>.\n    </EmptyStateBody>\n  </EmptyState>\n);\n\nexport const SplunkSetupFinishedFailure: React.FunctionComponent<{\n  error: Error | undefined;\n}> = ({ error }) => (\n  <EmptyState>\n    <EmptyStateIcon\n      icon={ExclamationCircleIcon}\n      color=\"var(--pf-global--danger-color--100)\"\n    />\n    <Title headingLevel=\"h4\" size=\"lg\">\n      Configuration failed\n    </Title>\n    <EmptyStateBody>\n      <p className=\"pf-u-mb-md\">\n        There was a problem processing the request. Please try again. If the\n        problem persists, contact Red Hat support by opening the ticket.\n      </p>\n      {error && <p>{`${error}`}</p>}\n    </EmptyStateBody>\n    <Button\n      variant=\"primary\"\n      component=\"a\"\n      href={OPEN_CASE_URL}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      Open a Red Hat Support ticket\n    </Button>\n    <EmptyStateSecondaryActions>\n      <Button\n        variant=\"link\"\n        component=\"a\"\n        href={DOCUMENTATION_URL}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        Go to documentation\n      </Button>\n    </EmptyStateSecondaryActions>\n  </EmptyState>\n);\n","import {\n  Page,\n  useTransformQueryResponse,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport {\n  validatedResponse,\n  validationResponseTransformer,\n} from 'openapi2typescript';\nimport { useParameterizedQuery, useQuery } from 'react-fetching-library';\n\nimport { Schemas } from '../generated/OpenapiIntegrations';\nimport { Operations } from '../generated/OpenapiNotifications';\nimport { toNotifications } from '../types/adapters/NotificationAdapter';\n\nexport const listNotificationsActionCreator = (pager?: Page) => {\n  const query = (pager ?? Page.defaultPage()).toQuery();\n  return Operations.NotificationResourceGetEventTypes.actionCreator({\n    limit: +query.limit,\n    offset: +query.offset,\n    applicationIds: query.filterApplicationId as unknown as Array<Schemas.UUID>,\n    eventTypeName: query.filterEventFilterName as unknown as string,\n    bundleId: query.filterBundleId as unknown as string,\n    sortBy: `${query.sortColumn}:${query.sortDirection}`,\n  });\n};\n\nconst decoder = validationResponseTransformer(\n  (payload: Operations.NotificationResourceGetEventTypes.Payload) => {\n    if (payload.status === 200) {\n      return validatedResponse(\n        'eventTypesArray',\n        200,\n        {\n          ...payload.value,\n          data: toNotifications(payload.value.data),\n        },\n        payload.errors\n      );\n    }\n\n    return payload;\n  }\n);\n\nexport const useListNotifications = (pager?: Page) =>\n  useTransformQueryResponse(\n    useQuery(listNotificationsActionCreator(pager)),\n    decoder\n  );\n\nexport const useParameterizedListNotifications = () =>\n  useTransformQueryResponse(\n    useParameterizedQuery(listNotificationsActionCreator),\n    decoder\n  );\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport {\n  validatedResponse,\n  validationResponseTransformer,\n} from 'openapi2typescript';\nimport { useClient, useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\nexport const getBehaviorGroupByNotificationDecoder =\n  validationResponseTransformer(\n    (\n      payload: Operations.NotificationResourceGetLinkedBehaviorGroups.Payload\n    ) => {\n      if (payload.status === 200) {\n        return validatedResponse(\n          'BehaviorGroupId',\n          200,\n          payload.value.map((value) => value.id),\n          payload.errors\n        );\n      }\n\n      return payload;\n    }\n  );\n\nexport const getBehaviorGroupByNotificationAction = (notificationId: UUID) =>\n  Operations.NotificationResourceGetLinkedBehaviorGroups.actionCreator({\n    eventTypeId: notificationId,\n  });\n\nexport const useGetBehaviorGroupByNotification = (notificationId: UUID) => {\n  return useTransformQueryResponse(\n    useQuery(getBehaviorGroupByNotificationAction(notificationId)),\n    getBehaviorGroupByNotificationDecoder\n  );\n};\n\nexport const useGetAnyBehaviorGroupByNotification = () => {\n  const client = useClient();\n  return async (notificationId: UUID) => {\n    const { errorObject, payload } = await client.query(\n      getBehaviorGroupByNotificationAction(notificationId)\n    );\n    if (errorObject) {\n      throw errorObject;\n    }\n\n    return getBehaviorGroupByNotificationDecoder(\n      payload as Operations.NotificationResourceGetLinkedBehaviorGroups.Payload\n    );\n  };\n};\n","import { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\nimport NotificationServiceUpdateEventTypeBehaviors = Operations.NotificationResourceUpdateEventTypeBehaviors;\n\nexport const linkBehaviorGroupAction = (\n  notificationId: UUID,\n  behaviorGroupIds: Array<UUID>\n) => {\n  return NotificationServiceUpdateEventTypeBehaviors.actionCreator({\n    body: behaviorGroupIds,\n    eventTypeId: notificationId,\n  });\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport {\n  validatedResponse,\n  validationResponseTransformer,\n} from 'openapi2typescript';\nimport { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { BehaviorGroup, UUID } from '../../types/Notification';\n\ntype Payload =\n  | Operations.NotificationResourceCreateBehaviorGroup.Payload\n  | Operations.NotificationResourceUpdateBehaviorGroup.Payload;\n\nexport type SaveBehaviorGroupRequest = {\n  eventTypesIds?: Array<UUID>;\n  endpointIds?: Array<UUID>;\n} & (\n  | {\n      // Update request\n      id: UUID;\n      displayName?: string;\n    }\n  | {\n      // Create request\n      bundleId: UUID;\n      displayName: string;\n    }\n);\n\nconst decoder = validationResponseTransformer((payload: Payload) => {\n  if (payload.type === 'CreateBehaviorGroupResponse') {\n    const behaviorGroup: BehaviorGroup = {\n      id: payload.value.id,\n      displayName: payload.value.display_name,\n      bundleId: payload.value.bundle_id,\n      isDefault: false,\n      bundleName: undefined,\n      actions: [], // can't get the actions from only the ids,\n      events: [], // can't get the eventTypes from only the ids,\n    };\n    return validatedResponse(\n      'BehaviorGroup',\n      payload.status,\n      behaviorGroup,\n      payload.errors\n    );\n  }\n\n  return payload;\n});\n\nconst saveBehaviorGroupActionCreator = (\n  behaviorGroup: SaveBehaviorGroupRequest\n) => {\n  if ('id' in behaviorGroup) {\n    return Operations.NotificationResourceUpdateBehaviorGroup.actionCreator({\n      id: behaviorGroup.id,\n      body: {\n        display_name: behaviorGroup.displayName,\n        endpoint_ids: behaviorGroup.endpointIds,\n        event_type_ids: behaviorGroup.eventTypesIds,\n      },\n    });\n  }\n\n  return Operations.NotificationResourceCreateBehaviorGroup.actionCreator({\n    body: {\n      bundle_id: behaviorGroup.bundleId,\n      display_name: behaviorGroup.displayName,\n      endpoint_ids: behaviorGroup.endpointIds,\n      event_type_ids: behaviorGroup.eventTypesIds,\n    },\n  });\n};\n\nexport const useSaveBehaviorGroupMutation = () =>\n  useTransformQueryResponse(\n    useMutation(saveBehaviorGroupActionCreator),\n    decoder\n  );\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\ntype UpdateBehaviorGroupActionsParams = {\n  behaviorGroupId: UUID;\n  endpointIds: Array<UUID>;\n};\n\nconst updateBehaviorGroupActionsActionCreator = (\n  params: UpdateBehaviorGroupActionsParams\n) => {\n  return Operations.NotificationResourceUpdateBehaviorGroupActions.actionCreator(\n    {\n      behaviorGroupId: params.behaviorGroupId,\n      body: params.endpointIds,\n    }\n  );\n};\n\nexport const useUpdateBehaviorGroupActionsMutation = () =>\n  useMutation(updateBehaviorGroupActionsActionCreator);\n","/*\nSteps:\n\n1) [POST] Create Integrations under /api/integrations/v1.0/endpoints with the payload:\n{\n    \"name\": \"Splunk Automation\",\n    \"enabled\": true,\n    \"type\": \"camel\",\n    \"sub_type\": \"splunk\",\n    \"description\": \"\",\n    \"properties\": {\n        \"url\": \"http://decd-187-3-186-244.ngrok.io\",\n        \"disable_ssl_verification\": false,\n        \"secret_token\": \"MYHEC_TOKEN\",\n        \"basic_authentication\": {},\n        \"extras\": {}\n    }\n}\n\n2) Create behavior group under /api/notifications/v1.0/notifications/behaviorGroups with the payload:\n\n{\n  \"bundle_id\":\"35fd787b-a345-4fe8-a135-7773de15905e\",\n  \"display_name\":\"Splunk-automation\"\n}\n\n3) [POST] Update behavior group under api/notifications/v1.0/notifications/behaviorGroups/{BEHAVIOR_GROUP_ID}/actions with the payload:\n\n  [\"8d8dca57-1834-48dd-b6ac-265c949c5e60\"] <<-- Id of the integration\n\n4) [PUT] Update eventType under /api/notifications/v1.0/notifications/eventTypes/{EVENT_TYPE_UUID}/behaviorGroups with the payload:\n\n[\"ff59b502-da25-4297-bd88-6934ad0e0d63\"] <<- Behavior group ID\n*/\n\nimport { useClient } from 'react-fetching-library';\n\nimport { useGetAllEventTypes } from '../../../services/GetEventTypes';\nimport { useGetAnyBehaviorGroupByNotification } from '../../../services/Notifications/GetBehaviorGroupByNotificationId';\nimport { useGetBundleByName } from '../../../services/Notifications/GetBundles';\nimport { linkBehaviorGroupAction } from '../../../services/Notifications/LinkBehaviorGroup';\nimport { useSaveBehaviorGroupMutation } from '../../../services/Notifications/SaveBehaviorGroup';\nimport { useUpdateBehaviorGroupActionsMutation } from '../../../services/Notifications/UpdateBehaviorGroupActions';\nimport { useSaveIntegrationMutation } from '../../../services/useSaveIntegration';\nimport {\n  Integration,\n  IntegrationCamel,\n  IntegrationType,\n  NewIntegrationTemplate,\n} from '../../../types/Integration';\nimport {\n  BehaviorGroup,\n  BehaviorGroupRequest,\n  UUID,\n} from '../../../types/Notification';\n\nexport const SPLUNK_GROUP_NAME = 'SPLUNK_INTEGRATION';\nexport const SPLUNK_INTEGRATION_NAME = 'SPLUNK_AUTOMATION';\nexport const SPLUNK_BEHAVIOR_GROUP_NAME = 'SPLUNK_AUTOMATION_GROUP';\nexport const BUNDLE_NAME = 'rhel';\n\ninterface SplunkEventsDef {\n  [Identifier: string]: string | string[];\n}\n\nconst DEFAULT_SPLUNK_EVENTS: SplunkEventsDef = {\n  advisor: '*',\n  policies: '*',\n  drift: '*',\n  compliance: '*',\n  'malware-detection': '*',\n  patch: '*',\n  vulnerability: '*',\n};\n\nexport const useSplunkSetup = () => {\n  const createSplunkIntegration = useCreateSplunkIntegration();\n  const createSplunkBehaviorGroup = useCreateSplunkBehaviorGroup();\n  const updateSplunkBehaviorActions = useUpdateSplunkBehaviorActions();\n  const attachEvents = useAttachEventsToSplunk();\n\n  return async ({ hecToken, splunkServerHostName }, onProgress) => {\n    const integrationName = SPLUNK_INTEGRATION_NAME;\n    const behaviorGroupName = SPLUNK_BEHAVIOR_GROUP_NAME;\n    const bundleName = BUNDLE_NAME;\n    const events = DEFAULT_SPLUNK_EVENTS;\n\n    onProgress(`Creating Integration ${integrationName}...`);\n    const integration = await createSplunkIntegration({\n      integrationName,\n      hecToken,\n      splunkServerHostName,\n    });\n    onProgress(' OK', 'pf-u-success-color-200');\n\n    onProgress(`\\nCreating Behavior Group ${behaviorGroupName}...`);\n    const behaviorGroup = await createSplunkBehaviorGroup({\n      behaviorGroupName,\n      bundleName,\n    });\n    onProgress(' OK', 'pf-u-success-color-200');\n\n    onProgress(\n      '\\nAssociating integration as an action for the behavior group...'\n    );\n    await updateSplunkBehaviorActions(behaviorGroup, integration);\n\n    onProgress(' OK', 'pf-u-success-color-200');\n    onProgress('\\n\\nAssociating events to the behavior group:\\n');\n\n    await attachEvents(behaviorGroup, events, onProgress);\n  };\n};\n\nconst useCreateSplunkIntegration = () => {\n  const { mutate } = useSaveIntegrationMutation();\n  return async ({\n    integrationName,\n    splunkServerHostName,\n    hecToken,\n  }): Promise<Integration | undefined> => {\n    const newIntegration: NewIntegrationTemplate<IntegrationCamel> = {\n      type: IntegrationType.SPLUNK,\n      name: integrationName,\n      url: splunkServerHostName,\n      secretToken: hecToken,\n      isEnabled: true,\n      sslVerificationEnabled: true,\n    };\n\n    const { payload, error, errorObject } = await mutate(newIntegration);\n    if (errorObject) {\n      throw errorObject;\n    }\n\n    if (error) {\n      throw new Error(`Error when creating integration ${integrationName}`);\n    }\n\n    return payload?.value as Integration;\n  };\n};\n\nconst useCreateSplunkBehaviorGroup = () => {\n  const { mutate } = useSaveBehaviorGroupMutation();\n  const getBundleByName = useGetBundleByName();\n\n  return async ({ behaviorGroupName, bundleName }): Promise<BehaviorGroup> => {\n    const bundle = await getBundleByName(bundleName);\n    if (!bundle) {\n      throw new Error(`Unable to find bundle ${bundleName}`);\n    }\n\n    const behaviorGroup: BehaviorGroupRequest = {\n      bundleId: bundle.id as UUID,\n      displayName: behaviorGroupName,\n      actions: [], // ignored\n      events: [], // ignored\n    };\n\n    const { payload, error, errorObject } = await mutate(behaviorGroup);\n    if (errorObject) {\n      throw errorObject;\n    }\n\n    if (error) {\n      throw new Error(\n        `Error when creating behavior group ${behaviorGroupName}`\n      );\n    }\n\n    return payload?.value as BehaviorGroup;\n  };\n};\n\nconst useUpdateSplunkBehaviorActions = () => {\n  const { mutate } = useUpdateBehaviorGroupActionsMutation();\n  return async (behaviorGroup, integration) => {\n    const endpointIds = behaviorGroup.actions || [];\n    endpointIds.push(integration.id);\n\n    const params = {\n      behaviorGroupId: behaviorGroup.id,\n      endpointIds,\n    };\n    const { payload, error, errorObject } = await mutate(params);\n    if (errorObject) {\n      throw errorObject;\n    }\n\n    if (error) {\n      throw new Error(\n        `Error when linking behavior group ${behaviorGroup.id}` +\n          ` with integration ${integration.id}`\n      );\n    }\n\n    return payload?.value;\n  };\n};\n\nconst useAttachEventsToSplunk = () => {\n  const getAllEventTypes = useGetAllEventTypes();\n  const client = useClient();\n  const getAnyBehaviorGroupByNotification =\n    useGetAnyBehaviorGroupByNotification();\n\n  const appendActionToNotification = async (eventType, behaviorGroup) => {\n    const existingActions = await getAnyBehaviorGroupByNotification(\n      eventType.id as UUID\n    );\n    const existingActionIds = existingActions.value as UUID[];\n    const newActionIds = [...existingActionIds, behaviorGroup.id];\n\n    const { payload, errorObject, error } = await client.query(\n      linkBehaviorGroupAction(eventType.id, newActionIds)\n    );\n    if (errorObject) {\n      throw errorObject;\n    }\n\n    if (error) {\n      throw new Error(`Unsuccessful linking of event type ${eventType.id}`);\n    }\n\n    return payload;\n  };\n\n  return async (behaviorGroup, events, onProgress) => {\n    const eventTypes = await getAllEventTypes();\n\n    const selectedEventTypes = eventTypes.filter((eventType) => {\n      if (!eventType?.application) {\n        return false;\n      }\n\n      if (eventType.application.bundle_id !== behaviorGroup.bundleId) {\n        return false;\n      }\n\n      const expectEvents = events[eventType.application.name];\n      if (\n        !expectEvents ||\n        (expectEvents !== '*' && !expectEvents.includes(eventType.name))\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    for (const eventType of selectedEventTypes) {\n      onProgress(\n        `  ${eventType.application?.display_name} - ${eventType.display_name}...`\n      );\n      try {\n        await appendActionToNotification(eventType, behaviorGroup);\n        onProgress(' ASSOCIATED\\n', 'pf-u-success-color-200');\n      } catch (error) {\n        onProgress(' ERROR!\\n', 'pf-u-danger-color-200');\n        console.log(error);\n      }\n    }\n  };\n};\n","import {\n  Direction,\n  Page,\n  Sort,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { useClient } from 'react-fetching-library';\n\nimport { Schemas } from '../generated/OpenapiNotifications';\nimport { listNotificationsActionCreator } from './useListNotifications';\n\nexport const useGetAllEventTypes = () => {\n  const { query } = useClient();\n  const fetchPage = async (page?: Page): Promise<Schemas.EventType[]> => {\n    if (!page) {\n      page = Page.defaultPage().withSort(\n        Sort.by('application', Direction.ASCENDING)\n      );\n    }\n\n    const { errorObject, payload } = await query(\n      listNotificationsActionCreator(page)\n    );\n    if (errorObject) {\n      throw errorObject;\n    }\n\n    if (payload?.type === 'PageEventType') {\n      const events = payload?.value?.data as Schemas.EventType[];\n      if (events.length === 0) {\n        return [];\n      }\n\n      return [...events, ...(await fetchPage(page.nextPage()))];\n    }\n\n    throw new Error(`Unknow payload type for eventTypes ${payload?.type}`);\n  };\n\n  return fetchPage;\n};\n","import {\n  ActionGroup,\n  Button,\n  CodeBlock,\n  CodeBlockCode,\n  Form,\n  FormGroup,\n  Grid,\n  GridItem,\n  List,\n  ListItem,\n  ListVariant,\n  Popover,\n  ProgressStepProps,\n  TextInput,\n  ValidatedOptions,\n} from '@patternfly/react-core';\nimport {\n  CheckCircleIcon,\n  ExclamationCircleIcon,\n  HelpIcon,\n} from '@patternfly/react-icons';\nimport { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport React, { Dispatch, SetStateAction, useEffect, useState } from 'react';\nimport { string } from 'yup';\n\nimport {\n  DOCUMENTATION_URL,\n  OPEN_CASE_URL,\n  SPLUNK_CLOUD_HEC_DOC,\n} from './Constants';\nimport { useSplunkSetup } from './useSplunkSetup';\n\ninterface SplunkSetupFormProps {\n  setStep: Dispatch<SetStateAction<number>>;\n  stepIsInProgress: boolean;\n  setStepIsInProgress: Dispatch<SetStateAction<boolean>>;\n  stepVariant: ProgressStepProps['variant'];\n  setStepVariant: Dispatch<SetStateAction<ProgressStepProps['variant']>>;\n  hecToken: string;\n  setHecToken: Dispatch<SetStateAction<string>>;\n  splunkServerHostName: string;\n  setHostName: Dispatch<SetStateAction<string>>;\n  automationLogs: React.ReactChild[];\n  setAutomationLogs: Dispatch<SetStateAction<React.ReactChild[]>>;\n  setError: Dispatch<SetStateAction<Error | undefined>>;\n}\n\nconst SplunkURLSchema = string()\n  .url()\n  .test('has-no-path', 'URL contains path or parameters', (url) => {\n    let urlObj;\n    try {\n      urlObj = new URL(url as string);\n    } catch {\n      return false;\n    }\n\n    return (\n      (urlObj.pathname === '/' || urlObj.pathname === '') &&\n      urlObj.search === ''\n    );\n  });\n\nexport const SplunkSetupForm: React.FunctionComponent<SplunkSetupFormProps> = ({\n  setStep,\n  stepIsInProgress,\n  setStepIsInProgress,\n  stepVariant,\n  setStepVariant,\n  hecToken,\n  setHecToken,\n  splunkServerHostName,\n  setHostName,\n  automationLogs,\n  setAutomationLogs,\n  setError,\n}) => {\n  const startSplunkAutomation = useSplunkSetup();\n  const [isDisabled, setIsDisabled] = useState<boolean>(true);\n  const [validatedServerHostname, setValidatedServerHostname] =\n    useState<ValidatedOptions>(ValidatedOptions.default);\n  const [validatedHecToken, setValidatedHecToken] = useState<ValidatedOptions>(\n    ValidatedOptions.default\n  );\n\n  const onHostnameChange = async (value) => {\n    setHostName(value);\n    if (value === '') {\n      setValidatedServerHostname(ValidatedOptions.default);\n    } else {\n      const isValid = await SplunkURLSchema.isValid(value);\n      setValidatedServerHostname(\n        isValid ? ValidatedOptions.success : ValidatedOptions.error\n      );\n    }\n  };\n\n  const onHecTokenChange = async (value) => {\n    setHecToken(value);\n    if (value === '') {\n      setValidatedHecToken(ValidatedOptions.default);\n    } else {\n      const isValid = await string().uuid().isValid(value);\n      setValidatedHecToken(\n        isValid ? ValidatedOptions.success : ValidatedOptions.error\n      );\n    }\n  };\n\n  useEffect(() => {\n    if (\n      [validatedServerHostname, validatedHecToken].every(\n        (v) => v === ValidatedOptions.success\n      )\n    ) {\n      setIsDisabled(false);\n    } else {\n      setIsDisabled(true);\n    }\n  }, [validatedServerHostname, validatedHecToken]);\n\n  const onProgress = (message, className?) => {\n    let newLog = message;\n    if (className) {\n      newLog = <span className={className}>{message}</span>;\n    }\n\n    setAutomationLogs((prevLogs) => [...prevLogs, newLog]);\n  };\n\n  const onStart = async () => {\n    setStepIsInProgress(true);\n    setAutomationLogs([]);\n\n    try {\n      await startSplunkAutomation(\n        { hecToken, splunkServerHostName },\n        onProgress\n      );\n    } catch (error) {\n      onProgress(`\\n${error}`, 'pf-u-danger-color-200');\n      setStepIsInProgress(false);\n      setStepVariant('danger');\n\n      addDangerNotification(\n        'Configuration failed',\n        <SplunkSetupFailedToast />,\n        true\n      );\n      setError(error as Error);\n      return;\n    }\n\n    setIsDisabled(false);\n    setStepIsInProgress(false);\n    setStepVariant('success');\n    onProgress('\\nDONE!', 'pf-u-success-color-200');\n  };\n\n  const onFinish = () => {\n    setStep((prevStep) => prevStep + 1);\n  };\n\n  return (\n    <Grid>\n      <GridItem span={6}>\n        <Form className=\"pf-u-mr-md\">\n          <FormGroup\n            label=\"Splunk HEC URL\"\n            labelIcon={\n              <Popover\n                headerContent={\n                  <div>\n                    The server <b>hostname/IP Address</b> and <b>port</b> of\n                    your splunk HTTP Event Collector\n                  </div>\n                }\n                bodyContent={\n                  <div>\n                    For Splunk Enterprise the port is by default 8088.\n                    <br />\n                    For Splunk Cloud Platform see{' '}\n                    <a\n                      target=\"_blank\"\n                      rel=\"noreferrer\"\n                      href={SPLUNK_CLOUD_HEC_DOC}\n                    >\n                      documentation\n                    </a>\n                    .\n                  </div>\n                }\n              >\n                <button\n                  type=\"button\"\n                  aria-label=\"More info for name field\"\n                  onClick={(e) => e.preventDefault()}\n                  aria-describedby=\"splunk-server-hostname\"\n                  className=\"pf-c-form__group-label-help\"\n                >\n                  <HelpIcon noVerticalAlign />\n                </button>\n              </Popover>\n            }\n            isRequired\n            fieldId=\"splunk-server-hostname\"\n            helperTextInvalid=\"Invalid URL. Example: https://hostname:8088\"\n            validated={validatedServerHostname}\n          >\n            <TextInput\n              isRequired\n              type=\"text\"\n              id=\"splunk-server-hostname\"\n              name=\"splunk-server-hostname\"\n              aria-describedby=\"splunk-server-hostname-helper\"\n              value={splunkServerHostName}\n              validated={validatedServerHostname}\n              onChange={onHostnameChange}\n            />\n          </FormGroup>\n          <FormGroup\n            label=\"Splunk HEC Token\"\n            fieldId=\"splunk-hec-token\"\n            isRequired\n            helperTextInvalid=\"Invalid HEC token. Example: 123e4567-e89b-12d3-a456-426614174000\"\n            validated={validatedHecToken}\n          >\n            <TextInput\n              isRequired\n              type=\"text\"\n              id=\"splunk-hec-token\"\n              name=\"splunk-hec-token\"\n              aria-describedby=\"splunk-hec-token-helper\"\n              validated={validatedHecToken}\n              value={hecToken}\n              onChange={onHecTokenChange}\n            />\n          </FormGroup>\n          <ActionGroup>\n            <SplunkAutomationButton\n              {...{\n                onStart,\n                onFinish,\n                stepIsInProgress,\n                stepVariant,\n                isDisabled,\n              }}\n            />\n          </ActionGroup>\n        </Form>\n      </GridItem>\n\n      <GridItem span={6}>\n        <CodeBlock>\n          <CodeBlockCode>{automationLogs}</CodeBlockCode>\n        </CodeBlock>\n      </GridItem>\n    </Grid>\n  );\n};\n\nconst SplunkAutomationButton = ({\n  onStart,\n  onFinish,\n  stepIsInProgress,\n  stepVariant,\n  isDisabled,\n}) => {\n  if (stepIsInProgress) {\n    return (\n      <Button variant=\"primary\" isLoading={true}>\n        Configuration in progress\n      </Button>\n    );\n  } else if (stepVariant === 'success' || stepVariant === 'danger') {\n    return (\n      <Button variant=\"primary\" onClick={onFinish}>\n        {stepVariant === 'success' ? (\n          <CheckCircleIcon />\n        ) : (\n          <ExclamationCircleIcon />\n        )}{' '}\n        Next: Review\n      </Button>\n    );\n  } else {\n    return (\n      <Button variant=\"primary\" isDisabled={isDisabled} onClick={onStart}>\n        Run Configuration\n      </Button>\n    );\n  }\n};\n\nconst SplunkSetupFailedToast = () => (\n  <>\n    <p className=\"pf-u-mb-md\">\n      There was a problem processing the request. Please try again. If the\n      problem persists, contact Red Hat support by opening the ticket.\n    </p>\n    <List variant={ListVariant.inline}>\n      <ListItem>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={OPEN_CASE_URL}>\n          Open a Red Hat Support ticket\n        </a>\n      </ListItem>\n      <ListItem>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={DOCUMENTATION_URL}>\n          Go to documentation\n        </a>\n      </ListItem>\n    </List>\n  </>\n);\n","import {\n  Button,\n  Card,\n  CardBody,\n  Divider,\n  Popover,\n  ProgressStep,\n  ProgressStepProps,\n  ProgressStepper,\n  Split,\n  SplitItem,\n} from '@patternfly/react-core';\nimport {\n  ExternalLinkSquareAltIcon,\n  HelpIcon,\n  InProgressIcon,\n} from '@patternfly/react-icons';\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\nimport PageHeaderTitle from '@redhat-cloud-services/frontend-components/PageHeader/PageHeaderTitle';\nimport React, { useState } from 'react';\n\nimport { Messages } from '../../../properties/Messages';\nimport { DOCUMENTATION_URL } from './Constants';\nimport { SplunkSetupFinished } from './SplunkSetupFinished';\nimport { SplunkSetupForm } from './SplunkSetupForm';\n\nconst SplunkSetupTitle: React.FunctionComponent = () => (\n  <>\n    <PageHeaderTitle\n      title={\n        <>\n          {Messages.pages.splunk.page.title}\n          <Popover\n            bodyContent={Messages.pages.splunk.page.help}\n            footerContent={\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href={DOCUMENTATION_URL}\n              >\n                Learn more <ExternalLinkSquareAltIcon />\n              </a>\n            }\n          >\n            <Button\n              variant=\"plain\"\n              aria-label=\"Help description\"\n              className=\"title-help-label\"\n            >\n              <HelpIcon noVerticalAlign />\n            </Button>\n          </Popover>\n        </>\n      }\n    />\n    {Messages.pages.splunk.page.description}\n  </>\n);\n\nexport const SplunkSetupPage: React.FunctionComponent = () => {\n  const [step, setStep] = useState(2);\n  const [stepIsInProgress, setStepIsInProgress] = useState(false);\n  const [stepVariant, setStepVariant] =\n    useState<ProgressStepProps['variant']>('info');\n\n  const [hecToken, setHecToken] = useState('');\n  const [splunkServerHostName, setHostName] = useState('');\n  const [automationLogs, setAutomationLogs] = useState<React.ReactChild[]>([\n    `Logs from the automation would appear here\\n`,\n  ]);\n  const [error, setError] = useState<Error | undefined>();\n\n  return (\n    <>\n      <PageHeader>\n        <SplunkSetupTitle />\n      </PageHeader>\n      <Card>\n        <CardBody>\n          <Split hasGutter>\n            <SplitItem>\n              <ProgressStepper isVertical>\n                <ProgressStep\n                  isCurrent={step === 1}\n                  variant=\"success\"\n                  description=\"Create Index and HEC\"\n                  id=\"step1-splunk-app-step\"\n                  titleId=\"step1-splunk-app-step\"\n                  aria-label=\"completed Splunk app step (step 1)\"\n                >\n                  Step 1\n                </ProgressStep>\n                <ProgressStep\n                  isCurrent={step === 2}\n                  icon={\n                    step === 2 && stepIsInProgress ? (\n                      <InProgressIcon />\n                    ) : undefined\n                  }\n                  variant={step < 2 ? 'info' : stepVariant}\n                  description=\"Configure Splunk integration in Insights\"\n                  id=\"step2-setup-step\"\n                  titleId=\"step2-setup-step\"\n                  aria-label=\"setup step (step 2)\"\n                >\n                  Step 2\n                </ProgressStep>\n                <ProgressStep\n                  isCurrent={step === 3}\n                  variant={step < 3 ? 'pending' : stepVariant}\n                  description=\"Review\"\n                  id=\"step3-review-step\"\n                  titleId=\"step3-review-step\"\n                  aria-label=\"review step (step 3)\"\n                >\n                  Step 3\n                </ProgressStep>\n              </ProgressStepper>\n            </SplitItem>\n            <Divider isVertical />\n            <SplitItem isFilled>\n              {step === 2 && (\n                <SplunkSetupForm\n                  {...{\n                    setStep,\n                    stepIsInProgress,\n                    setStepIsInProgress,\n                    stepVariant,\n                    setStepVariant,\n                    hecToken,\n                    setHecToken,\n                    splunkServerHostName,\n                    setHostName,\n                    automationLogs,\n                    setAutomationLogs,\n                    setError,\n                  }}\n                />\n              )}\n              {step === 3 && (\n                <SplunkSetupFinished\n                  isSuccess={stepVariant === 'success'}\n                  error={error}\n                />\n              )}\n            </SplitItem>\n          </Split>\n        </CardBody>\n      </Card>\n    </>\n  );\n};\n","import { Button, ButtonProps } from '@patternfly/react-core';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport * as React from 'react';\nimport { Link, LinkProps } from 'react-router-dom';\n\ntype ButtonLinkProps = ButtonProps & Omit<LinkProps, 'component'>;\n\nexport const ButtonLink: React.FunctionComponent<ButtonLinkProps> = ({\n  to,\n  ...props\n}) => {\n  const { getBundle } = useChrome();\n  return (\n    <Link to={`/${getBundle()}/notifications${to}`}>\n      <Button {...props}>{props.children}</Button>\n    </Link>\n  );\n};\n","import {\n  DatePicker,\n  DatePickerRef,\n  Select,\n  SelectOption,\n  SelectOptionObject,\n  SelectVariant,\n  Split,\n  SplitItem,\n  TextInputProps,\n} from '@patternfly/react-core';\nimport { important } from 'csx';\nimport { add, format, isAfter, isBefore, min, parseISO } from 'date-fns';\nimport produce from 'immer';\nimport * as React from 'react';\nimport { Dispatch, useRef } from 'react';\nimport { SetStateAction } from 'react';\nimport { style } from 'typestyle';\n\nimport { EventPeriod } from '../../../types/Event';\n\nexport enum EventLogDateFilterValue {\n  TODAY = 'today',\n  YESTERDAY = 'yesterday',\n  LAST_7 = 'last_7',\n  LAST_14 = 'last_14',\n  CUSTOM = 'custom',\n}\n\nconst labels: Record<EventLogDateFilterValue, string> = {\n  [EventLogDateFilterValue.TODAY]: 'Today',\n  [EventLogDateFilterValue.YESTERDAY]: 'Yesterday',\n  [EventLogDateFilterValue.LAST_7]: 'Last 7 days',\n  [EventLogDateFilterValue.LAST_14]: 'Last 14 days',\n  [EventLogDateFilterValue.CUSTOM]: 'Custom',\n};\n\nconst datePickerClassName = style({\n  backgroundColor: important('white'),\n  cursor: 'pointer',\n  $nest: {\n    '&::placeholder': {\n      color: important('black'),\n    },\n    '&:hover': {\n      borderBottomColor: 'var(--pf-v5-global--active-color--100)',\n    },\n  },\n});\n\nclass EventLogSelectObject implements SelectOptionObject {\n  readonly value: EventLogDateFilterValue;\n\n  constructor(value: EventLogDateFilterValue) {\n    this.value = value;\n  }\n\n  toString(): string {\n    return labels[this.value];\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  compareTo(selectOption: any): boolean {\n    if (selectOption instanceof EventLogSelectObject) {\n      return selectOption.value === this.value;\n    }\n\n    return false;\n  }\n}\n\nconst dateInputProps: TextInputProps = {\n  isReadOnly: true,\n  className: datePickerClassName,\n};\n\ninterface CustomDateFilterProps {\n  retentionDays: number;\n  period: EventPeriod;\n  setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nconst CustomDateFilter: React.FunctionComponent<CustomDateFilterProps> = (\n  props\n) => {\n  const maxDate = React.useMemo(() => new Date(), []);\n  const minDate = React.useMemo(\n    () =>\n      add(maxDate, {\n        days: -14,\n      }),\n    [maxDate]\n  );\n\n  const startRangeValidators = React.useMemo(\n    () => [\n      (date) => {\n        if (isBefore(date, minDate)) {\n          return 'Date is before the retention policy';\n        } else if (isAfter(date, maxDate)) {\n          return 'Date is after today';\n        } else if (props.period[1] && isAfter(date, props.period[1])) {\n          return 'Start date must be before end date';\n        }\n\n        return '';\n      },\n    ],\n    [minDate, maxDate, props.period]\n  );\n\n  const endRangeValidators = React.useMemo(\n    () => [\n      (date) => {\n        if (isBefore(date, minDate)) {\n          return 'Date is before the retention policy';\n        } else if (isAfter(date, maxDate)) {\n          return 'Date is after today';\n        } else if (props.period[0] && isBefore(date, props.period[0])) {\n          return 'End date must be after start date';\n        }\n\n        return '';\n      },\n    ],\n    [minDate, maxDate, props.period]\n  );\n\n  const setStartDate = React.useCallback(\n    (start: string) => {\n      const setPeriod = props.setPeriod;\n      const startDate = parseISO(start);\n      setPeriod(\n        produce((draft) => {\n          draft[0] = startDate;\n          if (!draft[1]) {\n            draft[1] = min([add(startDate, { days: 1 }), maxDate]);\n          }\n        })\n      );\n    },\n    [props.setPeriod, maxDate]\n  );\n\n  const setEndDate = React.useCallback(\n    (end: string) => {\n      const setPeriod = props.setPeriod;\n      setPeriod(\n        produce((draft) => {\n          draft[1] = parseISO(end);\n        })\n      );\n    },\n    [props.setPeriod]\n  );\n\n  const startValue: string | undefined = React.useMemo(\n    () => (props.period[0] ? format(props.period[0], 'yyyy-MM-dd') : undefined),\n    [props.period]\n  );\n  const endValue: string | undefined = React.useMemo(\n    () => (props.period[1] ? format(props.period[1], 'yyyy-MM-dd') : undefined),\n    [props.period]\n  );\n\n  const startDateRef = useRef<DatePickerRef>(null);\n  const endDateRef = useRef<DatePickerRef>(null);\n\n  const onClickStartDateInput = React.useCallback(() => {\n    startDateRef.current?.setCalendarOpen(true);\n  }, [startDateRef]);\n\n  const onClickEndDateInput = React.useCallback(() => {\n    endDateRef.current?.setCalendarOpen(true);\n  }, [endDateRef]);\n\n  const startDateInputProps = React.useMemo<TextInputProps>(\n    () => ({\n      ...dateInputProps,\n      onClick: onClickStartDateInput,\n    }),\n    [onClickStartDateInput]\n  );\n\n  const endDateInputProps = React.useMemo<TextInputProps>(\n    () => ({\n      ...dateInputProps,\n      onClick: onClickEndDateInput,\n    }),\n    [onClickEndDateInput]\n  );\n\n  return (\n    <Split>\n      <SplitItem>\n        <DatePicker\n          placeholder=\"Start\"\n          inputProps={startDateInputProps}\n          validators={startRangeValidators}\n          onChange={setStartDate}\n          value={startValue}\n          ref={startDateRef}\n        />\n      </SplitItem>\n      <SplitItem className=\"pf-v5-u-align-self-center pf-v5-u-px-sm pf-v5-u-color-300\">\n        to\n      </SplitItem>\n      <SplitItem>\n        <DatePicker\n          placeholder=\"End\"\n          inputProps={endDateInputProps}\n          validators={endRangeValidators}\n          onChange={setEndDate}\n          value={endValue}\n          ref={endDateRef}\n        />\n      </SplitItem>\n    </Split>\n  );\n};\n\nexport interface EventLogDateFilterProps {\n  value: EventLogDateFilterValue;\n  setValue: (value: EventLogDateFilterValue) => void;\n  retentionDays: number;\n  period: EventPeriod;\n  setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nexport const EventLogDateFilter: React.FunctionComponent<EventLogDateFilterProps> =\n  (props) => {\n    const options = React.useMemo(\n      () =>\n        Object.values(EventLogDateFilterValue).map((v) => (\n          <SelectOption key={v} value={new EventLogSelectObject(v)} />\n        )),\n      []\n    );\n    const [isOpen, setOpen] = React.useState(false);\n    const onToggle = React.useCallback(\n      () => setOpen((prev) => !prev),\n      [setOpen]\n    );\n    const value = React.useMemo(\n      () => new EventLogSelectObject(props.value),\n      [props.value]\n    );\n    const onSelect = React.useCallback(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (_e: any, selectObject: SelectOptionObject | string) => {\n        const setValue = props.setValue;\n        if (selectObject instanceof EventLogSelectObject) {\n          setValue(selectObject.value);\n          setOpen(false);\n        }\n      },\n      [props.setValue]\n    );\n\n    return (\n      <Split>\n        <SplitItem>\n          <Select\n            isOpen={isOpen}\n            variant={SelectVariant.single}\n            onToggle={onToggle}\n            selections={value}\n            onSelect={onSelect}\n          >\n            {options}\n          </Select>\n        </SplitItem>\n        {props.value === EventLogDateFilterValue.CUSTOM && (\n          <SplitItem>\n            <CustomDateFilter\n              period={props.period}\n              setPeriod={props.setPeriod}\n              retentionDays={props.retentionDays}\n            />\n          </SplitItem>\n        )}\n      </Split>\n    );\n  };\n","import {\n  CheckCircleIcon,\n  ExclamationCircleIcon,\n  ExclamationTriangleIcon,\n  InProgressIcon,\n  UnknownIcon,\n} from '@patternfly/react-icons';\nimport {\n  c_alert_m_warning__icon_Color,\n  global_danger_color_100,\n  global_success_color_100,\n} from '@patternfly/react-tokens';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\n\nimport { Schemas } from '../../generated/OpenapiNotifications';\nimport { Status } from '../Status/Status';\n\ninterface NotificationStatusProps {\n  status: Schemas.EventLogEntryActionStatus;\n}\n\nexport const NotificationStatus: React.FunctionComponent<NotificationStatusProps> =\n  (props) => {\n    switch (props.status) {\n      case 'FAILED':\n        return <NotificationStatusFailed />;\n      case 'PROCESSING':\n        return <NotificationStatusProcessing />;\n      case 'SENT':\n        return <NotificationStatusSent />;\n      case 'SUCCESS':\n        return <NotificationStatusSuccess />;\n      case 'UNKNOWN':\n        return <NotificationStatusUnknown />;\n      default:\n        assertNever(props.status);\n    }\n  };\n\nexport const NotificationStatusFailed: React.FunctionComponent = () => (\n  <Status text=\"Failure\">\n    <ExclamationCircleIcon\n      data-testid=\"fail-icon\"\n      color={global_danger_color_100.value}\n    />\n  </Status>\n);\n\nexport const NotificationStatusUnknown: React.FunctionComponent = () => (\n  <Status text=\"Unknown\">\n    <UnknownIcon data-testid=\"unknown-icon\" />\n  </Status>\n);\n\nexport const NotificationStatusProcessing: React.FunctionComponent = () => (\n  <Status text=\"Processing\">\n    <InProgressIcon data-testid=\"in-progress-icon\" />\n  </Status>\n);\n\nexport const NotificationStatusSent: React.FunctionComponent = () => (\n  <Status text=\"Sent\">\n    <CheckCircleIcon\n      data-testid=\"success-icon\"\n      color={global_success_color_100.value}\n    />\n  </Status>\n);\n\nexport const NotificationStatusSuccess: React.FunctionComponent = () => (\n  <Status text=\"Success\">\n    <CheckCircleIcon\n      data-testid=\"success-icon\"\n      color={global_success_color_100.value}\n    />\n  </Status>\n);\n\nexport const NotificationStatusWarning: React.FunctionComponent = () => (\n  <Status text=\"Warning\">\n    <ExclamationTriangleIcon color={c_alert_m_warning__icon_Color.value} />\n  </Status>\n);\n","import * as React from 'react';\n\nimport { TableHelpPopover } from '../../TableHelpPopover/TableHelpPopover';\nimport {\n  NotificationStatusFailed,\n  NotificationStatusProcessing,\n  NotificationStatusSent,\n  NotificationStatusSuccess,\n  NotificationStatusWarning,\n} from '../NotificationStatus';\n\nconst tableData: ReadonlyArray<[React.ReactNode, React.ReactNode]> = [\n  [\n    <NotificationStatusSuccess key=\"status-success\" />,\n    'The notification was executed successfully',\n  ],\n  [\n    <NotificationStatusSent key=\"status-sent\" />,\n    'The notification was sent for processing - but there is no way to assert if it was executed successfully',\n  ],\n  [\n    <NotificationStatusWarning key=\"status-warning\" />,\n    'The notification was executed successfully after some retries',\n  ],\n  [\n    <NotificationStatusProcessing key=\"status-processing\" />,\n    'The notification was sent for processing and is awaiting an outcome result',\n  ],\n  [\n    <NotificationStatusFailed key=\"status-failed-externally\" />,\n    'An unexpected error occurred while processing the notification',\n  ],\n];\n\nexport const ActionsHelpPopover: React.FunctionComponent<unknown> = (props) => (\n  <TableHelpPopover title=\"Action status meaning\" tableBody={tableData}>\n    <>{props.children}</>\n  </TableHelpPopover>\n);\n","import { Skeleton, Tooltip } from '@patternfly/react-core';\nimport {\n  TableComposable,\n  TableVariant,\n  Tbody,\n  Td,\n  Th,\n  Thead,\n  Tr,\n} from '@patternfly/react-table';\nimport assertNever from 'assert-never';\nimport { important } from 'csx';\nimport * as React from 'react';\nimport { useAsync } from 'react-use';\nimport { style } from 'typestyle';\n\nimport Config from '../../../config/Config';\nimport {\n  NotificationEventAction,\n  NotificationEventStatus,\n} from '../../../types/Event';\nimport {\n  GetIntegrationRecipient,\n  IntegrationType,\n} from '../../../types/Integration';\nimport {\n  NotificationStatusFailed,\n  NotificationStatusProcessing,\n  NotificationStatusSent,\n  NotificationStatusSuccess,\n  NotificationStatusUnknown,\n  NotificationStatusWarning,\n} from '../NotificationStatus';\n\nconst headerClass = style({\n  minWidth: important('90px'),\n});\n\ninterface EventLogActionPopoverContentProps {\n  action: NotificationEventAction;\n  getIntegrationRecipient: GetIntegrationRecipient;\n}\n\nconst toDisplayStatus = (status: NotificationEventStatus) => {\n  switch (status.last) {\n    case 'SUCCESS':\n      if (status.isDegraded) {\n        return <NotificationStatusWarning />;\n      }\n\n      return <NotificationStatusSuccess />;\n    case 'SENT':\n      return <NotificationStatusSent />;\n    case 'PROCESSING':\n      return <NotificationStatusProcessing />;\n    case 'FAILED':\n      return <NotificationStatusFailed />;\n    case 'UNKNOWN':\n      return <NotificationStatusUnknown />;\n    default:\n      assertNever(status.last);\n  }\n};\n\nconst succeeded = (action: NotificationEventAction) => {\n  if (action.endpointType === IntegrationType.EMAIL_SUBSCRIPTION) {\n    return 'emails sent';\n  }\n\n  return 'succeeded';\n};\n\nconst failed = (action: NotificationEventAction) => {\n  if (action.endpointType === IntegrationType.EMAIL_SUBSCRIPTION) {\n    return 'emails failed';\n  }\n\n  return 'failed';\n};\n\nexport const EventLogActionPopoverContent: React.FunctionComponent<EventLogActionPopoverContentProps> =\n  (props) => {\n    const {\n      action: { id },\n      getIntegrationRecipient,\n    } = props;\n    const recipient = useAsync(\n      async () => id && getIntegrationRecipient(id),\n      [id, getIntegrationRecipient]\n    );\n\n    return (\n      <TableComposable\n        borders={false}\n        variant={TableVariant.compact}\n        isStickyHeader={true}\n      >\n        <Thead>\n          <Tr>\n            <Th className={headerClass}>Action</Th>\n            <Th className={headerClass}>Recipient</Th>\n            <Th className={headerClass}>Status</Th>\n          </Tr>\n        </Thead>\n        <Tbody>\n          <Tr>\n            <Td>\n              {Config.integrations.types[props.action.endpointType].action}\n            </Td>\n            <Td>\n              {id ? (\n                recipient.loading ? (\n                  <Skeleton width=\"150px\" />\n                ) : (\n                  recipient.value\n                )\n              ) : (\n                <Tooltip content=\"The integration no longer exists, it could have been deleted.\">\n                  <span>Unknown integration</span>\n                </Tooltip>\n              )}\n            </Td>\n            <Td>\n              <div>{toDisplayStatus(props.action.status)}</div>\n              {props.action.successCount > 1 && (\n                <div className=\"pf-v5-u-color-300\">\n                  {props.action.successCount} {succeeded(props.action)}{' '}\n                </div>\n              )}\n              {props.action.errorCount > 1 && (\n                <div className=\"pf-v5-u-color-300\">\n                  {props.action.errorCount} {failed(props.action)}{' '}\n                </div>\n              )}\n            </Td>\n          </Tr>\n        </Tbody>\n      </TableComposable>\n    );\n  };\n","import {\n  Button,\n  ButtonVariant,\n  EmptyStateVariant,\n  Label,\n  LabelGroup,\n  LabelProps,\n  Popover,\n  Skeleton,\n} from '@patternfly/react-core';\nimport {\n  CheckCircleIcon,\n  ExclamationCircleIcon,\n  ExclamationTriangleIcon,\n  HelpIcon,\n  InProgressIcon,\n  UnknownIcon,\n} from '@patternfly/react-icons';\nimport {\n  IExtraColumnData,\n  SortByDirection,\n  TableComposable,\n  Tbody,\n  Td,\n  Th,\n  ThProps,\n  Thead,\n  Tr,\n} from '@patternfly/react-table';\nimport DateFormat from '@redhat-cloud-services/frontend-components/DateFormat';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport Config from '../../../config/Config';\nimport { Messages } from '../../../properties/Messages';\nimport {\n  NotificationEvent,\n  NotificationEventStatus,\n} from '../../../types/Event';\nimport { GetIntegrationRecipient } from '../../../types/Integration';\nimport { EmptyStateSearch } from '../../EmptyStateSearch';\nimport { ActionsHelpPopover } from './ActionsHelpPopover';\nimport { EventLogActionPopoverContent } from './EventLogActionPopoverContent';\n\nexport type SortDirection = 'asc' | 'desc';\n\nexport interface EventLogTableProps {\n  events: ReadonlyArray<NotificationEvent>;\n  loading: boolean;\n  onSort: (column: EventLogTableColumns, direction: SortDirection) => void;\n  sortColumn: EventLogTableColumns;\n  sortDirection: SortDirection;\n  getIntegrationRecipient: GetIntegrationRecipient;\n}\n\nexport enum EventLogTableColumns {\n  EVENT,\n  SERVICE,\n  DATE,\n}\n\nconst labelClassName = style({\n  cursor: 'pointer',\n});\n\nexport const toLabelProps = (\n  actionStatus: NotificationEventStatus\n): Pick<LabelProps, 'color' | 'icon'> => {\n  switch (actionStatus.last) {\n    case 'FAILED':\n      return {\n        color: 'red',\n        icon: <ExclamationCircleIcon />,\n      };\n    case 'SENT':\n    case 'SUCCESS':\n      if (actionStatus.isDegraded) {\n        return {\n          color: 'orange',\n          icon: <ExclamationTriangleIcon />,\n        };\n      }\n\n      return {\n        color: 'green',\n        icon: <CheckCircleIcon />,\n      };\n    case 'PROCESSING':\n      return {\n        color: 'grey',\n        icon: <InProgressIcon />,\n      };\n    case 'UNKNOWN':\n      return {\n        color: 'grey',\n        icon: <UnknownIcon />,\n      };\n    default:\n      assertNever(actionStatus.last);\n  }\n};\n\nexport const EventLogTable: React.FunctionComponent<EventLogTableProps> = (\n  props\n) => {\n  const onSort = React.useCallback(\n    (\n      _event: React.MouseEvent,\n      columnIndex: number,\n      sortByDirection: SortByDirection,\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      _extraData: IExtraColumnData\n    ) => {\n      const externalOnSort = props.onSort;\n      externalOnSort(columnIndex, sortByDirection);\n    },\n    [props.onSort]\n  );\n\n  const sortOptions: Record<EventLogTableColumns, undefined | ThProps['sort']> =\n    React.useMemo(\n      () => ({\n        [EventLogTableColumns.EVENT]: undefined,\n        [EventLogTableColumns.SERVICE]: undefined,\n        [EventLogTableColumns.DATE]: {\n          sortBy: {\n            direction: props.sortDirection,\n            index: props.sortColumn,\n          },\n          columnIndex: EventLogTableColumns.DATE,\n          onSort,\n        },\n      }),\n      [props.sortColumn, props.sortDirection, onSort]\n    );\n\n  const rows = React.useMemo(() => {\n    const events = props.events;\n    if (props.loading) {\n      return [...Array(10)].map((_, i) => (\n        <Tr key={`loading-row-${i}`}>\n          <Td>\n            <Skeleton />\n          </Td>\n          <Td>\n            <Skeleton />\n          </Td>\n          <Td>\n            <Skeleton />\n          </Td>\n          <Td>\n            <Skeleton />\n          </Td>\n        </Tr>\n      ));\n    } else {\n      return events.map((e) => (\n        <Tr key={e.id}>\n          <Td>{e.event}</Td>\n          <Td>\n            {e.application} - {e.bundle}\n          </Td>\n          <Td>\n            {e.actions.length > 0 ? (\n              <LabelGroup>\n                {e.actions.map((a) => (\n                  <Popover\n                    key={a.id}\n                    hasAutoWidth\n                    bodyContent={\n                      <EventLogActionPopoverContent\n                        action={a}\n                        getIntegrationRecipient={props.getIntegrationRecipient}\n                      />\n                    }\n                  >\n                    <Label\n                      className={labelClassName}\n                      {...toLabelProps(a.status)}\n                    >\n                      {Config.integrations.types[a.endpointType].action}\n                    </Label>\n                  </Popover>\n                ))}\n              </LabelGroup>\n            ) : (\n              'No actions'\n            )}\n          </Td>\n          <Td>\n            <DateFormat type=\"exact\" date={e.date} />\n          </Td>\n        </Tr>\n      ));\n    }\n  }, [props.loading, props.events, props.getIntegrationRecipient]);\n\n  if (rows.length === 0) {\n    return (\n      <EmptyStateSearch\n        variant={EmptyStateVariant.full}\n        title={Messages.components.eventLog.table.notFound.title}\n        description={Messages.components.eventLog.table.notFound.description}\n      />\n    );\n  }\n\n  return (\n    <TableComposable isStickyHeader={true}>\n      <Thead>\n        <Tr>\n          <Th sort={sortOptions[EventLogTableColumns.EVENT]}>Event type</Th>\n          <Th sort={sortOptions[EventLogTableColumns.SERVICE]}>Service</Th>\n          <Th>\n            Action taken{' '}\n            <ActionsHelpPopover>\n              <Button variant={ButtonVariant.plain}>\n                <HelpIcon />\n              </Button>\n            </ActionsHelpPopover>\n          </Th>\n          <Th sort={sortOptions[EventLogTableColumns.DATE]}>Date and time</Th>\n        </Tr>\n      </Thead>\n      <Tbody>{rows}</Tbody>\n    </TableComposable>\n  );\n};\n","import {\n  getInsights,\n  getInsightsEnvironment,\n} from '@redhat-cloud-services/insights-common-typescript';\n\nimport { getNotificationActions } from '../config/Config';\nimport { NotificationType } from '../types/Notification';\n\nexport const useNotifications = (): ReadonlyArray<NotificationType> => {\n  const insights = getInsights();\n  const environment = getInsightsEnvironment(insights);\n\n  return getNotificationActions(environment);\n};\n","import {\n  ClearFilters,\n  Filters,\n  SetFilters,\n} from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum EventLogFilterColumn {\n  EVENT = 'event',\n  BUNDLE = 'bundle',\n  SERVICE = 'service',\n  ACTION_TYPE = 'endpointTypes',\n  ACTION_STATUS = 'status',\n}\n\nexport type EventLogFilters = Filters<typeof EventLogFilterColumn>;\nexport type SetEventLogFilters = SetFilters<typeof EventLogFilterColumn>;\nexport type ClearEventLogFilters = ClearFilters<typeof EventLogFilterColumn>;\n","// Array utilities\n\nexport const intersect = <T>(\n  arr1: ReadonlyArray<T>,\n  arr2: ReadonlyArray<T>\n): Array<T> => arr1.filter((e) => arr2.includes(e));\nexport const diff = <T>(\n  arr: ReadonlyArray<T>,\n  minus: ReadonlyArray<T>\n): Array<T> => arr.filter((e) => !minus.includes(e));\n\nexport const areEqual = <T>(\n  arr1: ReadonlyArray<T>,\n  arr2: ReadonlyArray<T>,\n  noOrder?: boolean\n): boolean => {\n  if (!arr1 || !arr2) {\n    return false;\n  } else if (arr1 === arr2) {\n    return true;\n  } else if (arr1.length === arr2.length) {\n    return arr1.every((e, idx) => {\n      if (\n        (noOrder && arr2.includes(e)) ||\n        (!noOrder && arr1[idx] === arr2[idx])\n      ) {\n        return true;\n      }\n\n      return false;\n    });\n  } else {\n    return false;\n  }\n};\n","import {\n  Dropdown,\n  DropdownToggle,\n  TreeView,\n  TreeViewDataItem,\n} from '@patternfly/react-core';\nimport { TreeViewCheckProps } from '@patternfly/react-core/dist/esm/components/TreeView/TreeViewListItem';\nimport { AngleDownIcon } from '@patternfly/react-icons';\nimport produce from 'immer';\nimport React, { ChangeEvent } from 'react';\n\nimport { Schemas } from '../../../generated/OpenapiNotifications';\nimport { Modify } from '../../../types/Modify';\nimport { areEqual } from '../../../utils/Arrays';\nimport { EventLogCustomFilter } from './usePrimaryToolbarFilterConfigWrapper';\n\ninterface EventLogTreeFilterProps {\n  groups: readonly Schemas.Facet[];\n  placeholder: string;\n  filters: EventLogCustomFilter[];\n  updateFilters: React.Dispatch<React.SetStateAction<EventLogCustomFilter[]>>;\n}\n\ntype TreeNodeItem = Modify<\n  TreeViewDataItem,\n  {\n    id: string;\n    checkProps: TreeViewCheckProps;\n    children?: TreeNodeItem[] | undefined;\n  }\n>;\n\ninterface TreeNodeDict {\n  [key: string]: TreeNodeItem;\n}\n\nconst isChecked = (treeNode: TreeNodeItem) => {\n  return !!treeNode.checkProps.checked;\n};\n\nconst childChecked = (treeNode: TreeNodeItem): boolean => {\n  return treeNode.children\n    ? treeNode.children.some((child) => childChecked(child))\n    : isChecked(treeNode);\n};\n\nconst allChildrenChecked = (treeNode: TreeNodeItem): boolean => {\n  return treeNode.children\n    ? treeNode.children.every((child) => allChildrenChecked(child))\n    : isChecked(treeNode);\n};\n\nconst initTreeNodeById = (\n  groups: readonly Schemas.Facet[],\n  filters: EventLogCustomFilter[]\n) => {\n  const init: TreeNodeDict = {};\n  groups.forEach((group) => {\n    const currentFilter = filters.find(\n      (filter) => filter.bundleId === group.name\n    );\n    const currentFilterChipValues = currentFilter?.chips?.map(\n      (chip) => chip.value\n    );\n\n    const items = group.children as Schemas.Facet[];\n    const checkAll =\n      items.length !== 0\n        ? items.every((item) => currentFilterChipValues?.includes(item.name))\n        : false;\n    init[group.name] = {\n      id: group.name,\n      name: group.displayName,\n      checkProps: { checked: checkAll || (!currentFilter ? false : null) },\n      children:\n        items.length !== 0\n          ? items.map((item) => ({\n              id: item.name,\n              name: item.displayName,\n              checkProps: {\n                checked:\n                  checkAll || currentFilterChipValues?.includes(item.name),\n              },\n            }))\n          : undefined,\n    };\n  });\n\n  return init;\n};\n\nexport const EventLogTreeFilter: React.FunctionComponent<EventLogTreeFilterProps> =\n  (props) => {\n    const { groups, placeholder, filters, updateFilters } = props;\n\n    const initialize = React.useMemo(\n      () => initTreeNodeById(groups, filters),\n      [groups, filters]\n    );\n\n    const [treeNodeById, setTreeNodeById] =\n      React.useState<TreeNodeDict>(initialize);\n    const [isToggled, setIsToggled] = React.useState(false);\n\n    const treeDataArray = React.useMemo(\n      () => Object.values(treeNodeById),\n      [treeNodeById]\n    );\n\n    const [activeFilters, activeBundleIds] = React.useMemo(() => {\n      const bundleIds: string[] = [];\n\n      const activeParentFilters = treeDataArray.filter(\n        (treeNode) =>\n          treeNode.checkProps.checked || treeNode.checkProps.checked === null\n      );\n      const activeFilters = activeParentFilters.map((parentFilter) => {\n        bundleIds.push(parentFilter.id);\n        return {\n          bundleId: parentFilter.id,\n          category: parentFilter.name as string,\n          chips: parentFilter.children\n            ?.filter((childNode) => childNode.checkProps.checked)\n            .map((childFilter) => ({\n              name: childFilter.name as string,\n              value: childFilter.id,\n              isRead: true,\n            })) ?? [\n            {\n              name: parentFilter.name,\n              value: parentFilter.id,\n              isRead: true,\n            },\n          ],\n        } as EventLogCustomFilter;\n      });\n\n      return [activeFilters, bundleIds];\n    }, [treeDataArray]);\n\n    // Updates TreeView with changes made outside of the component (Network Requests returning && Delete/Clearing filters)\n    React.useEffect(() => {\n      if (groups.length !== 0) {\n        setTreeNodeById(\n          produce((prev) => {\n            if (Object.keys(prev).length === 0) {\n              return initialize;\n            } else if (filters.length === 0) {\n              return initialize;\n            } else {\n              filters.forEach((activeFilter) => {\n                const treeNode = prev[activeFilter.bundleId];\n                const activeChips = activeFilter.chips.map(\n                  (chip) => chip.value\n                );\n\n                treeNode.children?.forEach((childNode) => {\n                  childNode.checkProps.checked = activeChips.includes(\n                    childNode.id\n                  );\n                });\n\n                if (allChildrenChecked(treeNode)) {\n                  treeNode.checkProps.checked = true;\n                } else if (childChecked(treeNode)) {\n                  treeNode.checkProps.checked = null;\n                } else {\n                  treeNode.checkProps.checked = false;\n                }\n              });\n            }\n          })\n        );\n      }\n    }, [groups, filters, initialize]);\n\n    // Updates custom filters based on changes made inside TreeView component\n    React.useEffect(() => {\n      updateFilters(\n        produce((prev) => {\n          if (prev.length === 0 && activeFilters.length === 0) {\n            return prev;\n          } else if (prev.length !== 0 && activeFilters.length === 0) {\n            return [];\n          } else {\n            const prevBundles = prev.map((prevFilter) => prevFilter.bundleId);\n\n            const areBundlesEqual = areEqual(prevBundles, activeBundleIds);\n            const areFiltersEqual =\n              areBundlesEqual &&\n              activeFilters.every((entry, idx) => {\n                if (prev[idx]) {\n                  if (entry.bundleId === prev[idx].bundleId) {\n                    const prevChips = prev[idx].chips.map((chip) => chip.value);\n                    const currChips = entry.chips.map((chip) => chip.value);\n\n                    return areEqual(prevChips, currChips, true);\n                  }\n                }\n\n                return false;\n              });\n\n            return areFiltersEqual ? prev : activeFilters;\n          }\n        })\n      );\n    }, [activeFilters, activeBundleIds, updateFilters]);\n\n    const onCheck = (\n      event: ChangeEvent<HTMLInputElement>,\n      treeNode: TreeNodeItem,\n      parentNode: TreeNodeItem\n    ) => {\n      const checked = event.target.checked;\n      setTreeNodeById(\n        produce((prev) => {\n          if (parentNode) {\n            const children = prev[parentNode.id].children;\n            children?.some((childNode) => {\n              if (childNode.id === treeNode.id) {\n                childNode.checkProps.checked = checked;\n                return true;\n              }\n\n              return false;\n            });\n\n            if (allChildrenChecked(prev[parentNode.id])) {\n              prev[parentNode.id].checkProps.checked = true;\n            } else if (childChecked(prev[parentNode.id])) {\n              prev[parentNode.id].checkProps.checked = null;\n            } else {\n              prev[parentNode.id].checkProps.checked = checked;\n            }\n          } else {\n            prev[treeNode.id].checkProps.checked = checked;\n            prev[treeNode.id].children?.forEach(\n              (leafNode) => (leafNode.checkProps.checked = checked)\n            );\n          }\n        })\n      );\n    };\n\n    const onCheckWrapper = (\n      event: ChangeEvent<Element>,\n      treeNode: TreeViewDataItem,\n      parentNode: TreeViewDataItem\n    ) => {\n      onCheck(\n        event as ChangeEvent<HTMLInputElement>,\n        treeNode as TreeNodeItem,\n        parentNode as TreeNodeItem\n      );\n    };\n\n    return (\n      <Dropdown\n        toggle={\n          <DropdownToggle\n            onToggle={() => setIsToggled(!isToggled)}\n            toggleIndicator={AngleDownIcon}\n          >\n            {placeholder}\n          </DropdownToggle>\n        }\n        isOpen={isToggled}\n      >\n        <TreeView\n          data={treeDataArray}\n          hasChecks={true}\n          onCheck={onCheckWrapper}\n        />\n      </Dropdown>\n    );\n  };\n","import { PaginationProps, PaginationVariant } from '@patternfly/react-core';\nimport {\n  CheckCircleIcon,\n  ExclamationCircleIcon,\n  ExclamationTriangleIcon,\n  InProgressIcon,\n} from '@patternfly/react-icons';\nimport PrimaryToolbar from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\nimport { ConditionalFilterProps } from '@redhat-cloud-services/frontend-components/ConditionalFilter';\nimport { FilterChipsProps } from '@redhat-cloud-services/frontend-components/FilterChips';\nimport {\n  ColumnsMetada,\n  OuiaComponentProps,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { Dispatch } from 'react';\nimport { SetStateAction } from 'react';\n\nimport Config from '../../../config/Config';\nimport { useIntegrations } from '../../../hooks/useIntegrations';\nimport { useNotifications } from '../../../hooks/useNotifications';\nimport { EventPeriod } from '../../../types/Event';\nimport { Facet, NotificationType } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport {\n  EventLogDateFilter,\n  EventLogDateFilterValue,\n} from './EventLogDateFilter';\nimport {\n  ClearEventLogFilters,\n  EventLogFilterColumn,\n  EventLogFilters,\n  SetEventLogFilters,\n} from './EventLogFilter';\nimport { usePrimaryToolbarFilterConfigWrapper } from './usePrimaryToolbarFilterConfigWrapper';\n\ninterface EventLogToolbarProps extends OuiaComponentProps {\n  filters: EventLogFilters;\n  setFilters: SetEventLogFilters;\n  clearFilter: ClearEventLogFilters;\n\n  bundleOptions: ReadonlyArray<Facet>;\n\n  pageCount: number;\n  count: number;\n  page: number;\n  perPage: number;\n  pageChanged: (page: number) => void;\n  perPageChanged: (page: number) => void;\n\n  dateFilter: EventLogDateFilterValue;\n  setDateFilter: (value: EventLogDateFilterValue) => void;\n\n  retentionDays: number;\n  period: EventPeriod;\n  setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nconst notificationTypes: Record<NotificationType, { name: string }> = {\n  [NotificationType.EMAIL_SUBSCRIPTION]: {\n    name: 'Email',\n  },\n  [NotificationType.DRAWER]: {\n    name: 'Drawer',\n  },\n  [NotificationType.INTEGRATION]: {\n    name: 'Integration',\n  },\n};\n\nconst actionStatusMetadata = [\n  {\n    value: 'SUCCESS',\n    chipValue: 'Success',\n    label: (\n      <span>\n        <CheckCircleIcon color=\"green\" /> Success\n      </span>\n    ),\n  },\n  {\n    value: 'SENT',\n    chipValue: 'Sent',\n    label: (\n      <span>\n        <CheckCircleIcon color=\"green\" /> Sent\n      </span>\n    ),\n  },\n  {\n    value: 'UNKNOWN',\n    chipValue: 'Warning',\n    label: (\n      <span>\n        <ExclamationTriangleIcon className=\"pf-v5-u-warning-color-100\" />{' '}\n        Warning{' '}\n      </span>\n    ),\n  },\n  {\n    value: 'PROCESSING',\n    chipValue: 'Processing',\n    label: (\n      <span>\n        <InProgressIcon /> Processing{' '}\n      </span>\n    ),\n  },\n  {\n    value: 'FAILED',\n    chipValue: 'Failure',\n    label: (\n      <span>\n        <ExclamationCircleIcon color=\"red\" /> Failure\n      </span>\n    ),\n  },\n];\n\nexport const EventLogToolbar: React.FunctionComponent<EventLogToolbarProps> = (\n  props\n) => {\n  const notifications = useNotifications();\n  const integrations = useIntegrations();\n\n  const actionTypeMetadata = React.useMemo(() => {\n    return notifications\n      .map((notification) => ({\n        value: notification.toUpperCase(),\n        chipValue: notificationTypes[notification].name,\n        label: notificationTypes[notification].name,\n      }))\n      .concat(\n        integrations.map((integration) => ({\n          value: integration.toUpperCase(),\n          chipValue: Config.integrations.types[integration].name,\n          label: Config.integrations.types[integration].name,\n        }))\n      );\n  }, [notifications, integrations]);\n\n  const filterMetadata = React.useMemo<\n    Partial<ColumnsMetada<typeof EventLogFilterColumn>>\n  >(() => {\n    return {\n      [EventLogFilterColumn.EVENT]: {\n        label: 'Event',\n        placeholder: 'Filter by event',\n      },\n      [EventLogFilterColumn.SERVICE]: {\n        label: 'Service',\n        placeholder: 'Filter by service',\n      },\n      [EventLogFilterColumn.ACTION_TYPE]: {\n        label: 'Action Type',\n        placeholder: 'Filter by action type',\n        options: {\n          exclusive: false,\n          items: actionTypeMetadata,\n        },\n      },\n      [EventLogFilterColumn.ACTION_STATUS]: {\n        label: 'Action Status',\n        placeholder: 'Filter by action status',\n        options: {\n          exclusive: false,\n          items: actionStatusMetadata,\n        },\n      },\n    };\n  }, [actionTypeMetadata]);\n\n  const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfigWrapper(\n    props.bundleOptions,\n    props.filters,\n    props.setFilters,\n    props.clearFilter,\n    filterMetadata as ColumnsMetada<typeof EventLogFilterColumn>\n  );\n\n  const pageChanged = React.useCallback(\n    (_event: unknown, page: number) => {\n      const inner = props.pageChanged;\n      inner(page);\n    },\n    [props.pageChanged]\n  );\n\n  const perPageChanged = React.useCallback(\n    (_event: unknown, perPage: number) => {\n      const inner = props.perPageChanged;\n      inner(perPage);\n    },\n    [props.perPageChanged]\n  );\n\n  const topPaginationProps = React.useMemo<PaginationProps>(\n    () => ({\n      itemCount: props.count,\n      page: props.page,\n      perPage: props.perPage,\n      isCompact: true,\n      variant: PaginationVariant.top,\n      onSetPage: pageChanged,\n      onFirstClick: pageChanged,\n      onPreviousClick: pageChanged,\n      onNextClick: pageChanged,\n      onLastClick: pageChanged,\n      onPageInput: pageChanged,\n      onPerPageSelect: perPageChanged,\n    }),\n    [props.count, props.page, props.perPage, pageChanged, perPageChanged]\n  );\n\n  const bottomPaginationProps = React.useMemo<PaginationProps>(\n    () => ({\n      ...topPaginationProps,\n      isCompact: false,\n      variant: PaginationVariant.bottom,\n    }),\n    [topPaginationProps]\n  );\n\n  return (\n    <div {...getOuiaProps('Notifications/EventLog/DualToolbar', props)}>\n      <PrimaryToolbar\n        {...primaryToolbarFilterConfig}\n        filterConfig={\n          primaryToolbarFilterConfig.filterConfig as ConditionalFilterProps\n        }\n        activeFiltersConfig={\n          primaryToolbarFilterConfig.activeFiltersConfig as FilterChipsProps\n        }\n        dedicatedAction={\n          <EventLogDateFilter\n            value={props.dateFilter}\n            setValue={props.setDateFilter}\n            retentionDays={props.retentionDays}\n            setPeriod={props.setPeriod}\n            period={props.period}\n          />\n        }\n        pagination={topPaginationProps}\n      />\n      {props.children}\n      <PrimaryToolbar pagination={bottomPaginationProps} />\n    </div>\n  );\n};\n","import {\n  ColumnsMetada,\n  usePrimaryToolbarFilterConfig,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport produce from 'immer';\nimport React from 'react';\n\nimport { Schemas } from '../../../generated/OpenapiNotifications';\nimport { areEqual } from '../../../utils/Arrays';\nimport {\n  ClearEventLogFilters,\n  EventLogFilterColumn,\n  EventLogFilters,\n  SetEventLogFilters,\n} from './EventLogFilter';\nimport { EventLogTreeFilter } from './EventLogTreeFilter';\n\nexport interface EventLogCustomFilter {\n  bundleId: string;\n  category: string;\n  chips: Array<{ name: string; value: string; isRead: boolean }>;\n}\n\n// Wrapper hook that gets the PrimaryToolbarFilterConfig and adds a custom conditional filter using Dropdown/Tree components\n// usePrimaryToolbarFilterConfig only supports 3 filter types: checkbox, radio, and text, so this extends that\nexport const usePrimaryToolbarFilterConfigWrapper = (\n  bundles: readonly Schemas.Facet[],\n  filters: EventLogFilters,\n  setFilters: SetEventLogFilters,\n  clearFilter: ClearEventLogFilters,\n  metaData: ColumnsMetada<typeof EventLogFilterColumn>\n) => {\n  const [customFilters, setCustomFilters] = React.useState(\n    [] as EventLogCustomFilter[]\n  );\n  const toolbarConfig = usePrimaryToolbarFilterConfig(\n    EventLogFilterColumn,\n    filters,\n    setFilters,\n    clearFilter,\n    metaData\n  );\n\n  const defaultDelete = React.useMemo(\n    () => toolbarConfig.activeFiltersConfig.onDelete,\n    [toolbarConfig.activeFiltersConfig.onDelete]\n  );\n  const customDelete = React.useCallback(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (_event: any, rawFilterConfigs: EventLogCustomFilter[]) => {\n      const regularFilterConfigs: EventLogCustomFilter[] = [];\n      const customFilterConfigs: EventLogCustomFilter[] = [];\n      rawFilterConfigs.forEach((filterConfig) => {\n        if (filterConfig.bundleId) {\n          customFilterConfigs.push(filterConfig);\n        } else {\n          regularFilterConfigs.push(filterConfig);\n        }\n      });\n\n      defaultDelete(_event, regularFilterConfigs);\n\n      if (customFilterConfigs.length !== 0) {\n        setCustomFilters(\n          produce((prev) => {\n            const idxToRemove: number[] = [];\n            prev.forEach((activeFilter, idx) => {\n              customFilterConfigs.some((deleteFilter) => {\n                if (activeFilter.bundleId === deleteFilter.bundleId) {\n                  const deletedChipValues = deleteFilter.chips.map(\n                    (chip) => chip.value\n                  );\n                  activeFilter.chips = activeFilter.chips.filter(\n                    (chip) => !deletedChipValues.includes(chip.value)\n                  );\n\n                  if (activeFilter.chips.length === 0) {\n                    idxToRemove.push(idx);\n                  }\n\n                  return true;\n                }\n\n                return false;\n              });\n            });\n\n            idxToRemove.forEach((idx, adjusted) => {\n              prev.splice(idx - adjusted, 1);\n            });\n          })\n        );\n      }\n    },\n    [defaultDelete, setCustomFilters]\n  );\n\n  // Converts URL Query Params to Filter Obj\n  const mapToEventLogCustomFilter = React.useCallback(\n    (filters: EventLogFilters, bundles?: readonly Schemas.Facet[]) => {\n      const createCustomFilterObj = (\n        bundleName: string,\n        bundle: Schemas.Facet | undefined,\n        applications: Schemas.Facet[] | undefined | null\n      ) => {\n        const bundleDisplayName = bundle?.displayName;\n        const applicationChips = !bundle?.children\n          ? [\n              {\n                name: 'Loading',\n                value: bundleName,\n                isRead: true,\n              },\n            ]\n          : applications?.length !== 0\n          ? applications?.map((application) => ({\n              name: application.displayName,\n              value: application.name,\n              isRead: true,\n            }))\n          : [\n              {\n                name: bundle.displayName,\n                value: bundle.name,\n                isRead: true,\n              },\n            ];\n\n        return {\n          bundleId: bundleName,\n          category: bundleDisplayName || `${bundleName} Loading...`,\n          chips: applicationChips,\n        };\n      };\n\n      const applicationsByBundle: { [key: string]: string[] } = {};\n      (filters.service as string[])?.forEach((queryParam) => {\n        const nameSplit = queryParam.split('.');\n        const bundleName = nameSplit[0];\n        const service = nameSplit[1];\n\n        if (!applicationsByBundle[bundleName]) {\n          applicationsByBundle[bundleName] = [service];\n        } else {\n          applicationsByBundle[bundleName].push(service);\n        }\n      });\n\n      const partialBundleFilters = Object.keys(applicationsByBundle).map(\n        (bundleName) => {\n          const bundle = bundles?.find((bundle) => bundle.name === bundleName);\n          const applications = bundle?.children?.filter((application) =>\n            applicationsByBundle[bundleName].includes(application.name)\n          );\n          return createCustomFilterObj(bundleName, bundle, applications);\n        }\n      );\n\n      const completeBundleFilters =\n        (filters.bundle as string[])?.map((queryParam) => {\n          const bundle = bundles?.find((bundle) => bundle.name === queryParam);\n          return createCustomFilterObj(queryParam, bundle, bundle?.children);\n        }) || [];\n\n      return completeBundleFilters.concat(\n        partialBundleFilters\n      ) as EventLogCustomFilter[];\n    },\n    []\n  );\n\n  // Run ONLY twice\n  //     1st - setup loading placeholders for filters\n  //     2nd - render actual filter bundles/applications\n  React.useEffect(() => {\n    setCustomFilters(\n      mapToEventLogCustomFilter(\n        filters,\n        bundles.length !== 0 ? bundles : undefined\n      )\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [bundles, mapToEventLogCustomFilter]);\n\n  const applicationFilter = React.useMemo(() => {\n    return {\n      label: 'Service',\n      type: 'custom',\n      filterValues: {\n        children: (\n          <EventLogTreeFilter\n            groups={bundles}\n            placeholder={'Filter by service'}\n            filters={customFilters}\n            updateFilters={setCustomFilters}\n          />\n        ),\n      },\n    } as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n  }, [bundles, customFilters]);\n\n  const activeFiltersConfig = React.useMemo(() => {\n    const activeFilters = toolbarConfig.activeFiltersConfig\n      .filters as EventLogCustomFilter[];\n    const nonCustomFilters = activeFilters.filter(\n      (activeFilter) => activeFilter && !activeFilter.bundleId\n    );\n    return nonCustomFilters.concat(customFilters);\n  }, [customFilters, toolbarConfig.activeFiltersConfig.filters]);\n\n  // Update URL Query Params for Bundles\n  const bundleProducer = React.useMemo(() => {\n    return produce(filters.bundle, (prev) => {\n      if (bundles.length === 0) {\n        return;\n      }\n\n      const currBundleFilters: string[] = [];\n      bundles.forEach((bundle) => {\n        const addToQueryParam = customFilters.some((bundleFilter) => {\n          if (bundleFilter.bundleId === bundle.name) {\n            // Edge case: Bundle has no children (but it gets a chip for UI reasons)\n            if (\n              bundle.children?.length === 0 &&\n              bundleFilter.chips.length === 1\n            ) {\n              return true;\n            }\n\n            return bundle.children?.length === bundleFilter.chips.length;\n          }\n\n          return false;\n        });\n\n        if (addToQueryParam) {\n          currBundleFilters.push(bundle.name);\n        }\n      });\n\n      return areEqual(prev as string[], currBundleFilters, true)\n        ? prev\n        : currBundleFilters;\n    });\n  }, [bundles, filters.bundle, customFilters]);\n\n  // Update URL Query Params for Bundles\n  const applicationProducer = React.useMemo(() => {\n    return produce(filters.service, (prev) => {\n      if (bundles.length === 0) {\n        return;\n      }\n\n      const currApplicationFilters: string[] = [];\n      customFilters.forEach((customFilter) => {\n        const bundle = bundles.find(\n          (bundle) => bundle.name === customFilter.bundleId\n        ) as Schemas.Facet;\n        const chipValues = customFilter.chips?.map((chip) => chip.value) as\n          | string[]\n          | undefined;\n\n        // Only add applications to Query Params under 2 conditions\n        //     1. Bundle has children\n        //     2. Every application under the Bundle is not selected\n        if (\n          chipValues &&\n          bundle.children?.some(\n            (application) => !chipValues.includes(application.name)\n          )\n        ) {\n          chipValues.forEach((chipValue) => {\n            const applicationQueryParam = `${bundle.name}.${chipValue}`;\n            currApplicationFilters.push(applicationQueryParam);\n          });\n        }\n      });\n\n      return areEqual(prev as string[], currApplicationFilters, true)\n        ? prev\n        : currApplicationFilters;\n    });\n  }, [bundles, filters.service, customFilters]);\n\n  setFilters.bundle(bundleProducer);\n  setFilters.service(applicationProducer);\n\n  return produce(toolbarConfig, (prev) => {\n    prev.filterConfig.items[1] = applicationFilter;\n\n    prev.activeFiltersConfig.filters = activeFiltersConfig;\n    prev.activeFiltersConfig.onDelete = customDelete;\n  });\n};\n","import { Split, SplitItem, Text, TextContent } from '@patternfly/react-core';\nimport PageHeaderFC from '@redhat-cloud-services/frontend-components/PageHeader';\nimport PageHeaderTitle from '@redhat-cloud-services/frontend-components/PageHeader/PageHeaderTitle';\nimport * as React from 'react';\n\ninterface PageHeaderProps {\n  title: React.ReactNode | string;\n  subtitle: React.ReactNode | string;\n  action?: React.ReactNode;\n}\n\nexport const PageHeader: React.FunctionComponent<PageHeaderProps> = (props) => {\n  return (\n    <PageHeaderFC className=\"pf-v5-u-pb-md\">\n      <Split>\n        <SplitItem isFilled>\n          <PageHeaderTitle title={props.title} />\n          <TextContent className=\"pf-v5-u-pt-sm\">\n            <Text>{props.subtitle}</Text>\n          </TextContent>\n        </SplitItem>\n        {props.action && (\n          <SplitItem className=\"pf-v5-u-ml-3xl\">{props.action}</SplitItem>\n        )}\n      </Split>\n    </PageHeaderFC>\n  );\n};\n","import { fromUtc } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { Schemas } from '../../generated/OpenapiNotifications';\nimport { NotificationEvent, NotificationEventAction } from '../Event';\nimport { UUID } from '../Notification';\nimport { getIntegrationType } from './IntegrationAdapter';\n\ntype ServerEvent = Schemas.EventLogEntry;\n\nexport const toNotificationEvent = (\n  serverEvent: ServerEvent\n): NotificationEvent => ({\n  id: serverEvent.id,\n  bundle: serverEvent.bundle,\n  application: serverEvent.application,\n  event: serverEvent.event_type,\n  date: fromUtc(new Date(serverEvent.created)),\n  actions: sortEventActions(groupActions(serverEvent.actions)),\n});\n\nconst sortEventActions = (actions: Array<NotificationEventAction>) => {\n  return actions.sort((first, second) =>\n    first.endpointType.localeCompare(second.endpointType)\n  );\n};\n\nconst groupActions = (\n  actions: ServerEvent['actions']\n): Array<NotificationEventAction> => {\n  const actionsById: Record<UUID, NotificationEventAction> = {};\n  const actionsWithoutEndpoint: Array<NotificationEventAction> = [];\n\n  actions.forEach((action) => {\n    if (!action.endpoint_id) {\n      actionsWithoutEndpoint.push(initAction(action));\n      return;\n    }\n\n    if (!actionsById[action.endpoint_id]) {\n      actionsById[action.endpoint_id] = initAction(action);\n    } else {\n      const newAction = initAction(action);\n      const current = actionsById[action.endpoint_id];\n\n      if (isFailed(newAction.status.last)) {\n        current.status.isDegraded = true;\n      } else {\n        current.status.last = newAction.status.last;\n      }\n\n      current.errorCount += newAction.errorCount;\n      current.successCount += newAction.successCount;\n    }\n  });\n\n  return [...Object.values(actionsById), ...actionsWithoutEndpoint];\n};\n\nconst initAction = (\n  action: ServerEvent['actions'][number]\n): NotificationEventAction => ({\n  id: action.endpoint_id ?? undefined,\n  endpointType: getIntegrationType({\n    type: action.endpoint_type,\n    sub_type: action.endpoint_sub_type,\n  }),\n  status: {\n    last: action.status,\n    isDegraded: isFailed(action.status),\n  },\n  successCount: isFailed(action.status) ? 0 : 1,\n  errorCount: isFailed(action.status) ? 1 : 0,\n});\n\nconst isFailed = (status: ServerEvent['actions'][number]['status']): boolean =>\n  status === 'FAILED';\n","import {\n  Page,\n  useTransformQueryResponse,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport {\n  validatedResponse,\n  validationResponseTransformer,\n} from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toNotificationEvent } from '../../types/adapters/NotificationEventAdapter';\n\nconst eventDecoder = validationResponseTransformer(\n  (payload: Operations.EventResourceGetEvents.Payload) => {\n    if (payload.status === 200) {\n      return validatedResponse(\n        'Events',\n        200,\n        {\n          ...payload.value,\n          data: payload.value.data.map(toNotificationEvent),\n        },\n        payload.errors\n      );\n    }\n\n    return payload;\n  }\n);\n\nexport const useGetEvents = (page?: Page) => {\n  const query = (page ?? Page.defaultPage()).toQuery();\n  return useTransformQueryResponse(\n    useQuery(\n      Operations.EventResourceGetEvents.actionCreator({\n        limit: +query.limit,\n        offset: +query.offset,\n        bundleIds: query.filterBundleIds as [],\n        appIds: query.filterAppIds as [],\n        invocationResults: query.filterInvocationResults as [],\n        status: query.filterStatus as [],\n        endpointTypes: query.filterEndpointTypes as [],\n        startDate: query.filterStart as string,\n        endDate: query.filterEnd as string,\n        eventTypeDisplayName: query.filterEvent as string,\n        sortBy: `${query.sortColumn}:${query.sortDirection}`,\n        includeActions: true,\n      })\n    ),\n    eventDecoder\n  );\n};\n","import { Operations } from '../../generated/OpenapiIntegrations';\nimport { UUID } from '../../types/Notification';\n\nexport const getEndpointAction = (id: UUID) => {\n  return Operations.EndpointResourceGetEndpoint.actionCreator({\n    id,\n  });\n};\n","import {\n  Filter,\n  Operator,\n  toUtc,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { format, sub, toDate } from 'date-fns';\nimport { useCallback } from 'react';\n\nimport { EventLogDateFilterValue } from '../../../components/Notifications/EventLog/EventLogDateFilter';\nimport { EventLogFilters } from '../../../components/Notifications/EventLog/EventLogFilter';\nimport { EventPeriod } from '../../../types/Event';\nimport { Facet } from '../../../types/Notification';\n\nconst DATE_FORMAT = 'yyyy-MM-dd';\n\nexport const useFilterBuilder = (\n  bundles: ReadonlyArray<Facet>,\n  dateFilter: EventLogDateFilterValue,\n  period: EventPeriod\n) => {\n  return useCallback(\n    (filters?: EventLogFilters) => {\n      const filter = new Filter();\n      if (filters?.bundle) {\n        const selectedBundleNames = filters?.bundle;\n        const queryParams = bundles\n          .filter((b) => selectedBundleNames.includes(b.name))\n          .map((b) => b.id);\n        filter.and('bundleIds', Operator.EQUAL, queryParams);\n      }\n\n      if (filters?.service) {\n        const selectedAppNames = filters.service as string[];\n\n        const queryParams: string[] = [];\n        selectedAppNames.forEach((appName) => {\n          const nameSplit = appName.split('.');\n          const bundleName = nameSplit[0];\n          const applicationName = nameSplit[1];\n\n          const bundle = bundles.find((bundle) => bundle.name === bundleName);\n          if (bundle) {\n            const application = bundle.children?.find(\n              (application) => application.name === applicationName\n            );\n            if (application) {\n              queryParams.push(application.id);\n            }\n          }\n        });\n\n        filter.and('appIds', Operator.EQUAL, queryParams);\n      }\n\n      if (filters?.event) {\n        filter.and('event', Operator.EQUAL, filters.event);\n      }\n\n      if (filters?.status) {\n        filter.and('status', Operator.EQUAL, filters.status);\n      }\n\n      if (filters?.endpointTypes) {\n        filter.and('endpointTypes', Operator.EQUAL, filters.endpointTypes);\n      }\n\n      let filterPeriod = [undefined, undefined] as [\n        Date | undefined,\n        Date | undefined\n      ];\n      const today = toUtc(new Date());\n\n      switch (dateFilter) {\n        case EventLogDateFilterValue.LAST_14:\n          filterPeriod = [\n            sub(toDate(today), {\n              days: 14,\n            }),\n            today,\n          ];\n          break;\n        case EventLogDateFilterValue.LAST_7:\n          filterPeriod = [\n            sub(toDate(today), {\n              days: 7,\n            }),\n            today,\n          ];\n          break;\n        case EventLogDateFilterValue.TODAY:\n          filterPeriod = [today, today];\n          break;\n        case EventLogDateFilterValue.YESTERDAY: {\n          const yesterday = sub(toDate(today), {\n            days: 1,\n          });\n          filterPeriod = [yesterday, yesterday];\n          break;\n        }\n        case EventLogDateFilterValue.CUSTOM:\n          filterPeriod = period;\n          break;\n      }\n\n      if (filterPeriod[0] && filterPeriod[1]) {\n        filter.and(\n          'start',\n          Operator.EQUAL,\n          format(filterPeriod[0], DATE_FORMAT)\n        );\n        filter.and('end', Operator.EQUAL, format(filterPeriod[1], DATE_FORMAT));\n      }\n\n      return filter;\n    },\n    [bundles, dateFilter, period]\n  );\n};\n","import { ButtonVariant } from '@patternfly/react-core';\nimport {\n  Direction,\n  Sort,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { useFlag } from '@unleash/proxy-client-react';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\nimport { useParameterizedQuery } from 'react-fetching-library';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport { ButtonLink } from '../../../components/ButtonLink';\nimport { EventLogDateFilterValue } from '../../../components/Notifications/EventLog/EventLogDateFilter';\nimport { EventLogFilters } from '../../../components/Notifications/EventLog/EventLogFilter';\nimport {\n  EventLogTable,\n  EventLogTableColumns,\n  SortDirection,\n} from '../../../components/Notifications/EventLog/EventLogTable';\nimport { EventLogToolbar } from '../../../components/Notifications/EventLog/EventLogToolbar';\nimport { PageHeader } from '../../../components/PageHeader';\nimport Config from '../../../config/Config';\nimport { Schemas } from '../../../generated/OpenapiIntegrations';\nimport { usePage } from '../../../hooks/usePage';\nimport { Messages } from '../../../properties/Messages';\nimport { linkTo } from '../../../Routes';\nimport { useGetEvents } from '../../../services/EventLog/GetNotificationEvents';\nimport { getEndpointAction } from '../../../services/Integrations/GetEndpoint';\nimport { useGetBundles } from '../../../services/Notifications/GetBundles';\nimport { EventPeriod } from '../../../types/Event';\nimport { UUID } from '../../../types/Notification';\nimport { useEventLogFilter } from './useEventLogFilter';\nimport { useFilterBuilder } from './useFilterBuilder';\n\nconst RETENTION_DAYS = 14;\n\nexport const EventLogPage: React.FunctionComponent = () => {\n  const notificationsOverhaul = useFlag('platform.notifications.overhaul');\n  const getEndpoint = useParameterizedQuery(getEndpointAction);\n  const { rbac } = useAppContext();\n\n  const getBundles = useGetBundles(true);\n  const bundles = React.useMemo(() => {\n    const payload = getBundles.payload;\n    if (payload?.status === 200) {\n      return payload.value;\n    }\n\n    return [];\n  }, [getBundles.payload]);\n\n  const [dateFilter, setDateFilter] = React.useState<EventLogDateFilterValue>(\n    EventLogDateFilterValue.LAST_14\n  );\n\n  const eventLogFilters = useEventLogFilter();\n\n  const [period, setPeriod] = React.useState<EventPeriod>([\n    undefined,\n    undefined,\n  ]);\n\n  const [sortDirection, setSortDirection] =\n    React.useState<SortDirection>('desc');\n  const [sortColumn, setSortColumn] = React.useState<EventLogTableColumns>(\n    EventLogTableColumns.DATE\n  );\n\n  const onSort = React.useCallback(\n    (column: EventLogTableColumns, direction: SortDirection) => {\n      setSortDirection(direction);\n      setSortColumn(column);\n    },\n    [setSortDirection, setSortColumn]\n  );\n\n  const filterBuilder = useFilterBuilder(bundles, dateFilter, period);\n\n  const sort: Sort = React.useMemo(() => {\n    const direction = sortDirection.toUpperCase() as Direction;\n    let column: string;\n    if (sortColumn === EventLogTableColumns.DATE) {\n      column = 'created';\n    } else {\n      throw new Error(`Invalid sorting index: ${sortColumn}`);\n    }\n\n    return Sort.by(column, direction);\n  }, [sortColumn, sortDirection]);\n\n  const eventsPage = usePage<EventLogFilters>(\n    Config.paging.defaultPerPage,\n    filterBuilder,\n    eventLogFilters.filters,\n    sort\n  );\n  const eventsQuery = useGetEvents(eventsPage.page);\n\n  const events = React.useMemo(() => {\n    if (eventsQuery.payload?.status === 200) {\n      return {\n        data: eventsQuery.payload.value.data,\n        count: eventsQuery.payload.value.meta.count,\n      };\n    }\n\n    return {\n      data: [],\n      count: 0,\n    };\n  }, [eventsQuery]);\n\n  const eventNotificationPageUrl = React.useMemo(() => {\n    const bundles = eventLogFilters.filters.bundle as Array<string> | undefined;\n    if (bundles && bundles.length > 0) {\n      return linkTo.notifications(bundles[0]);\n    }\n\n    return linkTo.notifications('');\n  }, [eventLogFilters.filters]);\n\n  const getIntegrationRecipient = React.useCallback(\n    async (id: UUID) => {\n      const query = getEndpoint.query;\n      const endpoint = await query(id);\n      if (endpoint.payload?.type === 'Endpoint') {\n        const type = endpoint.payload.value.type;\n        switch (type) {\n          case 'camel':\n          case 'webhook':\n          case 'ansible':\n            return endpoint.payload.value.name;\n          case 'email_subscription':\n          case 'drawer': {\n            const properties = endpoint.payload.value\n              .properties as Schemas.EmailSubscriptionProperties;\n            if (properties.only_admins) {\n              return 'Users: Admin';\n            }\n\n            return 'Users: All';\n          }\n          default:\n            assertNever(type);\n        }\n      }\n\n      return 'Error while loading';\n    },\n    [getEndpoint.query]\n  );\n\n  return (\n    <>\n      <PageHeader\n        title={Messages.pages.notifications.eventLog.title}\n        subtitle={Messages.pages.notifications.eventLog.subtitle}\n        action={\n          !notificationsOverhaul && (\n            <ButtonLink\n              isDisabled={!rbac.canReadEvents}\n              to={eventNotificationPageUrl}\n              variant={ButtonVariant.secondary}\n            >\n              {Messages.pages.notifications.eventLog.viewNotifications}\n            </ButtonLink>\n          )\n        }\n      />\n      <EventLogToolbar\n        {...eventLogFilters}\n        bundleOptions={bundles}\n        dateFilter={dateFilter}\n        setDateFilter={setDateFilter}\n        count={events.count}\n        perPageChanged={eventsPage.changeItemsPerPage}\n        pageChanged={eventsPage.changePage}\n        perPage={eventsPage.page.size}\n        page={eventsPage.page.index}\n        pageCount={events.data.length}\n        retentionDays={RETENTION_DAYS}\n        period={period}\n        setPeriod={setPeriod}\n      >\n        <EventLogTable\n          events={events.data}\n          loading={eventsQuery.loading}\n          onSort={onSort}\n          sortColumn={sortColumn}\n          sortDirection={sortDirection}\n          getIntegrationRecipient={getIntegrationRecipient}\n        />\n      </EventLogToolbar>\n    </>\n  );\n};\n","import {\n  useFilters,\n  useUrlStateMultipleOptions,\n  useUrlStateString,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport assertNever from 'assert-never';\nimport { useMemo } from 'react';\n\nimport { EventLogFilterColumn } from '../../../components/Notifications/EventLog/EventLogFilter';\n\nconst DEBOUNCE_MS = 250;\n\nexport const useEventLogFilter = (debounce = DEBOUNCE_MS) => {\n  const useStateFactory = useMemo(() => {\n    const useService = () => useUrlStateMultipleOptions('service');\n    const useBundle = () => useUrlStateMultipleOptions('bundle');\n\n    const useActionType = () => useUrlStateMultipleOptions('endpointTypes');\n    const useActionStatus = () => useUrlStateMultipleOptions('status');\n\n    const useEvent = () => useUrlStateString('event');\n\n    return (column: EventLogFilterColumn) => {\n      switch (column) {\n        case EventLogFilterColumn.SERVICE:\n          return useService;\n        case EventLogFilterColumn.BUNDLE:\n          return useBundle;\n        case EventLogFilterColumn.EVENT:\n          return useEvent;\n        case EventLogFilterColumn.ACTION_TYPE:\n          return useActionType;\n        case EventLogFilterColumn.ACTION_STATUS:\n          return useActionStatus;\n        default:\n          assertNever(column);\n      }\n    };\n  }, []);\n\n  return useFilters(EventLogFilterColumn, debounce, useStateFactory);\n};\n","import { Bullseye } from '@patternfly/react-core';\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\nimport PageHeaderTitle from '@redhat-cloud-services/frontend-components/PageHeader/PageHeaderTitle';\nimport Section from '@redhat-cloud-services/frontend-components/Section';\nimport Skeleton from '@redhat-cloud-services/frontend-components/Skeleton';\nimport Spinner from '@redhat-cloud-services/frontend-components/Spinner';\nimport useOuia from '@redhat-cloud-services/frontend-components/Ouia/useOuia';\nimport * as React from 'react';\n\nexport const AppSkeleton: React.FunctionComponent = () => {\n  const ouia = useOuia({\n    type: 'AppSkeleton',\n  });\n\n  return (\n    <div {...ouia}>\n      <PageHeader>\n        <div className=\"pf-c-content\">\n          <PageHeaderTitle title={<Skeleton size=\"sm\" />} />\n        </div>\n      </PageHeader>\n      <Section>\n        <Bullseye>\n          <Spinner centered />\n        </Bullseye>\n      </Section>\n    </div>\n  );\n};\n","import { useParameterizedQuery, useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const getApplicationsAction = (bundleName?: string) =>\n  Operations.NotificationResourceGetApplicationsFacets.actionCreator({\n    bundleName,\n  });\n\nexport const useGetApplicationsLazy = () =>\n  useParameterizedQuery(getApplicationsAction);\nexport const useGetApplications = (bundleName?: string) =>\n  useQuery(getApplicationsAction(bundleName));\n","import { Tabs } from '@patternfly/react-core';\nimport React from 'react';\n\ninterface MyTabComponentProps {\n  configuration: React.ReactNode;\n  settings: React.ReactNode;\n}\n\nexport const TabComponent: React.FunctionComponent<MyTabComponentProps> = (\n  props\n) => {\n  const [activeTabKey, setActiveTabKey] = React.useState(0);\n\n  const handleTabClick = React.useCallback((tabIndex) => {\n    setActiveTabKey(tabIndex);\n  }, []);\n\n  return (\n    <div className=\"pf-v5-u-background-color-100\">\n      <Tabs\n        className=\"pf-v5-u-pl-lg\"\n        defaultActiveKey={activeTabKey}\n        role=\"region\"\n        onClick={handleTabClick}\n      >\n        {props.children}\n      </Tabs>\n    </div>\n  );\n};\n","export enum SortDirection {\n  ASC = 'asc',\n  DESC = 'desc',\n}\n\nexport const sortDirectionFromString = (\n  sortDirection: string\n): SortDirection => {\n  const lowerCaseSortDirection = sortDirection.toLowerCase();\n  switch (lowerCaseSortDirection) {\n    case SortDirection.ASC:\n      return SortDirection.ASC;\n    case SortDirection.DESC:\n      return SortDirection.DESC;\n    default:\n      throw new Error(`Invalid sort direction ${sortDirection}`);\n  }\n};\n","export const emptyImmutableArray = Object.freeze([]);\nexport const emptyImmutableObject = Object.freeze({});\n","import {\n  EmptyState,\n  EmptyStateBody,\n  EmptyStateIcon,\n  Text,\n  TextContent,\n  Title,\n} from '@patternfly/react-core';\nimport { SearchIcon } from '@patternfly/react-icons';\nimport React from 'react';\n\nconst EmptyTableState = () => {\n  return (\n    <EmptyState variant=\"full\">\n      <EmptyStateIcon className=\"pf-u-mb-xl\" icon={SearchIcon} />\n      <Title headingLevel=\"h2\" size=\"lg\">\n        No results found\n      </Title>\n      <EmptyStateBody>\n        <TextContent>\n          <Text>\n            No notifications match your filter choices above. Try removing or\n            changing the filters to see results.\n          </Text>\n        </TextContent>\n      </EmptyStateBody>\n    </EmptyState>\n  );\n};\n\nexport default EmptyTableState;\n","interface HasId<ID> {\n  id: ID;\n}\n\nexport const findByKey =\n  <T, KEY extends keyof T>(val: T[KEY], key: KEY) =>\n  (value: T) =>\n    value[key] === val;\nexport const findById = <T extends HasId<T['id']>>(id: T['id']) =>\n  findByKey<T, 'id'>(id, 'id');\n","import {\n  Badge,\n  Chip,\n  ChipGroup,\n  Icon,\n  Label,\n  MenuItem,\n  OptionsMenu,\n  OptionsMenuItem,\n  OptionsMenuToggle,\n  Tooltip,\n} from '@patternfly/react-core';\nimport { BellSlashIcon, LockIcon } from '@patternfly/react-icons';\nimport { TableText } from '@patternfly/react-table';\nimport { join } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { BehaviorGroupContent } from '../../../pages/Notifications/List/useBehaviorGroupContent';\nimport {\n  BehaviorGroup,\n  NotificationBehaviorGroup,\n} from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\nimport { emptyImmutableObject } from '../../../utils/Immutable';\n\ninterface BehaviorGroupCellProps {\n  id: string;\n  notification: NotificationBehaviorGroup;\n  behaviorGroupContent: BehaviorGroupContent;\n  selected: ReadonlyArray<BehaviorGroup>;\n  onSelect?: (\n    notification: NotificationBehaviorGroup,\n    behaviorGroup: BehaviorGroup,\n    linkBehavior: boolean\n  ) => void;\n  isEditMode: boolean;\n}\n\ninterface BehaviorGroupChip {\n  behaviorGroup: BehaviorGroup;\n  notification: BehaviorGroupCellProps['notification'];\n  onSelect?: BehaviorGroupCellProps['onSelect'];\n}\n\nconst CommaSeparator: React.FunctionComponent = () => <span>, </span>;\n\nconst BehaviorGroupChip: React.FunctionComponent<BehaviorGroupChip> = (\n  props\n) => {\n  const unlink = React.useCallback(() => {\n    const onSelect = props.onSelect;\n    if (onSelect) {\n      onSelect(props.notification, props.behaviorGroup, false);\n    }\n  }, [props.onSelect, props.behaviorGroup, props.notification]);\n\n  return (\n    <Chip onClick={unlink} isReadOnly={props.behaviorGroup.isDefault}>\n      {props.behaviorGroup.displayName}\n    </Chip>\n  );\n};\n\nexport const BehaviorGroupCell: React.FunctionComponent<BehaviorGroupCellProps> =\n  (props) => {\n    const [isOpen, setOpen] = React.useState(false);\n\n    const onSelected = React.useCallback(\n      (\n        event?: React.MouseEvent<HTMLAnchorElement> | React.KeyboardEvent,\n        behaviorGroupId?: string\n      ) => {\n        const dataset =\n          (event?.currentTarget?.firstChild as HTMLElement)?.dataset ??\n          emptyImmutableObject;\n        const onSelect = props.onSelect;\n        if (\n          !props.behaviorGroupContent.isLoading &&\n          !props.behaviorGroupContent.hasError &&\n          onSelect\n        ) {\n          let found;\n          if (dataset.behaviorGroupId || behaviorGroupId) {\n            found = props.behaviorGroupContent.content.find(\n              // eslint-disable-next-line testing-library/await-async-queries\n              findById(\n                (dataset.behaviorGroupId as string) ||\n                  (behaviorGroupId as string)\n              )\n            );\n            if (found) {\n              // eslint-disable-next-line testing-library/await-async-queries\n              const isSelected = !!props.selected.find(findById(found.id));\n              onSelect(props.notification, found, !isSelected);\n            }\n          }\n        }\n      },\n      [\n        props.onSelect,\n        props.behaviorGroupContent,\n        props.notification,\n        props.selected,\n      ]\n    );\n\n    const items = React.useMemo(() => {\n      if (\n        props.behaviorGroupContent.isLoading ||\n        props.behaviorGroupContent.hasError\n      ) {\n        return [\n          <OptionsMenuItem key=\"is-loading\" isDisabled>\n            Loading\n          </OptionsMenuItem>,\n        ];\n      }\n\n      if (props.behaviorGroupContent.content.length === 0) {\n        return [\n          <OptionsMenuItem key=\"empty\" isDisabled>\n            <span className=\"pf-v5-u-text-align-left\">\n              You have no behavior groups. <br />\n              Create a new group by clicking on the <br />\n              &apos;Create new group&apos; button above.\n            </span>\n          </OptionsMenuItem>,\n        ];\n      }\n\n      const behaviorGroups = [\n        ...props.selected.filter((b) => b.isDefault),\n        ...props.behaviorGroupContent.content.filter((b) => !b.isDefault),\n      ];\n\n      return [\n        behaviorGroups.map((bg) => {\n          // eslint-disable-next-line testing-library/await-async-queries\n          const selected = !!props.selected.find(findById(bg.id));\n\n          return (\n            <MenuItem\n              key={bg.id}\n              hasCheck\n              onClick={(event) => onSelected(event, bg.id)}\n              data-behavior-group-id={bg.id}\n              isSelected={selected}\n              isDisabled={bg.isDefault}\n              className=\"pf-v5-u-ml-sm\"\n            >\n              {bg.isDefault && <LockIcon className=\"pf-v5-u-ml-sm\" />}{' '}\n              <span className=\"pf-v5-u-ml-sm\"> {bg.displayName}</span>\n            </MenuItem>\n          );\n        }),\n      ];\n    }, [props.behaviorGroupContent, props.selected, onSelected]);\n\n    const sortedSelected = React.useMemo(\n      () => [\n        ...props.selected.filter((b) => b.isDefault),\n        ...props.selected.filter((b) => !b.isDefault),\n      ],\n      [props.selected]\n    );\n\n    const toggle = React.useMemo(() => {\n      return (\n        <OptionsMenuToggle\n          onToggle={setOpen}\n          toggleTemplate={\n            sortedSelected.length === 0 ? (\n              <>\n                <span className=\"pf-v5-u-disabled-color-100\">\n                  Select behavior group\n                </span>\n                <Badge className=\"pf-v5-u-ml-xs\" isRead>\n                  {sortedSelected.length}\n                </Badge>\n              </>\n            ) : (\n              <>\n                <ChipGroup>\n                  {sortedSelected.map((value) => (\n                    <BehaviorGroupChip\n                      key={value.id}\n                      behaviorGroup={value}\n                      notification={props.notification}\n                      onSelect={props.onSelect}\n                    />\n                  ))}\n                </ChipGroup>\n                <Badge className=\"pf-v5-u-ml-xs\" isRead>\n                  {sortedSelected.length}\n                </Badge>\n              </>\n            )\n          }\n        />\n      );\n    }, [sortedSelected, props.notification, props.onSelect]);\n\n    const readonlyText = React.useMemo(() => {\n      if (sortedSelected.length === 0) {\n        return (\n          <span>\n            <Icon className=\"pf-v5-u-mr-sm pf-v5-u-disabled-color-100\" isInline>\n              <BellSlashIcon />\n            </Icon>\n            Mute\n          </span>\n        );\n      }\n\n      return join(\n        sortedSelected.map((b) => (\n          <React.Fragment key={b.id}>\n            {b.isDefault && (\n              <Tooltip\n                content={`${b.displayName} behavior is attached to this event and cannot be changed.\n                Add additional behavior groups to assign different actions or recipients.`}\n              >\n                <LockIcon className=\"pf-v5-u-mr-sm pf-v5-u-disabled-color-100\" />\n              </Tooltip>\n            )}{' '}\n            <Label isCompact>{b.displayName}</Label>\n          </React.Fragment>\n        )),\n        CommaSeparator\n      );\n    }, [sortedSelected]);\n\n    if (!props.isEditMode) {\n      return <TableText wrapModifier=\"truncate\"> {readonlyText} </TableText>;\n    }\n\n    return (\n      <OptionsMenu\n        id={props.id}\n        direction=\"down\"\n        menuItems={items}\n        toggle={toggle}\n        isOpen={isOpen}\n        menuAppendTo={document.body}\n      />\n    );\n  };\n","import { Button, ButtonVariant, Skeleton } from '@patternfly/react-core';\nimport { CheckIcon, CloseIcon, PencilAltIcon } from '@patternfly/react-icons';\nimport {\n  IExtraColumnData,\n  SortByDirection,\n  TableComposable,\n  TableVariant,\n  Tbody,\n  Td,\n  Th,\n  ThProps,\n  Thead,\n  Tr,\n} from '@patternfly/react-table';\nimport { TdActionsType } from '@patternfly/react-table/dist/esm/components/Table/base';\nimport {\n  global_active_color_100,\n  global_disabled_color_100,\n  global_palette_black_600,\n} from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroupContent } from '../../pages/Notifications/List/useBehaviorGroupContent';\nimport { BehaviorGroupNotificationRow } from '../../pages/Notifications/List/useBehaviorGroupNotificationRows';\nimport {\n  BehaviorGroup,\n  NotificationBehaviorGroup,\n  UUID,\n} from '../../types/Notification';\nimport {\n  SortDirection,\n  sortDirectionFromString,\n} from '../../types/SortDirection';\nimport { emptyImmutableArray } from '../../utils/Immutable';\nimport { ouia } from '../Ouia';\nimport EmptyTableState from './EmptyTableState';\nimport { BehaviorGroupCell } from './Table/BehaviorGroupCell';\n\ntype OnNotificationIdHandler = (notificationId: UUID) => void;\nexport type OnBehaviorGroupLinkUpdated = (\n  notification: NotificationBehaviorGroup,\n  behaviorGroup: BehaviorGroup,\n  isLinked: boolean\n) => void;\n\n// The value has to be the order on which the columns appear on the table\nexport enum NotificationsTableColumns {\n  EVENT,\n  APPLICATION,\n  BEHAVIOR,\n}\n\nexport interface NotificationsBehaviorGroupTableProps {\n  behaviorGroupContent: BehaviorGroupContent;\n  notifications: Array<BehaviorGroupNotificationRow>;\n  onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n  onStartEditing?: OnNotificationIdHandler;\n  onFinishEditing?: OnNotificationIdHandler;\n  onCancelEditing?: OnNotificationIdHandler;\n  sortBy: NotificationsTableColumns;\n  sortDirection: SortDirection;\n\n  onSort: (column: NotificationsTableColumns, direction: SortDirection) => void;\n}\n\nconst actionButtonClassName = style({\n  float: 'right',\n});\n\ntype Callbacks = {\n  onStartEditing: OnNotificationIdHandler;\n  onFinishEditing: OnNotificationIdHandler;\n  onCancelEditing: OnNotificationIdHandler;\n  onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n};\n\nconst HiddenActionsToggle = () => <React.Fragment />;\n\nconst getActions = (\n  notification: BehaviorGroupNotificationRow,\n  callbacks?: Callbacks\n): TdActionsType => {\n  const isDisabled = notification.loadingActionStatus !== 'done';\n\n  if (!notification.isEditMode) {\n    return {\n      actionsToggle: HiddenActionsToggle,\n      items: [\n        {\n          key: 'edit',\n          className: actionButtonClassName,\n          title: (\n            <Button\n              aria-label=\"edit\"\n              variant={ButtonVariant.plain}\n              isDisabled={isDisabled}\n            >\n              <PencilAltIcon />\n            </Button>\n          ),\n          isOutsideDropdown: true,\n          onClick: () => callbacks?.onStartEditing(notification.id),\n          isDisabled: isDisabled || !callbacks,\n        },\n      ],\n    };\n  }\n\n  return {\n    actionsToggle: HiddenActionsToggle,\n    items: [\n      {\n        key: 'done',\n        className: actionButtonClassName,\n        title: (\n          <Button\n            aria-label=\"done\"\n            variant={ButtonVariant.plain}\n            isDisabled={isDisabled}\n          >\n            <CheckIcon\n              color={\n                isDisabled\n                  ? global_disabled_color_100.value\n                  : global_active_color_100.value\n              }\n            />\n          </Button>\n        ),\n        isOutsideDropdown: true,\n        onClick: () => callbacks?.onFinishEditing(notification.id),\n        isDisabled: isDisabled || !callbacks,\n      },\n      {\n        key: 'cancel',\n        className: actionButtonClassName,\n        title: (\n          <Button\n            aria-label=\"cancel\"\n            variant={ButtonVariant.plain}\n            isDisabled={isDisabled}\n          >\n            <CloseIcon\n              color={\n                isDisabled\n                  ? global_disabled_color_100.value\n                  : global_palette_black_600.value\n              }\n            />\n          </Button>\n        ),\n        isOutsideDropdown: true,\n        onClick: () => callbacks?.onCancelEditing(notification.id),\n        isDisabled: isDisabled || !callbacks,\n      },\n    ],\n  };\n};\n\nexport const NotificationsBehaviorGroupTable =\n  ouia<NotificationsBehaviorGroupTableProps>((props) => {\n    const callbacks: Callbacks | undefined = React.useMemo(() => {\n      if (\n        props.onStartEditing &&\n        props.onFinishEditing &&\n        props.onCancelEditing\n      ) {\n        return {\n          onStartEditing: props.onStartEditing,\n          onFinishEditing: props.onFinishEditing,\n          onCancelEditing: props.onCancelEditing,\n          onBehaviorGroupLinkUpdated: props.onBehaviorGroupLinkUpdated,\n        };\n      }\n\n      return undefined;\n    }, [\n      props.onStartEditing,\n      props.onFinishEditing,\n      props.onCancelEditing,\n      props.onBehaviorGroupLinkUpdated,\n    ]);\n\n    const onSort = React.useCallback(\n      (\n        _event: React.MouseEvent,\n        columnIndex: number,\n        sortByDirection: SortByDirection,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        _extraData: IExtraColumnData\n      ) => {\n        const externalOnSort = props.onSort;\n        externalOnSort(columnIndex, sortDirectionFromString(sortByDirection));\n      },\n      [props.onSort]\n    );\n\n    const sortOptions: Record<\n      NotificationsTableColumns,\n      undefined | ThProps['sort']\n    > = React.useMemo(() => {\n      const sortBy = {\n        direction: props.sortDirection,\n        index: props.sortBy,\n      };\n\n      return {\n        [NotificationsTableColumns.EVENT]: {\n          sortBy,\n          columnIndex: NotificationsTableColumns.EVENT,\n          onSort,\n        },\n        [NotificationsTableColumns.APPLICATION]: {\n          sortBy,\n          columnIndex: NotificationsTableColumns.APPLICATION,\n          onSort,\n        },\n        [NotificationsTableColumns.BEHAVIOR]: undefined,\n      };\n    }, [props.sortDirection, props.sortBy, onSort]);\n\n    const rows = React.useMemo(() => {\n      const notifications = props.notifications;\n      const behaviorGroupContent = props.behaviorGroupContent;\n      return notifications.map((notification) => {\n        return (\n          <Tr key={notification.id}>\n            <Td>{notification.eventTypeDisplayName}</Td>\n            <Td>{notification.applicationDisplayName}</Td>\n            <Td>\n              {notification.loadingActionStatus === 'loading' ? (\n                <Skeleton width=\"90%\" />\n              ) : (\n                <BehaviorGroupCell\n                  id={`behavior-group-cell-${notification.id}`}\n                  notification={notification}\n                  behaviorGroupContent={behaviorGroupContent}\n                  selected={notification.behaviors ?? emptyImmutableArray}\n                  onSelect={callbacks?.onBehaviorGroupLinkUpdated}\n                  isEditMode={notification.isEditMode}\n                />\n              )}\n            </Td>\n            <Td actions={getActions(notification, callbacks)} />\n          </Tr>\n        );\n      });\n    }, [props.notifications, props.behaviorGroupContent, callbacks]);\n\n    return (\n      <TableComposable\n        aria-label=\"Notifications\"\n        isStickyHeader={true}\n        variant={TableVariant.compact}\n        id=\"configure-events-table\"\n      >\n        <Thead>\n          <Tr>\n            <Th sort={sortOptions[NotificationsTableColumns.EVENT]}>\n              Event Type\n            </Th>\n            <Th sort={sortOptions[NotificationsTableColumns.APPLICATION]}>\n              Service\n            </Th>\n            <Th\n              sort={sortOptions[NotificationsTableColumns.BEHAVIOR]}\n              width={35}\n            >\n              Configuration\n            </Th>\n            <Th />\n          </Tr>\n        </Thead>\n        <Tbody>\n          {props.notifications.length === 0 ? <EmptyTableState /> : rows}\n        </Tbody>\n      </TableComposable>\n    );\n  }, 'Notifications/Table');\n","import { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../utils/getOuiaProps';\n\nexport const ouia = <P,>(\n  Component: React.FunctionComponent<P>,\n  type: string\n): React.FunctionComponent<OuiaComponentProps & P> => {\n  const Wrapped: React.FunctionComponent<OuiaComponentProps & P> = (props) => {\n    return (\n      <div {...getOuiaProps(type, props)}>\n        <Component {...props} />\n      </div>\n    );\n  };\n\n  Wrapped.displayName = `Ouia(${Component.displayName ?? Component.name})`;\n\n  return Wrapped;\n};\n","import {\n  ClearFilters,\n  Filters,\n  SetFilters,\n} from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum NotificationFilterColumn {\n  NAME = 'name',\n  APPLICATION = 'application',\n  ACTION = 'action',\n}\n\nexport type NotificationFilters = Filters<typeof NotificationFilterColumn>;\nexport type SetNotificationFilters = SetFilters<\n  typeof NotificationFilterColumn\n>;\nexport type ClearNotificationFilters = ClearFilters<\n  typeof NotificationFilterColumn\n>;\n","import { PaginationProps, PaginationVariant } from '@patternfly/react-core';\nimport PrimaryToolbar from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\nimport { ConditionalFilterProps } from '@redhat-cloud-services/frontend-components/ConditionalFilter';\nimport { FilterChipsProps } from '@redhat-cloud-services/frontend-components/FilterChips';\nimport {\n  ExporterType,\n  OptionalColumnsMetada,\n  OuiaComponentProps,\n  getInsights,\n  useInsightsEnvironmentFlag,\n  usePrimaryToolbarFilterConfig,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useCallback, useMemo } from 'react';\n\nimport { PageAdapter } from '../../hooks/usePage';\nimport { useTableExportConfig } from '../../hooks/useTableExportConfig';\nimport { isExperimental, stagingAndProd } from '../../types/Environments';\nimport { Facet } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport {\n  ClearNotificationFilters,\n  NotificationFilterColumn,\n  NotificationFilters,\n  SetNotificationFilters,\n} from './Filter';\n\nexport enum SelectionCommand {\n  NONE,\n  PAGE,\n  ALL,\n}\n\nexport interface NotificationsToolbarProps extends OuiaComponentProps {\n  filters: NotificationFilters;\n  setFilters: SetNotificationFilters;\n  clearFilter: ClearNotificationFilters;\n  filterColumns?: ReadonlyArray<NotificationFilterColumn>;\n\n  appFilterOptions: ReadonlyArray<Facet>;\n\n  pageAdapter: PageAdapter;\n  count: number;\n\n  onExport?: (type: ExporterType) => void;\n\n  selectedCount?: number;\n  onSelectionChanged?: (command: SelectionCommand) => void;\n  bulkSelectionDisabled?: boolean;\n  pageCount?: number;\n}\n\nconst allFilterColumns = [\n  NotificationFilterColumn.NAME,\n  NotificationFilterColumn.APPLICATION,\n  NotificationFilterColumn.ACTION,\n];\n\nexport const NotificationsToolbar: React.FunctionComponent<NotificationsToolbarProps> =\n  (props) => {\n    const insights = getInsights();\n    const filterColumns = props.filterColumns ?? allFilterColumns;\n    const filterMetadata = useMemo<\n      OptionalColumnsMetada<typeof NotificationFilterColumn>\n    >(() => {\n      const appFilterItems = props.appFilterOptions.map((a) => ({\n        value: a.displayName,\n        label: <> {a.displayName}</>,\n      }));\n\n      return {\n        [NotificationFilterColumn.NAME]: filterColumns.includes(\n          NotificationFilterColumn.NAME\n        )\n          ? {\n              label: 'Event type',\n              placeholder: 'Filter by event type',\n            }\n          : undefined,\n        [NotificationFilterColumn.APPLICATION]: filterColumns.includes(\n          NotificationFilterColumn.APPLICATION\n        )\n          ? {\n              label: 'Service',\n              placeholder: 'Filter by service',\n              options: {\n                exclusive: false,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                default: [] as any,\n                items: appFilterItems,\n              },\n            }\n          : undefined,\n        [NotificationFilterColumn.ACTION]:\n          filterColumns.includes(NotificationFilterColumn.ACTION) &&\n          isExperimental(insights)\n            ? {\n                label: 'Action',\n                placeholder: 'Filter by action',\n              }\n            : undefined,\n      };\n    }, [props.appFilterOptions, insights, filterColumns]);\n\n    const bulkSelectProps = React.useMemo(() => {\n      const onSelectionChanged = props.onSelectionChanged;\n      const count = props.count;\n      const pageAdapter = props.pageAdapter;\n      const selectedCount = props.selectedCount;\n      const pageSize = pageAdapter.page.size;\n      if (!onSelectionChanged) {\n        return undefined;\n      }\n\n      const selectAll = () => onSelectionChanged(SelectionCommand.ALL);\n      const selectNone = () => onSelectionChanged(SelectionCommand.NONE);\n\n      return {\n        count: selectedCount ?? 0,\n        items: [\n          {\n            title: 'Select none (0)',\n            onClick: selectNone,\n          },\n          {\n            title: `Select page (${props.pageCount ?? pageSize})`,\n            onClick: () => onSelectionChanged(SelectionCommand.PAGE),\n          },\n          {\n            title: `Select all (${count})`,\n            onClick: selectAll,\n          },\n        ],\n        checked: selectedCount !== 0 && selectedCount === count,\n        onSelect: (isSelected: boolean) =>\n          isSelected ? selectAll() : selectNone(),\n        isDisabled: props.bulkSelectionDisabled,\n      };\n    }, [\n      props.onSelectionChanged,\n      props.selectedCount,\n      props.pageAdapter,\n      props.count,\n      props.bulkSelectionDisabled,\n      props.pageCount,\n    ]);\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n      NotificationFilterColumn,\n      props.filters,\n      props.setFilters,\n      props.clearFilter,\n      filterMetadata\n    );\n\n    const exportConfigInternal = useTableExportConfig(props.onExport);\n\n    const filterConfig = primaryToolbarFilterConfig.filterConfig;\n    const activeFiltersConfig = primaryToolbarFilterConfig.activeFiltersConfig;\n\n    const exportConfig = useInsightsEnvironmentFlag(\n      getInsights(),\n      stagingAndProd,\n      undefined,\n      useCallback(() => exportConfigInternal, [exportConfigInternal])\n    );\n\n    const pageChanged = React.useCallback(\n      (_event: unknown, page: number) => {\n        const inner = props.pageAdapter.changePage;\n        inner(page);\n      },\n      [props.pageAdapter]\n    );\n\n    const perPageChanged = React.useCallback(\n      (_event: unknown, perPage: number) => {\n        const inner = props.pageAdapter.changeItemsPerPage;\n        inner(perPage);\n      },\n      [props.pageAdapter]\n    );\n\n    const topPaginationProps = React.useMemo<PaginationProps>(\n      () => ({\n        itemCount: props.count,\n        page: props.pageAdapter.page.index,\n        perPage: props.pageAdapter.page.size,\n        isCompact: true,\n        variant: PaginationVariant.top,\n        onSetPage: pageChanged,\n        onFirstClick: pageChanged,\n        onPreviousClick: pageChanged,\n        onNextClick: pageChanged,\n        onLastClick: pageChanged,\n        onPageInput: pageChanged,\n        onPerPageSelect: perPageChanged,\n      }),\n      [props.count, props.pageAdapter, pageChanged, perPageChanged]\n    );\n\n    const bottomPaginationProps = React.useMemo<PaginationProps>(\n      () => ({\n        ...topPaginationProps,\n        isCompact: false,\n        variant: PaginationVariant.bottom,\n      }),\n      [topPaginationProps]\n    );\n\n    return (\n      <div {...getOuiaProps('Notifications/DualToolbar', props)}>\n        <PrimaryToolbar\n          bulkSelect={bulkSelectProps}\n          filterConfig={filterConfig as ConditionalFilterProps}\n          activeFiltersConfig={activeFiltersConfig as FilterChipsProps}\n          exportConfig={exportConfig}\n          pagination={topPaginationProps}\n        />\n        {props.children}\n        <PrimaryToolbar pagination={bottomPaginationProps} />\n      </div>\n    );\n  };\n","import {\n  Direction,\n  Sort,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { NotificationsTableColumns } from '../../../components/Notifications/NotificationsBehaviorGroupTable';\nimport Config from '../../../config/Config';\nimport { usePage } from '../../../hooks/usePage';\nimport { Facet } from '../../../types/Notification';\nimport { SortDirection } from '../../../types/SortDirection';\nimport { useNotificationFilter } from '../List/useNotificationFilter';\nimport { useEventTypesFilterBuilder } from './useEventTypesFilterBuilder';\n\nexport const useEventTypesPage = (\n  bundle: Facet,\n  applications: ReadonlyArray<Facet>,\n  useUrlState: boolean\n) => {\n  const notificationsFilter = useNotificationFilter(\n    applications.map((a) => a.displayName.toString()),\n    useUrlState\n  );\n  const filterBuilder = useEventTypesFilterBuilder(bundle, applications);\n\n  const [sorting, setSorting] = React.useState<{\n    sortDirection: SortDirection;\n    sortBy: NotificationsTableColumns;\n  }>({\n    sortDirection: SortDirection.ASC,\n    sortBy: NotificationsTableColumns.APPLICATION,\n  });\n\n  const onSort = React.useCallback(\n    (column: NotificationsTableColumns, direction: SortDirection) => {\n      setSorting({\n        sortBy: column,\n        sortDirection: direction,\n      });\n    },\n    [setSorting]\n  );\n\n  const sort: Sort = React.useMemo(() => {\n    const direction = sorting.sortDirection.toUpperCase() as Direction;\n    let column: string;\n    switch (sorting.sortBy) {\n      case NotificationsTableColumns.APPLICATION:\n        column = 'application';\n        break;\n      case NotificationsTableColumns.EVENT:\n        column = 'display_name';\n        break;\n      default:\n        throw new Error(`Invalid sorting index: ${sorting.sortBy}`);\n    }\n\n    return Sort.by(column, direction);\n  }, [sorting]);\n\n  const notificationPage = usePage(\n    Config.paging.defaultPerPage,\n    filterBuilder,\n    notificationsFilter.filters,\n    sort\n  );\n\n  return {\n    pageController: notificationPage,\n    onSort,\n    sortBy: sorting.sortBy,\n    sortDirection: sorting.sortDirection,\n    filters: notificationsFilter.filters,\n    setFilters: notificationsFilter.setFilters,\n    clearFilters: notificationsFilter.clearFilter,\n  };\n};\n","import {\n  useFilters,\n  useUrlStateMultipleOptions,\n  useUrlStateString,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport { useMemo, useState } from 'react';\n\nimport { NotificationFilterColumn } from '../../../components/Notifications/Filter';\n\nconst DEBOUNCE_MS = 250;\n\nexport const useNotificationFilter = (\n  initialAppOptions: Array<string>,\n  initUseUrlState: boolean,\n  debounce = DEBOUNCE_MS\n) => {\n  const useStateFactory = useMemo(() => {\n    const useUrlStateName = (defaultValue?: string) =>\n      useUrlStateString('name', defaultValue);\n    const useUrlStateApplication = (defaultValue?: Array<string>) =>\n      useUrlStateMultipleOptions('app', initialAppOptions, defaultValue);\n    const useUrlStateAction = (defaultValue?: string) =>\n      useUrlStateString('action', defaultValue);\n\n    return (column: NotificationFilterColumn) => {\n      switch (column) {\n        case NotificationFilterColumn.NAME:\n          return initUseUrlState ? useUrlStateName : useState;\n        case NotificationFilterColumn.ACTION:\n          return initUseUrlState ? useUrlStateAction : useState;\n        case NotificationFilterColumn.APPLICATION:\n          return initUseUrlState ? useUrlStateApplication : useState;\n        default:\n          assertNever(column);\n      }\n    };\n    // This is an init param, so it doesn't need to recompute on change.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return useFilters(NotificationFilterColumn, debounce, useStateFactory);\n};\n","import {\n  Filter,\n  Operator,\n  arrayValue,\n  stringValue,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { useCallback } from 'react';\n\nimport {\n  NotificationFilterColumn,\n  NotificationFilters,\n} from '../../../components/Notifications/Filter';\nimport { Facet } from '../../../types/Notification';\n\nexport const useEventTypesFilterBuilder = (\n  bundle: Facet,\n  appFilterOptions: ReadonlyArray<Facet>\n) => {\n  return useCallback(\n    (filters?: NotificationFilters) => {\n      const filter = new Filter();\n\n      const appFilter =\n        filters && filters[NotificationFilterColumn.APPLICATION];\n\n      if (appFilter) {\n        const appIds: Array<string> = [];\n        for (const appName of arrayValue(appFilter)) {\n          const filterOption = appFilterOptions.find(\n            (a) => a.displayName === appName\n          );\n          if (filterOption) {\n            appIds.push(filterOption.id);\n          }\n        }\n\n        filter.and('applicationId', Operator.EQUAL, appIds);\n      }\n\n      filter.and('bundleId', Operator.EQUAL, bundle.id);\n\n      const eventTypeFilter = filters && filters[NotificationFilterColumn.NAME];\n      if (eventTypeFilter) {\n        const eventTypeFilterName = stringValue(eventTypeFilter);\n        filter.and('eventFilterName', Operator.EQUAL, eventTypeFilterName);\n      }\n\n      return filter;\n    },\n    [bundle, appFilterOptions]\n  );\n};\n","import { SVGIconProps } from '@patternfly/react-icons/dist/js/createIcon';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport icon from './WebhookIcon.svg';\nconst className = style({\n  verticalAlign: '-0.125em',\n  width: '1em',\n  height: '1em',\n});\n\nexport const WebhookIcon: React.FunctionComponent<SVGIconProps> = () => {\n  return <img alt=\"Webhook\" className={className} src={icon} />;\n};\n","import { Spinner } from '@patternfly/react-core';\nimport { EnvelopeIcon } from '@patternfly/react-icons';\nimport BellIcon from '@patternfly/react-icons/dist/js/icons/bell-icon';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\n\nimport Config from '../../config/Config';\nimport { Action, NotificationType } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { WebhookIcon } from '../Icons/WebhookIcon';\n\nexport interface ActionComponentText extends OuiaComponentProps {\n  action: Action | undefined;\n  loading?: boolean;\n  hasError?: boolean;\n}\n\ninterface ActionTypeToIconProps {\n  actionType: NotificationType;\n}\n\nconst ActionTypeToIcon: React.FunctionComponent<ActionTypeToIconProps> = (\n  props\n) => {\n  switch (props.actionType) {\n    case NotificationType.DRAWER:\n      return <BellIcon />;\n    case NotificationType.EMAIL_SUBSCRIPTION:\n      return <EnvelopeIcon />;\n    case NotificationType.INTEGRATION:\n      return <WebhookIcon />;\n    default:\n      assertNever(props.actionType);\n  }\n};\n\nconst ActionComponentWrapper: React.FunctionComponent<ActionComponentText> = (\n  props\n) => (\n  <div {...getOuiaProps('Notifications/ActionComponent', props)}>\n    {props.children}\n  </div>\n);\n\nexport const ActionComponent: React.FunctionComponent<ActionComponentText> = (\n  props\n) => {\n  if (props.loading) {\n    return (\n      <ActionComponentWrapper {...props}>\n        <Spinner size=\"md\" />\n      </ActionComponentWrapper>\n    );\n  }\n\n  if (props.hasError) {\n    return (\n      <ActionComponentWrapper {...props}>\n        <span>Error loading actions</span>\n      </ActionComponentWrapper>\n    );\n  }\n\n  if (!props.action) {\n    return (\n      <ActionComponentWrapper {...props}>\n        <span className=\"pf-v5-u-color-200\">\n          <div>No actions.</div>\n          <div>Users will not be notified.</div>\n        </span>\n      </ActionComponentWrapper>\n    );\n  }\n\n  return (\n    <ActionComponentWrapper {...props}>\n      <ActionTypeToIcon actionType={props.action.type} />\n      <span className=\"pf-v5-u-ml-sm\">\n        {Config.notifications.types[props.action.type].name}\n      </span>\n      {props.action.type === NotificationType.INTEGRATION && (\n        <span>\n          : {Config.integrations.types[props.action.integration.type].name}\n        </span>\n      )}\n    </ActionComponentWrapper>\n  );\n};\n","import { Label, LabelProps, Tooltip } from '@patternfly/react-core';\nimport * as React from 'react';\n\ninterface GroupNotFoundProps {\n  onClose?: LabelProps['onClose'];\n}\n\nexport const GroupNotFound: React.FunctionComponent<GroupNotFoundProps> = (\n  props\n) => {\n  const text = 'User Access group (Not found)';\n  return (\n    <Tooltip content=\"This User Access group was not found, and may have been deleted. Remove it from your behavior group to stop seeing it.\">\n      {props.onClose ? (\n        <Label variant=\"outline\" color=\"red\" onClose={props.onClose}>\n          {text}\n        </Label>\n      ) : (\n        <span className=\"pf-v5-u-color-300\"> {text} </span>\n      )}\n    </Tooltip>\n  );\n};\n","import { Skeleton, Tooltip } from '@patternfly/react-core';\nimport { BanIcon, LockIcon } from '@patternfly/react-icons';\n\nimport { join } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { Action, NotificationType } from '../../types/Notification';\nimport {\n  NotificationRbacGroupRecipient,\n  NotificationUserRecipient,\n} from '../../types/Recipient';\nimport { GroupNotFound } from './Rbac/GroupNotFound';\n\ninterface RecipientProps {\n  action: Action;\n  hasOutline?: boolean;\n}\n\nconst CommaSeparator = () => <span>, </span>;\n\nexport const Recipient: React.FunctionComponent<RecipientProps> = (props) => {\n  if (props.action.type === NotificationType.INTEGRATION) {\n    return (\n      <>\n        {!props.action.integration.isEnabled ? (\n          <span className=\"pf-v5-u-color-300\">\n            {' '}\n            {props.action.integration.name}\n            <Tooltip\n              content=\"This integration has been disabled. This action wil not fire until it is enabled.\"\n              position=\"bottom\"\n            >\n              <BanIcon className=\"pf-v5-u-color-300\" />\n            </Tooltip>\n          </span>\n        ) : (\n          props.action.integration.name\n        )}\n      </>\n    );\n  }\n\n  const users = props.action.recipient.filter(\n    (a) => a instanceof NotificationUserRecipient\n  ) as unknown as ReadonlyArray<NotificationUserRecipient>;\n\n  const groups = props.action.recipient.filter(\n    (a) => a instanceof NotificationRbacGroupRecipient\n  ) as unknown as ReadonlyArray<NotificationRbacGroupRecipient>;\n\n  return (\n    <span>\n      {users.length > 0 && (\n        <div>\n          Users:{' '}\n          {join(\n            users.map((u) => (\n              <>\n                {u.displayName}\n                {u.ignorePreferences && (\n                  <span>\n                    <Tooltip\n                      content=\"You may still receive forced notifications for this service\"\n                      position=\"bottom\"\n                    >\n                      <LockIcon className=\"pf-v5-u-ml-sm pf-v5-u-color-300\" />\n                    </Tooltip>\n                  </span>\n                )}{' '}\n              </>\n            )),\n            CommaSeparator\n          )}\n        </div>\n      )}\n      {groups.length > 0 && (\n        <div>\n          User Access Groups:{' '}\n          {join(\n            groups.map((g) => {\n              if (g.hasError) {\n                return <GroupNotFound key={g.groupId} />;\n              }\n\n              if (g.isLoading) {\n                return <Skeleton width=\"40px\" key={g.groupId} />;\n              }\n\n              return g.displayName;\n            }),\n            CommaSeparator\n          )}\n        </div>\n      )}\n    </span>\n  );\n};\n","import {\n  Grid,\n  GridItem,\n  Skeleton,\n  Text,\n  TextContent,\n  TextVariants,\n} from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { Action } from '../../../types/Notification';\nimport { ActionComponent } from '../ActionComponent';\nimport { Recipient } from '../Recipient';\n\ninterface BehaviorGroupActionsSummaryProps {\n  actions?: ReadonlyArray<Action>;\n}\n\ntype BehaviorGroupActionSummaryImplProps =\n  Required<BehaviorGroupActionsSummaryProps>;\n\nconst skeletonActions = 3;\n\nconst BehaviorGroupActionsSummaryLayout: React.FunctionComponent = (props) => {\n  return (\n    <Grid>\n      <GridItem span={6}>\n        <TextContent>\n          <Text component={TextVariants.h6}>Action</Text>\n        </TextContent>\n      </GridItem>\n      <GridItem span={6}>\n        <TextContent>\n          <Text component={TextVariants.h6}>Recipient</Text>\n        </TextContent>\n      </GridItem>\n      {props.children}\n    </Grid>\n  );\n};\n\nconst BehaviorGroupActionsSummaryImpl: React.FunctionComponent<BehaviorGroupActionSummaryImplProps> =\n  (props) => {\n    return (\n      <BehaviorGroupActionsSummaryLayout>\n        {props.actions.map((action, index) => (\n          <React.Fragment key={`${index}-${action.type}`}>\n            <GridItem span={6}>\n              <ActionComponent action={action} />\n            </GridItem>\n            <GridItem className=\"pf-u-text-break-word\" span={6}>\n              <Recipient action={action} />\n            </GridItem>\n          </React.Fragment>\n        ))}\n      </BehaviorGroupActionsSummaryLayout>\n    );\n  };\n\nconst BehaviorGroupActionsSummarySkeleton: React.FunctionComponent = () => {\n  const contentWidth = '150px';\n\n  return (\n    <BehaviorGroupActionsSummaryLayout>\n      {[...Array(skeletonActions).values()].map((_unused, index) => (\n        <React.Fragment key={`skeleton-${index}`}>\n          <GridItem span={6}>\n            <Skeleton width={contentWidth} />\n          </GridItem>\n          <GridItem span={6}>\n            <Skeleton width={contentWidth} />\n          </GridItem>\n        </React.Fragment>\n      ))}\n    </BehaviorGroupActionsSummaryLayout>\n  );\n};\n\nexport const BehaviorGroupActionsSummary: React.FunctionComponent<BehaviorGroupActionsSummaryProps> =\n  (props) => {\n    if (props.actions) {\n      return <BehaviorGroupActionsSummaryImpl actions={props.actions} />;\n    }\n\n    return <BehaviorGroupActionsSummarySkeleton />;\n  };\n","import {\n  Card,\n  CardActions,\n  CardBody,\n  CardHeader,\n  CardHeaderMain,\n  Dropdown,\n  DropdownItem,\n  DropdownPosition,\n  KebabToggle,\n  Skeleton,\n  Split,\n  SplitItem,\n  Text,\n  TextContent,\n  TextVariants,\n  Tooltip,\n} from '@patternfly/react-core';\nimport { LockIcon } from '@patternfly/react-icons';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { MarkRequired } from 'ts-essentials';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { BehaviorGroupActionsSummary } from './BehaviorGroupActionsSummary';\n\nconst cardClassName = style({\n  width: 450,\n  height: '100%',\n});\n\nexport interface BehaviorGroupProps extends OuiaComponentProps {\n  behaviorGroup?: BehaviorGroup;\n  onEdit?: (behaviorGroup: BehaviorGroup) => void;\n  onDelete?: (behaviorGroup: BehaviorGroup) => void;\n}\n\ntype BehaviorGroupImplProps = MarkRequired<BehaviorGroupProps, 'behaviorGroup'>;\n\nexport interface BehaviorGroupCardLayout {\n  title: React.ReactNode;\n  dropdownItems?: Array<React.ReactNode>;\n  isDefaultBehavior?: boolean;\n}\n\nconst BehaviorGroupCardLayout: React.FunctionComponent<BehaviorGroupCardLayout> =\n  (props) => {\n    const [isOpen, setOpen] = React.useState(false);\n\n    const switchOpen = React.useCallback(\n      () => setOpen((prev) => !prev),\n      [setOpen]\n    );\n\n    return (\n      <Card isFlat className={cardClassName}>\n        <CardHeader>\n          <CardHeaderMain>\n            <Split>\n              <SplitItem>\n                {props.isDefaultBehavior && (\n                  <Tooltip\n                    position=\"top\"\n                    appendTo={() => document.body}\n                    // eslint-disable-next-line max-len\n                    content={\n                      <div>\n                        System required behavior group\n                        <br></br>\n                        <br></br>\n                        This group is system generated and can not be edited,\n                        deleted, or removed from being applied to an event\n                      </div>\n                    }\n                  >\n                    <LockIcon className=\"pf-v5-u-mr-sm\" />\n                  </Tooltip>\n                )}\n              </SplitItem>\n              <SplitItem>\n                <TextContent>\n                  <Text component={TextVariants.h4}> {props.title} </Text>\n                </TextContent>\n              </SplitItem>\n            </Split>\n          </CardHeaderMain>\n          <CardActions>\n            {!props.isDefaultBehavior && (\n              <Dropdown\n                onSelect={switchOpen}\n                toggle={\n                  <KebabToggle\n                    onToggle={setOpen}\n                    isDisabled={!props.dropdownItems}\n                  />\n                }\n                isOpen={isOpen}\n                isPlain\n                dropdownItems={props.dropdownItems}\n                position={DropdownPosition.right}\n                menuAppendTo={() => document.body}\n              />\n            )}\n          </CardActions>\n        </CardHeader>\n        <CardBody>{props.children}</CardBody>\n      </Card>\n    );\n  };\n\nconst BehaviorGroupCardImpl: React.FunctionComponent<BehaviorGroupImplProps> = (\n  props\n) => {\n  const onClickEdit = React.useCallback(() => {\n    const onEdit = props.onEdit;\n    if (onEdit) {\n      onEdit(props.behaviorGroup);\n    }\n  }, [props.behaviorGroup, props.onEdit]);\n\n  const onClickDelete = React.useCallback(() => {\n    const onDelete = props.onDelete;\n    if (onDelete) {\n      onDelete(props.behaviorGroup);\n    }\n  }, [props.behaviorGroup, props.onDelete]);\n\n  const dropdownItems = React.useMemo(\n    () => [\n      <DropdownItem\n        key=\"on-edit\"\n        onClick={onClickEdit}\n        isDisabled={!onClickEdit}\n      >\n        {' '}\n        Edit{' '}\n      </DropdownItem>,\n      <DropdownItem\n        key=\"on-delete\"\n        onClick={onClickDelete}\n        isDisabled={!onClickDelete}\n      >\n        {' '}\n        Delete{' '}\n      </DropdownItem>,\n    ],\n    [onClickEdit, onClickDelete]\n  );\n\n  return (\n    <BehaviorGroupCardLayout\n      title={props.behaviorGroup.displayName}\n      dropdownItems={dropdownItems}\n      isDefaultBehavior={props.behaviorGroup.isDefault}\n    >\n      <BehaviorGroupActionsSummary actions={props.behaviorGroup.actions} />\n    </BehaviorGroupCardLayout>\n  );\n};\n\nconst BehaviorGroupCardSkeleton: React.FunctionComponent = () => {\n  return (\n    <BehaviorGroupCardLayout title={<Skeleton width=\"300px\" />}>\n      <BehaviorGroupActionsSummary />\n    </BehaviorGroupCardLayout>\n  );\n};\n\nexport const BehaviorGroupCard: React.FunctionComponent<BehaviorGroupProps> = (\n  props\n) => {\n  if (props.behaviorGroup) {\n    return (\n      <BehaviorGroupCardImpl {...props} behaviorGroup={props.behaviorGroup} />\n    );\n  }\n\n  return <BehaviorGroupCardSkeleton />;\n};\n","import { Flex, FlexItem } from '@patternfly/react-core';\nimport * as React from 'react';\nimport { MarkRequired } from 'ts-essentials';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { BehaviorGroupCard } from './BehaviorGroupCard';\n\nconst cardsWrapperClassName = style({\n  overflow: 'auto',\n});\n\ninterface BehaviorGroupCardListProps {\n  onEdit?: (behaviorGroup: BehaviorGroup) => void;\n  onDelete?: (behaviorGroup: BehaviorGroup) => void;\n  behaviorGroups?: ReadonlyArray<BehaviorGroup>;\n}\n\ntype BehaviorGroupCardListImplProps = MarkRequired<\n  BehaviorGroupCardListProps,\n  'behaviorGroups'\n>;\n\nconst skeletonBehaviorGroupCount = 3;\n\nconst BehaviorGroupCardListLayout: React.FunctionComponent = (props) => {\n  return (\n    <div data-testid=\"ref-card-list-container\">\n      <Flex\n        alignItems={{ default: 'alignItemsStretch' }}\n        alignContent={{ default: 'alignContentSpaceBetween' }}\n        flexWrap={{ default: 'nowrap' }}\n        className={cardsWrapperClassName}\n        data-testid=\"card-list-container\"\n      >\n        {props.children}\n      </Flex>\n    </div>\n  );\n};\n\nconst BehaviorGroupaCrdListImpl: React.FunctionComponent<BehaviorGroupCardListImplProps> =\n  (props) => {\n    return (\n      <BehaviorGroupCardListLayout>\n        {props.behaviorGroups.map((behaviorGroup) => (\n          <FlexItem key={behaviorGroup.id} className=\"pf-v5-u-pb-md\">\n            <BehaviorGroupCard\n              behaviorGroup={behaviorGroup}\n              onEdit={props.onEdit}\n              onDelete={props.onDelete}\n            />\n          </FlexItem>\n        ))}\n      </BehaviorGroupCardListLayout>\n    );\n  };\n\nconst BehaviorGroupCardListSkeleton: React.FunctionComponent = () => {\n  return (\n    <BehaviorGroupCardListLayout>\n      {[...Array(skeletonBehaviorGroupCount).values()].map((_unused, index) => (\n        <FlexItem\n          key={`behavior-group-card-skeleton-${index}`}\n          className=\"pf-v5-u-pb-md\"\n        >\n          <BehaviorGroupCard />\n        </FlexItem>\n      ))}\n    </BehaviorGroupCardListLayout>\n  );\n};\n\nexport const BehaviorGroupCardList: React.FunctionComponent<BehaviorGroupCardListProps> =\n  (props) => {\n    if (props.behaviorGroups) {\n      return (\n        <BehaviorGroupaCrdListImpl\n          {...props}\n          behaviorGroups={props.behaviorGroups}\n        />\n      );\n    }\n\n    return <BehaviorGroupCardListSkeleton />;\n  };\n","import {\n  Button,\n  ButtonVariant,\n  Icon,\n  Spinner,\n  Split,\n  SplitItem,\n  WizardContext,\n  WizardFooter,\n} from '@patternfly/react-core';\nimport { ExclamationCircleIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\nexport interface BehaviorGroupWizardFooterProps {\n  isLoading: boolean;\n  error?: string;\n  onNext: (goNext: () => void) => void;\n  onBack: (goBack: () => void) => void;\n}\n\nexport const BehaviorGroupWizardFooter: React.FunctionComponent<BehaviorGroupWizardFooterProps> =\n  (props) => {\n    const wizardContext = React.useContext(WizardContext);\n\n    const onNext = () => {\n      props.onNext(wizardContext.onNext);\n    };\n\n    const onBack = () => {\n      props.onBack(wizardContext.onBack);\n    };\n\n    return (\n      <WizardFooter>\n        <Button\n          variant={ButtonVariant.primary}\n          type=\"submit\"\n          onClick={onNext}\n          isDisabled={props.isLoading || !wizardContext.activeStep.enableNext}\n        >\n          {wizardContext.activeStep.nextButtonText ?? 'Next'}\n        </Button>\n        {!wizardContext.activeStep.hideBackButton && (\n          <Button\n            variant={ButtonVariant.secondary}\n            onClick={onBack}\n            isDisabled={wizardContext.activeStep.id === 0 || props.isLoading}\n          >\n            Back\n          </Button>\n        )}\n        {!wizardContext.activeStep.hideCancelButton && (\n          <Button\n            variant={ButtonVariant.link}\n            onClick={wizardContext.onClose}\n            isDisabled={props.isLoading}\n          >\n            Cancel\n          </Button>\n        )}\n        {props.isLoading ? (\n          <div className=\"pf-v5-u-mt-auto pf-v5-u-mb-md\">\n            <Spinner size=\"md\" />\n          </div>\n        ) : (\n          props.error && (\n            <Split>\n              <SplitItem>\n                <Icon status=\"danger\" className=\"pf-v5-u-mr-xs\">\n                  <ExclamationCircleIcon />\n                </Icon>\n              </SplitItem>\n              <SplitItem>{props.error}</SplitItem>\n            </Split>\n          )\n        )}\n      </WizardFooter>\n    );\n  };\n","import { Wizard } from '@patternfly/react-core';\nimport { Form, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { CreateBehaviorGroup } from '../../../../types/CreateBehaviorGroup';\nimport {\n  BehaviorGroupWizardFooter,\n  BehaviorGroupWizardFooterProps,\n} from './BehaviorGroupWizardFooter';\nimport { ExtendedWizardStep } from './ExtendedWizardStep';\n\ninterface BehaviorGroupWizardProps {\n  steps: Array<ExtendedWizardStep>;\n  onNext: BehaviorGroupWizardFooterProps['onNext'];\n  onBack: BehaviorGroupWizardFooterProps['onBack'];\n  onClose: () => void;\n  onSave: () => void;\n  onGoToStep: (stepId: number) => void;\n  loading: boolean;\n}\n\nexport const BehaviorGroupWizard: React.FunctionComponent<BehaviorGroupWizardProps> =\n  (props) => {\n    const { values } = useFormikContext<CreateBehaviorGroup>();\n    const title = (values.id ? 'Edit' : 'Create') + ' behavior group';\n\n    return (\n      <Form>\n        <Wizard\n          title={title}\n          steps={props.steps}\n          footer={\n            <BehaviorGroupWizardFooter\n              isLoading={props.loading}\n              onNext={props.onNext}\n              onBack={props.onBack}\n            />\n          }\n          isOpen={true}\n          startAtStep={1}\n          onGoToStep={(step) => props.onGoToStep((step.id as number) ?? 1)}\n          onClose={props.onClose}\n          onSave={props.onSave}\n        />\n      </Form>\n    );\n  };\n","import { createContext, useContext } from 'react';\n\nimport { UserIntegrationType } from '../../types/Integration';\nimport { IntegrationRef } from '../../types/Notification';\nimport { BaseNotificationRecipient } from '../../types/Recipient';\n\nexport type GetIntegrations = (\n  type: UserIntegrationType,\n  search?: string\n) => Promise<ReadonlyArray<IntegrationRef>>;\nexport type GetNotificationRecipients = () => Promise<\n  ReadonlyArray<BaseNotificationRecipient>\n>;\n\nexport interface RecipientContext {\n  getIntegrations: GetIntegrations;\n  getNotificationRecipients: GetNotificationRecipients;\n}\n\nconst RecipientContext = createContext<RecipientContext>({\n  getIntegrations: async () => {\n    throw new Error('No IntegrationContext found');\n  },\n  getNotificationRecipients: async () => {\n    throw new Error('No RecipientContext found');\n  },\n});\n\nexport const useRecipientContext = () => useContext(RecipientContext);\nexport const RecipientContextProvider = RecipientContext.Provider;\n","import produce from 'immer';\nimport { isEqual, uniqWith } from 'lodash';\nimport { useCallback, useContext, useMemo, useState } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport { getDefaultSystemEndpointAction } from '../../../services/Integrations/GetDefaultSystemEndpoint';\nimport {\n  SaveBehaviorGroupRequest,\n  useSaveBehaviorGroupMutation,\n} from '../../../services/Notifications/SaveBehaviorGroup';\nimport { toSystemProperties } from '../../../types/adapters/NotificationAdapter';\nimport {\n  BehaviorGroup,\n  BehaviorGroupRequest,\n  NotificationType,\n  SystemProperties,\n  UUID,\n  areActionsEqual,\n  isActionIntegration,\n  isActionNotify,\n} from '../../../types/Notification';\n\ninterface ActionToIdList {\n  (actions: BehaviorGroup['actions']): Array<UUID | undefined>;\n  (actions: BehaviorGroup['actions'], ids: Array<UUID>): Array<UUID>;\n}\n\nconst actionsToIdList: ActionToIdList = (\n  actions: BehaviorGroup['actions'],\n  ids?: Array<UUID>\n) => {\n  const remainingIds = ids ? ([...ids] as UUID[]) : undefined;\n  const endpointsToAdd = actions.reduce((toAdd, action) => {\n    if (isActionNotify(action)) {\n      action.recipient.forEach((recipient) => {\n        if (recipient.integrationId) {\n          toAdd.push(recipient.integrationId);\n        } else if (remainingIds === undefined) {\n          toAdd.push(undefined);\n        } else if (remainingIds.length > 0) {\n          toAdd.push(remainingIds.shift() as UUID);\n        } else {\n          throw new Error(\n            `No more ids remaining to assign: actions ${actions} newIds: ${ids}`\n          );\n        }\n      });\n    } else if (isActionIntegration(action)) {\n      toAdd.push(action.integration.id);\n    } else {\n      throw new Error(`Unknown action type: ${action}`);\n    }\n\n    return toAdd;\n  }, [] as Array<UUID | undefined>);\n\n  return endpointsToAdd as Array<UUID>;\n};\n\nexport enum SaveBehaviorGroupOperation {\n  CREATE,\n  UPDATE,\n}\n\nexport interface SaveBehaviorGroupResponse {\n  status: boolean;\n  operation: SaveBehaviorGroupOperation;\n}\n\nexport const useSaveBehaviorGroup = (\n  originalBehaviorGroup?: Partial<BehaviorGroup>\n) => {\n  const saveBehaviorGroupMutation = useSaveBehaviorGroupMutation();\n  const { query } = useContext(ClientContext);\n  const [fetchingIntegrations, setFetchingIntegrations] =\n    useState<boolean>(false);\n\n  const save = useCallback(\n    async (data: BehaviorGroupRequest): Promise<SaveBehaviorGroupResponse> => {\n      const mutate = saveBehaviorGroupMutation.mutate;\n      let needsSavingDisplayName = false;\n      let needsSavingActions = false;\n      let needsSavingEventTypes = false;\n\n      if (data.id === undefined) {\n        needsSavingDisplayName = true;\n        needsSavingActions = true;\n      }\n\n      if (data.displayName !== originalBehaviorGroup?.displayName) {\n        needsSavingDisplayName = true;\n      }\n\n      const originalEvents = [...(originalBehaviorGroup?.events ?? [])].sort();\n      const newEvents = [...(data.events ?? [])].sort();\n\n      if (\n        originalEvents.length !== newEvents.length ||\n        !originalEvents.every((value, index) => value === newEvents[index])\n      ) {\n        needsSavingEventTypes = true;\n      }\n\n      if (\n        !areActionsEqual(\n          originalBehaviorGroup?.actions ?? [],\n          data.actions ?? []\n        )\n      ) {\n        needsSavingActions = true;\n      }\n\n      const toFetch: ReadonlyArray<SystemProperties> = uniqWith(\n        ([] as Array<SystemProperties>).concat(\n          ...data.actions\n            .filter(isActionNotify)\n            .map((action) =>\n              produce(action, (draft) => {\n                draft.recipient = draft.recipient.filter(\n                  (r) => !r.integrationId\n                );\n              })\n            )\n            .map((action) => toSystemProperties(action))\n        ),\n        isEqual\n      );\n\n      if (\n        toFetch.find(\n          (props) =>\n            ![\n              NotificationType.EMAIL_SUBSCRIPTION,\n              NotificationType.DRAWER,\n            ].includes(props.type)\n        )\n      ) {\n        throw new Error(\n          'Only email and drawer subscriptions are created when assigning behavior groups'\n        );\n      }\n\n      if (toFetch.length > 0) {\n        setFetchingIntegrations(true);\n      }\n\n      const enpointIds = await Promise.all(\n        toFetch.map((systemProps) =>\n          query(getDefaultSystemEndpointAction(systemProps)).then((result) =>\n            result.payload?.type === 'Endpoint'\n              ? result.payload.value.id\n              : undefined\n          )\n        )\n      ).then((newIds) => {\n        if (newIds.includes(undefined)) {\n          throw new Error(\n            'Unexpected ids were returned when querying for system endpoints'\n          );\n        }\n\n        // We want to preserve the order\n        const remainingIds = [...newIds] as UUID[];\n        return actionsToIdList(data.actions, remainingIds);\n      });\n\n      const request: SaveBehaviorGroupRequest = {\n        ...data,\n        // cast, but it's OK - needsSavingDisplayName is always true when creating a new bg.\n        displayName: needsSavingDisplayName\n          ? data.displayName\n          : (undefined as unknown as string),\n        endpointIds: needsSavingActions ? enpointIds : undefined,\n        eventTypesIds: needsSavingEventTypes\n          ? data.events.map((e) => e.id)\n          : undefined,\n      };\n\n      if (\n        !needsSavingDisplayName &&\n        !needsSavingActions &&\n        !needsSavingEventTypes\n      ) {\n        return {\n          operation:\n            data.id === undefined\n              ? SaveBehaviorGroupOperation.CREATE\n              : SaveBehaviorGroupOperation.UPDATE,\n          status: true,\n        };\n      }\n\n      return mutate(request)\n        .then((value) => {\n          return {\n            operation:\n              data.id === undefined\n                ? SaveBehaviorGroupOperation.CREATE\n                : SaveBehaviorGroupOperation.UPDATE,\n            status: value.payload?.status === 200,\n          };\n        })\n        .catch(() => {\n          return {\n            operation:\n              data.id === undefined\n                ? SaveBehaviorGroupOperation.CREATE\n                : SaveBehaviorGroupOperation.UPDATE,\n            status: false,\n          };\n        });\n    },\n    [saveBehaviorGroupMutation.mutate, query, originalBehaviorGroup]\n  );\n\n  const isSaving = useMemo(() => {\n    return saveBehaviorGroupMutation.loading || fetchingIntegrations;\n  }, [saveBehaviorGroupMutation.loading, fetchingIntegrations]);\n\n  return {\n    save,\n    isSaving,\n  };\n};\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport { Recipient } from '../../../types/Recipient';\n\nexport class RecipientOption implements SelectOptionObject {\n  readonly recipient: Recipient;\n\n  constructor(recipient: Recipient) {\n    this.recipient = recipient;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  compareTo(selectOption: any): boolean {\n    if (selectOption instanceof RecipientOption) {\n      return this.recipient.equals(selectOption.recipient);\n    }\n\n    return false;\n  }\n\n  toString(): string {\n    return this.recipient.displayName;\n  }\n}\n","import { SelectOption, Skeleton } from '@patternfly/react-core';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\n\nimport { Recipient } from '../../../types/Recipient';\nimport { ReducerState } from './useTypeaheadReducer';\n\ntype Mapper<R> = (recipients: ReadonlyArray<R>) => React.ReactElement[];\ntype LoadingMapper = () => React.ReactElement[];\n\nconst getOptions = <R extends Recipient>(\n  values: ReadonlyArray<R>,\n  mapper: Mapper<R>,\n  isLoading: boolean,\n  loadingMapper?: LoadingMapper\n) => {\n  if (isLoading) {\n    return loadingMapper\n      ? loadingMapper()\n      : [\n          <SelectOption key=\"loading-option\" isNoResultsOption={true}>\n            <Skeleton width=\"100%\" />\n          </SelectOption>,\n        ];\n  }\n\n  return mapper(values);\n};\n\nexport const useRecipientOptionMemo = <R extends Recipient>(\n  state: ReducerState<R>,\n  mapper: Mapper<R>,\n  loadingMapper?: LoadingMapper\n) => {\n  return React.useMemo(() => {\n    if (state.show === 'default') {\n      return getOptions(\n        state.defaultValues,\n        mapper,\n        state.loadingDefault,\n        loadingMapper\n      );\n    } else if (state.show === 'filter') {\n      return getOptions(\n        state.filterValues,\n        mapper,\n        state.loadingFilter,\n        loadingMapper\n      );\n    }\n\n    assertNever(state.show);\n  }, [state, mapper, loadingMapper]);\n};\n","import assertNever from 'assert-never';\nimport produce, { castDraft } from 'immer';\nimport { Reducer, useCallback, useMemo, useReducer, useState } from 'react';\nimport { useDebounce } from 'react-use';\n\nexport interface ReducerState<T> {\n  filterValues: ReadonlyArray<T>;\n  defaultValues: ReadonlyArray<T>;\n  show: 'default' | 'filter';\n  loadingFilter: boolean;\n  loadingDefault: boolean;\n  lastSearch: string;\n}\n\nenum ReducerActionType {\n  LOAD_FILTER_VALUE,\n  SET_FILTER_VALUE,\n  USE_DEFAULTS,\n  SET_DEFAULTS,\n}\n\ntype ReducerAction<T> =\n  | {\n      type: ReducerActionType.USE_DEFAULTS;\n    }\n  | {\n      type: ReducerActionType.LOAD_FILTER_VALUE;\n      search: string;\n    }\n  | {\n      type: ReducerActionType.SET_FILTER_VALUE;\n      search: string;\n      values: ReadonlyArray<T>;\n    }\n  | {\n      type: ReducerActionType.SET_DEFAULTS;\n      values: ReadonlyArray<T>;\n    };\n\nconst reducerFunction = <T>(\n  state: ReducerState<T>,\n  action: ReducerAction<T>\n): ReducerState<T> => {\n  return produce(state, (draft) => {\n    switch (action.type) {\n      case ReducerActionType.SET_FILTER_VALUE:\n        if (action.search === state.lastSearch) {\n          if (action.values !== draft.filterValues) {\n            draft.loadingFilter = false;\n            draft.filterValues = castDraft(action.values);\n          }\n        }\n\n        break;\n      case ReducerActionType.LOAD_FILTER_VALUE:\n        if (action.search !== draft.lastSearch || draft.show !== 'filter') {\n          draft.loadingFilter = true;\n          draft.filterValues = [];\n          draft.lastSearch = action.search;\n          draft.show = 'filter';\n        }\n\n        break;\n      case ReducerActionType.USE_DEFAULTS:\n        if (draft.show !== 'default') {\n          draft.show = 'default';\n        }\n\n        break;\n      case ReducerActionType.SET_DEFAULTS:\n        draft.defaultValues = castDraft(action.values);\n        draft.loadingDefault = false;\n        break;\n      default:\n        assertNever(action);\n    }\n  });\n};\n\nexport const useTypeaheadReducer = <T>() => {\n  const [state, dispatch] = useReducer<\n    Reducer<ReducerState<T>, ReducerAction<T>>\n  >(reducerFunction, {\n    filterValues: [],\n    defaultValues: [],\n    show: 'default',\n    loadingFilter: false,\n    loadingDefault: true,\n    lastSearch: '',\n  } as ReducerState<T>);\n\n  const [debouncedState, setDebouncedState] = useState<ReducerState<T>>(state);\n\n  useDebounce(\n    () => {\n      setDebouncedState(state);\n    },\n    400,\n    [state]\n  );\n\n  const setFilterValue = useCallback(\n    (search: string, values: ReadonlyArray<T>) =>\n      dispatch({\n        type: ReducerActionType.SET_FILTER_VALUE,\n        values,\n        search,\n      }),\n    [dispatch]\n  );\n\n  const loadFilterValue = useCallback(\n    (search: string) =>\n      dispatch({\n        type: ReducerActionType.LOAD_FILTER_VALUE,\n        search,\n      }),\n    [dispatch]\n  );\n\n  const setDefaults = useCallback(\n    (values: ReadonlyArray<T>) =>\n      dispatch({\n        type: ReducerActionType.SET_DEFAULTS,\n        values,\n      }),\n    [dispatch]\n  );\n\n  const useDefaults = useCallback(\n    () =>\n      dispatch({\n        type: ReducerActionType.USE_DEFAULTS,\n      }),\n    [dispatch]\n  );\n\n  const dispatchers = useMemo(\n    () => ({\n      setFilterValue,\n      loadFilterValue,\n      setDefaults,\n      useDefaults,\n    }),\n    [setFilterValue, loadFilterValue, setDefaults, useDefaults]\n  );\n\n  return [debouncedState, dispatchers] as [typeof state, typeof dispatchers];\n};\n","import {\n  Select,\n  SelectOption,\n  SelectOptionObject,\n  SelectVariant,\n} from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { useFormikContext } from 'formik';\nimport * as React from 'react';\nimport { usePrevious } from 'react-use';\nimport { DeepPartial } from 'ts-essentials';\n\nimport Config from '../../../config/Config';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport {\n  ActionIntegration,\n  BehaviorGroup,\n  IntegrationRef,\n  NotificationType,\n} from '../../../types/Notification';\nimport { IntegrationRecipient } from '../../../types/Recipient';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { useRecipientContext } from '../RecipientContext';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface IntegrationRecipientTypeaheadProps extends OuiaComponentProps {\n  selected: Partial<IntegrationRef> | undefined;\n  integrationType: UserIntegrationType;\n  isDisabled?: boolean;\n  onSelected: (recipientOption: RecipientOption) => void;\n  onOpenChange?: (isOpen: boolean) => void;\n  error?: boolean;\n}\n\nexport const IntegrationRecipientTypeahead: React.FunctionComponent<IntegrationRecipientTypeaheadProps> =\n  (props) => {\n    const [isOpen, setOpen] = React.useState(false);\n    const prevOpen = usePrevious(isOpen);\n\n    const { getIntegrations } = useRecipientContext();\n    const { values } = useFormikContext<DeepPartial<BehaviorGroup>>();\n\n    const [state, dispatchers] = useTypeaheadReducer<IntegrationRecipient>();\n\n    const toggle = React.useCallback(\n      (isOpen: boolean) => {\n        setOpen(isOpen);\n      },\n      [setOpen]\n    );\n\n    React.useEffect(() => {\n      const onOpenChange = props.onOpenChange;\n      if (prevOpen !== undefined && prevOpen !== isOpen) {\n        onOpenChange && onOpenChange(isOpen);\n      }\n    }, [prevOpen, isOpen, props.onOpenChange]);\n\n    React.useEffect(() => {\n      getIntegrations(props.integrationType, '').then((integrations) => {\n        const defaults = integrations.map((i) => new IntegrationRecipient(i));\n        dispatchers.setDefaults(defaults);\n      });\n    }, [getIntegrations, props.integrationType, dispatchers]);\n\n    React.useEffect(() => {\n      if (state.loadingFilter) {\n        getIntegrations(props.integrationType, state.lastSearch).then(\n          (integrations) =>\n            dispatchers.setFilterValue(\n              state.lastSearch,\n              integrations.map((i) => new IntegrationRecipient(i))\n            )\n        );\n      }\n    }, [\n      getIntegrations,\n      props.integrationType,\n      state.loadingFilter,\n      state.lastSearch,\n      dispatchers,\n    ]);\n\n    const existingIntegrations = React.useMemo(() => {\n      const integrationActions = (values.actions ?? [])\n        .filter((action) => action?.type === NotificationType.INTEGRATION)\n        .map((action) => (action as ActionIntegration)?.integration.id);\n\n      return new Set<string>(integrationActions);\n    }, [values]);\n\n    const integrationsMapper = React.useCallback(\n      (recipients: ReadonlyArray<IntegrationRecipient>) => {\n        return recipients.map((r) => {\n          const isDisabled = existingIntegrations?.has(r.integration.id);\n\n          return (\n            <SelectOption\n              key={r.getKey()}\n              value={new RecipientOption(r)}\n              description={\n                isDisabled\n                  ? 'This integration has already been added'\n                  : undefined\n              }\n              isDisabled={isDisabled}\n            />\n          );\n        });\n      },\n      [existingIntegrations]\n    );\n\n    const options = useRecipientOptionMemo(state, integrationsMapper);\n\n    const onFilter = React.useCallback(\n      (e: React.ChangeEvent<HTMLInputElement> | null) => {\n        // Ignore filter calls with null event\n        if (e === null) {\n          return options;\n        }\n\n        const search = e.target.value?.trim();\n        if (search === '') {\n          dispatchers.useDefaults();\n        } else {\n          dispatchers.loadFilterValue(search);\n        }\n\n        return options;\n      },\n      [dispatchers, options]\n    );\n\n    const selection = React.useMemo(() => {\n      const sel = props.selected;\n      if (\n        sel === undefined ||\n        sel.name === undefined ||\n        sel.id === undefined ||\n        sel.type === undefined\n      ) {\n        return undefined;\n      }\n\n      return new RecipientOption(\n        new IntegrationRecipient(sel as IntegrationRef)\n      );\n    }, [props.selected]);\n\n    const onSelect = React.useCallback(\n      (_event, value: string | SelectOptionObject) => {\n        const integrationSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n          integrationSelected(value);\n          setOpen(false);\n        }\n      },\n      [props.onSelected]\n    );\n\n    const chooseText = `Choose ${Config.integrations.types[\n      props.integrationType\n    ].name.toLowerCase()}`;\n\n    return (\n      <div {...getOuiaProps('IntegrationRecipientTypeahead', props)}>\n        <Select\n          maxHeight={400}\n          variant={SelectVariant.typeahead}\n          typeAheadAriaLabel={chooseText}\n          placeholderText={chooseText}\n          selections={selection}\n          onSelect={onSelect}\n          onToggle={toggle}\n          isOpen={isOpen}\n          onFilter={onFilter}\n          menuAppendTo={document.body}\n          isDisabled={props.isDisabled}\n          validated={props.error ? 'error' : undefined}\n        >\n          {options}\n        </Select>\n      </div>\n    );\n  };\n","import {\n  Chip,\n  ChipGroup,\n  Select,\n  SelectGroup,\n  SelectOption,\n  SelectOptionObject,\n  SelectVariant,\n  Skeleton,\n} from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { usePrevious } from 'react-use';\n\nimport {\n  BaseNotificationRecipient,\n  NotificationRbacGroupRecipient,\n  NotificationUserRecipient,\n} from '../../../types/Recipient';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { GroupNotFound } from '../Rbac/GroupNotFound';\nimport { useRecipientContext } from '../RecipientContext';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface RecipientTypeaheadProps extends OuiaComponentProps {\n  selected: ReadonlyArray<BaseNotificationRecipient>;\n  onSelected: (value: RecipientOption) => void;\n  isDisabled?: boolean;\n  onClear: () => void;\n  onOpenChange?: (isOpen: boolean) => void;\n  error?: boolean;\n}\n\nconst rbacGroupKey = 'groups';\nconst rbacGroupLabel = 'User Access Groups';\n\nconst renderSelectGroup = (\n  key: string,\n  label: string,\n  options: ReadonlyArray<BaseNotificationRecipient>\n) =>\n  options.length > 0 ? (\n    <SelectGroup key={key} label={label}>\n      {options.map((r) => {\n        if (r instanceof NotificationRbacGroupRecipient && r.isLoading) {\n          return (\n            <SelectOption key={r.getKey()} isNoResultsOption>\n              <Skeleton width=\"100%\" />\n            </SelectOption>\n          );\n        }\n\n        return (\n          <SelectOption\n            key={r.getKey()}\n            value={new RecipientOption(r)}\n            description={r.description}\n          />\n        );\n      })}\n    </SelectGroup>\n  ) : (\n    <React.Fragment key={key} />\n  );\n\nconst recipientMapper = (\n  recipients: ReadonlyArray<BaseNotificationRecipient>\n) => {\n  return [renderSelectGroup(rbacGroupKey, rbacGroupLabel, recipients)];\n};\n\nconst loadingMapper = () => {\n  return [\n    <SelectGroup key={rbacGroupKey} label={rbacGroupLabel}>\n      <SelectOption key=\"loading-group\" isNoResultsOption={true}>\n        <Skeleton width=\"100%\" />\n      </SelectOption>\n    </SelectGroup>,\n  ];\n};\n\nconst userOptions = [\n  renderSelectGroup('users', 'Users', [\n    new NotificationUserRecipient(undefined, false, false),\n    new NotificationUserRecipient(undefined, true, false),\n  ]),\n];\n\nexport const RecipientTypeahead: React.FunctionComponent<RecipientTypeaheadProps> =\n  (props) => {\n    const [isOpen, setOpen] = React.useState(false);\n    const [state, dispatchers] =\n      useTypeaheadReducer<BaseNotificationRecipient>();\n    const prevOpen = usePrevious(isOpen);\n    const { getNotificationRecipients } = useRecipientContext();\n\n    React.useEffect(() => {\n      getNotificationRecipients().then((recipients) =>\n        dispatchers.setDefaults(recipients)\n      );\n    }, [getNotificationRecipients, dispatchers]);\n\n    React.useEffect(() => {\n      if (state.loadingFilter) {\n        getNotificationRecipients().then((recipients) =>\n          dispatchers.setFilterValue(state.lastSearch, recipients)\n        );\n      }\n    }, [\n      getNotificationRecipients,\n      state.loadingFilter,\n      state.lastSearch,\n      dispatchers,\n    ]);\n\n    const toggle = React.useCallback(\n      (isOpen: boolean) => {\n        setOpen(isOpen);\n      },\n      [setOpen]\n    );\n\n    React.useEffect(() => {\n      const onOpenChange = props.onOpenChange;\n      if (prevOpen !== undefined && prevOpen !== isOpen) {\n        onOpenChange && onOpenChange(isOpen);\n      }\n    }, [prevOpen, isOpen, props.onOpenChange]);\n\n    // We probably need to augment these.\n    // Change to use this  mapper only for the groups and prepend the Users\n    const rbacOptions = useRecipientOptionMemo(\n      state,\n      recipientMapper,\n      loadingMapper\n    );\n    // augment rbacOptions\n    const options = React.useMemo(\n      () => [...userOptions, ...rbacOptions],\n      [rbacOptions]\n    );\n\n    const selection = React.useMemo(() => {\n      const sel = props.selected;\n      if (sel === undefined) {\n        return undefined;\n      }\n\n      return (sel as ReadonlyArray<NotificationUserRecipient>).map(\n        (s) => new RecipientOption(s)\n      );\n    }, [props.selected]);\n\n    const onSelect = React.useCallback(\n      (_event, value: string | SelectOptionObject) => {\n        const onSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n          onSelected(value);\n        }\n      },\n      [props.onSelected]\n    );\n\n    const selectContent = React.useMemo(() => {\n      return selection?.map((value) => {\n        const unselect =\n          (element: RecipientOption) => (evt: React.MouseEvent) => {\n            evt.stopPropagation();\n            onSelect(evt, element);\n          };\n\n        const key = value.recipient.getKey();\n\n        if (value.recipient instanceof NotificationRbacGroupRecipient) {\n          if (value.recipient.isLoading) {\n            return (\n              <Chip key={key} onClick={unselect(value)}>\n                <Skeleton data-testid=\"loading-group\" width=\"40px\" />\n              </Chip>\n            );\n          } else if (value.recipient.hasError) {\n            return <GroupNotFound key={key} onClose={unselect(value)} />;\n          }\n        }\n\n        return (\n          <Chip onClick={unselect(value)} key={key}>\n            {value.recipient.displayName}\n          </Chip>\n        );\n      });\n    }, [selection, onSelect]);\n\n    return (\n      <div {...getOuiaProps('RecipientTypeahead', props)}>\n        <Select\n          maxHeight={400}\n          variant={SelectVariant.checkbox}\n          selections={selection}\n          onSelect={onSelect}\n          onToggle={toggle}\n          isOpen={isOpen}\n          menuAppendTo={document.body}\n          isDisabled={props.isDisabled}\n          onClear={props.onClear}\n          validated={props.error ? 'error' : undefined}\n          isGrouped\n          isCheckboxSelectionBadgeHidden\n          // hasInlineFilter // Disabled filter. see: https://github.com/patternfly/patternfly-react/issues/7134\n          isInputValuePersisted\n          placeholderText={<ChipGroup>{selectContent}</ChipGroup>}\n        >\n          {options}\n        </Select>\n      </div>\n    );\n  };\n","import { FormHelperText, Select, SelectVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationType } from '../../../types/Integration';\nimport { Action, NotificationType } from '../../../types/Notification';\nimport { UseBehaviorGroupActionHandlers } from '../BehaviorGroup/useBehaviorGroupActionHandlers';\nimport { IntegrationRecipientTypeahead } from '../Form/IntegrationRecipientTypeahead';\nimport { RecipientTypeahead } from '../Form/RecipientTypeahead';\n\ninterface RecipientFormProps {\n  action?: Action;\n  integrationSelected: ReturnType<\n    UseBehaviorGroupActionHandlers['handleIntegrationSelected']\n  >;\n  recipientSelected: ReturnType<\n    UseBehaviorGroupActionHandlers['handleRecipientSelected']\n  >;\n  recipientOnClear: ReturnType<\n    UseBehaviorGroupActionHandlers['handleRecipientOnClear']\n  >;\n  onOpenChange?: (isOpen: boolean) => void;\n  error?: string;\n}\n\nconst dummyOnToggle = () => false;\n\nexport const RecipientForm: React.FunctionComponent<RecipientFormProps> = (\n  props\n) => {\n  let recipient: React.ReactNode;\n\n  if (!props.action) {\n    recipient = (\n      <div>\n        <Select\n          variant={SelectVariant.typeahead}\n          isDisabled\n          onToggle={dummyOnToggle}\n          isOpen={false}\n        />\n      </div>\n    );\n  } else if (props.action.type === NotificationType.INTEGRATION) {\n    recipient = (\n      <IntegrationRecipientTypeahead\n        onSelected={props.integrationSelected}\n        integrationType={\n          props.action.integration?.type ?? IntegrationType.WEBHOOK\n        }\n        selected={props.action.integration}\n        onOpenChange={props.onOpenChange}\n        error={!!props.error}\n      />\n    );\n  } else {\n    recipient = (\n      <RecipientTypeahead\n        onSelected={props.recipientSelected}\n        selected={props.action.recipient}\n        onClear={props.recipientOnClear}\n        onOpenChange={props.onOpenChange}\n        error={!!props.error}\n      />\n    );\n  }\n\n  return (\n    <>\n      {' '}\n      {recipient}\n      {props.error && (\n        <FormHelperText isError isHidden={!props.error}>\n          {props.error}\n        </FormHelperText>\n      )}\n    </>\n  );\n};\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport Config from '../../../config/Config';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { NotificationType } from '../../../types/Notification';\n\ntype ActionTypeOrIntegration =\n  | {\n      kind: 'integration';\n      type: UserIntegrationType;\n    }\n  | {\n      kind: 'notification';\n      type: NotificationType;\n    };\n\nexport class ActionOption implements SelectOptionObject {\n  readonly integrationType: UserIntegrationType | undefined;\n  readonly notificationType: NotificationType;\n\n  constructor(type: ActionTypeOrIntegration) {\n    if (type.kind === 'integration') {\n      this.notificationType = NotificationType.INTEGRATION;\n      this.integrationType = type.type;\n    } else {\n      this.notificationType = type.type;\n      this.integrationType = undefined;\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  compareTo(selectOption: any): boolean {\n    if (selectOption instanceof ActionOption) {\n      return (\n        selectOption.notificationType === this.notificationType &&\n        selectOption.integrationType === this.integrationType\n      );\n    }\n\n    return false;\n  }\n\n  toString(): string {\n    const actionName = Config.notifications.types[this.notificationType].name;\n    if (this.integrationType) {\n      const integrationName =\n        Config.integrations.types[this.integrationType].name;\n      return `${actionName}: ${integrationName}`;\n    }\n\n    return actionName;\n  }\n}\n","import {\n  Select,\n  SelectOption,\n  SelectOptionObject,\n  SelectVariant,\n} from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport produce from 'immer';\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useIntegrations } from '../../../hooks/useIntegrations';\nimport { useNotifications } from '../../../hooks/useNotifications';\nimport { linkTo } from '../../../Routes';\nimport {\n  UserIntegrationType,\n  isUserIntegrationType,\n} from '../../../types/Integration';\nimport { Action, NotificationType } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { useRecipientContext } from '../RecipientContext';\nimport { ActionOption } from './ActionOption';\n\nconst getSelectOptions = (\n  availableNotificationTypes: ReadonlyArray<NotificationType>,\n  availableIntegrationTypes: ReadonlyArray<UserIntegrationType>,\n  selectedNotifications: ReadonlyArray<NotificationType>\n) => [\n  ...availableNotificationTypes\n    .filter((type) => !selectedNotifications.includes(type))\n    .map(\n      (type) =>\n        new ActionOption({\n          kind: 'notification',\n          type,\n        })\n    ),\n  ...availableIntegrationTypes.map(\n    (type) =>\n      new ActionOption({\n        kind: 'integration',\n        type,\n      })\n  ),\n];\n\ntype NoIntegrationConfigured = {\n  testNoIntegrationRenderWithoutRelAndTarget?: boolean;\n};\n\nconst NoIntegrationConfigured: React.FunctionComponent<NoIntegrationConfigured> =\n  (props) => (\n    <>\n      <div>You have no integration configured.</div>\n      <div>\n        Go to Settings {'>'}{' '}\n        <Link\n          style={{ pointerEvents: 'all' }}\n          rel={\n            props.testNoIntegrationRenderWithoutRelAndTarget\n              ? undefined\n              : 'noopener noreferrer'\n          }\n          target={\n            props.testNoIntegrationRenderWithoutRelAndTarget\n              ? undefined\n              : '_blank'\n          }\n          to={linkTo.integrations()}\n        >\n          Integrations\n        </Link>{' '}\n        to configure.\n      </div>\n    </>\n  );\n\nexport interface ActionTypeaheadProps extends OuiaComponentProps {\n  selectedNotifications: ReadonlyArray<NotificationType>;\n  action?: Action;\n  isDisabled?: boolean;\n  onSelected: (actionOption: ActionOption) => void;\n  testNoIntegrationRenderWithoutRelAndTarget?: boolean;\n}\n\nexport const ActionTypeahead: React.FunctionComponent<ActionTypeaheadProps> = (\n  props\n) => {\n  const [isOpen, setOpen] = React.useState(false);\n  const { getIntegrations } = useRecipientContext();\n  const [hasIntegrations, setHasIntegrations] = React.useState<\n    Record<UserIntegrationType, boolean>\n  >(\n    Object.values(UserIntegrationType).reduce((types, type) => {\n      types[type] = true;\n      return types;\n    }, {} as Record<UserIntegrationType, boolean>)\n  );\n\n  React.useEffect(() => {\n    Object.values(UserIntegrationType).forEach(async (type) => {\n      const values = await getIntegrations(type);\n      setHasIntegrations(\n        produce((draft) => {\n          draft[type] = values.length > 0;\n        })\n      );\n    });\n  }, [getIntegrations]);\n\n  const toggle = React.useCallback(\n    (isExpanded: boolean) => {\n      setOpen(isExpanded);\n    },\n    [setOpen]\n  );\n\n  const onSelect = React.useCallback(\n    (_event, value: string | SelectOptionObject) => {\n      const actionSelected = props.onSelected;\n      if (value instanceof ActionOption) {\n        actionSelected(value);\n        setOpen(false);\n      }\n    },\n    [props.onSelected, setOpen]\n  );\n\n  const selectedOption = React.useMemo(() => {\n    if (!props.action) {\n      return undefined;\n    }\n\n    if (props.action.type === NotificationType.INTEGRATION) {\n      return new ActionOption({\n        kind: 'integration',\n        type: props.action.integration.type,\n      });\n    }\n\n    return new ActionOption({\n      kind: 'notification',\n      type: props.action.type,\n    });\n  }, [props.action]);\n\n  const integrationTypes = useIntegrations();\n  const notificationTypes = useNotifications();\n\n  const selectableOptions = React.useMemo(() => {\n    return getSelectOptions(\n      notificationTypes,\n      integrationTypes,\n      props.selectedNotifications\n    ).map((o) => {\n      const isDisabled =\n        isUserIntegrationType(o.integrationType) &&\n        !hasIntegrations[o.integrationType];\n      return (\n        <SelectOption\n          isDisabled={isDisabled}\n          key={o.toString()}\n          value={o}\n          description={\n            isDisabled && (\n              <NoIntegrationConfigured\n                testNoIntegrationRenderWithoutRelAndTarget={\n                  props.testNoIntegrationRenderWithoutRelAndTarget\n                }\n              />\n            )\n          }\n        />\n      );\n    });\n  }, [\n    notificationTypes,\n    integrationTypes,\n    props.selectedNotifications,\n    hasIntegrations,\n    props.testNoIntegrationRenderWithoutRelAndTarget,\n  ]);\n\n  return (\n    <div {...getOuiaProps('ActionTypeahead', props)}>\n      <Select\n        maxHeight={400}\n        variant={SelectVariant.single}\n        aria-label=\"Select action\"\n        placeholderText=\"Select action\"\n        selections={selectedOption}\n        onToggle={toggle}\n        isOpen={isOpen}\n        onSelect={onSelect}\n        menuAppendTo={document.body}\n        isDisabled={props.isDisabled}\n      >\n        {selectableOptions}\n      </Select>\n    </div>\n  );\n};\n","import { Button, ButtonVariant, GridItem } from '@patternfly/react-core';\nimport { MinusCircleIcon, PlusCircleIcon } from '@patternfly/react-icons';\nimport {\n  IActions,\n  ICell,\n  IRow,\n  IRowData,\n  Table,\n  TableBody,\n  TableHeader,\n  TableVariant,\n  cellWidth,\n} from '@patternfly/react-table';\nimport { important } from 'csx';\nimport { FieldArrayRenderProps, FormikProps } from 'formik';\nimport produce, { Draft, castDraft } from 'immer';\nimport * as React from 'react';\nimport { DeepPartial } from 'ts-essentials';\nimport { cssRaw, style } from 'typestyle';\n\nimport {\n  Action,\n  BehaviorGroup,\n  NewBehaviorGroup,\n  NotificationType,\n} from '../../../types/Notification';\nimport { RecipientForm } from '../EditableActionRow/RecipientForm';\nimport { ActionTypeahead } from '../Form/ActionTypeahead';\nimport {\n  SetActionUpdater,\n  UseBehaviorGroupActionHandlers,\n  useBehaviorGroupActionHandlers,\n} from './useBehaviorGroupActionHandlers';\n\ncssRaw(`\n    @media only screen and (max-width: 768px) {\n        .pf-c-select .pf-c-select__toggle-typeahead {\n            --pf-c-select__toggle-typeahead--FlexBasis: 0;\n        }\n    }\n`);\n\nexport type BehaviorGroupFormTableProps = FieldArrayRenderProps & {\n  form: FormikProps<FormType>;\n};\n\ntype FormType = DeepPartial<BehaviorGroup | NewBehaviorGroup>;\n\nconst tableHeaderClassName = style({\n  $nest: {\n    '& tr': {\n      borderBottom: important(0),\n    },\n    '& th:first-child': {\n      paddingLeft: important(0),\n    },\n    '& th:last-child, & td:last-child': {\n      paddingRight: important(0),\n    },\n  },\n});\n\nconst tableBodyClassName = style({\n  $nest: {\n    '& td:first-child': {\n      paddingLeft: important(0),\n    },\n    '& td:last-child': {\n      paddingRight: important(0),\n    },\n    '& td': {\n      verticalAlign: important('top'),\n    },\n  },\n});\n\nconst alignLeftClassName = style({\n  textAlign: 'left',\n  paddingLeft: 0,\n});\n\nconst cells: Array<ICell> = [\n  {\n    title: 'Actions',\n    transforms: [cellWidth(50)],\n  },\n  {\n    title: 'Recipient',\n  },\n];\n\nconst toTableRows = (\n  actions: ReadonlyArray<Action | undefined>,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  errors: any,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  touched: any,\n  selectedNotifications: ReadonlyArray<NotificationType>,\n  rowHandlers: UseBehaviorGroupActionHandlers,\n  setFieldTouched: (\n    field: string,\n    isTouched?: boolean,\n    shouldValidate?: boolean\n  ) => void\n): Array<IRow> => {\n  return actions.map((action, index) => {\n    let error: string | undefined = undefined;\n    let isTouched = false;\n    let path;\n\n    if (action?.type === NotificationType.INTEGRATION) {\n      path = `actions.${index}.integration`;\n    } else {\n      path = `actions.${index}.recipient`;\n    }\n\n    if (action?.type === NotificationType.INTEGRATION) {\n      if (touched[index]?.integration) {\n        isTouched = true;\n      }\n\n      if (isTouched && errors[index]?.integration) {\n        error = 'Select a recipient for this integration.';\n      }\n    }\n\n    if (!error && isTouched) {\n      setFieldTouched(path, false, false);\n    }\n\n    return {\n      id: index,\n      key: index,\n      cells: [\n        {\n          title: (\n            <ActionTypeahead\n              selectedNotifications={selectedNotifications}\n              action={action}\n              onSelected={rowHandlers.handleActionSelected(index)}\n            />\n          ),\n        },\n        {\n          title: (\n            <RecipientForm\n              action={action}\n              integrationSelected={rowHandlers.handleIntegrationSelected(index)}\n              recipientSelected={rowHandlers.handleRecipientSelected(index)}\n              recipientOnClear={rowHandlers.handleRecipientOnClear(index)}\n              error={error}\n              onOpenChange={(isOpen) => {\n                if (!isOpen) {\n                  setFieldTouched(path, true, false);\n                }\n              }}\n            />\n          ),\n        },\n      ],\n    };\n  });\n};\n\nconst emptySpan = () => <span />;\n\nexport const BehaviorGroupFormActionsTable: React.FunctionComponent<BehaviorGroupFormTableProps> =\n  (props) => {\n    const { values, setValues, errors, touched, setFieldTouched } = props.form;\n    const actions = React.useMemo<ReadonlyArray<Action | undefined>>(\n      () => values.actions ?? ([] as ReadonlyArray<Action>),\n      [values]\n    );\n    const touchedActions = React.useMemo(\n      () => touched?.actions ?? [],\n      [touched]\n    );\n    const errorActions = React.useMemo(() => errors?.actions ?? [], [errors]);\n\n    const selectedNotifications = React.useMemo(\n      () =>\n        new Array(\n          ...new Set<NotificationType>(\n            (actions.filter((a) => a) as ReadonlyArray<Action>).map(\n              (a) => a.type\n            )\n          )\n        ) as ReadonlyArray<NotificationType>,\n      [actions]\n    );\n\n    const setValueDispatch = React.useCallback(\n      (updater: SetActionUpdater) => {\n        setValues(\n          produce((prev) => {\n            const form = prev as Draft<FormType>;\n            if (updater instanceof Function) {\n              form.actions = castDraft(\n                updater(form.actions as ReadonlyArray<DeepPartial<Action>>)\n              );\n            } else {\n              form.actions = castDraft(updater);\n            }\n          }),\n          false\n        );\n      },\n      [setValues]\n    );\n\n    const addAction = React.useCallback(() => {\n      const push = props.push;\n      push(undefined);\n    }, [props.push]);\n\n    React.useEffect(() => {\n      if (actions.length === 0) {\n        addAction();\n      }\n    }, [actions, addAction]);\n\n    const rowHandlers = useBehaviorGroupActionHandlers(setValueDispatch);\n\n    const rows = React.useMemo(\n      () =>\n        toTableRows(\n          actions,\n          errorActions,\n          touchedActions,\n          selectedNotifications,\n          rowHandlers,\n          setFieldTouched\n        ),\n      [\n        actions,\n        errorActions,\n        touchedActions,\n        selectedNotifications,\n        rowHandlers,\n        setFieldTouched,\n      ]\n    );\n\n    const actionResolver = React.useCallback(\n      (rowData: IRowData): IActions => {\n        const handleRemove = props.handleRemove;\n        if (rows.length > 1) {\n          return [\n            {\n              key: 'delete',\n              title: (\n                <Button\n                  aria-label=\"delete-action\"\n                  variant={ButtonVariant.plain}\n                >\n                  <MinusCircleIcon />\n                </Button>\n              ),\n              isOutsideDropdown: true,\n              onClick: handleRemove(rowData.id),\n            },\n          ];\n        }\n\n        return [];\n      },\n      [rows, props.handleRemove]\n    );\n\n    return (\n      <>\n        <Table\n          aria-label=\"behavior-group-actions-form\"\n          rows={rows}\n          cells={cells}\n          actionResolver={actionResolver}\n          actionsToggle={\n            emptySpan as any /* eslint-disable-line @typescript-eslint/no-explicit-any */\n          }\n          borders={false}\n          variant={TableVariant.compact}\n          isStickyHeader={true}\n        >\n          <TableHeader className={tableHeaderClassName} />\n          <TableBody className={tableBodyClassName} />\n        </Table>\n        <GridItem span={12}>\n          <Button\n            className={alignLeftClassName}\n            variant={ButtonVariant.link}\n            icon={<PlusCircleIcon />}\n            onClick={addAction}\n          >\n            Add action\n          </Button>\n        </GridItem>\n      </>\n    );\n  };\n","import produce, { Draft, castDraft, original } from 'immer';\nimport { SetStateAction, useCallback } from 'react';\nimport { DeepPartial } from 'ts-essentials';\n\nimport {\n  Action,\n  ActionIntegration,\n  ActionNotify,\n  NotificationType,\n} from '../../../types/Notification';\nimport {\n  BaseNotificationRecipient,\n  IntegrationRecipient,\n  NotificationUserRecipient,\n} from '../../../types/Recipient';\nimport { ActionOption } from '../Form/ActionOption';\nimport { RecipientOption } from '../Form/RecipientOption';\n\nexport interface UseBehaviorGroupActionHandlers {\n  handleActionSelected: (index: number) => (value: ActionOption) => void;\n  handleIntegrationSelected: (\n    index: number\n  ) => (value: RecipientOption) => void;\n  handleRecipientSelected: (index: number) => (value: RecipientOption) => void;\n  handleRecipientOnClear: (index: number) => () => void;\n}\n\nexport type SetActionUpdater = SetStateAction<\n  ReadonlyArray<DeepPartial<Action>>\n>;\n\nexport const useBehaviorGroupActionHandlers = (\n  setActions: (updater: SetActionUpdater) => void\n): UseBehaviorGroupActionHandlers => {\n  const handleActionSelected = useCallback(\n    (index: number) => (value: ActionOption) => {\n      setActions(\n        produce((prev) => {\n          if (!prev[index]) {\n            prev[index] = {};\n          }\n\n          const row = prev[index];\n          row.type = value.notificationType;\n          if (value.integrationType) {\n            const rowAsIntegration = row as Draft<\n              DeepPartial<ActionIntegration>\n            >;\n            rowAsIntegration.integration = {\n              type: value.integrationType,\n            };\n          } else {\n            const rowAsNotification = row as Draft<ActionNotify>;\n            rowAsNotification.recipient = [];\n          }\n        })\n      );\n    },\n    [setActions]\n  );\n\n  const handleIntegrationSelected = useCallback(\n    (index: number) => (value: RecipientOption) => {\n      setActions(\n        produce((prev) => {\n          if (value.recipient instanceof IntegrationRecipient) {\n            const rowAsIntegration = prev[index] as Draft<ActionIntegration>;\n            rowAsIntegration.integration = value.recipient.integration;\n          }\n        })\n      );\n    },\n    [setActions]\n  );\n\n  const handleRecipientSelected = useCallback(\n    (index: number) => (value: RecipientOption) => {\n      setActions(\n        produce((prev) => {\n          const row = prev[index];\n          if (row.type !== NotificationType.INTEGRATION) {\n            const rowAsNotification = row as Draft<ActionNotify>;\n            const originalRecipient = original(rowAsNotification.recipient);\n            if (originalRecipient) {\n              const index = originalRecipient.findIndex((r) =>\n                value.recipient.equals(r as NotificationUserRecipient)\n              );\n              if (index === -1) {\n                rowAsNotification.recipient.push(\n                  castDraft(value.recipient as BaseNotificationRecipient)\n                );\n              } else {\n                rowAsNotification.recipient.splice(index, 1);\n              }\n            }\n          }\n        })\n      );\n    },\n    [setActions]\n  );\n\n  const handleRecipientOnClear = useCallback(\n    (index: number) => () => {\n      setActions(\n        produce((prev) => {\n          const row = prev[index];\n          if (row.type !== NotificationType.INTEGRATION) {\n            const rowAsNotification = row as Draft<ActionNotify>;\n            rowAsNotification.recipient = [];\n          }\n        })\n      );\n    },\n    [setActions]\n  );\n\n  return {\n    handleActionSelected,\n    handleIntegrationSelected,\n    handleRecipientSelected,\n    handleRecipientOnClear,\n  };\n};\n","import { Grid } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { FieldArray } from 'formik';\nimport * as React from 'react';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { BehaviorGroupFormActionsTable } from './BehaviorGroupFormActionsTable';\n\nexport interface EditBehaviorGroupProps extends OuiaComponentProps {\n  behaviorGroup?: Partial<BehaviorGroup>;\n}\n\nexport const EditBehaviorGroupForm: React.FunctionComponent<EditBehaviorGroupProps> =\n  (props) => {\n    return (\n      <div {...getOuiaProps('Notifications/BehaviorGroupForm', props)}>\n        <Grid hasGutter>\n          <FieldArray name=\"actions\">\n            {(helpers) => (\n              <>\n                <BehaviorGroupFormActionsTable {...helpers} />\n              </>\n            )}\n          </FieldArray>\n        </Grid>\n      </div>\n    );\n  };\n","import * as Yup from 'yup';\n\nimport { NotificationType } from '../../types/Notification';\n\nconst ActionIntegration = Yup.object({\n  type: Yup.mixed().oneOf([NotificationType.INTEGRATION]).required(),\n  integration: Yup.object({\n    id: Yup.string().required(),\n  }).required(),\n  integrationId: Yup.string().min(1),\n});\n\nconst ActionNotify = Yup.object({\n  type: Yup.mixed()\n    .oneOf([NotificationType.EMAIL_SUBSCRIPTION, NotificationType.DRAWER])\n    .required(),\n  recipient: Yup.array(Yup.object()).min(1),\n  integrationId: Yup.string().min(0),\n});\n\ntype ActionsType =\n  | Yup.TypeOf<typeof ActionIntegration>\n  | Yup.TypeOf<typeof ActionNotify>;\n\nexport const ActionsArray = Yup.array(\n  Yup.lazy((obj) => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, no-prototype-builtins\n    if (obj && (obj as any).hasOwnProperty('type')) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if ((obj as any).type === NotificationType.INTEGRATION) {\n        return ActionIntegration;\n      }\n    }\n\n    return ActionNotify;\n  })\n).test(\n  'no-repeated',\n  \"${path} can't contain repeated actions\",\n  (value: Array<ActionsType> | undefined, context) => {\n    const errors: Array<ReturnType<Yup.TestContext['createError']>> = [];\n\n    let foundEmail = false;\n    const integrationIds: Array<string> = [];\n\n    if (!value) {\n      return true;\n    }\n\n    for (let i = 0; i < value.length; ++i) {\n      const action = value[i];\n      const integrationId = action.integrationId;\n      if (action.type === NotificationType.EMAIL_SUBSCRIPTION) {\n        if (foundEmail) {\n          errors.push(\n            context.createError({\n              message: 'Only 1 send email action is allowed',\n              path: `actions.${i}`,\n            })\n          );\n        }\n\n        foundEmail = true;\n      } else if (integrationId) {\n        if (integrationIds.includes(integrationId)) {\n          errors.push(\n            context.createError({\n              message:\n                'Integration already used in the group, please select other',\n              path: `actions.${i}`,\n            })\n          );\n        } else {\n          integrationIds.push(integrationId);\n        }\n      }\n    }\n\n    if (errors.length === 0) {\n      return true;\n    }\n\n    return {\n      ...context.createError(),\n      inner: errors,\n    };\n  }\n);\n\nexport const WithActions = Yup.object({\n  actions: ActionsArray,\n});\n\nexport const BehaviorGroupSchema = Yup.object({\n  displayName: Yup.string().required(\n    'You must specify a name for the behavior group'\n  ),\n  actions: ActionsArray,\n});\n","import { Text, TextContent, Title } from '@patternfly/react-core';\nimport { Form } from '@redhat-cloud-services/insights-common-typescript';\nimport { useFormikContext } from 'formik';\nimport * as React from 'react';\nimport * as Yup from 'yup';\n\nimport { EditBehaviorGroupForm } from '../../../../components/Notifications/BehaviorGroup/BehaviorGroupForm';\nimport { IntegrationWizardStep } from '../../../../components/Notifications/BehaviorGroup/Wizard/ExtendedWizardStep';\nimport { ActionsArray } from '../../../../schemas/Integrations/Notifications';\nimport { CreateBehaviorGroup } from '../../../../types/CreateBehaviorGroup';\n\nconst title = 'Actions and recipients';\n\nconst ActionAndRecipientsStep: React.FunctionComponent = () => {\n  const { values } = useFormikContext<CreateBehaviorGroup>();\n\n  return (\n    <Form>\n      <div>\n        <Title headingLevel=\"h4\" size=\"xl\">\n          {title}\n        </Title>\n        <TextContent className=\"pf-v5-u-pt-sm\">\n          <Text>\n            Select action and recipient pairs to assign to your notification\n            events.\n          </Text>\n        </TextContent>\n        <EditBehaviorGroupForm behaviorGroup={values} />\n      </div>\n    </Form>\n  );\n};\n\nconst schema = Yup.object({\n  actions: ActionsArray,\n});\n\nexport const useActionAndRecipientStep: IntegrationWizardStep = () => {\n  return React.useMemo(\n    () => ({\n      name: title,\n      component: <ActionAndRecipientsStep />,\n      schema,\n    }),\n    []\n  );\n};\n","import { Skeleton, Spinner } from '@patternfly/react-core';\nimport {\n  TableComposable,\n  TableVariant,\n  Tbody,\n  Td,\n  Th,\n  Thead,\n  Tr,\n} from '@patternfly/react-table';\nimport * as React from 'react';\n\nimport { EventType } from '../../../../types/Notification';\n\nconst skeletonRows = 10;\n\nexport interface SelectableEventTypeRow extends EventType {\n  isSelected: boolean;\n}\n\ninterface SelectableEventTypeTableBaseProps {\n  onSelect?: (isSelected: boolean, event: EventType) => void;\n  selectionLoading?: boolean;\n}\n\ninterface SelectableEventTypeTableImplProps\n  extends SelectableEventTypeTableBaseProps {\n  events: ReadonlyArray<SelectableEventTypeRow>;\n}\n\nexport interface SelectableEventTypeTableProps\n  extends SelectableEventTypeTableBaseProps {\n  events?: ReadonlyArray<SelectableEventTypeRow>;\n}\n\nconst SelectableEventTypeTableLayout: React.FunctionComponent = (props) => {\n  return (\n    <TableComposable variant={TableVariant.compact}>\n      <Thead>\n        <Tr>\n          <Th />\n          <Th>Event type</Th>\n          <Th>Service</Th>\n        </Tr>\n      </Thead>\n      <Tbody>{props.children}</Tbody>\n    </TableComposable>\n  );\n};\n\nconst SelectableEventTypeTableSkeleton: React.FunctionComponent = () => {\n  return (\n    <SelectableEventTypeTableLayout>\n      {[...Array(skeletonRows)].map((_unused, index) => (\n        <Tr key={index}>\n          <Td\n            select={{\n              isSelected: false,\n              rowIndex: index,\n              disable: true,\n            }}\n          />\n          <Td>\n            <Skeleton width=\"80%\" />\n          </Td>\n          <Td>\n            <Skeleton width=\"80%\" />\n          </Td>\n        </Tr>\n      ))}\n    </SelectableEventTypeTableLayout>\n  );\n};\n\nconst SelectableEventTypeTableImpl: React.FunctionComponent<SelectableEventTypeTableImplProps> =\n  (props) => {\n    return (\n      <SelectableEventTypeTableLayout>\n        {props.events.map((event, rowIndex) => (\n          <Tr key={event.id}>\n            <Td\n              modifier={props.selectionLoading ? 'fitContent' : undefined}\n              noPadding={props.selectionLoading}\n              select={\n                props.selectionLoading\n                  ? undefined\n                  : {\n                      rowIndex,\n                      onSelect: (_event, isSelected) =>\n                        props.onSelect && props.onSelect(isSelected, event),\n                      isSelected: event.isSelected,\n                      disable: props.selectionLoading,\n                    }\n              }\n            >\n              {props.selectionLoading && <Spinner size=\"sm\" />}\n            </Td>\n            <Td>{event.eventTypeDisplayName}</Td>\n            <Td>{event.applicationDisplayName}</Td>\n          </Tr>\n        ))}\n      </SelectableEventTypeTableLayout>\n    );\n  };\n\nexport const SelectableEventTypeTable: React.FunctionComponent<SelectableEventTypeTableProps> =\n  (props) => {\n    if (props.events) {\n      return <SelectableEventTypeTableImpl {...props} events={props.events} />;\n    }\n\n    return <SelectableEventTypeTableSkeleton />;\n  };\n","import { Text, TextContent, Title } from '@patternfly/react-core';\nimport { Form, Page } from '@redhat-cloud-services/insights-common-typescript';\nimport { useFormikContext } from 'formik';\nimport produce from 'immer';\nimport * as React from 'react';\nimport { useEffect } from 'react';\n\nimport { IntegrationWizardStep } from '../../../../components/Notifications/BehaviorGroup/Wizard/ExtendedWizardStep';\nimport {\n  SelectableEventTypeRow,\n  SelectableEventTypeTable,\n} from '../../../../components/Notifications/BehaviorGroup/Wizard/SelectableEventTypeTable';\nimport {\n  NotificationsToolbar,\n  SelectionCommand,\n} from '../../../../components/Notifications/Toolbar';\nimport {\n  useListNotifications,\n  useParameterizedListNotifications,\n} from '../../../../services/useListNotifications';\nimport { CreateBehaviorGroup } from '../../../../types/CreateBehaviorGroup';\nimport { EventType, Facet } from '../../../../types/Notification';\nimport { useEventTypesPage } from '../../hooks/useEventTypesPage';\n\nconst title = 'Associate event types';\n\nexport interface AssociateEventTypesStepProps {\n  applications: ReadonlyArray<Facet>;\n  bundle: Facet;\n}\n\nconst AssociateEventTypesStep: React.FunctionComponent<AssociateEventTypesStepProps> =\n  (props) => {\n    const { setValues, values } = useFormikContext<CreateBehaviorGroup>();\n    const [selectedEventTypes, setSelectedEventTypes] = React.useState<\n      Record<string, EventType>\n    >(() => {\n      const selected: Record<string, EventType> = {};\n      values.events.forEach((value) => {\n        selected[value.id] = value;\n      });\n\n      return selected;\n    });\n    const eventTypePage = useEventTypesPage(\n      props.bundle,\n      props.applications,\n      false\n    );\n    const eventTypesRaw = useListNotifications(\n      eventTypePage.pageController.page\n    );\n    const onDemandEventTypes = useParameterizedListNotifications();\n\n    useEffect(() => {\n      setValues(\n        produce((draft) => {\n          draft.events = Object.values(selectedEventTypes);\n        })\n      );\n    }, [setValues, selectedEventTypes]);\n\n    const count = React.useMemo(() => {\n      const payload = eventTypesRaw.payload;\n      if (payload?.status === 200) {\n        return payload.value.meta.count;\n      }\n\n      return 0;\n    }, [eventTypesRaw.payload]);\n\n    const events = React.useMemo<ReadonlyArray<SelectableEventTypeRow>>(() => {\n      if (eventTypesRaw.payload?.type === 'eventTypesArray') {\n        return eventTypesRaw.payload.value.data.map((value) => ({\n          ...value,\n          isSelected: Object.keys(selectedEventTypes).includes(value.id),\n        }));\n      }\n\n      return [];\n    }, [eventTypesRaw.payload, selectedEventTypes]);\n\n    const onSelect = React.useCallback(\n      (isSelected: boolean, eventType: EventType) => {\n        setSelectedEventTypes(\n          produce((draft) => {\n            if (isSelected) {\n              draft[eventType.id] = eventType;\n            } else {\n              delete draft[eventType.id];\n            }\n          })\n        );\n      },\n      [setSelectedEventTypes]\n    );\n\n    const onSelectCommand = React.useCallback(\n      (command: SelectionCommand) => {\n        const currentPage = eventTypePage.pageController.page;\n\n        switch (command) {\n          case SelectionCommand.ALL:\n            if (count === events.length) {\n              return setSelectedEventTypes(\n                produce((draft) => {\n                  events.forEach((e) => {\n                    draft[e.id] = e;\n                  });\n                })\n              );\n            } else {\n              (async () => {\n                let pageIndex = 1;\n                const addedElements: Record<string, EventType> = {};\n                const lastPage = Page.lastPageForElements(\n                  count,\n                  currentPage.size\n                );\n                // eslint-disable-next-line no-constant-condition\n                while (true) {\n                  const fetchingPage = currentPage.withPage(pageIndex);\n\n                  if (fetchingPage.index > lastPage.index) {\n                    break;\n                  }\n\n                  if (currentPage.index === fetchingPage.index) {\n                    events.forEach((e) => {\n                      addedElements[e.id] = e;\n                    });\n                  } else {\n                    const events = await onDemandEventTypes.query(\n                      currentPage.withPage(pageIndex)\n                    );\n                    if (events.payload?.type === 'eventTypesArray') {\n                      events.payload.value.data.forEach((e) => {\n                        addedElements[e.id] = e;\n                      });\n                    } else {\n                      break;\n                    }\n                  }\n\n                  pageIndex++;\n                }\n\n                setSelectedEventTypes(\n                  produce((draft) => {\n                    for (const event of Object.values(addedElements)) {\n                      draft[event.id] = event;\n                    }\n                  })\n                );\n              })();\n            }\n\n            break;\n          case SelectionCommand.PAGE:\n            setSelectedEventTypes(\n              produce((draft) => {\n                events.forEach((e) => {\n                  draft[e.id] = e;\n                });\n              })\n            );\n\n            break;\n          case SelectionCommand.NONE:\n            setSelectedEventTypes({});\n            break;\n        }\n      },\n      [\n        setSelectedEventTypes,\n        events,\n        onDemandEventTypes,\n        eventTypePage.pageController.page,\n        count,\n      ]\n    );\n\n    return (\n      <Form>\n        <div>\n          <Title headingLevel=\"h4\" size=\"xl\">\n            {title}\n          </Title>\n          <TextContent className=\"pf-v5-u-pt-sm\">\n            <Text>\n              Select event types you would like to assign this behavior group\n              to.\n            </Text>\n          </TextContent>\n        </div>\n        <NotificationsToolbar\n          filters={eventTypePage.filters}\n          setFilters={eventTypePage.setFilters}\n          clearFilter={eventTypePage.clearFilters}\n          appFilterOptions={props.applications}\n          pageAdapter={eventTypePage.pageController}\n          count={count}\n          pageCount={events.length}\n          onSelectionChanged={onSelectCommand}\n          selectedCount={Object.keys(selectedEventTypes).length}\n          bulkSelectionDisabled={onDemandEventTypes.loading}\n        >\n          <SelectableEventTypeTable\n            onSelect={onSelect}\n            events={eventTypesRaw.loading ? undefined : events}\n            selectionLoading={onDemandEventTypes.loading}\n          />\n        </NotificationsToolbar>\n      </Form>\n    );\n  };\n\nexport const useAssociateEventTypesStep: IntegrationWizardStep<AssociateEventTypesStepProps> =\n  ({ applications, bundle }: AssociateEventTypesStepProps) => {\n    return React.useMemo(\n      () => ({\n        name: title,\n        component: (\n          <AssociateEventTypesStep\n            applications={applications}\n            bundle={bundle}\n          />\n        ),\n      }),\n      [applications, bundle]\n    );\n  };\n","import { Title } from '@patternfly/react-core';\nimport {\n  Form,\n  FormTextInput,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport * as Yup from 'yup';\n\nimport { IntegrationWizardStep } from '../../../../components/Notifications/BehaviorGroup/Wizard/ExtendedWizardStep';\n\nconst title = 'Name';\n\nconst BasicInformationStep: React.FunctionComponent = () => {\n  return (\n    <Form ouiaId=\"basic-information-step\">\n      <Title headingLevel=\"h4\" size=\"xl\">\n        {title}\n      </Title>\n      <FormTextInput\n        ouiaId=\"name\"\n        id=\"name\"\n        name=\"displayName\"\n        label=\"Behavior group name\"\n        isRequired\n      />\n    </Form>\n  );\n};\n\nexport const schema = Yup.object({\n  displayName: Yup.string()\n    .min(1)\n    .max(150, 'Must be 150 characters or less')\n    .required('Behavior group name is required'),\n});\n\nexport const useBasicInformationStep: IntegrationWizardStep = () => {\n  return React.useMemo(\n    () => ({\n      name: title,\n      component: <BasicInformationStep />,\n      schema,\n    }),\n    []\n  );\n};\n","import {\n  DescriptionList,\n  DescriptionListDescription,\n  DescriptionListGroup,\n  DescriptionListTerm,\n  Grid,\n  GridItem,\n  Text,\n  TextContent,\n  TextVariants,\n  Title,\n} from '@patternfly/react-core';\nimport { Form } from '@redhat-cloud-services/insights-common-typescript';\nimport { useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { BehaviorGroupActionsSummary } from '../../../../components/Notifications/BehaviorGroup/BehaviorGroupActionsSummary';\nimport { IntegrationWizardStep } from '../../../../components/Notifications/BehaviorGroup/Wizard/ExtendedWizardStep';\nimport { CreateBehaviorGroup } from '../../../../types/CreateBehaviorGroup';\nimport { EventType } from '../../../../types/Notification';\n\nconst title = 'Review';\n\ninterface EventTypeReviewTableProps {\n  events: ReadonlyArray<EventType>;\n}\n\nconst EventTypeTable: React.FunctionComponent<EventTypeReviewTableProps> = (\n  props\n) => {\n  return (\n    <Grid>\n      <GridItem span={6}>\n        <TextContent>\n          <Text component={TextVariants.h6}>Event type</Text>\n        </TextContent>\n      </GridItem>\n      <GridItem span={6}>\n        <TextContent>\n          <Text component={TextVariants.h6}>Application</Text>\n        </TextContent>\n      </GridItem>\n      {props.events.map((event) => (\n        <React.Fragment key={event.id}>\n          <GridItem span={6}>{event.eventTypeDisplayName}</GridItem>\n          <GridItem span={6}>{event.applicationDisplayName}</GridItem>\n        </React.Fragment>\n      ))}\n    </Grid>\n  );\n};\n\nconst ReviewStep: React.FunctionComponent = () => {\n  const { values } = useFormikContext<CreateBehaviorGroup>();\n\n  return (\n    <Form ouiaId=\"review-step\">\n      <Title headingLevel=\"h2\" size=\"xl\">\n        {title}\n      </Title>\n      <DescriptionList isHorizontal>\n        <DescriptionListGroup>\n          <DescriptionListTerm>Name</DescriptionListTerm>\n          <DescriptionListDescription>\n            {' '}\n            {values.displayName}\n          </DescriptionListDescription>\n        </DescriptionListGroup>\n        <DescriptionListGroup>\n          <DescriptionListTerm> Actions and recipients</DescriptionListTerm>\n          <DescriptionListDescription>\n            <BehaviorGroupActionsSummary actions={values.actions} />\n          </DescriptionListDescription>\n        </DescriptionListGroup>\n        <DescriptionListGroup>\n          <DescriptionListTerm>Associate event types</DescriptionListTerm>\n          <DescriptionListDescription>\n            <EventTypeTable events={values.events} />\n          </DescriptionListDescription>\n        </DescriptionListGroup>\n      </DescriptionList>\n    </Form>\n  );\n};\n\nexport const createReviewStep: IntegrationWizardStep = () => ({\n  name: title,\n  component: <ReviewStep />,\n  nextButtonText: 'Finish',\n});\n","import { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\nimport * as Yup from 'yup';\n\nimport { BehaviorGroupWizard } from '../../../components/Notifications/BehaviorGroup/Wizard/BehaviorGroupWizard';\nimport { RecipientContextProvider } from '../../../components/Notifications/RecipientContext';\nimport { useGetIntegrations } from '../../../components/Notifications/useGetIntegrations';\nimport { useGetRecipients } from '../../../components/Notifications/useGetRecipients';\nimport { CreateBehaviorGroup } from '../../../types/CreateBehaviorGroup';\nimport { Facet } from '../../../types/Notification';\nimport { useNotification } from '../../../utils/AlertUtils';\nimport {\n  SaveBehaviorGroupOperation,\n  useSaveBehaviorGroup,\n} from './useSaveBehaviorGroup';\nimport { useSteps } from './useSteps';\n\ninterface BehaviorGroupWizardProps {\n  bundle: Facet;\n  applications: ReadonlyArray<Facet>;\n  behaviorGroup?: Partial<CreateBehaviorGroup>;\n  onClose: (saved: boolean) => void;\n}\n\ninterface BehaviorGroupWizardInternalProps extends BehaviorGroupWizardProps {\n  validationSchema?: Yup.AnySchema;\n  setValidationSchema: (schema?: Yup.AnySchema) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noOp = () => {};\n\nconst InternalBehaviorGroupWizardPage: React.FunctionComponent<BehaviorGroupWizardInternalProps> =\n  (props) => {\n    const [currentStep, setCurrentStep] = React.useState(0);\n    const { isValid, validateForm } = useFormikContext<CreateBehaviorGroup>();\n    const saving = useSaveBehaviorGroup(props.behaviorGroup);\n    const { values } = useFormikContext<CreateBehaviorGroup>();\n    const { addDangerNotification, addSuccessNotification } = useNotification();\n\n    const associateEventTypeStepProps = {\n      bundle: props.bundle,\n      applications: props.applications,\n    };\n\n    const steps = useSteps(\n      associateEventTypeStepProps,\n      currentStep,\n      isValid,\n      saving.isSaving\n    );\n\n    const currentStepModel = steps[currentStep] as\n      | typeof steps[number]\n      | undefined;\n    const stepValidationSchema = currentStepModel?.schema;\n\n    React.useEffect(() => {\n      props.setValidationSchema(stepValidationSchema);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentStep]);\n\n    React.useEffect(() => {\n      validateForm();\n    }, [props.validationSchema, validateForm]);\n\n    const onSave = React.useCallback(async () => {\n      const onClose = props.onClose;\n      const save = saving.save;\n      const behaviorGroup = {\n        ...values,\n        bundleId: props.bundle.id,\n      };\n\n      const result = await save(behaviorGroup);\n\n      if (result.status) {\n        if (result.operation === SaveBehaviorGroupOperation.CREATE) {\n          addSuccessNotification(\n            'New behavior group created',\n            <>\n              Group <b> {behaviorGroup.displayName} </b> created successfully.\n            </>\n          );\n        } else {\n          addSuccessNotification(\n            'Behavior group saved',\n            <>\n              Group <b> {behaviorGroup.displayName} </b> was saved successfully.\n            </>\n          );\n        }\n\n        onClose(true);\n      } else {\n        if (result.operation === SaveBehaviorGroupOperation.CREATE) {\n          addDangerNotification(\n            'Behavior group failed to be created',\n            <>\n              Failed to create group <b> {behaviorGroup.displayName}</b>.\n              <br />\n              Please try again.\n            </>\n          );\n        } else {\n          addDangerNotification(\n            'Behavior group failed to save',\n            <>\n              Failed to save group <b> {behaviorGroup.displayName}</b>.\n              <br />\n              Please try again.\n            </>\n          );\n        }\n      }\n    }, [\n      values,\n      saving.save,\n      props.bundle,\n      props.onClose,\n      addDangerNotification,\n      addSuccessNotification,\n    ]);\n\n    const onNext = async (goNext) => {\n      let shouldGoNext = true;\n\n      if (currentStepModel?.isValid) {\n        shouldGoNext = await currentStepModel.isValid();\n      }\n\n      if (shouldGoNext) {\n        setCurrentStep((prev) => Math.min(prev + 1, steps.length));\n        goNext();\n      }\n    };\n\n    const onBack = async (goBack) => {\n      setCurrentStep((prev) => prev - 1);\n      goBack();\n    };\n\n    const onClose = () => {\n      props.onClose(false);\n    };\n\n    return (\n      <BehaviorGroupWizard\n        steps={steps}\n        onNext={onNext}\n        onBack={onBack}\n        onGoToStep={setCurrentStep}\n        loading={saving.isSaving}\n        onClose={onClose}\n        onSave={onSave}\n      />\n    );\n  };\n\nexport const BehaviorGroupWizardPage: React.FunctionComponent<BehaviorGroupWizardProps> =\n  (props) => {\n    const getRecipients = useGetRecipients();\n    const getIntegrations = useGetIntegrations();\n    const actionsContextValue = React.useMemo(\n      () => ({\n        getIntegrations,\n        getNotificationRecipients: getRecipients,\n      }),\n      [getIntegrations, getRecipients]\n    );\n\n    const [validationSchema, setValidationSchema] =\n      React.useState<Yup.AnySchema>();\n\n    return (\n      <RecipientContextProvider value={actionsContextValue}>\n        <Formik<Partial<CreateBehaviorGroup>>\n          validateOnMount\n          onSubmit={noOp}\n          initialValues={\n            props.behaviorGroup ?? {\n              actions: [],\n              events: [],\n              displayName: undefined,\n            }\n          }\n          validationSchema={validationSchema}\n          validateOnBlur\n          validateOnChange\n        >\n          <InternalBehaviorGroupWizardPage\n            {...props}\n            validationSchema={validationSchema}\n            setValidationSchema={setValidationSchema}\n          />\n        </Formik>\n      </RecipientContextProvider>\n    );\n  };\n","import assertNever from 'assert-never';\n\nimport { Operations } from '../../generated/OpenapiIntegrations';\nimport {\n  SystemProperties,\n  isDrawerSystemProperties,\n  isEmailSystemProperties,\n} from '../../types/Notification';\n\nexport const getDefaultSystemEndpointAction = (\n  systemProperties: SystemProperties\n) => {\n  if (isEmailSystemProperties(systemProperties)) {\n    return Operations.EndpointResourceGetOrCreateEmailSubscriptionEndpoint.actionCreator(\n      {\n        body: {\n          only_admins: systemProperties.props.onlyAdmins,\n          group_id: systemProperties.props.groupId,\n        },\n      }\n    );\n  } else if (isDrawerSystemProperties(systemProperties)) {\n    return Operations.EndpointResourceGetOrCreateDrawerSubscriptionEndpoint.actionCreator(\n      {\n        body: {\n          only_admins: systemProperties.props.onlyAdmins,\n          group_id: systemProperties.props.groupId,\n        },\n      }\n    );\n  }\n\n  assertNever(systemProperties);\n};\n","import produce from 'immer';\nimport { useEffect, useMemo, useState } from 'react';\n\nimport { ExtendedWizardStep } from '../../../components/Notifications/BehaviorGroup/Wizard/ExtendedWizardStep';\nimport { useActionAndRecipientStep } from './Steps/ActionAndRecipientsStep';\nimport {\n  AssociateEventTypesStepProps,\n  useAssociateEventTypesStep,\n} from './Steps/AssociateEventTypesStep';\nimport { useBasicInformationStep } from './Steps/BasicInformationStep';\nimport { createReviewStep } from './Steps/ReviewStep';\n\nexport const useSteps = (\n  associateEventTypeStep: AssociateEventTypesStepProps,\n  currentStep: number,\n  isValid: boolean,\n  isSaving: boolean\n): Array<ExtendedWizardStep> => {\n  const basicInformationStep = useBasicInformationStep();\n  const associateEventTypesStep = useAssociateEventTypesStep(\n    associateEventTypeStep\n  );\n  const actionAndRecipientStep = useActionAndRecipientStep();\n\n  const [maxStep, setMaxStep] = useState<number>(0);\n  const [invalidSteps, setInvalidSteps] = useState<Set<number>>(\n    () => new Set<number>()\n  );\n\n  useEffect(() => {\n    setMaxStep((prev) => Math.max(currentStep, prev));\n  }, [currentStep]);\n\n  useEffect(() => {\n    setInvalidSteps(\n      produce((draft) => {\n        if (isValid) {\n          draft.delete(currentStep);\n        } else {\n          draft.add(currentStep);\n        }\n      })\n    );\n  }, [currentStep, isValid]);\n\n  const lastAvailableStep =\n    invalidSteps.size === 0 ? maxStep : Math.min(...Array.from(invalidSteps));\n\n  return useMemo(() => {\n    return [\n      basicInformationStep,\n      actionAndRecipientStep,\n      associateEventTypesStep,\n      createReviewStep(),\n    ].map((step, index) => ({\n      ...step,\n      id: index,\n      canJumpTo: !isSaving && index <= lastAvailableStep,\n      hideCancelButton: false,\n      enableNext: isValid,\n    }));\n  }, [\n    basicInformationStep,\n    actionAndRecipientStep,\n    isValid,\n    lastAvailableStep,\n    isSaving,\n    associateEventTypesStep,\n  ]);\n};\n","import { useCallback } from 'react';\n\nimport { useRbacGroups } from '../../app/rbac/RbacGroupContext';\nimport { NotificationRbacGroupRecipient } from '../../types/Recipient';\nimport { GetNotificationRecipients } from './RecipientContext';\n\nexport const useGetRecipients = (): GetNotificationRecipients => {\n  const rbacGroups = useRbacGroups();\n  return useCallback(async () => {\n    return rbacGroups.groups.map(\n      (r) => new NotificationRbacGroupRecipient(undefined, r.id, r.name)\n    );\n  }, [rbacGroups]);\n};\n","import {\n  Filter,\n  Operator,\n  Page,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport {\n  listIntegrationIntegrationDecoder,\n  listIntegrationsActionCreator,\n} from '../../services/useListIntegrations';\nimport { UserIntegrationType } from '../../types/Integration';\nimport { IntegrationRef } from '../../types/Notification';\nimport { GetIntegrations } from './RecipientContext';\n\nexport const useGetIntegrations = (): GetIntegrations => {\n  const { query } = useContext(ClientContext);\n\n  return React.useCallback(\n    async (type: UserIntegrationType, search?: string) => {\n      return query(\n        listIntegrationsActionCreator(\n          Page.of(\n            1,\n            20,\n            new Filter()\n              .and('type', Operator.EQUAL, [type])\n              .and('name', Operator.EQUAL, search ?? '')\n          )\n        )\n      ).then((response) => {\n        let integrations: ReadonlyArray<IntegrationRef> = [];\n        const payload = response.payload\n          ? listIntegrationIntegrationDecoder(response.payload)\n          : undefined;\n\n        if (payload?.type === 'IntegrationPage') {\n          integrations = payload.value.data;\n        }\n\n        return integrations;\n      });\n    },\n    [query]\n  );\n};\n","import {\n  ButtonVariant,\n  Checkbox,\n  ExpandableSection,\n  List,\n  ListItem,\n  Skeleton,\n  Stack,\n  StackItem,\n} from '@patternfly/react-core';\nimport {\n  ActionModalProps,\n  DeleteModal,\n  DeleteModalProps,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { useOnDeleteWrapper } from '../../../hooks/useOnDeleteWrapper';\nimport { OnDelete } from '../../../types/Callbacks';\nimport { BehaviorGroup, Notification } from '../../../types/Notification';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onDelete';\n\ninterface BehaviorGroupDeleteModalProps\n  extends Omit<DeleteModalProps, UsedProps> {\n  behaviorGroup: BehaviorGroup;\n  onDelete: OnDelete<BehaviorGroup>;\n  conflictingNotifications: Array<Notification>;\n}\n\ntype BehaviorGroupDeleteModalSkeletonProps = Pick<ActionModalProps, 'onClose'>;\n\nexport const BehaviorGroupDeleteModal: React.FunctionComponent<BehaviorGroupDeleteModalProps> =\n  (props) => {\n    const onDelete = useOnDeleteWrapper(props.onDelete, props.behaviorGroup);\n\n    const cancelButtonTitle = React.useMemo(\n      () => (props.conflictingNotifications.length === 0 ? 'Cancel' : 'Close'),\n      [props.conflictingNotifications]\n    );\n\n    const cancelButtonVariant = React.useMemo(\n      () =>\n        props.conflictingNotifications.length === 0\n          ? ButtonVariant.link\n          : ButtonVariant.secondary,\n      [props.conflictingNotifications]\n    );\n\n    const [ackDelete, setAckDelete] = React.useState(false);\n\n    const content = React.useMemo(() => {\n      if (props.conflictingNotifications.length === 0) {\n        return (\n          <Stack hasGutter>\n            <StackItem>\n              Action and recipient pairings assigned in{' '}\n              <b>{props.behaviorGroup.displayName}</b> will lost. You will no\n              longer be able to assign this behavior group to events.\n            </StackItem>\n            <StackItem>\n              <Checkbox\n                id=\"checkbox-delete-i-acknowledge\"\n                label=\"I acknowledge that this action cannot be undone\"\n                onChange={setAckDelete}\n                isChecked={ackDelete}\n              />\n            </StackItem>\n          </Stack>\n        );\n      } else {\n        const events = props.conflictingNotifications;\n\n        return (\n          <Stack hasGutter>\n            <StackItem>\n              You will no longer be able to assign{' '}\n              <b>{props.behaviorGroup.displayName}</b> to events, and existing\n              associations to events listed below will be removed.\n            </StackItem>\n            <StackItem>\n              <ExpandableSection\n                toggleText={`View ${events.length} event${\n                  events.length === 0 ? '' : 's'\n                }`}\n              >\n                <List>\n                  {events.map((event) => (\n                    <ListItem\n                      key={event.id}\n                    >{`${event.applicationDisplayName} - ${event.eventTypeDisplayName}`}</ListItem>\n                  ))}\n                </List>\n              </ExpandableSection>\n            </StackItem>\n            <StackItem>\n              <Checkbox\n                id=\"checkbox-delete-i-acknowledge\"\n                label=\"I acknowledge that this action cannot be undone\"\n                onChange={setAckDelete}\n                isChecked={ackDelete}\n              />\n            </StackItem>\n          </Stack>\n        );\n      }\n    }, [\n      props.conflictingNotifications,\n      props.behaviorGroup,\n      ackDelete,\n      setAckDelete,\n    ]);\n\n    return (\n      <DeleteModal\n        isOpen={true}\n        isDeleting={props.isDeleting}\n        title=\"Delete behavior group\"\n        content={content}\n        onClose={props.onClose}\n        onDelete={onDelete}\n        error={props.error}\n        titleIconVariant=\"warning\"\n        actionButtonDisabled={!ackDelete}\n        cancelButtonTitle={cancelButtonTitle}\n        cancelButtonVariant={cancelButtonVariant}\n      />\n    );\n  };\n\nconst onDelete = () => false;\n\nexport const BehaviorGroupDeleteModalSkeleton: React.FunctionComponent<BehaviorGroupDeleteModalSkeletonProps> =\n  (props) => {\n    return (\n      <DeleteModal\n        isOpen={true}\n        title=\"Delete behavior group\"\n        actionButtonDisabled={true}\n        titleIconVariant=\"warning\"\n        content={\n          <Stack hasGutter>\n            <StackItem>\n              <Skeleton width=\"500px\" />\n            </StackItem>\n            <StackItem>\n              <Skeleton width=\"500px\" />\n            </StackItem>\n          </Stack>\n        }\n        onClose={props.onClose}\n        isDeleting={false}\n        onDelete={onDelete}\n      />\n    );\n  };\n","import { useCallback } from 'react';\n\nimport { OnDelete } from '../types/Callbacks';\n\nexport const useOnDeleteWrapper = <T>(onDelete: OnDelete<T>, toDelete: T) => {\n  return useCallback(() => {\n    return onDelete(toDelete);\n  }, [onDelete, toDelete]);\n};\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\nconst deleteBehaviorGroupAction = (id: UUID) => {\n  return Operations.NotificationResourceDeleteBehaviorGroup.actionCreator({\n    id,\n  });\n};\n\nexport const useDeleteBehaviorGroupMutation = () =>\n  useMutation(deleteBehaviorGroupAction);\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport {\n  validatedResponse,\n  validationResponseTransformer,\n} from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toNotifications } from '../../types/adapters/NotificationAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst getAffectedNotificationsByBehaviorGroupAction = (id: UUID) => {\n  return Operations.NotificationResourceGetEventTypesAffectedByRemovalOfBehaviorGroup.actionCreator(\n    {\n      behaviorGroupId: id,\n    }\n  );\n};\n\nconst defaultNotificationsDecoder = validationResponseTransformer(\n  (\n    payload: Operations.NotificationResourceGetEventTypesAffectedByRemovalOfBehaviorGroup.Payload\n  ) => {\n    if (payload.status === 200) {\n      return validatedResponse(\n        'Notifications',\n        200,\n        toNotifications(payload.value),\n        payload.errors\n      );\n    }\n\n    return payload;\n  }\n);\n\nexport const useGetAffectedNotificationsByBehaviorGroupQuery = (id: UUID) =>\n  useTransformQueryResponse(\n    useQuery(getAffectedNotificationsByBehaviorGroupAction(id)),\n    defaultNotificationsDecoder\n  );\n","import * as React from 'react';\nimport { useEffect } from 'react';\n\nimport {\n  BehaviorGroupDeleteModal,\n  BehaviorGroupDeleteModalSkeleton,\n} from '../../../components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal';\nimport { useDeleteBehaviorGroupMutation } from '../../../services/Notifications/DeleteBehaviorGroup';\nimport { useGetAffectedNotificationsByBehaviorGroupQuery } from '../../../services/Notifications/GetAffectedNotificationsByBehaviorGroup';\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { useNotification } from '../../../utils/AlertUtils';\n\nexport interface DeleteBehaviorGroupPageProps {\n  behaviorGroup: BehaviorGroup;\n  onClose: (deleted: boolean) => void;\n}\n\nexport const DeleteBehaviorGroupPage: React.FunctionComponent<DeleteBehaviorGroupPageProps> =\n  (props) => {\n    const deleteBehaviorGroup = useDeleteBehaviorGroupMutation();\n    const affected = useGetAffectedNotificationsByBehaviorGroupQuery(\n      props.behaviorGroup.id\n    );\n    const { addDangerNotification, addSuccessNotification } = useNotification();\n\n    const onDelete = React.useCallback(\n      async (behaviorGroup: BehaviorGroup) => {\n        const mutate = deleteBehaviorGroup.mutate;\n        const response = await mutate(behaviorGroup.id);\n\n        if (response.payload?.status === 200) {\n          addSuccessNotification(\n            'Behavior group deleted',\n            <>\n              Group <b>{behaviorGroup.displayName}</b> deleted successfully.\n            </>\n          );\n          return true;\n        }\n\n        addDangerNotification(\n          'Behavior group failed to be deleted',\n          <>\n            Failed to delete group <b> {behaviorGroup.displayName}</b>.\n            <br />\n            Please try again.\n          </>\n        );\n\n        return false;\n      },\n      [\n        deleteBehaviorGroup.mutate,\n        addDangerNotification,\n        addSuccessNotification,\n      ]\n    );\n\n    useEffect(() => {\n      const payload = affected.payload;\n      const onClose = props.onClose;\n      if (payload && payload.status !== 200) {\n        addDangerNotification(\n          'Associated events failed to load ',\n          <>\n            Failed to load associated events for group{' '}\n            <b> {props.behaviorGroup.displayName}</b>.\n            <br />\n            Please try again.\n          </>\n        );\n\n        onClose(false);\n      }\n    }, [\n      addDangerNotification,\n      affected.payload,\n      props.behaviorGroup,\n      props.onClose,\n    ]);\n\n    if (affected.loading) {\n      return <BehaviorGroupDeleteModalSkeleton onClose={props.onClose} />;\n    }\n\n    if (affected.payload?.status !== 200) {\n      return null;\n    }\n\n    return (\n      <BehaviorGroupDeleteModal\n        onDelete={onDelete}\n        isDeleting={deleteBehaviorGroup.loading}\n        onClose={props.onClose}\n        behaviorGroup={props.behaviorGroup}\n        conflictingNotifications={affected.payload.value}\n      />\n    );\n  };\n","import {\n  Button,\n  ButtonProps,\n  ButtonVariant,\n  SearchInput,\n  Split,\n  SplitItem,\n  Stack,\n  StackItem,\n  Text,\n  TextContent,\n  TextVariants,\n  Tooltip,\n} from '@patternfly/react-core';\n\nimport * as React from 'react';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport { BehaviorGroupCardList } from '../../../components/Notifications/BehaviorGroup/BehaviorGroupCardList';\nimport { useDeleteModalReducer } from '../../../hooks/useDeleteModalReducer';\nimport { useFormModalReducer } from '../../../hooks/useFormModalReducer';\nimport { CreateBehaviorGroup } from '../../../types/CreateBehaviorGroup';\nimport { BehaviorGroup, Facet } from '../../../types/Notification';\nimport { emptyImmutableArray } from '../../../utils/Immutable';\nimport { BehaviorGroupWizardPage } from '../BehaviorGroupWizard/BehaviorGroupWizardPage';\nimport { DeleteBehaviorGroupPage } from '../Form/DeleteBehaviorGroupPage';\nimport { BehaviorGroupContent } from './useBehaviorGroupContent';\n\ninterface BehaviorGroupSectionProps {\n  bundle: Facet;\n  applications: ReadonlyArray<Facet>;\n  behaviorGroupContent: BehaviorGroupContent;\n}\n\ntype BehaviorGroupAddButtonProps = Pick<\n  ButtonProps,\n  'className' | 'onClick' | 'isDisabled' | 'component'\n>;\n\nconst BehaviorGroupAddButton: React.FunctionComponent<BehaviorGroupAddButtonProps> =\n  (props) => {\n    const { isDisabled, ...buttonProps } = props;\n    const { isOrgAdmin } = useAppContext();\n\n    const button = (\n      <Button\n        {...buttonProps}\n        isAriaDisabled={isDisabled}\n        variant={ButtonVariant.primary}\n      >\n        Create new group\n      </Button>\n    );\n\n    if (isDisabled) {\n      const content = isOrgAdmin\n        ? 'You need the Notifications administrator role to perform this action'\n        : 'You do not have permissions to perform this action. Contact your org admin for more information';\n      return <Tooltip content={content}>{button}</Tooltip>;\n    }\n\n    return button;\n  };\n\nexport const BehaviorGroupsSection: React.FunctionComponent<BehaviorGroupSectionProps> =\n  (props) => {\n    const [filter, setFilter] = React.useState<string>('');\n    const { rbac } = useAppContext();\n\n    const filteredBehaviors = React.useMemo(() => {\n      if (\n        !props.behaviorGroupContent.isLoading &&\n        !props.behaviorGroupContent.hasError\n      ) {\n        const lowerCaseFilter = filter.toLowerCase();\n        return props.behaviorGroupContent.content.filter((bg) =>\n          bg.displayName.toLowerCase().includes(lowerCaseFilter)\n        );\n      }\n\n      return emptyImmutableArray;\n    }, [filter, props.behaviorGroupContent]);\n\n    const [editModalState, editModalActions] =\n      useFormModalReducer<CreateBehaviorGroup>();\n    const [deleteModalState, deleteModalActions] =\n      useDeleteModalReducer<BehaviorGroup>();\n\n    const createGroup = React.useCallback(\n      (event) => {\n        event.stopPropagation();\n        editModalActions.create({\n          events: [],\n          actions: [],\n          displayName: '',\n        });\n      },\n      [editModalActions]\n    );\n\n    const onCloseModal = React.useCallback(\n      (saved: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (saved) {\n          reload();\n        }\n\n        editModalActions.reset();\n      },\n      [editModalActions, props.behaviorGroupContent.reload]\n    );\n\n    const onEdit = React.useCallback(\n      (behaviorGroup: BehaviorGroup) => {\n        editModalActions.edit({\n          id: behaviorGroup.id,\n          events: behaviorGroup.events,\n          actions: behaviorGroup.actions,\n          displayName: behaviorGroup.displayName,\n        });\n      },\n      [editModalActions]\n    );\n\n    const onDelete = React.useCallback(\n      (behaviorGroup: BehaviorGroup) => {\n        deleteModalActions.delete(behaviorGroup);\n      },\n      [deleteModalActions]\n    );\n\n    const onCloseDelete = React.useCallback(\n      (deleted: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (deleted) {\n          reload();\n        }\n\n        deleteModalActions.reset();\n      },\n      [deleteModalActions, props.behaviorGroupContent.reload]\n    );\n\n    const onClearFilter = React.useCallback(() => {\n      setFilter('');\n    }, [setFilter]);\n\n    return (\n      <>\n        <div className=\"pf-v5-u-background-color-100 pf-v5-u-pt-lg pf-v5-u-px-lg\">\n          <Split className=\"pf-v5-u-mb-md\" hasGutter>\n            <SplitItem>\n              <TextContent>\n                <Text component={TextVariants.p}>\n                  <b>Behavior groups</b> are made up of action/recipient\n                  pairings that allow you to configure which notification\n                  actions different users will be able to receive. Once\n                  you&apos;ve created a behavior group, you can assign it to an\n                  event using the Events table below.\n                  <br></br>\n                  <Text component={TextVariants.p}>\n                    You may also prevent users from changing assigned actions by\n                    locking action/recipient pairings when creating or editing\n                    behavior groups.\n                  </Text>\n                </Text>\n              </TextContent>\n            </SplitItem>\n          </Split>\n          <Stack hasGutter>\n            <StackItem>\n              <Split hasGutter className=\"pf-v5-u-mb-md\">\n                <SplitItem>\n                  <SearchInput\n                    value={filter}\n                    onChange={setFilter}\n                    onClear={onClearFilter}\n                    type=\"text\"\n                    aria-label=\"Search by name\"\n                    placeholder=\"Search by name\"\n                    isDisabled={props.behaviorGroupContent.isLoading}\n                  />\n                </SplitItem>\n                <SplitItem>\n                  <BehaviorGroupAddButton\n                    isDisabled={\n                      props.behaviorGroupContent.isLoading ||\n                      !rbac.canWriteNotifications\n                    }\n                    onClick={createGroup}\n                  />\n                </SplitItem>\n              </Split>\n            </StackItem>\n          </Stack>\n          <Stack hasGutter>\n            {(props.behaviorGroupContent.isLoading ||\n              props.behaviorGroupContent.hasError ||\n              props.behaviorGroupContent.content.length > 0) && (\n              <>\n                <StackItem>\n                  {props.behaviorGroupContent.isLoading ? (\n                    <BehaviorGroupCardList />\n                  ) : props.behaviorGroupContent.hasError ? (\n                    <div>Error loading behavior groups</div>\n                  ) : (\n                    <BehaviorGroupCardList\n                      onEdit={rbac.canWriteNotifications ? onEdit : undefined}\n                      onDelete={\n                        rbac.canWriteNotifications ? onDelete : undefined\n                      }\n                      behaviorGroups={filteredBehaviors}\n                    />\n                  )}\n                </StackItem>\n              </>\n            )}\n          </Stack>\n        </div>\n        {editModalState.isOpen && (\n          <BehaviorGroupWizardPage\n            bundle={props.bundle}\n            applications={props.applications}\n            behaviorGroup={editModalState.template}\n            onClose={onCloseModal}\n          />\n        )}\n        {deleteModalState.isOpen && (\n          <DeleteBehaviorGroupPage\n            behaviorGroup={deleteModalState.data}\n            onClose={onCloseDelete}\n          />\n        )}\n      </>\n    );\n  };\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport {\n  validatedResponse,\n  validationResponseTransformer,\n} from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toBehaviorGroup } from '../../types/adapters/BehaviorGroupAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst behaviorGroupDecoder = validationResponseTransformer(\n  (\n    payload: Operations.NotificationResourceFindBehaviorGroupsByBundleId.Payload\n  ) => {\n    if (payload.status === 200) {\n      return validatedResponse(\n        'BehaviorGroups',\n        200,\n        payload.value.map(toBehaviorGroup),\n        payload.errors\n      );\n    }\n\n    return payload;\n  }\n);\n\nexport const useGetBehaviorGroups = (bundleId: UUID) => {\n  return useTransformQueryResponse(\n    useQuery(\n      Operations.NotificationResourceFindBehaviorGroupsByBundleId.actionCreator(\n        {\n          bundleId,\n        }\n      )\n    ),\n    behaviorGroupDecoder\n  );\n};\n","import { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport produce, { castDraft } from 'immer';\nimport * as React from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { usePrevious } from 'react-use';\n\nimport { linkBehaviorGroupAction } from '../../../services/Notifications/LinkBehaviorGroup';\nimport {\n  BehaviorGroup,\n  Notification,\n  NotificationBehaviorGroup,\n  UUID,\n} from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\n\nexport type BehaviorGroupNotificationRow = NotificationBehaviorGroup & {\n  readonly loadingActionStatus: 'loading' | 'done' | 'error';\n  readonly behaviors: ReadonlyArray<BehaviorGroup>;\n} & (\n    | {\n        readonly isEditMode: false;\n      }\n    | {\n        readonly isEditMode: true;\n        readonly oldBehaviors: ReadonlyArray<BehaviorGroup>;\n      }\n  );\n\nclass NotificationNotFound extends Error {}\n\nconst getNotification = <T extends ReadonlyArray<BehaviorGroupNotificationRow>>(\n  rows: T,\n  notificationId: UUID\n): T[number] => {\n  // eslint-disable-next-line testing-library/await-async-queries\n  const notification = rows.find(findById(notificationId));\n  if (!notification) {\n    throw new NotificationNotFound('Notification not found in rows');\n  }\n\n  return notification;\n};\n\nexport const useBehaviorGroupNotificationRows = (\n  notifications: Array<Notification>,\n  behaviorGroups: ReadonlyArray<BehaviorGroup> | undefined\n) => {\n  const [notificationRows, setNotificationRows] = React.useState<\n    Array<BehaviorGroupNotificationRow>\n  >([]);\n  const prevNotificationInput = usePrevious(notifications);\n  const { query } = React.useContext(ClientContext);\n\n  const removeBehaviorGroup = React.useCallback(\n    (notificationId: UUID, behaviorGroupId: UUID) => {\n      setNotificationRows(\n        produce((draft) => {\n          const notification = getNotification(draft, notificationId);\n          const index = notification.behaviors.findIndex(\n            // eslint-disable-next-line testing-library/await-async-queries\n            findById(behaviorGroupId)\n          );\n          if (index === -1) {\n            throw new Error('Behavior group not found in rows');\n          }\n\n          notification.behaviors.splice(index, 1);\n        })\n      );\n    },\n    [setNotificationRows]\n  );\n\n  const updateBehaviorGroups = React.useCallback(\n    (behaviorGroups: ReadonlyArray<BehaviorGroup>) => {\n      setNotificationRows(\n        produce((draft) => {\n          for (const content of draft) {\n            // content.behaviors = castDraft(content.behaviors.map(ob => behaviorGroups.find(nb => nb.id === ob.id) || ob));\n            // Find if there are new behaviors for this type.\n            content.behaviors = [];\n            behaviorGroups.forEach((behaviorGroup) => {\n              if (behaviorGroup.events.find((e) => e.id === content.id)) {\n                content.behaviors.push(castDraft(behaviorGroup));\n              }\n            });\n          }\n        })\n      );\n    },\n    [setNotificationRows]\n  );\n\n  const updateBehaviorGroupLink = React.useCallback(\n    (\n      notificationId: UUID,\n      behaviorGroup: BehaviorGroup,\n      linkBehavior: boolean\n    ) => {\n      if (linkBehavior) {\n        setNotificationRows(\n          produce((draft) => {\n            const notification = getNotification(draft, notificationId);\n            notification.behaviors.push({\n              ...castDraft(behaviorGroup),\n            });\n          })\n        );\n      } else {\n        removeBehaviorGroup(notificationId, behaviorGroup.id);\n      }\n    },\n    [removeBehaviorGroup, setNotificationRows]\n  );\n\n  const setEditMode = React.useCallback(\n    async (notificationId: UUID, command: 'edit' | 'finish' | 'cancel') => {\n      if (command === 'finish') {\n        const notification = getNotification(notificationRows, notificationId);\n        if (notification.isEditMode) {\n          setNotificationRows(\n            produce((draft) => {\n              const draftNotification = getNotification(draft, notificationId);\n              draftNotification.loadingActionStatus = 'loading';\n            })\n          );\n\n          const response = await query(\n            linkBehaviorGroupAction(\n              notificationId,\n              notification.behaviors.map((b) => b.id)\n            )\n          );\n          if (response.payload?.status === 200) {\n            setNotificationRows(\n              produce((draft) => {\n                const draftNotification = getNotification(\n                  draft,\n                  notificationId\n                );\n                draftNotification.isEditMode = false;\n                draftNotification.loadingActionStatus = 'done';\n              })\n            );\n          } else {\n            addDangerNotification(\n              'Saving behavior',\n              <>\n                There was an error saving the behavior of{' '}\n                <b>\n                  {notification.applicationDisplayName} -{' '}\n                  {notification.eventTypeDisplayName}\n                </b>\n                .\n              </>\n            );\n            setNotificationRows(\n              produce((draft) => {\n                const draftNotification = getNotification(\n                  draft,\n                  notificationId\n                );\n                draftNotification.isEditMode = true;\n                draftNotification.loadingActionStatus = 'done';\n              })\n            );\n          }\n        }\n      } else {\n        setNotificationRows(\n          produce((draft) => {\n            const notification = getNotification(draft, notificationId);\n\n            if (notification.isEditMode && command === 'cancel') {\n              notification.behaviors = notification.oldBehaviors;\n            }\n\n            notification.isEditMode = command === 'edit';\n            if (notification.isEditMode) {\n              notification.oldBehaviors = notification.behaviors;\n            }\n          })\n        );\n      }\n    },\n    [setNotificationRows, notificationRows, query]\n  );\n\n  const startEditMode = React.useCallback(\n    (notificationId: UUID) => {\n      setEditMode(notificationId, 'edit');\n    },\n    [setEditMode]\n  );\n\n  const finishEditMode = React.useCallback(\n    (notificationId: UUID) => {\n      setEditMode(notificationId, 'finish');\n    },\n    [setEditMode]\n  );\n\n  const cancelEditMode = React.useCallback(\n    (notificationId: UUID) => {\n      setEditMode(notificationId, 'cancel');\n    },\n    [setEditMode]\n  );\n\n  React.useEffect(() => {\n    if (notifications !== prevNotificationInput) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      setNotificationRows((_prev) =>\n        notifications.map((notification) => ({\n          ...notification,\n          loadingActionStatus: 'done',\n          behaviors: [],\n          isEditMode: false,\n        }))\n      );\n\n      if (behaviorGroups) {\n        updateBehaviorGroups(behaviorGroups);\n      }\n    }\n  }, [\n    behaviorGroups,\n    notifications,\n    prevNotificationInput,\n    setNotificationRows,\n    updateBehaviorGroups,\n  ]);\n\n  return {\n    rows: notificationRows,\n    updateBehaviorGroupLink,\n    updateBehaviorGroups,\n    startEditMode,\n    finishEditMode,\n    cancelEditMode,\n  };\n};\n","import { Tab, TabTitleText } from '@patternfly/react-core';\nimport { ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport { NotificationsBehaviorGroupTable } from '../../../components/Notifications/NotificationsBehaviorGroupTable';\nimport { TabComponent } from '../../../components/Notifications/TabComponent';\nimport { NotificationsToolbar } from '../../../components/Notifications/Toolbar';\nimport { useListNotifications } from '../../../services/useListNotifications';\nimport {\n  BehaviorGroup,\n  Facet,\n  NotificationBehaviorGroup,\n  UUID,\n} from '../../../types/Notification';\nimport { useEventTypesPage } from '../hooks/useEventTypesPage';\nimport { BehaviorGroupsSection } from './BehaviorGroupsSection';\nimport { useBehaviorGroupContent } from './useBehaviorGroupContent';\nimport { useBehaviorGroupNotificationRows } from './useBehaviorGroupNotificationRows';\n\ninterface BundlePageBehaviorGroupContentProps {\n  applications: Array<Facet>;\n  bundle: Facet;\n}\n\nconst noEvents = [];\n\nexport const BundlePageBehaviorGroupContent: React.FunctionComponent<BundlePageBehaviorGroupContentProps> =\n  (props) => {\n    const behaviorGroupContent = useBehaviorGroupContent(props.bundle.id);\n\n    const { rbac } = useAppContext();\n\n    const onExport = React.useCallback((type: ExporterType) => {\n      console.log('Export to', type);\n    }, []);\n\n    const eventTypePage = useEventTypesPage(\n      props.bundle,\n      props.applications,\n      true\n    );\n\n    const useNotifications = useListNotifications(\n      eventTypePage.pageController.page\n    );\n\n    const count = React.useMemo(() => {\n      const payload = useNotifications.payload;\n      if (payload?.status === 200) {\n        return payload.value.meta.count;\n      }\n\n      return 0;\n    }, [useNotifications.payload]);\n\n    const behaviorGroups =\n      !behaviorGroupContent.isLoading && !behaviorGroupContent.hasError\n        ? behaviorGroupContent.content\n        : undefined;\n\n    const {\n      rows: notificationRows,\n      updateBehaviorGroupLink,\n      startEditMode,\n      finishEditMode,\n      cancelEditMode,\n      updateBehaviorGroups,\n    } = useBehaviorGroupNotificationRows(\n      !useNotifications.loading &&\n        useNotifications.payload?.type === 'eventTypesArray'\n        ? useNotifications.payload.value.data\n        : noEvents,\n      behaviorGroups\n    );\n\n    React.useEffect(() => {\n      if (behaviorGroups) {\n        updateBehaviorGroups(behaviorGroups);\n      }\n    }, [behaviorGroups, updateBehaviorGroups]);\n\n    const onBehaviorGroupLinkUpdated = React.useCallback(\n      (\n        notification: NotificationBehaviorGroup,\n        behaviorGroup: BehaviorGroup,\n        isLinked: boolean\n      ) => {\n        if (behaviorGroup) {\n          updateBehaviorGroupLink(notification.id, behaviorGroup, isLinked);\n        }\n      },\n      [updateBehaviorGroupLink]\n    );\n\n    const onStartEditing = React.useCallback(\n      (notificationId: UUID) => {\n        startEditMode(notificationId);\n      },\n      [startEditMode]\n    );\n\n    const onFinishEditing = React.useCallback(\n      (notificationId: UUID) => {\n        finishEditMode(notificationId);\n      },\n      [finishEditMode]\n    );\n\n    const onCancelEditing = React.useCallback(\n      (notificationId: UUID) => {\n        cancelEditMode(notificationId);\n      },\n      [cancelEditMode]\n    );\n\n    return (\n      <TabComponent configuration={props.children} settings={props.children}>\n        <Tab eventKey={0} title={<TabTitleText>Configuration</TabTitleText>}>\n          <NotificationsToolbar\n            filters={eventTypePage.filters}\n            setFilters={eventTypePage.setFilters}\n            clearFilter={eventTypePage.clearFilters}\n            appFilterOptions={props.applications}\n            onExport={onExport}\n            count={count}\n            pageAdapter={eventTypePage.pageController}\n          >\n            <NotificationsBehaviorGroupTable\n              notifications={notificationRows}\n              behaviorGroupContent={behaviorGroupContent}\n              onBehaviorGroupLinkUpdated={onBehaviorGroupLinkUpdated}\n              onStartEditing={\n                rbac.canWriteNotifications ? onStartEditing : undefined\n              }\n              onFinishEditing={\n                rbac.canWriteNotifications ? onFinishEditing : undefined\n              }\n              onCancelEditing={\n                rbac.canWriteNotifications ? onCancelEditing : undefined\n              }\n              onSort={eventTypePage.onSort}\n              sortBy={eventTypePage.sortBy}\n              sortDirection={eventTypePage.sortDirection}\n            />\n          </NotificationsToolbar>\n        </Tab>\n        <Tab eventKey={1} title={<TabTitleText>Behavior Groups</TabTitleText>}>\n          <div className=\"pf-v5-u-mb-xl\">\n            <BehaviorGroupsSection\n              bundle={props.bundle}\n              applications={props.applications}\n              behaviorGroupContent={behaviorGroupContent}\n            />\n          </div>\n        </Tab>\n      </TabComponent>\n    );\n  };\n","import produce, { Draft, original } from 'immer';\nimport * as React from 'react';\nimport { useMemo } from 'react';\n\nimport { useRbacGroups } from '../../../app/rbac/RbacGroupContext';\nimport { useGetBehaviorGroups } from '../../../services/Notifications/GetBehaviorGroups';\nimport {\n  ActionNotify,\n  BehaviorGroup,\n  UUID,\n  isActionNotify,\n} from '../../../types/Notification';\nimport { NotificationRbacGroupRecipient } from '../../../types/Recipient';\n\nexport type BehaviorGroupContent =\n  | {\n      isLoading: true;\n      reload: () => void;\n    }\n  | {\n      isLoading: false;\n      hasError: true;\n      error: string;\n      reload: () => void;\n    }\n  | {\n      isLoading: false;\n      hasError: false;\n      content: ReadonlyArray<BehaviorGroup>;\n      reload: () => void;\n    };\n\nexport const useBehaviorGroupContent = (bundleId: UUID) => {\n  const behaviorGroups = useGetBehaviorGroups(bundleId);\n  const { groups, isLoading: isLoadingGroups } = useRbacGroups();\n\n  const result = React.useMemo<BehaviorGroupContent>(() => {\n    const payload = behaviorGroups.payload;\n    const error = behaviorGroups.errorObject;\n    const loading = behaviorGroups.loading;\n    const reload = behaviorGroups.query;\n\n    if (loading) {\n      return {\n        isLoading: true,\n        reload,\n      };\n    }\n\n    if (payload?.status === 200) {\n      return {\n        isLoading: false,\n        hasError: false,\n        content: payload.value,\n        reload,\n      };\n    }\n\n    return {\n      isLoading: false,\n      hasError: true,\n      error: error.toString(),\n      reload,\n    };\n  }, [\n    behaviorGroups.payload,\n    behaviorGroups.loading,\n    behaviorGroups.errorObject,\n    behaviorGroups.query,\n  ]);\n\n  return useMemo(() => {\n    if (!result.isLoading && !result.hasError) {\n      return produce(result, (draft) => {\n        const originalValues = original(draft);\n        if (originalValues) {\n          originalValues.content.forEach((bg, bgIndex) =>\n            bg.actions.forEach((a, aIndex) => {\n              if (isActionNotify(a)) {\n                a.recipient.forEach((recipient, recipientIndex) => {\n                  if (\n                    recipient instanceof NotificationRbacGroupRecipient &&\n                    recipient.isLoading\n                  ) {\n                    const recipients = (\n                      draft.content[bgIndex].actions[\n                        aIndex\n                      ] as Draft<ActionNotify>\n                    ).recipient;\n                    const rbacRecipient = recipients[\n                      recipientIndex\n                    ] as NotificationRbacGroupRecipient;\n                    recipients[recipientIndex] =\n                      new NotificationRbacGroupRecipient(\n                        rbacRecipient.integrationId,\n                        rbacRecipient.groupId,\n                        groups.find((g) => g.id === rbacRecipient.groupId)\n                          ?.name || isLoadingGroups\n                      );\n                  }\n                });\n              }\n            })\n          );\n        }\n      });\n    }\n\n    return result;\n  }, [result, groups, isLoadingGroups]);\n};\n","import {\n  ButtonVariant,\n  Flex,\n  FlexItem,\n  Tab,\n  TabTitleText,\n  Tabs,\n} from '@patternfly/react-core';\nimport { global_spacer_lg } from '@patternfly/react-tokens';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport { useFlag } from '@unleash/proxy-client-react';\nimport { default as React, useEffect, useMemo, useState } from 'react';\nimport { style } from 'typestyle';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport { ButtonLink } from '../../../components/ButtonLink';\nimport { TabComponent } from '../../../components/Notifications/TabComponent';\nimport { TimeConfigComponent } from '../../../components/Notifications/TimeConfig';\nimport { PageHeader } from '../../../components/PageHeader';\nimport { Messages } from '../../../properties/Messages';\nimport { linkTo } from '../../../Routes';\nimport { useGetApplicationsLazy } from '../../../services/Notifications/GetApplications';\nimport { Facet } from '../../../types/Notification';\nimport { BundlePageBehaviorGroupContent } from './BundlePageBehaviorGroupContent';\n\ninterface NotificationListBundlePageProps {\n  bundle: Facet;\n  bundleTabs: Facet[];\n  applications: Array<Facet>;\n}\n\nexport const NotificationListBundlePage: React.FunctionComponent<NotificationListBundlePageProps> =\n  (props) => {\n    const { updateDocumentTitle } = useChrome();\n\n    updateDocumentTitle?.(`${props.bundle.displayName} - Notifications`);\n\n    const notificationsOverhaul = useFlag('platform.notifications.overhaul');\n\n    const { rbac } = useAppContext();\n    const eventLogPageUrl = React.useMemo(\n      () => linkTo.eventLog(props.bundle.name),\n      [props.bundle.name]\n    );\n    const getApplications = useGetApplicationsLazy();\n    const [activeTabKey, setActiveTabKey] = useState(0);\n\n    const mainPage = (\n      <Main>\n        <BundlePageBehaviorGroupContent\n          applications={props.applications}\n          bundle={props.bundle}\n        />\n      </Main>\n    );\n\n    const paddingLeftClassName = style({\n      paddingLeft: global_spacer_lg.value,\n    });\n\n    const eventLogButton = () => {\n      return notificationsOverhaul ? null : (\n        <ButtonLink\n          isDisabled={!rbac.canReadEvents}\n          to={eventLogPageUrl}\n          variant={ButtonVariant.secondary}\n        >\n          {Messages.pages.notifications.list.viewHistory}\n        </ButtonLink>\n      );\n    };\n\n    const pageTitle = () => {\n      if (notificationsOverhaul) {\n        return `Configure Events`;\n      } else {\n        return `${Messages.pages.notifications.list.title} | ${props.bundle.displayName}`;\n      }\n    };\n\n    const timeConfigPage = (\n      <Main>\n        <TimeConfigComponent />\n      </Main>\n    );\n\n    useEffect(() => {\n      if (notificationsOverhaul) {\n        const query = getApplications.query;\n        query(props.bundleTabs[activeTabKey].name);\n      }\n    }, [\n      activeTabKey,\n      getApplications.query,\n      props.bundleTabs,\n      notificationsOverhaul,\n    ]);\n\n    const getInitialApplications = useMemo(() => {\n      if (getApplications.payload) {\n        return getApplications.payload.value as Facet[];\n      } else {\n        return [];\n      }\n    }, [getApplications.payload]);\n\n    if (notificationsOverhaul) {\n      const handleTabClick = (event, tabIndex) => {\n        setActiveTabKey(tabIndex);\n      };\n\n      return (\n        <>\n          <PageHeader\n            title={pageTitle()}\n            subtitle={\n              <span>\n                Configure which event notifications different users within your\n                organization are entitled to receive.\n              </span>\n            }\n            action={eventLogButton()}\n          />\n          <Flex direction={{ default: 'column' }}>\n            <FlexItem>\n              <Tabs\n                activeKey={activeTabKey}\n                onSelect={handleTabClick}\n                className={paddingLeftClassName}\n              >\n                <Tab\n                  eventKey={2}\n                  title={<TabTitleText>OpenShift</TabTitleText>}\n                >\n                  <Main>\n                    <BundlePageBehaviorGroupContent\n                      applications={getInitialApplications}\n                      bundle={props.bundleTabs[2]}\n                    />\n                  </Main>\n                </Tab>\n                <Tab\n                  eventKey={0}\n                  title={<TabTitleText>Red Hat Enterprise Linux</TabTitleText>}\n                >\n                  <Main>\n                    <BundlePageBehaviorGroupContent\n                      applications={getInitialApplications}\n                      bundle={props.bundleTabs[0]}\n                    />\n                  </Main>\n                </Tab>\n                <Tab eventKey={1} title={<TabTitleText>Console</TabTitleText>}>\n                  <Main>\n                    <BundlePageBehaviorGroupContent\n                      applications={getInitialApplications}\n                      bundle={props.bundleTabs[1]}\n                    />\n                  </Main>\n                </Tab>\n              </Tabs>\n            </FlexItem>\n          </Flex>\n        </>\n      );\n    } else {\n      return (\n        <>\n          <PageHeader\n            title={`${Messages.pages.notifications.list.title} | ${props.bundle.displayName}`}\n            subtitle={\n              <span>\n                Configure which event notifications different users within your\n                organization are entitled to receive.\n              </span>\n            }\n            action={eventLogButton()}\n          />\n\n          <TabComponent\n            configuration={props.children}\n            settings={props.children}\n          >\n            <Tab\n              eventKey={0}\n              title={<TabTitleText>Configuration</TabTitleText>}\n            >\n              {mainPage}\n            </Tab>\n            <Tab eventKey={1} title={<TabTitleText>Settings</TabTitleText>}>\n              {timeConfigPage}\n            </Tab>\n          </TabComponent>\n        </>\n      );\n    }\n  };\n","import { useFlag } from '@unleash/proxy-client-react';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { AppSkeleton } from '../../../app/AppSkeleton';\nimport { useGetApplicationsLazy } from '../../../services/Notifications/GetApplications';\nimport { useGetBundles } from '../../../services/Notifications/GetBundles';\nimport { Facet } from '../../../types/Notification';\nimport { NotificationListBundlePage } from './BundlePage';\n\nenum BundleStatus {\n  LOADING,\n  NOT_FOUND,\n  FAILED_TO_LOAD,\n}\n\nconst isBundleStatus = (bundle: Facet | BundleStatus): bundle is BundleStatus =>\n  typeof bundle === 'number';\n\nexport const NotificationsListPage: React.FunctionComponent = () => {\n  const navigate = useNavigate();\n  const params = useParams<Record<string, string | undefined>>();\n  const notificationsOverhaul = useFlag('platform.notifications.overhaul');\n  const bundleList = ['rhel', 'console', 'openshift'];\n\n  const bundleName = useMemo(\n    () => (notificationsOverhaul ? 'rhel' : params.bundleName),\n    [notificationsOverhaul, params.bundleName]\n  );\n\n  const getBundles = useGetBundles();\n  const getApplications = useGetApplicationsLazy();\n\n  const bundle: Facet | BundleStatus = useMemo(() => {\n    if (getBundles.payload?.status === 200) {\n      return (\n        getBundles.payload.value.find((b) => b.name === bundleName) ??\n        BundleStatus.NOT_FOUND\n      );\n    } else if (getBundles.payload) {\n      return BundleStatus.FAILED_TO_LOAD;\n    }\n\n    return BundleStatus.LOADING;\n  }, [getBundles.payload, bundleName]);\n\n  const bundleTabs: Facet[] | BundleStatus = [];\n\n  const getbundleTabs = () => {\n    if (getBundles.payload?.status === 200) {\n      bundleList.forEach((bundle) => {\n        if (getBundles.payload?.value) {\n          bundleTabs.push(\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (getBundles.payload.value as any).find((b) => b.name === bundle) ??\n              BundleStatus.NOT_FOUND\n          );\n        }\n      });\n    } else if (getBundles.payload) {\n      throw new Error('Unable to load bundle information');\n    } else {\n      return <AppSkeleton />;\n    }\n  };\n\n  if (notificationsOverhaul) {\n    getbundleTabs();\n  }\n\n  React.useEffect(() => {\n    const query = getApplications.query;\n    if (!isBundleStatus(bundle)) {\n      query(bundle.name);\n    }\n  }, [bundle, getApplications.query]);\n\n  const applications: Array<Facet> | null | undefined = useMemo(() => {\n    if (getApplications.payload) {\n      return getApplications.payload.status === 200\n        ? getApplications.payload.value\n        : null;\n    }\n\n    return undefined;\n  }, [getApplications.payload]);\n\n  if (bundle === BundleStatus.NOT_FOUND) {\n    if (bundleName === '/rhel') {\n      throw new Error('Default bundle information not found');\n    }\n\n    navigate('/notifications/rhel');\n    return <React.Fragment />;\n  }\n\n  if (bundle === BundleStatus.FAILED_TO_LOAD) {\n    throw new Error('Unable to load bundle information');\n  }\n\n  if (applications === null) {\n    throw new Error('Unable to load application facets');\n  }\n\n  if (bundle === BundleStatus.LOADING || !applications) {\n    return <AppSkeleton />;\n  }\n\n  return (\n    <NotificationListBundlePage\n      bundleTabs={bundleTabs}\n      bundle={bundle}\n      applications={applications}\n    />\n  );\n};\n","import {\n  DatePicker,\n  DatePickerRef,\n  Select,\n  SelectOption,\n  SelectOptionObject,\n  SelectVariant,\n  Split,\n  SplitItem,\n  TextInputProps,\n} from '@patternfly/react-core';\nimport { important } from 'csx';\nimport { add, format, isAfter, isBefore, min, parseISO } from 'date-fns';\nimport produce from 'immer';\nimport React, { useMemo, useState } from 'react';\nimport { Dispatch, useRef } from 'react';\nimport { SetStateAction } from 'react';\nimport { style } from 'typestyle';\n\nimport { EventPeriod } from '../../../types/Event';\n\nexport enum NotificationsLogDateFilterValue {\n  TODAY = 'today',\n  YESTERDAY = 'yesterday',\n  LAST_7 = 'last_7',\n  LAST_14 = 'last_14',\n  CUSTOM = 'custom',\n}\n\nconst labels: Record<NotificationsLogDateFilterValue, string> = {\n  [NotificationsLogDateFilterValue.TODAY]: 'Today',\n  [NotificationsLogDateFilterValue.YESTERDAY]: 'Yesterday',\n  [NotificationsLogDateFilterValue.LAST_7]: 'Last 7 days',\n  [NotificationsLogDateFilterValue.LAST_14]: 'Last 14 days',\n  [NotificationsLogDateFilterValue.CUSTOM]: 'Custom',\n};\n\nconst datePickerClassName = style({\n  backgroundColor: important('var(-pf-v5-global--BackgroundColor--100)'),\n  cursor: 'pointer',\n  $nest: {\n    '&::placeholder': {\n      color: important('var(--pf-v5-global--palette--black-1000)'),\n    },\n    '&:hover': {\n      borderBottomColor: 'var(--pf-v5-global--active-color--100)',\n    },\n  },\n});\n\nclass EventLogSelectObject implements SelectOptionObject {\n  readonly value: NotificationsLogDateFilterValue;\n\n  constructor(value: NotificationsLogDateFilterValue) {\n    this.value = value;\n  }\n\n  toString(): string {\n    return labels[this.value];\n  }\n  compareTo(selectOption: unknown): boolean {\n    if (selectOption instanceof EventLogSelectObject) {\n      return selectOption.value === this.value;\n    }\n\n    return false;\n  }\n}\n\nconst dateInputProps: TextInputProps = {\n  isReadOnly: true,\n  className: datePickerClassName,\n};\n\ninterface CustomDateFilterProps {\n  retentionDays: number;\n  period: EventPeriod;\n  setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nconst startRangeValidators = (minDate, maxDate, period) => [\n  (date) => {\n    if (isBefore(date, minDate)) {\n      return 'Date is before the retention policy';\n    } else if (isAfter(date, maxDate)) {\n      return 'Date is after today';\n    } else if (period[1] && isAfter(date, period[1])) {\n      return 'Start date must be before end date';\n    }\n\n    return '';\n  },\n];\n\nconst endRangeValidators = (minDate, maxDate, period) => [\n  (date) => {\n    if (isBefore(date, minDate)) {\n      return 'Date is before the retention policy';\n    } else if (isAfter(date, maxDate)) {\n      return 'Date is after today';\n    } else if (period[0] && isBefore(date, period[0])) {\n      return 'End date must be after start date';\n    }\n\n    return '';\n  },\n];\n\nconst CustomDateFilter: React.FunctionComponent<CustomDateFilterProps> = ({\n  period,\n  setPeriod,\n}) => {\n  const maxDate = useMemo(() => new Date(), []);\n  const minDate = useMemo(\n    () =>\n      add(maxDate, {\n        days: -14,\n      }),\n    [maxDate]\n  );\n\n  const formatPeriod = (period: Date | undefined) =>\n    period ? format(period, 'yyyy-MM-dd') : undefined;\n\n  const startValue: string | undefined = formatPeriod(period[0]);\n  const endValue: string | undefined = formatPeriod(period[1]);\n\n  const startDateRef = useRef<DatePickerRef>(null);\n  const endDateRef = useRef<DatePickerRef>(null);\n\n  return (\n    <Split>\n      <SplitItem>\n        <DatePicker\n          placeholder=\"Start\"\n          inputProps={{\n            ...dateInputProps,\n            onClick: () => startDateRef.current?.setCalendarOpen(true),\n          }}\n          validators={startRangeValidators(minDate, maxDate, period)}\n          onChange={(start: string) => {\n            const startDate = parseISO(start);\n            setPeriod(\n              produce((draft) => {\n                draft[0] = startDate;\n                if (!draft[1]) {\n                  draft[1] = min([add(startDate, { days: 1 }), maxDate]);\n                }\n              })\n            );\n          }}\n          value={startValue}\n          ref={startDateRef}\n        />\n      </SplitItem>\n      <SplitItem className=\"pf-v5-u-align-self-center pf-v5-u-px-sm pf-v5-u-color-300\">\n        to\n      </SplitItem>\n      <SplitItem>\n        <DatePicker\n          placeholder=\"End\"\n          inputProps={{\n            ...dateInputProps,\n            onClick: () => endDateRef.current?.setCalendarOpen(true),\n          }}\n          validators={endRangeValidators(minDate, maxDate, period)}\n          onChange={(end: string) => {\n            setPeriod(\n              produce((draft) => {\n                draft[1] = parseISO(end);\n              })\n            );\n          }}\n          value={endValue}\n          ref={endDateRef}\n        />\n      </SplitItem>\n    </Split>\n  );\n};\n\nexport interface NotificationsLogDateFilterProps {\n  value: NotificationsLogDateFilterValue;\n  setValue: (value: NotificationsLogDateFilterValue) => void;\n  retentionDays: number;\n  period: EventPeriod;\n  setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n}\n\nexport const NotificationsLogDateFilter: React.FunctionComponent<NotificationsLogDateFilterProps> =\n  ({ value, setValue, period, setPeriod, retentionDays }) => {\n    const [isOpen, setOpen] = useState(false);\n    const val = useMemo(() => new EventLogSelectObject(value), [value]);\n\n    return (\n      <Split>\n        <SplitItem>\n          <Select\n            isOpen={isOpen}\n            variant={SelectVariant.single}\n            onToggle={() => setOpen((prev) => !prev)}\n            selections={val}\n            onSelect={(\n              _e: unknown,\n              selectObject: SelectOptionObject | string\n            ) => {\n              if (selectObject instanceof EventLogSelectObject) {\n                setValue(selectObject.value);\n                setOpen(false);\n              }\n            }}\n          >\n            {Object.values(NotificationsLogDateFilterValue).map((v) => (\n              <SelectOption key={v} value={new EventLogSelectObject(v)} />\n            ))}\n          </Select>\n        </SplitItem>\n        {value === NotificationsLogDateFilterValue.CUSTOM && (\n          <SplitItem>\n            <CustomDateFilter\n              period={period}\n              setPeriod={setPeriod}\n              retentionDays={retentionDays}\n            />\n          </SplitItem>\n        )}\n      </Split>\n    );\n  };\n","import {\n  Bullseye,\n  Button,\n  EmptyState,\n  EmptyStateBody,\n  EmptyStateIcon,\n  EmptyStateVariant,\n  Title,\n} from '@patternfly/react-core';\nimport { SearchIcon } from '@patternfly/react-icons';\nimport React from 'react';\n\nconst NotificationsLogEmptyState = () => {\n  return (\n    <Bullseye>\n      <EmptyState variant={EmptyStateVariant.small}>\n        <EmptyStateIcon icon={SearchIcon} />\n        <Title headingLevel=\"h2\" size=\"lg\">\n          No results found\n        </Title>\n        <EmptyStateBody>Clear all filters and try again.</EmptyStateBody>\n        <Button variant=\"link\">Clear all filters</Button>\n      </EmptyState>\n    </Bullseye>\n  );\n};\n\nexport default NotificationsLogEmptyState;\n","import { Pagination } from '@patternfly/react-core';\nimport {\n  TableComposable,\n  Tbody,\n  Td,\n  Th,\n  ThProps,\n  Thead,\n  Tr,\n} from '@patternfly/react-table';\nimport React from 'react';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components/DateFormat';\n\nimport NotificationsLogEmptyState from './NotificationsLogEmptyState';\n\nexport type DirectionType = 'asc' | 'desc';\n\nexport type OnSort = (index: number, direction: DirectionType) => void;\n\nexport type SortType = {\n  columnIndex: number;\n  direction: DirectionType;\n};\n\nexport type PaginationType = {\n  limit: number;\n  offset: number;\n  count: number;\n};\n\nexport type OnPagination = (pagnation: Omit<PaginationType, 'count'>) => void;\n\nexport type DrawerType = {\n  id: string;\n  description: string;\n  title: string;\n  created: string;\n  read: boolean;\n  source: string;\n}[];\n\nconst NotificationsLogTable = ({\n  isEmptyState,\n  onSort,\n  sort,\n  drawer,\n  onPagination,\n  pagination,\n}: {\n  isEmptyState: boolean;\n  onSort: OnSort;\n  sort: SortType;\n  drawer: DrawerType;\n  onPagination: OnPagination;\n  pagination: PaginationType;\n}) => {\n  const getSortParams = (columnIndex: number): ThProps['sort'] => ({\n    sortBy: {\n      index: sort.columnIndex,\n      direction: sort.direction,\n      defaultDirection: 'asc',\n    },\n    onSort: (_event, index, direction) => {\n      onSort(index, direction);\n    },\n    columnIndex,\n  });\n\n  return (\n    <React.Fragment>\n      <TableComposable>\n        <Thead>\n          <Tr>\n            <Th sort={getSortParams(0)}>Event type</Th>\n            <Th>Service</Th>\n            <Th sort={getSortParams(2)}>Timestamp</Th>\n          </Tr>\n        </Thead>\n        <Tbody>\n          {isEmptyState ? (\n            <Tr>\n              <Td colSpan={8}>\n                <NotificationsLogEmptyState />\n              </Td>\n            </Tr>\n          ) : (\n            <React.Fragment>\n              {drawer.map((data) => (\n                <Tr key={data.id}>\n                  <Td>{data.title}</Td>\n                  <Td>{data.source}</Td>\n                  <Td>\n                    <DateFormat date={data.created} />\n                  </Td>\n                </Tr>\n              ))}\n            </React.Fragment>\n          )}\n        </Tbody>\n      </TableComposable>\n      <Pagination\n        itemCount={pagination.count}\n        perPage={pagination.limit}\n        page={pagination.offset / pagination.limit + 1}\n        onSetPage={(_ev, newPage, perPage) => {\n          onPagination({\n            limit: perPage ?? pagination.limit,\n            offset: (newPage - 1) * (perPage ?? pagination.limit),\n          });\n        }}\n        widgetId=\"pagination-id\"\n        onPerPageSelect={(_ev, perPage) => {\n          onPagination({\n            limit: perPage ?? pagination.limit,\n            offset: 0,\n          });\n        }}\n      />\n    </React.Fragment>\n  );\n};\n\nexport default NotificationsLogTable;\n","import {\n  Divider,\n  Icon,\n  MenuToggle,\n  Toolbar,\n  ToolbarContent,\n  ToolbarItem,\n} from '@patternfly/react-core';\nimport { Pagination } from '@patternfly/react-core';\nimport { FilterIcon } from '@patternfly/react-icons';\nimport React, { Dispatch, SetStateAction } from 'react';\n\nimport { EventPeriod } from '../../../types/Event';\nimport {\n  NotificationsLogDateFilter,\n  NotificationsLogDateFilterValue,\n} from './NotificationsLogDateFilter';\n\nconst NotificationsLogToolbar: React.FC<{\n  retentionDays: number;\n  period: EventPeriod;\n  setPeriod: Dispatch<SetStateAction<EventPeriod>>;\n  onPagination: (pagination: { limit: number; offset: number }) => void;\n  pagination: { limit: number; offset: number; count: number };\n  dateFilter: NotificationsLogDateFilterValue;\n  setDateFilter: (value: NotificationsLogDateFilterValue) => void;\n}> = ({ onPagination, pagination, ...props }) => {\n  return (\n    <React.Fragment>\n      <Toolbar>\n        <ToolbarContent>\n          <ToolbarItem>\n            <MenuToggle\n              icon={\n                <Icon>\n                  <FilterIcon />\n                </Icon>\n              }\n            >\n              Event\n            </MenuToggle>\n          </ToolbarItem>\n        </ToolbarContent>\n      </Toolbar>\n      <Divider />\n      <Toolbar>\n        <ToolbarContent>\n          <ToolbarItem>\n            <NotificationsLogDateFilter\n              value={props.dateFilter}\n              setValue={props.setDateFilter}\n              retentionDays={props.retentionDays}\n              setPeriod={props.setPeriod}\n              period={props.period}\n            />\n          </ToolbarItem>\n          <ToolbarItem className=\"pf-u-ml-auto\">\n            <Pagination\n              itemCount={pagination.count}\n              perPage={pagination.limit}\n              page={pagination.offset / pagination.limit + 1}\n              onSetPage={(_ev, newPage, perPage) => {\n                onPagination({\n                  limit: perPage ?? pagination.limit,\n                  offset: (newPage - 1) * (perPage ?? pagination.limit),\n                });\n              }}\n              widgetId=\"pagination-id\"\n              onPerPageSelect={(_ev, perPage) => {\n                onPagination({\n                  limit: perPage ?? pagination.limit,\n                  offset: 0,\n                });\n              }}\n              isCompact\n            />\n          </ToolbarItem>\n        </ToolbarContent>\n      </Toolbar>\n    </React.Fragment>\n  );\n};\n\nexport default NotificationsLogToolbar;\n","import { Card } from '@patternfly/react-core';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport {\n  Filter,\n  Operator,\n  toUtc,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { format, sub, toDate } from 'date-fns';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NotificationsLogDateFilterValue } from '../../../components/Notifications/NotificationsLog/NotificationsLogDateFilter';\nimport NotificationsLogTable, {\n  DrawerType,\n  PaginationType,\n} from '../../../components/Notifications/NotificationsLog/NotificationsLogTable';\nimport NotificationsLogToolbar from '../../../components/Notifications/NotificationsLog/NotificationsLogToolbar';\nimport { PageHeader } from '../../../components/PageHeader';\nimport { Messages } from '../../../properties/Messages';\n\nexport type NotificationsPeriod = [Date | undefined, Date | undefined];\n\nconst sortMapper = {\n  0: 'title',\n  2: 'created',\n};\n\nconst RETENTION_DAYS = 14;\n\nconst filterPeriodMapper = (dateFilter) => {\n  const today = toUtc(new Date());\n  const yesterday = sub(toDate(today), {\n    days: 1,\n  });\n  return {\n    [NotificationsLogDateFilterValue.LAST_14]: [\n      sub(toDate(today), {\n        days: 14,\n      }),\n      today,\n    ],\n    [NotificationsLogDateFilterValue.LAST_7]: [\n      sub(toDate(today), {\n        days: 7,\n      }),\n      today,\n    ],\n    [NotificationsLogDateFilterValue.TODAY]: [today, today],\n    [NotificationsLogDateFilterValue.YESTERDAY]: [yesterday, yesterday],\n  }[dateFilter];\n};\n\nconst createFilter = (dateFilter, period) => {\n  const filterPeriod = [undefined, undefined] as [\n    Date | undefined,\n    Date | undefined\n  ];\n  const DATE_FORMAT = 'yyyy-MM-dd';\n  const filter = new Filter();\n\n  filterPeriodMapper(dateFilter) || period;\n\n  if (filterPeriod[0] && filterPeriod[1]) {\n    filter.and('start', Operator.EQUAL, format(filterPeriod[0], DATE_FORMAT));\n    filter.and('end', Operator.EQUAL, format(filterPeriod[1], DATE_FORMAT));\n  }\n\n  return {\n    startDate: filterPeriod[0]\n      ? format(filterPeriod[0], DATE_FORMAT)\n      : undefined,\n    endDate: filterPeriod[1] ? format(filterPeriod[1], DATE_FORMAT) : undefined,\n  };\n};\n\nexport const NotificationsLogPage: React.FunctionComponent = () => {\n  const [data, setData] = useState<DrawerType>([]);\n  const [period, setPeriod] = useState<NotificationsPeriod>([\n    undefined,\n    undefined,\n  ]);\n  const [dateFilter, setDateFilter] = useState<NotificationsLogDateFilterValue>(\n    NotificationsLogDateFilterValue.LAST_14\n  );\n  const [pagination, setPagination] = useState<PaginationType>({\n    offset: 0,\n    limit: 20,\n    count: 0,\n  });\n  const [sort, setSort] = useState<{\n    columnIndex: number;\n    direction: 'asc' | 'desc';\n  }>({\n    columnIndex: 2,\n    direction: 'desc',\n  });\n\n  const filterBuilder = useMemo(\n    () => createFilter(dateFilter, period),\n    [dateFilter, period[0]?.toString(), period[1]?.toString()]\n  );\n\n  //TODO: use new JS client instead of directly calling fetch\n  const callApi = useCallback((pagination, sort, filterBuilder) => {\n    const search = new URLSearchParams({\n      offset: `${pagination.offset}`,\n      limit: `${pagination.limit}`,\n      sort_by: `${sortMapper[sort.columnIndex]}:${sort.direction}`,\n    });\n\n    if (filterBuilder.startDate) {\n      search.append('startDate', filterBuilder.startDate + 'T00:00:00');\n    }\n\n    if (filterBuilder.endDate) {\n      search.append('endDate', filterBuilder.endDate + 'T23:59:59');\n    }\n\n    fetch(`/api/notifications/v1/notifications/drawer?${search.toString()}`)\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n\n        return response.json();\n      })\n      .then((response) => {\n        setData(response.data);\n        setPagination((prevState) => ({\n          ...prevState,\n          count: response.meta.count,\n        }));\n      })\n      .catch((error) => {\n        console.error('Error while fetching data: ', error);\n      });\n  }, []);\n\n  useEffect(() => {\n    callApi(pagination, sort, filterBuilder);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dateFilter, period[0]?.toString(), period[1]?.toString()]);\n\n  return (\n    <React.Fragment>\n      <PageHeader\n        title={Messages.pages.notifications.notificationsLog.title}\n        subtitle={Messages.pages.notifications.notificationsLog.subtitle}\n      />\n      <Main>\n        <Card>\n          <NotificationsLogToolbar\n            pagination={pagination}\n            onPagination={({ limit, offset }) => {\n              setPagination((prevState) => ({ ...prevState, offset, limit }));\n              callApi({ limit, offset }, sort, filterBuilder);\n            }}\n            dateFilter={dateFilter}\n            setDateFilter={setDateFilter}\n            retentionDays={RETENTION_DAYS}\n            period={period}\n            setPeriod={setPeriod}\n          />\n          <NotificationsLogTable\n            isEmptyState={data.length === 0}\n            sort={sort}\n            onSort={(index, direction) => {\n              setSort({\n                columnIndex: index,\n                direction,\n              });\n              callApi(\n                pagination,\n                {\n                  columnIndex: index,\n                  direction,\n                },\n                filterBuilder\n              );\n            }}\n            drawer={data}\n            pagination={pagination}\n            onPagination={({ limit, offset }) => {\n              setPagination((prevState) => ({ ...prevState, offset, limit }));\n              callApi({ limit, offset }, sort, filterBuilder);\n            }}\n          />\n        </Card>\n      </Main>\n    </React.Fragment>\n  );\n};\n","import {\n  Button,\n  DataListAction,\n  DataListCell,\n  DataListContent,\n  DataListItem,\n  DataListItemCells,\n  DataListItemRow,\n  DataListToggle,\n  Divider,\n  Flex,\n  FlexItem,\n  Icon,\n  Title,\n} from '@patternfly/react-core';\nimport {\n  BellIcon,\n  IntegrationIcon,\n  RunningIcon,\n  UserIcon,\n  UsersIcon,\n} from '@patternfly/react-icons';\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport enum IconName {\n  USER = 'user',\n  RUNNING = 'running',\n  INTEGRATION = 'integration',\n  USERS = 'users',\n  BELL = 'bell',\n}\n\ninterface CustomDataListItemProps {\n  icon: IconName;\n  heading: string;\n  linkTitle?: string;\n  linkTarget?: string;\n  expandableContent: React.ReactNode;\n  isRedirect?: boolean;\n  isExpanded?: boolean;\n}\n\nconst CustomDataListItem: React.FC<CustomDataListItemProps> = ({\n  icon,\n  heading,\n  linkTitle,\n  linkTarget,\n  expandableContent,\n  isRedirect,\n  isExpanded,\n}) => {\n  const navigate = useNavigate();\n  let iconElement: React.ReactNode = null;\n  const [expanded, setExpanded] = React.useState(isExpanded || false);\n\n  switch (icon) {\n    case IconName.USER:\n      iconElement = <UserIcon className=\"pf-u-primary-color-100\" />;\n      break;\n    case IconName.RUNNING:\n      iconElement = <RunningIcon className=\"pf-u-primary-color-100\" />;\n      break;\n    case IconName.INTEGRATION:\n      iconElement = <IntegrationIcon className=\"pf-u-primary-color-100\" />;\n      break;\n    case IconName.USERS:\n      iconElement = <UsersIcon className=\"pf-u-primary-color-100\" />;\n      break;\n    case IconName.BELL:\n      iconElement = <BellIcon className=\"pf-u-primary-color-100\" />;\n      break;\n    default:\n      break;\n  }\n\n  return (\n    <React.Fragment>\n      <DataListItem aria-labelledby=\"item1\" isExpanded={expanded}>\n        <DataListItemRow className=\"pf-u-align-items-center\">\n          <DataListToggle\n            isExpanded={expanded}\n            id=\"toggle1\"\n            aria-controls=\"expand1\"\n            onClick={() => setExpanded(!expanded)}\n          />\n          <DataListItemCells\n            dataListCells={[\n              <DataListCell key={'cell-' + icon.toString().toLowerCase()}>\n                <div>\n                  <Flex className=\"pf-u-flex-nowrap\">\n                    <FlexItem className=\"pf-u-align-self-center\">\n                      <Icon size=\"lg\">{iconElement}</Icon>\n                    </FlexItem>\n                    <Divider\n                      orientation={{\n                        default: 'vertical',\n                      }}\n                    />\n                    <FlexItem className=\"pf-u-align-self-center\">\n                      <Title headingLevel=\"h4\">{heading}</Title>\n                    </FlexItem>\n                  </Flex>\n                </div>\n              </DataListCell>,\n            ]}\n          />\n          {linkTitle && linkTarget && (\n            <DataListAction\n              aria-labelledby=\"item1 action1\"\n              id=\"action1\"\n              aria-label=\"Actions\"\n              isPlainButtonAction\n            >\n              <Button\n                component=\"a\"\n                href={linkTarget}\n                variant=\"link\"\n                onClick={(e) => {\n                  if (!isRedirect) {\n                    e.preventDefault();\n                    navigate(linkTarget.replace('/preview', ''));\n                  }\n                }}\n              >\n                {linkTitle}\n              </Button>\n            </DataListAction>\n          )}\n        </DataListItemRow>\n        <DataListContent\n          aria-label={heading + ' - Detailed Explanation'}\n          id=\"expand1\"\n          isHidden={!expanded}\n        >\n          <p>{expandableContent}</p>\n        </DataListContent>\n      </DataListItem>\n    </React.Fragment>\n  );\n};\n\nexport default CustomDataListItem;\n","import {\n  Button,\n  Card,\n  CardBody,\n  CardFooter,\n  CardTitle,\n  DataList,\n  DataListCell,\n  DataListItem,\n  DataListItemCells,\n  DataListItemRow,\n  Divider,\n  Flex,\n  FlexItem,\n  Grid,\n  GridItem,\n  Icon,\n  Label,\n  Title,\n} from '@patternfly/react-core';\nimport {\n  ArrowRightIcon,\n  ExternalLinkAltIcon,\n  RunningIcon,\n  UserIcon,\n} from '@patternfly/react-icons';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport PageHeader from '@redhat-cloud-services/frontend-components/PageHeader';\nimport PageHeaderTitle from '@redhat-cloud-services/frontend-components/PageHeader/PageHeaderTitle';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport { useFlag } from '@unleash/proxy-client-react';\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport notificationsProductIcon from '../../../assets/icons/notifications-product-icon.svg';\nimport CustomDataListItem, { IconName } from './CustomDataListItem';\n\n// eslint-disable-next-line max-len\nconst LEARN_MORE =\n  'https://access.redhat.com/documentation/en-us/red_hat_hybrid_cloud_console/2023/html/configuring_notifications_on_the_red_hat_hybrid_cloud_console/index';\n// eslint-disable-next-line max-len\nconst CONFIGURE_INTEGRATIONS =\n  'https://access.redhat.com/documentation/en-us/red_hat_hybrid_cloud_console/2023/html/configuring_notifications_on_the_red_hat_hybrid_cloud_console/assembly-intro_notifications';\n// eslint-disable-next-line max-len\nconst CONFIGURE_SOURCES =\n  'https://access.redhat.com/documentation/en-us/red_hat_hybrid_cloud_console/2023/html/configuring_sources_for_red_hat_services/index';\n\nexport const NotificationsOverviewPage: React.FunctionComponent = () => {\n  const navigate = useNavigate();\n  const isSourcesIntegrations = useFlag('platform.sources.integrations');\n  const [isOrgAdmin, setIsOrgAdmin] = React.useState(null);\n  const { auth, isBeta, getBundle } = useChrome();\n  const notificationsOverhaul = useFlag('platform.notifications.overhaul');\n  React.useEffect(() => {\n    const getUser = async () => {\n      const {\n        identity: { user },\n      }: // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      any = await auth.getUser();\n      setIsOrgAdmin(user.is_org_admin);\n    };\n\n    if (auth) {\n      getUser();\n    }\n  }, [auth]);\n\n  return (\n    <React.Fragment>\n      <PageHeader>\n        <Flex className=\"pf-u-flex-nowrap\">\n          <FlexItem>\n            <img src={notificationsProductIcon} />\n          </FlexItem>\n          <Divider\n            orientation={{\n              default: 'vertical',\n            }}\n          />\n          <FlexItem className=\"pf-u-align-self-flex-start\">\n            <PageHeaderTitle title=\"Notifications\" className=\"pf-u-mb-sm\" />\n            <p className=\"pf-u-mb-sm\">\n              Receive notifications about events that occur in your console\n              services. You can choose to receive notifications in the console\n              notifications drawer, by email, in third-party applications, or\n              from a combination of these methods.\n            </p>\n          </FlexItem>\n        </Flex>\n      </PageHeader>\n      <Main>\n        {isOrgAdmin ? (\n          <React.Fragment>\n            <Card className=\"pf-u-mb-lg\">\n              <Grid hasGutter>\n                <GridItem sm={12} md={6} lg={8}>\n                  <CardTitle>\n                    <Title headingLevel=\"h2\">\n                      Manage events for your organization\n                    </Title>\n                  </CardTitle>\n                  <CardBody>\n                    <p>\n                      Control which notifications different users within your\n                      organization can receive by creating behavior groups and\n                      associating them with specific events. Users can then\n                      select the event notifications they want to receive and\n                      how to be notified in their{' '}\n                      <a\n                        href={`${\n                          isBeta() ? '/preview' : ''\n                        }/${getBundle()}/notifications/user-preferences`}\n                        onClick={(e) => {\n                          e.preventDefault();\n                          navigate(\n                            `/${getBundle()}/notifications/user-preferences`\n                          );\n                        }}\n                      >\n                        Notification Preferences\n                      </a>\n                      .\n                    </p>\n                  </CardBody>\n                  <CardFooter>\n                    <Button\n                      variant=\"primary\"\n                      component=\"a\"\n                      href={`${\n                        isBeta() ? '/preview' : ''\n                      }/${getBundle()}/notifications/configure-events`}\n                      isLarge\n                      onClick={(e) => {\n                        e.preventDefault();\n                        navigate(\n                          `/${getBundle()}/notifications/configure-events`\n                        );\n                      }}\n                    >\n                      Configure events\n                    </Button>\n                  </CardFooter>\n                </GridItem>\n                <GridItem\n                  md={6}\n                  lg={4}\n                  className=\"pf-u-display-none pf-u-display-block-on-md pf-c-card__cover-image\"\n                ></GridItem>\n              </Grid>\n            </Card>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <Title headingLevel=\"h2\" className=\"pf-u-mb-md\">\n              Get started with Notifications on the Hybrid Cloud Console\n            </Title>\n            <Grid hasGutter className=\"pf-u-mb-lg\">\n              <GridItem sm={12} md={6}>\n                <Card className=\"pf-u-h-100\">\n                  <CardTitle>\n                    <Flex className=\"pf-u-flex-nowrap\">\n                      <FlexItem>\n                        <Icon size=\"lg\">\n                          <UserIcon className=\"pf-u-primary-color-100\" />\n                        </Icon>\n                      </FlexItem>\n                      <FlexItem>\n                        <Title headingLevel=\"h2\">\n                          Manage your own notifications with Notification\n                          Preferences\n                        </Title>\n                      </FlexItem>\n                    </Flex>\n                  </CardTitle>\n                  <CardBody>\n                    <p>\n                      This service allows you to opt-in and out of receiving\n                      notifications. Your Organization Administrator has\n                      configured which notifications you can or can not receive\n                      in their Settings.\n                    </p>\n                  </CardBody>\n                  <CardFooter>\n                    <Button\n                      variant=\"primary\"\n                      isLarge\n                      component=\"a\"\n                      href={`${\n                        isBeta() ? '/preview' : ''\n                      }/${getBundle()}/notifications/user-preferences`}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        navigate(\n                          `/${getBundle()}/notifications/user-preferences`\n                        );\n                      }}\n                    >\n                      Go to Notification Preferencesss\n                    </Button>\n                  </CardFooter>\n                </Card>\n              </GridItem>\n              <GridItem sm={12} md={6}>\n                <Card className=\"pf-u-h-100\">\n                  <CardTitle>\n                    <Flex className=\"pf-u-flex-nowrap\">\n                      <FlexItem>\n                        <Icon size=\"lg\">\n                          <RunningIcon className=\"pf-u-primary-color-100\" />\n                        </Icon>\n                      </FlexItem>\n                      <FlexItem>\n                        <Title headingLevel=\"h2\">\n                          Monitor all fired events with the Event log\n                        </Title>\n                      </FlexItem>\n                    </Flex>\n                  </CardTitle>\n                  <CardBody>\n                    <p>\n                      See all the events affecting your organization and view\n                      details around the events fired.\n                    </p>\n                  </CardBody>\n                  <CardFooter>\n                    {!notificationsOverhaul && (\n                      <Button\n                        variant=\"secondary\"\n                        isLarge\n                        component=\"a\"\n                        href={`${\n                          isBeta() ? '/preview' : ''\n                        }/${getBundle()}/notifications/user-preferences`}\n                        onClick={(e) => {\n                          e.preventDefault();\n                          navigate(`/${getBundle()}/notifications/eventlog`);\n                        }}\n                      >\n                        View Event log\n                      </Button>\n                    )}\n                  </CardFooter>\n                </Card>\n              </GridItem>\n            </Grid>\n          </React.Fragment>\n        )}\n\n        {isOrgAdmin ? (\n          <React.Fragment>\n            <Title headingLevel=\"h2\" className=\"pf-u-mb-md\">\n              Supporting features\n            </Title>\n\n            <DataList\n              aria-label=\"Supporting features list\"\n              className=\"pf-u-mb-lg\"\n            >\n              <CustomDataListItem\n                icon={IconName.USER}\n                isExpanded\n                heading=\"Manage your own notifications with Notification Preferences\"\n                linkTitle=\"Go to Notification Preferences\"\n                linkTarget={`${\n                  isBeta() ? '/preview' : ''\n                }/${getBundle()}/notifications/user-preferences`}\n                expandableContent=\"Select the events you want to be notified about, and how to receive notifications. Your Organization Administrator has configured which notifications you can or can’t receive in their Settings.\"\n              />\n              <CustomDataListItem\n                icon={IconName.RUNNING}\n                heading=\"Monitor all fired events with the Event log\"\n                linkTitle=\"View Event log\"\n                linkTarget={`${\n                  isBeta() ? '/preview' : ''\n                }/${getBundle()}/notifications/eventlog `}\n                expandableContent=\"See all the events occurring in your organization and view details about the triggered events.\"\n              />\n              <CustomDataListItem\n                icon={IconName.INTEGRATION}\n                heading=\"Set up Integrations to customize your notifications\"\n                linkTitle=\"Set up Integrations\"\n                {...(isSourcesIntegrations && { isRedirect: true })}\n                linkTarget={\n                  isSourcesIntegrations\n                    ? `${\n                        isBeta() ? '/preview' : ''\n                      }/settings/sources?category=Integrations`\n                    : `${\n                        isBeta() ? '/preview' : ''\n                      }/${getBundle()}/notifications/integrations`\n                }\n                expandableContent={\n                  <span>\n                    The notifications and integrations services work together to\n                    transmit messages to third-party applications, such as\n                    instant messaging platforms and external ticketing systems,\n                    when events occur. Integrations include Splunk, Slack,\n                    ServiceNow,{' '}\n                    <a\n                      href={\n                        'https://access.redhat.com/documentation/en-us/red_hat_hybrid_cloud_console/2023/html/integrating_the_red_hat_hybrid_cloud_console_with_third-party_applications/index'\n                      }\n                    >\n                      and more\n                    </a>\n                    .\n                  </span>\n                }\n              />\n              <CustomDataListItem\n                icon={IconName.USERS}\n                heading=\"Create behavior groups to easily notify the right users\"\n                linkTitle=\"Create new behavior group\"\n                linkTarget={`${\n                  isBeta() ? '/preview' : ''\n                }/${getBundle()}/notifications/configure-events`}\n                expandableContent=\"Configure which notifications different users in your organization can receive, and how to notify groups of users when selected events occur.\"\n              />\n            </DataList>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <DataList\n              aria-label=\"Supporting features list\"\n              className=\"pf-u-mb-lg\"\n            >\n              <CustomDataListItem\n                icon={IconName.BELL}\n                heading=\"About Notifications\"\n                expandableContent=\"Notifications are a way for users to be alerted of important events that occur in the Hybrid Cloud\n                            Console. You can receive notifications within the console via the notifications drawer as well as through email and\n                            third-party integrations, such as Slack or ServiceNow.\"\n              />\n            </DataList>\n          </React.Fragment>\n        )}\n\n        <Title headingLevel=\"h2\" className=\"pf-u-mb-md\">\n          Recommended content\n        </Title>\n\n        {isOrgAdmin ? (\n          <React.Fragment>\n            <DataList\n              aria-label=\"Recommended content list\"\n              className=\"pf-u-mb-lg\"\n            >\n              <DataListItem>\n                <DataListItemRow>\n                  <DataListItemCells\n                    dataListCells={[\n                      <DataListCell key=\"row1-col1\">\n                        <span>Configuring notifications and integrations</span>\n                      </DataListCell>,\n                      <DataListCell key=\"row1-col2\">\n                        <Label color=\"orange\">Documentation</Label>\n                      </DataListCell>,\n                      <DataListCell alignRight isFilled={false} key=\"row1-col3\">\n                        <a\n                          href={LEARN_MORE}\n                          onClick={(e) => {\n                            e.preventDefault();\n                            window.open(LEARN_MORE, '_blank');\n                          }}\n                        >\n                          View documentation <ExternalLinkAltIcon />\n                        </a>\n                      </DataListCell>,\n                    ]}\n                  />\n                </DataListItemRow>\n              </DataListItem>\n              <DataListItem>\n                <DataListItemRow>\n                  <DataListItemCells\n                    dataListCells={[\n                      <DataListCell key=\"row2-col1\">\n                        <span>Configuring integrations and events</span>\n                      </DataListCell>,\n                      <DataListCell key=\"row2-col2\">\n                        <Label color=\"orange\">Documentation</Label>\n                      </DataListCell>,\n                      <DataListCell alignRight isFilled={false} key=\"row2-col3\">\n                        <a\n                          href={CONFIGURE_INTEGRATIONS}\n                          onClick={(e) => {\n                            e.preventDefault();\n                            window.open(CONFIGURE_INTEGRATIONS, '_blank');\n                          }}\n                        >\n                          View documentation <ExternalLinkAltIcon />\n                        </a>\n                      </DataListCell>,\n                    ]}\n                  />\n                </DataListItemRow>\n              </DataListItem>\n              <DataListItem>\n                <DataListItemRow>\n                  <DataListItemCells\n                    dataListCells={[\n                      <DataListCell key=\"row3-col1\">\n                        <span>Restricting access to a service to a team</span>\n                      </DataListCell>,\n                      <DataListCell key=\"row3-col2\">\n                        <Label color=\"green\">Quick start</Label>\n                      </DataListCell>,\n                      <DataListCell alignRight isFilled={false} key=\"row3-col3\">\n                        <a\n                          href={`${\n                            isBeta() ? '/preview' : ''\n                          }/iam/my-user-access?bundle=rhel&quickstart=rbac-admin-vuln-permissions`}\n                        >\n                          Begin Quick start <ArrowRightIcon />\n                        </a>\n                      </DataListCell>,\n                    ]}\n                  />\n                </DataListItemRow>\n              </DataListItem>\n            </DataList>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <DataList\n              aria-label=\"Recommended content list\"\n              className=\"pf-u-mb-lg\"\n            >\n              <DataListItem>\n                <DataListItemRow>\n                  <DataListItemCells\n                    dataListCells={[\n                      <DataListCell key=\"row1-col1\">\n                        <span>Configuring notifications and integrations</span>\n                      </DataListCell>,\n                      <DataListCell key=\"row1-col2\">\n                        <Label color=\"orange\">Documentation</Label>\n                      </DataListCell>,\n                      <DataListCell alignRight isFilled={false} key=\"row1-col3\">\n                        <a\n                          href={CONFIGURE_INTEGRATIONS}\n                          onClick={(e) => {\n                            e.preventDefault();\n                            window.open(CONFIGURE_INTEGRATIONS, '_blank');\n                          }}\n                        >\n                          View documentation <ExternalLinkAltIcon />\n                        </a>\n                      </DataListCell>,\n                    ]}\n                  />\n                </DataListItemRow>\n              </DataListItem>\n              <DataListItem>\n                <DataListItemRow>\n                  <DataListItemCells\n                    dataListCells={[\n                      <DataListCell key=\"row2-col1\">\n                        <span>\n                          Configuring integrations for Red Hat services\n                        </span>\n                      </DataListCell>,\n                      <DataListCell key=\"row2-col2\">\n                        <Label color=\"orange\">Documentation</Label>\n                      </DataListCell>,\n                      <DataListCell alignRight isFilled={false} key=\"row2-col3\">\n                        <a\n                          href={CONFIGURE_SOURCES}\n                          onClick={(e) => {\n                            e.preventDefault();\n                            window.open(CONFIGURE_SOURCES, '_blank');\n                          }}\n                        >\n                          View documentation <ExternalLinkAltIcon />\n                        </a>\n                      </DataListCell>,\n                    ]}\n                  />\n                </DataListItemRow>\n              </DataListItem>\n            </DataList>\n          </React.Fragment>\n        )}\n        <a\n          href={`${isBeta() ? '/preview' : ''}/settings/learning-resources`}\n          className=\"pf-u-mb-lg\"\n        >\n          View all Settings Learning Resources\n        </a>\n      </Main>\n    </React.Fragment>\n  );\n};\n","import useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport { useFlag } from '@unleash/proxy-client-react';\nimport * as React from 'react';\nimport { Routes as DomRoutes, Navigate, Route } from 'react-router-dom';\n\nimport { CheckReadPermissions } from './components/CheckReadPermissions';\nimport { IntegrationsListPage } from './pages/Integrations/List/Page';\nimport { SplunkSetupPage } from './pages/Integrations/SplunkSetup/SplunkSetupPage';\nimport { EventLogPage } from './pages/Notifications/EventLog/EventLogPage';\nimport { NotificationsListPage } from './pages/Notifications/List/Page';\nimport { NotificationsLogPage } from './pages/Notifications/NotificationsLog/Page';\nimport { NotificationsOverviewPage } from './pages/Notifications/Overview/Page';\n\ninterface Path {\n  path: string;\n  component: React.ComponentType;\n}\n\nexport const linkTo = {\n  overview: () => '/',\n  configureEvents: () => '/configure-events',\n  integrations: () => '/settings/integrations',\n  notifications: (bundle: string) => `/${bundle}`,\n  eventLog: (bundle?: string) =>\n    `/eventlog${bundle ? `?bundle=${bundle}` : ''}`,\n  notificationsLog: () => '/notificationslog',\n  splunk: () => '/integrations/splunk-setup',\n};\n\nconst EmptyPage: React.FunctionComponent = () => {\n  const { getApp } = useChrome();\n  if (getApp() === 'integrations') {\n    return <IntegrationsListPage />;\n  }\n\n  return null;\n};\n\nconst legacyRoutes: Path[] = [\n  {\n    path: '/',\n    component: EmptyPage,\n  },\n  {\n    path: linkTo.integrations(),\n    component: IntegrationsListPage,\n  },\n  {\n    path: linkTo.eventLog(),\n    component: EventLogPage,\n  },\n  {\n    path: linkTo.notifications(':bundleName'),\n    component: NotificationsListPage,\n  },\n  {\n    path: linkTo.splunk(),\n    component: SplunkSetupPage,\n  },\n  {\n    path: linkTo.notificationsLog(),\n    component: NotificationsLogPage,\n  },\n];\n\nconst routesOverhaul: Path[] = [\n  {\n    path: linkTo.overview(),\n    component: NotificationsOverviewPage,\n  },\n  {\n    path: linkTo.integrations(),\n    component: IntegrationsListPage,\n  },\n  {\n    path: linkTo.configureEvents(),\n    component: NotificationsListPage,\n  },\n  {\n    path: linkTo.eventLog(),\n    component: EventLogPage,\n  },\n  {\n    path: linkTo.notificationsLog(),\n    component: NotificationsLogPage,\n  },\n];\n\nexport const Routes: React.FunctionComponent = () => {\n  const notificationsOverhaul = useFlag('platform.notifications.overhaul');\n\n  const pathRoutes = React.useMemo(\n    () => (notificationsOverhaul ? routesOverhaul : legacyRoutes),\n    [notificationsOverhaul]\n  );\n\n  return (\n    <DomRoutes>\n      {pathRoutes.map((pathRoute) => (\n        <Route\n          key={pathRoute.path}\n          path={pathRoute.path}\n          element={\n            <CheckReadPermissions>\n              <pathRoute.component />\n            </CheckReadPermissions>\n          }\n        />\n      ))}\n      {!notificationsOverhaul && (\n        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n      )}\n    </DomRoutes>\n  );\n};\n","import './App.scss';\n\nimport { Switch } from '@patternfly/react-core';\nimport Maintenance from '@redhat-cloud-services/frontend-components/Maintenance';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport {\n  InsightsEnvDetector,\n  RenderIfTrue,\n  getInsights,\n  toUtc,\n} from '@redhat-cloud-services/insights-common-typescript';\nimport format from 'date-fns/format';\nimport * as React from 'react';\n\nimport { NotificationsPortal } from '../components/Store/NotificationsPortal';\nimport { Routes } from '../Routes';\nimport { staging } from '../types/Environments';\nimport { ServerStatus } from '../types/Server';\nimport { AppContext } from './AppContext';\nimport { AppSkeleton } from './AppSkeleton';\nimport { RbacGroupContextProvider } from './rbac/RbacGroupContextProvider';\nimport { useApp } from './useApp';\n\nconst utcFormat = 'HH:mm';\nconst regularFormat = 'hh:mma';\nconst timezoneFormat = 'O';\n\nconst App: React.ComponentType = () => {\n  const { updateDocumentTitle } = useChrome();\n\n  updateDocumentTitle?.('Notifications');\n  const { rbac, server, isOrgAdmin } = useApp();\n  const insights = getInsights();\n  const [usingExperimental, setUsingExperimental] =\n    React.useState<boolean>(false);\n\n  const toggleExperimental = React.useCallback(\n    (isEnabled) => {\n      if (isEnabled) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (insights.chrome as any).getEnvironmentOriginal =\n          insights.chrome.getEnvironment;\n        insights.chrome.getEnvironment = () => 'ci';\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        insights.chrome.getEnvironment = (insights.chrome as any)\n          .getEnvironmentOriginal as typeof insights.chrome.getEnvironment;\n      }\n\n      setUsingExperimental(isEnabled);\n    },\n    [insights]\n  );\n\n  if (!rbac || !server) {\n    return <AppSkeleton />;\n  }\n\n  if (server.status === ServerStatus.MAINTENANCE) {\n    const utcStartTime = format(toUtc(server.from), utcFormat);\n    const utcEndTime = format(toUtc(server.to), utcFormat);\n    const startTime = format(server.from, regularFormat);\n    const endTime = format(server.to, regularFormat);\n    const timezone = format(server.to, timezoneFormat);\n\n    return (\n      <Maintenance\n        utcStartTime={utcStartTime}\n        utcEndTime={utcEndTime}\n        startTime={startTime}\n        endTime={endTime}\n        timeZone={timezone}\n      />\n    );\n  }\n\n  return (\n    <AppContext.Provider\n      value={{\n        rbac,\n        server,\n        isOrgAdmin: !!isOrgAdmin,\n      }}\n    >\n      <RbacGroupContextProvider>\n        <NotificationsPortal />\n        <InsightsEnvDetector insights={insights} onEnvironment={staging}>\n          <RenderIfTrue>\n            <Switch\n              className=\"pf-v5-u-p-sm\"\n              isChecked={usingExperimental}\n              onChange={toggleExperimental}\n              labelOff=\"Enable experimental features\"\n              label=\"Disable experimental features\"\n            />\n          </RenderIfTrue>\n        </InsightsEnvDetector>\n        <Routes />\n      </RbacGroupContextProvider>\n    </AppContext.Provider>\n  );\n};\n\nexport default App;\n","import { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const useGetTimePreference = () => {\n  return useQuery(\n    Operations.OrgConfigResourceGetDailyDigestTimePreference.actionCreator()\n  );\n};\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport type SaveTimePrefActionsParams = {\n  body: string;\n};\n\nconst actionCreator = (params: SaveTimePrefActionsParams) => {\n  return Operations.OrgConfigResourceSaveDailyDigestTimePreference.actionCreator(\n    {\n      body: params.body,\n    }\n  );\n};\n\nexport const useUpdateTimePreference = () => {\n  return useMutation(actionCreator);\n};\n"],"names":["useGetBundles","includeApplications","initFetch","useQuery","getBundlesAction","NotAuthorizedPage","chrome","useChrome","bundleName","useParams","getBundles","bundles","useMemo","payload","status","value","find","b","name","location","useLocation","intl","useIntl","userPreferences","href","localUrl","isBeta","myUserAccess","serviceName","getApp","Config","formatMessage","pathname","linkTo","eventLog","title","displayName","description","PageHeader","Split","SplitItem","isFilled","paddingBottom","StackItem","NotAuthorized","CheckReadPermissions","props","rbac","hasReadPermissions","canReadIntegrationsEndpoints","canReadEvents","canReadNotifications","children","IntegrationsListPage","updateDocumentTitle","getBundle","notificationsOverhaul","useFlag","Section","className","Messages","Button","variant","component","Link","to","DOCUMENTATION_URL","OPEN_CASE_URL","SplunkSetupFinished","isSuccess","error","SplunkSetupFinishedSuccess","SplunkSetupFinishedFailure","EmptyState","EmptyStateIcon","icon","CheckCircleIcon","color","Title","headingLevel","size","EmptyStateBody","ExclamationCircleIcon","target","rel","EmptyStateSecondaryActions","listNotificationsActionCreator","pager","query","Page","toQuery","limit","offset","applicationIds","filterApplicationId","eventTypeName","filterEventFilterName","bundleId","filterBundleId","sortBy","sortColumn","sortDirection","decoder","validationResponseTransformer","validatedResponse","data","errors","useListNotifications","useTransformQueryResponse","getBehaviorGroupByNotificationDecoder","map","id","NotificationServiceUpdateEventTypeBehaviors","linkBehaviorGroupAction","notificationId","behaviorGroupIds","actionCreator","body","eventTypeId","type","behaviorGroup","display_name","bundle_id","isDefault","undefined","actions","events","saveBehaviorGroupActionCreator","endpoint_ids","endpointIds","event_type_ids","eventTypesIds","useSaveBehaviorGroupMutation","useMutation","updateBehaviorGroupActionsActionCreator","params","behaviorGroupId","DEFAULT_SPLUNK_EVENTS","advisor","policies","drift","compliance","patch","vulnerability","useAttachEventsToSplunk","getAllEventTypes","useClient","fetchPage","async","page","withSort","Sort","Direction","errorObject","length","nextPage","Error","useGetAllEventTypes","client","getAnyBehaviorGroupByNotification","getBehaviorGroupByNotificationAction","useGetAnyBehaviorGroupByNotification","appendActionToNotification","eventType","newActionIds","onProgress","selectedEventTypes","filter","application","expectEvents","includes","console","log","SplunkURLSchema","url","test","urlObj","URL","search","SplunkSetupForm","setStep","stepIsInProgress","setStepIsInProgress","stepVariant","setStepVariant","hecToken","setHecToken","splunkServerHostName","setHostName","automationLogs","setAutomationLogs","setError","startSplunkAutomation","createSplunkIntegration","mutate","useSaveIntegration","integrationName","newIntegration","Integration","secretToken","isEnabled","sslVerificationEnabled","useCreateSplunkIntegration","createSplunkBehaviorGroup","getBundleByName","response","bundle","useGetBundleByName","behaviorGroupName","useCreateSplunkBehaviorGroup","updateSplunkBehaviorActions","integration","push","useUpdateSplunkBehaviorActions","attachEvents","useSplunkSetup","isDisabled","setIsDisabled","useState","validatedServerHostname","setValidatedServerHostname","ValidatedOptions","validatedHecToken","setValidatedHecToken","useEffect","every","v","message","newLog","prevLogs","Grid","GridItem","span","Form","FormGroup","label","labelIcon","Popover","headerContent","bodyContent","onClick","e","preventDefault","HelpIcon","noVerticalAlign","isRequired","fieldId","helperTextInvalid","validated","TextInput","onChange","isValid","uuid","ActionGroup","SplunkAutomationButton","onStart","addDangerNotification","SplunkSetupFailedToast","onFinish","prevStep","CodeBlock","CodeBlockCode","isLoading","List","ListVariant","ListItem","SplunkSetupTitle","footerContent","ExternalLinkSquareAltIcon","ButtonLink","EventLogDateFilterValue","labels","TODAY","YESTERDAY","LAST_7","LAST_14","CUSTOM","datePickerClassName","style","backgroundColor","important","cursor","$nest","borderBottomColor","EventLogSelectObject","constructor","this","toString","compareTo","selectOption","dateInputProps","isReadOnly","CustomDateFilter","maxDate","Date","minDate","add","days","startRangeValidators","date","isBefore","isAfter","period","endRangeValidators","setStartDate","start","setPeriod","startDate","parseISO","draft","min","setEndDate","end","startValue","format","endValue","startDateRef","useRef","endDateRef","onClickStartDateInput","current","setCalendarOpen","onClickEndDateInput","startDateInputProps","endDateInputProps","DatePicker","placeholder","inputProps","validators","ref","EventLogDateFilter","options","Object","values","SelectOption","key","isOpen","setOpen","onToggle","prev","onSelect","_e","selectObject","setValue","Select","SelectVariant","selections","retentionDays","NotificationStatusFailed","Status","text","global_danger_color_100","NotificationStatusUnknown","UnknownIcon","NotificationStatusProcessing","InProgressIcon","NotificationStatusSent","global_success_color_100","g","NotificationStatusSuccess","NotificationStatusWarning","ExclamationTriangleIcon","tableData","ActionsHelpPopover","TableHelpPopover","tableBody","headerClass","minWidth","EventLogActionPopoverContent","action","getIntegrationRecipient","recipient","useAsync","TableComposable","borders","TableVariant","isStickyHeader","Thead","Tr","Th","Tbody","Td","endpointType","loading","Skeleton","width","Tooltip","content","last","isDegraded","toDisplayStatus","successCount","errorCount","EventLogTableColumns","labelClassName","toLabelProps","actionStatus","EventLogTable","onSort","_event","columnIndex","sortByDirection","_extraData","externalOnSort","sortOptions","EVENT","SERVICE","DATE","direction","index","rows","Array","_","i","event","LabelGroup","a","hasAutoWidth","Label","DateFormat","EmptyStateSearch","EmptyStateVariant","sort","ButtonVariant","useNotifications","insights","getInsights","environment","getInsightsEnvironment","EventLogFilterColumn","areEqual","arr1","arr2","noOrder","idx","isChecked","treeNode","checkProps","checked","childChecked","some","child","allChildrenChecked","EventLogTreeFilter","groups","filters","updateFilters","initialize","init","forEach","group","currentFilter","currentFilterChipValues","chips","chip","items","checkAll","item","initTreeNodeById","treeNodeById","setTreeNodeById","isToggled","setIsToggled","treeDataArray","activeFilters","activeBundleIds","bundleIds","parentFilter","category","childNode","childFilter","isRead","keys","activeFilter","activeChips","prevBundles","prevFilter","entry","prevChips","currChips","Dropdown","toggle","DropdownToggle","toggleIndicator","AngleDownIcon","TreeView","hasChecks","onCheck","parentNode","leafNode","notificationTypes","Notification","actionStatusMetadata","chipValue","EventLogToolbar","notifications","integrations","useIntegrations","actionTypeMetadata","notification","toUpperCase","concat","filterMetadata","ACTION_TYPE","exclusive","ACTION_STATUS","primaryToolbarFilterConfig","setFilters","clearFilter","metaData","customFilters","setCustomFilters","toolbarConfig","usePrimaryToolbarFilterConfig","defaultDelete","activeFiltersConfig","onDelete","customDelete","rawFilterConfigs","regularFilterConfigs","customFilterConfigs","filterConfig","idxToRemove","deleteFilter","deletedChipValues","adjusted","splice","mapToEventLogCustomFilter","createCustomFilterObj","applications","applicationsByBundle","service","queryParam","nameSplit","split","partialBundleFilters","applicationFilter","filterValues","bundleProducer","currBundleFilters","bundleFilter","applicationProducer","currApplicationFilters","customFilter","chipValues","applicationQueryParam","usePrimaryToolbarFilterConfigWrapper","bundleOptions","pageChanged","inner","perPageChanged","perPage","topPaginationProps","itemCount","count","isCompact","PaginationVariant","onSetPage","onFirstClick","onPreviousClick","onNextClick","onLastClick","onPageInput","onPerPageSelect","bottomPaginationProps","getOuiaProps","PrimaryToolbar","dedicatedAction","dateFilter","setDateFilter","pagination","TextContent","Text","subtitle","toNotificationEvent","serverEvent","event_type","fromUtc","created","sortEventActions","groupActions","first","second","localeCompare","actionsById","actionsWithoutEndpoint","endpoint_id","newAction","initAction","isFailed","endpoint_type","sub_type","endpoint_sub_type","eventDecoder","getEndpointAction","DATE_FORMAT","EventLogPage","getEndpoint","useParameterizedQuery","eventLogFilters","debounce","useStateFactory","useService","useUrlStateMultipleOptions","useBundle","useActionType","useActionStatus","useEvent","useUrlStateString","column","BUNDLE","useFilters","useEventLogFilter","setSortDirection","setSortColumn","filterBuilder","useCallback","Filter","selectedBundleNames","queryParams","and","Operator","selectedAppNames","appName","applicationName","endpointTypes","filterPeriod","today","toUtc","sub","toDate","yesterday","useFilterBuilder","eventsPage","usePage","eventsQuery","filterBundleIds","appIds","filterAppIds","invocationResults","filterInvocationResults","filterStatus","filterEndpointTypes","filterStart","endDate","filterEnd","eventTypeDisplayName","filterEvent","includeActions","useGetEvents","meta","eventNotificationPageUrl","endpoint","properties","only_admins","changeItemsPerPage","changePage","pageCount","AppSkeleton","ouia","useOuia","Bullseye","Spinner","centered","getApplicationsAction","useGetApplicationsLazy","TabComponent","activeTabKey","setActiveTabKey","handleTabClick","tabIndex","Tabs","defaultActiveKey","role","SortDirection","emptyImmutableArray","freeze","emptyImmutableObject","SearchIcon","findById","findByKey","val","CommaSeparator","BehaviorGroupChip","unlink","Chip","BehaviorGroupCell","onSelected","dataset","currentTarget","firstChild","behaviorGroupContent","hasError","found","isSelected","selected","OptionsMenuItem","bg","MenuItem","hasCheck","LockIcon","sortedSelected","OptionsMenuToggle","toggleTemplate","Badge","ChipGroup","readonlyText","Icon","isInline","BellSlashIcon","join","isEditMode","OptionsMenu","menuItems","menuAppendTo","document","TableText","wrapModifier","NotificationsTableColumns","actionButtonClassName","float","HiddenActionsToggle","getActions","callbacks","loadingActionStatus","actionsToggle","CheckIcon","global_disabled_color_100","global_active_color_100","isOutsideDropdown","onFinishEditing","CloseIcon","global_palette_black_600","onCancelEditing","PencilAltIcon","onStartEditing","NotificationsBehaviorGroupTable","Component","Wrapped","onBehaviorGroupLinkUpdated","toLowerCase","ASC","DESC","sortDirectionFromString","APPLICATION","BEHAVIOR","applicationDisplayName","behaviors","NotificationFilterColumn","SelectionCommand","allFilterColumns","NAME","ACTION","NotificationsToolbar","filterColumns","appFilterItems","appFilterOptions","default","bulkSelectProps","onSelectionChanged","pageAdapter","selectedCount","pageSize","selectAll","ALL","selectNone","NONE","PAGE","bulkSelectionDisabled","exportConfigInternal","useTableExportConfig","onExport","exportConfig","useInsightsEnvironmentFlag","bulkSelect","useEventTypesPage","useUrlState","notificationsFilter","initialAppOptions","initUseUrlState","useUrlStateName","defaultValue","useUrlStateApplication","useUrlStateAction","useNotificationFilter","appFilter","arrayValue","filterOption","eventTypeFilter","eventTypeFilterName","stringValue","useEventTypesFilterBuilder","sorting","setSorting","pageController","clearFilters","verticalAlign","height","WebhookIcon","alt","src","ActionTypeToIcon","actionType","EnvelopeIcon","ActionComponentWrapper","ActionComponent","GroupNotFound","onClose","position","BanIcon","users","u","ignorePreferences","groupId","BehaviorGroupActionsSummaryLayout","TextVariants","BehaviorGroupActionsSummaryImpl","BehaviorGroupActionsSummarySkeleton","contentWidth","_unused","BehaviorGroupActionsSummary","cardClassName","BehaviorGroupCardLayout","switchOpen","Card","isFlat","CardHeader","CardHeaderMain","isDefaultBehavior","appendTo","CardActions","KebabToggle","dropdownItems","isPlain","DropdownPosition","CardBody","BehaviorGroupCardImpl","onClickEdit","onEdit","onClickDelete","DropdownItem","BehaviorGroupCardSkeleton","BehaviorGroupCard","cardsWrapperClassName","overflow","BehaviorGroupCardListLayout","Flex","alignItems","alignContent","flexWrap","BehaviorGroupaCrdListImpl","behaviorGroups","FlexItem","BehaviorGroupCardListSkeleton","BehaviorGroupCardList","BehaviorGroupWizardFooter","wizardContext","WizardContext","WizardFooter","onNext","activeStep","enableNext","nextButtonText","hideBackButton","onBack","hideCancelButton","BehaviorGroupWizard","useFormikContext","Wizard","steps","footer","startAtStep","onGoToStep","step","onSave","RecipientContext","createContext","getIntegrations","getNotificationRecipients","useRecipientContext","useContext","RecipientContextProvider","Provider","SaveBehaviorGroupOperation","RecipientOption","equals","getOptions","mapper","loadingMapper","isNoResultsOption","useRecipientOptionMemo","state","show","defaultValues","loadingDefault","loadingFilter","ReducerActionType","reducerFunction","SET_FILTER_VALUE","lastSearch","LOAD_FILTER_VALUE","USE_DEFAULTS","SET_DEFAULTS","useTypeaheadReducer","dispatch","useReducer","debouncedState","setDebouncedState","useDebounce","setFilterValue","loadFilterValue","setDefaults","useDefaults","IntegrationRecipientTypeahead","prevOpen","usePrevious","dispatchers","onOpenChange","integrationType","then","defaults","existingIntegrations","integrationActions","Set","integrationsMapper","recipients","r","has","getKey","onFilter","trim","selection","sel","integrationSelected","chooseText","maxHeight","typeAheadAriaLabel","placeholderText","rbacGroupKey","rbacGroupLabel","renderSelectGroup","SelectGroup","recipientMapper","userOptions","RecipientTypeahead","rbacOptions","s","selectContent","unselect","element","evt","stopPropagation","onClear","isGrouped","isCheckboxSelectionBadgeHidden","isInputValuePersisted","dummyOnToggle","RecipientForm","recipientSelected","recipientOnClear","FormHelperText","isError","isHidden","ActionOption","kind","notificationType","actionName","NoIntegrationConfigured","pointerEvents","testNoIntegrationRenderWithoutRelAndTarget","ActionTypeahead","hasIntegrations","setHasIntegrations","reduce","types","isExpanded","actionSelected","selectedOption","integrationTypes","selectableOptions","availableNotificationTypes","availableIntegrationTypes","selectedNotifications","o","cssRaw","tableHeaderClassName","borderBottom","paddingLeft","paddingRight","tableBodyClassName","alignLeftClassName","textAlign","cells","transforms","cellWidth","emptySpan","BehaviorGroupFormActionsTable","setValues","touched","setFieldTouched","form","touchedActions","errorActions","setValueDispatch","updater","Function","addAction","rowHandlers","setActions","handleActionSelected","row","handleIntegrationSelected","handleRecipientSelected","rowAsNotification","originalRecipient","findIndex","handleRecipientOnClear","path","isTouched","toTableRows","actionResolver","rowData","handleRemove","MinusCircleIcon","Table","TableHeader","TableBody","PlusCircleIcon","EditBehaviorGroupForm","hasGutter","FieldArray","helpers","ActionIntegration","oneOf","required","integrationId","ActionNotify","ActionsArray","obj","hasOwnProperty","context","foundEmail","integrationIds","createError","ActionAndRecipientsStep","schema","SelectableEventTypeTableLayout","SelectableEventTypeTableSkeleton","select","rowIndex","disable","SelectableEventTypeTableImpl","modifier","selectionLoading","noPadding","SelectableEventTypeTable","AssociateEventTypesStep","setSelectedEventTypes","eventTypePage","eventTypesRaw","onDemandEventTypes","onSelectCommand","command","currentPage","pageIndex","addedElements","lastPage","fetchingPage","withPage","BasicInformationStep","ouiaId","FormTextInput","max","EventTypeTable","ReviewStep","DescriptionList","isHorizontal","DescriptionListGroup","DescriptionListTerm","DescriptionListDescription","noOp","InternalBehaviorGroupWizardPage","currentStep","setCurrentStep","validateForm","saving","originalBehaviorGroup","saveBehaviorGroupMutation","ClientContext","fetchingIntegrations","setFetchingIntegrations","save","needsSavingDisplayName","needsSavingActions","needsSavingEventTypes","originalEvents","newEvents","toFetch","uniqWith","isEqual","enpointIds","Promise","all","systemProps","systemProperties","onlyAdmins","group_id","result","newIds","remainingIds","ids","toAdd","shift","actionsToIdList","request","operation","CREATE","UPDATE","catch","isSaving","useSaveBehaviorGroup","addSuccessNotification","associateEventTypeStep","basicInformationStep","associateEventTypesStep","useAssociateEventTypesStep","actionAndRecipientStep","maxStep","setMaxStep","invalidSteps","setInvalidSteps","Math","delete","lastAvailableStep","from","canJumpTo","useSteps","currentStepModel","stepValidationSchema","setValidationSchema","validationSchema","goNext","shouldGoNext","goBack","BehaviorGroupWizardPage","getRecipients","rbacGroups","useGetRecipients","useGetIntegrations","actionsContextValue","Formik","validateOnMount","onSubmit","initialValues","validateOnBlur","validateOnChange","BehaviorGroupDeleteModal","toDelete","useOnDeleteWrapper","cancelButtonTitle","conflictingNotifications","cancelButtonVariant","ackDelete","setAckDelete","Stack","Checkbox","ExpandableSection","toggleText","DeleteModal","isDeleting","titleIconVariant","actionButtonDisabled","BehaviorGroupDeleteModalSkeleton","deleteBehaviorGroupAction","defaultNotificationsDecoder","DeleteBehaviorGroupPage","deleteBehaviorGroup","affected","getAffectedNotificationsByBehaviorGroupAction","BehaviorGroupAddButton","buttonProps","isOrgAdmin","button","isAriaDisabled","BehaviorGroupsSection","setFilter","filteredBehaviors","lowerCaseFilter","editModalState","editModalActions","useFormModalReducer","deleteModalState","deleteModalActions","useDeleteModalReducer","createGroup","create","onCloseModal","saved","reload","reset","edit","onCloseDelete","deleted","onClearFilter","SearchInput","canWriteNotifications","template","behaviorGroupDecoder","NotificationNotFound","getNotification","noEvents","BundlePageBehaviorGroupContent","useGetBehaviorGroups","isLoadingGroups","originalValues","bgIndex","aIndex","recipientIndex","rbacRecipient","useBehaviorGroupContent","notificationRows","updateBehaviorGroupLink","startEditMode","finishEditMode","cancelEditMode","updateBehaviorGroups","setNotificationRows","prevNotificationInput","removeBehaviorGroup","linkBehavior","setEditMode","draftNotification","oldBehaviors","_prev","useBehaviorGroupNotificationRows","isLinked","configuration","settings","Tab","eventKey","TabTitleText","NotificationListBundlePage","eventLogPageUrl","getApplications","mainPage","Main","paddingLeftClassName","global_spacer_lg","eventLogButton","timeConfigPage","TimeConfig","TimeConfigComponent","bundleTabs","getInitialApplications","activeKey","BundleStatus","NotificationsListPage","navigate","useNavigate","bundleList","NOT_FOUND","FAILED_TO_LOAD","LOADING","getbundleTabs","isBundleStatus","NotificationsLogDateFilterValue","formatPeriod","NotificationsLogDateFilter","isEmptyState","drawer","onPagination","getSortParams","defaultDirection","colSpan","source","Pagination","_ev","newPage","widgetId","Toolbar","ToolbarContent","ToolbarItem","MenuToggle","FilterIcon","Divider","sortMapper","NotificationsLogPage","setData","setPagination","setSort","filterPeriodMapper","createFilter","callApi","URLSearchParams","sort_by","append","fetch","ok","json","prevState","IconName","heading","linkTitle","linkTarget","expandableContent","isRedirect","iconElement","expanded","setExpanded","USER","UserIcon","RUNNING","RunningIcon","INTEGRATION","IntegrationIcon","USERS","UsersIcon","BELL","BellIcon","DataListItem","DataListItemRow","DataListToggle","DataListItemCells","dataListCells","DataListCell","orientation","DataListAction","isPlainButtonAction","replace","DataListContent","LEARN_MORE","CONFIGURE_INTEGRATIONS","CONFIGURE_SOURCES","overview","configureEvents","notificationsLog","splunk","legacyRoutes","ProgressStepper","isVertical","ProgressStep","isCurrent","titleId","routesOverhaul","isSourcesIntegrations","setIsOrgAdmin","auth","identity","user","getUser","is_org_admin","sm","md","lg","CardTitle","CardFooter","isLarge","DataList","alignRight","window","open","ExternalLinkAltIcon","ArrowRightIcon","Routes","pathRoutes","pathRoute","Route","Navigate","utcFormat","regularFormat","server","useApp","usingExperimental","setUsingExperimental","toggleExperimental","getEnvironmentOriginal","getEnvironment","Server","utcStartTime","utcEndTime","startTime","endTime","timezone","Maintenance","timeZone","AppContext","RbacGroupContextProvider","NotificationsPortal","InsightsEnvDetector","onEnvironment","RenderIfTrue","Switch","labelOff","useGetTimePreference","useUpdateTimePreference"],"sourceRoot":""}