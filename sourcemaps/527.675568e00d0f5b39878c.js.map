{"version":3,"sources":["webpack:///./src/config/Config.ts","webpack:///./src/properties/DefinedMessages.ts","webpack:///./src/components/RedirectToDefaultBundle.tsx","webpack:///./src/types/Integration.ts","webpack:///./src/properties/Messages.ts","webpack:///./src/pages/Error/Page.tsx","webpack:///./src/types/Server.ts","webpack:///./src/app/AppContext.tsx","webpack:///./src/utils/getOuiaProps.ts","webpack:///./src/components/Integrations/Table/ConnectionAttempt.tsx","webpack:///./src/components/Integrations/Table/ConnectionAlert.tsx","webpack:///./src/components/Integrations/Table/ConnectionDegraded.tsx","webpack:///./src/components/Integrations/Table/ConnectionFailed.tsx","webpack:///./src/components/Integrations/Table/ExpandedContent.tsx","webpack:///./src/components/Integrations/Table.tsx","webpack:///./src/hooks/useTableExportConfig.ts","webpack:///./src/types/Environments.ts","webpack:///./src/components/Integrations/Filters.ts","webpack:///./src/components/Integrations/Toolbar.tsx","webpack:///./src/components/Icons/EnabledIntegrationIcon.tsx","webpack:///./src/components/Icons/DisabledIntegrationIcon.tsx","webpack:///./src/hooks/useDeleteModalReducer.ts","webpack:///./src/hooks/useFormModalReducer.ts","webpack:///./src/generated/OpenapiIntegrations.ts","webpack:///./src/types/adapters/IntegrationAdapter.ts","webpack:///./src/services/useListIntegrations.ts","webpack:///./src/utils/exporters/Integration/Csv.ts","webpack:///./src/utils/exporters/Integration/Json.ts","webpack:///./src/components/Integrations/AddNotificationBody.tsx","webpack:///./src/schemas/Integrations/Integration.ts","webpack:///./src/components/Integrations/Form/IntegrationTypeCamelForm.tsx","webpack:///./src/components/Integrations/Form/IntegrationTypeHttpForm.tsx","webpack:///./src/components/Integrations/Form/IntegrationTypeForm.tsx","webpack:///./src/components/Integrations/Form.tsx","webpack:///./src/components/Integrations/SaveModal.tsx","webpack:///./src/services/useSaveIntegration.ts","webpack:///./src/services/useSwitchIntegrationEnabledStatus.ts","webpack:///./src/store/selectors/SavedNotificationScopeSelector.ts","webpack:///./src/pages/Integrations/Create/CreatePage.tsx","webpack:///./src/components/Integrations/DeleteModal.tsx","webpack:///./src/generated/OpenapiNotifications.ts","webpack:///./src/types/Notification.ts","webpack:///./src/types/Recipient.ts","webpack:///./src/types/adapters/NotificationAdapter.ts","webpack:///./src/types/adapters/BehaviorGroupAdapter.ts","webpack:///./src/services/Notifications/GetAffectedBehaviorGroupsByEndpoint.ts","webpack:///./src/services/useDeleteIntegration.ts","webpack:///./src/pages/Integrations/Delete/DeleteModal.tsx","webpack:///./src/pages/Integrations/List/useIntegrationFilter.ts","webpack:///./src/services/useListIntegrationHistory.ts","webpack:///./src/pages/Integrations/List/useIntegrationRows.ts","webpack:///./src/pages/Integrations/List/Page.tsx","webpack:///./src/services/Notifications/GetApplications.ts","webpack:///./src/utils/Immutable.ts","webpack:///./src/utils/Find.ts","webpack:///./src/components/Notifications/Table/BehaviorGroupCell.tsx","webpack:///./src/components/Notifications/NotificationsBehaviorGroupTable.tsx","webpack:///./src/components/Ouia.tsx","webpack:///./src/components/Notifications/Filter.ts","webpack:///./src/components/Notifications/Types.ts","webpack:///./src/components/Notifications/Table/GroupBy.tsx","webpack:///./src/components/Notifications/Toolbar.tsx","webpack:///./src/services/useListNotifications.ts","webpack:///./src/components/Icons/WebhookIcon.svg","webpack:///./src/components/Icons/WebhookIcon.tsx","webpack:///./src/components/Notifications/ActionComponent.tsx","webpack:///./src/components/Notifications/Recipient.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCard.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupCardList.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal.tsx","webpack:///./src/hooks/useOnDeleteWrapper.ts","webpack:///./src/services/Notifications/DeleteBehaviorGroup.ts","webpack:///./src/services/Notifications/GetAffectedNotificationsByBehaviorGroup.ts","webpack:///./src/pages/Notifications/Form/DeleteBehaviorGroupPage.tsx","webpack:///./src/schemas/Integrations/Notifications.ts","webpack:///./src/components/Notifications/RecipientContext.ts","webpack:///./src/components/Notifications/Form/RecipientOption.ts","webpack:///./src/components/Notifications/Form/useRecipientOptionMemo.tsx","webpack:///./src/components/Notifications/Form/useTypeaheadReducer.ts","webpack:///./src/components/Notifications/Form/IntegrationRecipientTypeahead.tsx","webpack:///./src/components/Notifications/Form/RecipientTypeahead.tsx","webpack:///./src/components/Notifications/EditableActionRow/RecipientForm.tsx","webpack:///./src/components/Notifications/Form/ActionOption.ts","webpack:///./src/components/Notifications/Form/ActionTypeahead.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupFormActionsTable.tsx","webpack:///./src/components/Notifications/BehaviorGroup/useBehaviorGroupActionHandlers.ts","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupForm.tsx","webpack:///./src/components/Notifications/BehaviorGroup/BehaviorGroupSaveModal.tsx","webpack:///./src/components/Notifications/useGetRecipients.ts","webpack:///./src/services/Notifications/SaveBehaviorGroup.ts","webpack:///./src/services/Notifications/UpdateBehaviorGroupActions.ts","webpack:///./src/pages/Notifications/Form/EditBehaviorGroupPage.tsx","webpack:///./src/components/Notifications/useGetIntegrations.ts","webpack:///./src/services/Integrations/GetDefaultSystemEndpoint.ts","webpack:///./src/pages/Notifications/List/BehaviorGroupsSection.tsx","webpack:///./src/services/Notifications/GetBehaviorGroups.ts","webpack:///./src/services/Notifications/GetBehaviorGroupByNotificationId.ts","webpack:///./src/services/Notifications/LinkBehaviorGroup.ts","webpack:///./src/pages/Notifications/List/useBehaviorGroupNotificationRows.tsx","webpack:///./src/pages/Notifications/List/BundlePageBehaviorGroupContent.tsx","webpack:///./src/pages/Notifications/List/useNotificationFilter.ts","webpack:///./src/pages/Notifications/List/useBehaviorGroupContent.ts","webpack:///./src/pages/Notifications/List/useNotificationPage.ts","webpack:///./src/pages/Notifications/List/BundlePage.tsx","webpack:///./src/pages/Notifications/List/Page.tsx","webpack:///./src/Routes.tsx","webpack:///./src/hooks/usePage.ts","webpack:///./src/utils/exporters/Integration/Factory.ts","webpack:///./src/pages/Integrations/List/useActionResolver.ts","webpack:///./src/services/Notifications/GetBundles.ts","webpack:///./src/generated/OpenapiPrivate.ts","webpack:///./src/types/adapters/ServerAdapter.ts","webpack:///./src/services/GetServerStatus.ts","webpack:///./src/app/App.tsx","webpack:///./src/app/useApp.ts","webpack:///./src/store/reducers/SavedNotificationScopeReducer.ts","webpack:///./src/store/Store.ts","webpack:///./src/store/actions/SavedNotificationScopeAction.ts","webpack:///./src/store/types/SavedNotificationScopeTypes.ts","webpack:///./src/utils/Basename.ts"],"names":["subAppId","title","notifications","id","description","defaultMessage","integrations","integrationsEmptyStateTitle","integrationsTableEmptyStateBody","defaultBundleName","RedirectToDefaultBundle","from","linkTo","to","IntegrationType","WEBHOOK","CAMEL","cache","locale","navigator","language","slice","intl","onError","console","log","intlSettings","Messages","appName","formatMessage","appNameIntegrations","pages","list","add","edit","viewHistory","error","emptyState","content","showDetails","actions","goToIndex","components","toolbar","addIntegration","editIntegration","table","columns","name","type","lastConnectionAttempt","enabled","enableError","disableError","integrationType","types","EMAIL_SUBSCRIPTION","DRAWER","INTEGRATION","event","action","recipient","common","choose","ErrorPage","props","goToListPage","history","goBack","ErrorBoundaryPage","actionLabel","pageHeader","children","ServerStatus","AppContext","rbac","canReadIntegrationsEndpoints","canReadNotifications","canWriteIntegrationsEndpoints","canWriteNotifications","isOrgAdmin","server","status","RUNNING","useAppContext","useContext","getOuiaProps","getOuiaPropsFactory","ConnectionAttemptType","dateClassName","style","marginLeft","global_spacer_xs","ConnectionAttempt","formattedDate","format","toUtc","date","SUCCESS","color","global_success_color_100","FAILED","global_danger_color_100","getIcon","className","connectionAttemptClassName","global_spacer_sm","marginTopClassName","marginTop","ConnectionAlert","Alert","variant","alertVariant","isInline","attempts","map","attempt","index","key","isSuccess","ConnectionDegraded","failures","filter","a","length","AlertVariant","ConnectionFailed","titleClass","fontWeight","ExpandedContent","TextContent","TextList","component","TextListVariants","TextListItem","TextListItemVariants","integration","url","sslVerificationEnabled","undefined","secretToken","LastConnectionAttemptStatus","connectionAlertClassName","paddingBottom","global_spacer_md","expandedContentClassName","paddingLeft","isEnabledLoadingClassName","smallMarginLeft","degradedClassName","global_warning_color_200","fontSize","getLastConnectionAttemptStatus","UNKNOWN","ERROR","WARNING","getConnectionAlert","LastConnectionAttemptSuccess","LastConnectionAttemptError","getConnectionAttemptCell","isLoading","Spinner","size","Text","cellFormatters","expandable","transforms","rowExpandedContentClassName","rowWrapperClassName","tableClassName","noneStyle","important","borderStyle","noBorderBottom","borderBottom","borderTop","buildClassNames","RowWrapper","trRef","rowProps","row","rest","ref","isExpanded","hidden","IntegrationsTable","useIntl","onCollapseHandler","_event","_index","isOpen","data","onCollapse","findIndex","rows","onEnable","reduce","idx","push","selected","isSelected","cells","lastConnectionAttempts","isConnectionAttemptLoading","isEnabledLoading","Switch","isChecked","isEnabled","onChange","isDisabled","ouiaId","fullWidth","parent","colSpan","actionsResolverCallback","rowData","actionResolver","integrationIndex","i","integrationRow","ouiaSafe","SkeletonTable","rowSize","loadingCount","paddingColumnSize","sortBy","EmptyState","EmptyStateVariant","EmptyStateIcon","icon","Title","headingLevel","EmptyStateBody","Table","rowWrapper","TableHeader","TableBody","useTableExportConfig","onExport","extraItems","onSelect","exporterTypeFromString","stagingAndProd","IntegrationFilterColumn","cssRaw","enabledTextClassName","filterMetadata","NAME","label","placeholder","ENABLED","options","exclusive","items","value","IntegrationsToolbar","primaryToolbarFilterConfig","usePrimaryToolbarFilterConfig","filters","setFilters","clearFilters","actionsConfig","onClick","onAddIntegration","kebabToggleProps","exportConfig","filterConfig","useInsightsEnvironmentFlag","getInsights","useCallback","activeFiltersConfig","pageChanged","page","inner","perPageChanged","perPage","topPaginationProps","itemCount","count","isCompact","PaginationVariant","onSetPage","onFirstClick","onPreviousClick","onNextClick","onLastClick","onPageInput","onPerPageSelect","bottomPaginationProps","PrimaryToolbar","pagination","UseDeleteModalReducerActionType","initialState","reducer","state","DELETE","RESET","useDeleteModalReducer","dispatch","useReducer","useMemo","delete","makeDeleteAction","reset","UseFormModalReducerActionType","isEdit","template","isCopy","useFormModalReducer","copyFunction","CREATE","EDIT","buildReducer","create","Operations","Schemas","zodSchemaApplication","bundle_id","zodSchemaUUID","created","optional","nullable","display_name","updated","nonstrict","zodSchemaBasicAuthentication","password","username","zodSchemaBehaviorGroupAction","endpoint","zodSchemaEndpoint","zodSchemaBehaviorGroupActionId","behaviorGroupId","endpointId","zodSchemaBundle","zodSchemaCamelProperties","basic_authentication","disable_ssl_verification","extras","secret_token","sub_type","zodSchemaEmailSubscriptionProperties","group_id","ignore_preferences","only_admins","properties","zodSchemaWebhookProperties","zodSchemaEndpointType","zodSchemaEntityTag","weak","zodSchemaFamily","zodSchemaHttpType","zodSchemaLink","params","rel","rels","uri","uriBuilder","zodSchemaUriBuilder","zodSchemaLocale","country","displayCountry","displayLanguage","displayName","displayScript","displayVariant","extensionKeys","iSO3Country","iSO3Language","script","unicodeLocaleAttributes","unicodeLocaleKeys","zodSchemaMediaType","parameters","subtype","wildcardSubtype","wildcardType","zodSchemaMeta","int","zodSchemaMultivaluedMapStringObject","zodSchemaMultivaluedMapStringString","zodSchemaNewCookie","comment","domain","expiry","httpOnly","maxAge","path","secure","version","zodSchemaRbacGroup","modified","platform_default","principalCount","roleCount","system","uuid","zodSchemaRbacUser","active","email","firstName","isActive","lastName","orgAdmin","zodSchemaStatus","zodSchemaStatusType","family","reasonPhrase","statusCode","method","Application","BasicAuthentication","BehaviorGroup","bundle","BehaviorGroupAction","BehaviorGroupActionId","Bundle","CamelProperties","CurrentStatus","end_time","start_time","EmailSubscriptionProperties","EmailSubscriptionType","Endpoint","EndpointPage","links","meta","EndpointProperties","EndpointType","EntityTag","EventType","application","application_id","Facet","Family","HttpType","Link","Locale","MediaType","Meta","MultivaluedMapStringObject","MultivaluedMapStringString","NewCookie","NotificationHistory","details","invocationResult","invocationTime","PageRbacGroup","PageRbacUser","RbacGroup","RbacRaw","RbacUser","RenderEmailTemplateRequest","body_template","payload","subject_template","RequestEmailSubscriptionProperties","Response","allowedMethods","cookies","entity","entityTag","headers","lastModified","location","mediaType","metadata","statusInfo","stringHeaders","Status","StatusType","UUID","UriBuilder","WebhookProperties","__Empty","max","EndpointServiceGetEndpoints","EndpointServiceCreateEndpoint","EndpointServiceSubscribeEmail","EndpointServiceUnsubscribeEmail","EndpointServiceGetOrCreateEmailSubscriptionEndpoint","EndpointServiceGetEndpoint","EndpointServiceUpdateEndpoint","EndpointServiceDeleteEndpoint","EndpointServiceEnableEndpoint","EndpointServiceDisableEndpoint","EndpointServiceGetEndpointHistory","EndpointServiceGetDetailedEndpointHistory","actionCreator","query","limit","offset","pageNumber","sort_by","actionBuilder","queryParams","config","rules","ValidateRule","build","body","Response200","replace","applicationName","toString","bundleName","includeDetail","historyId","getIntegrationType","Error","getEndpointType","notNull","defaultValue","toIntegration","serverIntegration","integrationBase","toIntegrationWebhook","subType","basicAuth","user","pass","toIntegrationCamel","ignorePreferences","groupId","onlyAdmin","toIntegrationEmail","toIntegrationProperties","integrationHttp","integrationCamel","integrationEmail","toServerIntegrationRequest","listIntegrationsActionCreator","pager","Page","toQuery","filterType","filterActive","listIntegrationIntegrationDecoder","validationResponseTransformer","validatedResponse","serverIntegrations","serverNotifications","e","errors","IntegrationExporterCsv","ExporterCsv","IntegrationExporterJson","ExporterJson","buttonClassname","AddNotificationBody","text","buttonText","Button","ButtonVariant","switchEnabled","IntegrationSchemaBase","required","trim","oneOf","default","IntegrationHttpSchema","concat","shape","notRequired","Object","values","IntegrationCamelSchema","IntegrationSchema","IntegrationTypeCamelForm","FormTextInput","isRequired","ouiaIdConcat","Checkbox","IntegrationTypeHttpForm","IntegrationTypeForm","FormSelectOption","IntegrationsForm","useFormikContext","Form","maxLength","FormSelect","InternalIntegrationSaveModal","pageTitle","handleSubmit","isValid","isSubmitting","onSaveClicked","SaveModal","isSaving","onSave","onClose","actionButtonDisabled","IntegrationSaveModal","initialIntegration","cast","onSubmit","async","transformedIntegration","Formik","initialValues","validationSchema","validateOnMount","saveIntegrationActionCreator","createIntegrationActionCreator","decoder","response","switchIntegrationEnabledStatusActionCreator","savedNotificationScopeSelector","savedNotificationScope","savedNotificationScopeEqualFn","left","right","AddNotificationBodyContainer","useSelector","useDispatch","switchIntegrationEnabledStatus","useMutation","mutate","SavedNotificationScopeAction","then","CreatePage","saveIntegrationMutation","useTransformQueryResponse","hasError","setError","onSaveIntegration","savedIntegration","addSuccessNotification","loading","IntegrationDeleteModal","onDeleteInternal","onDelete","behaviorGroups","Skeleton","behaviorGroupText","ExpandableSection","toggleText","List","behaviorGroup","ListItem","DeleteModal","isDeleting","titleIconVariant","NotificationServiceCreateBehaviorGroup","NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint","NotificationServiceUpdateBehaviorGroupActions","NotificationServiceUpdateBehaviorGroup","NotificationServiceDeleteBehaviorGroup","NotificationServiceFindBehaviorGroupsByBundleId","NotificationServiceGetEventTypes","NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup","NotificationServiceGetLinkedBehaviorGroups","NotificationServiceUpdateEventTypeBehaviors","NotificationServiceGetApplicationsFacets","NotificationServiceGetBundleFacets","NotificationServiceMarkRead","bundleId","applicationIds","eventTypeId","Response204","isActionNotify","NotificationType","isActionIntegration","Recipient","this","IntegrationRecipient","super","NotificationRecipient","integrationId","sendToAdmin","_toAction","serverAction","toNotification","serverNotification","JSON","stringify","applicationDisplayName","eventTypeDisplayName","reduceActions","current","draft","existingAction","find","toNotifications","reportBehaviorGroup","element","toBehaviorGroup","serverBehaviorGroup","behaviorAction","toAction","toShallowBehaviorGroupRequest","behaviorGroupsForEndpointActionCreator","defaultBehaviorGroupDecoder","deleteIntegrationActionCreator","IntegrationDeleteModalPage","deleteIntegrationMutation","getBehaviorGroupsQuery","useParameterizedQuery","deleteIntegration","useUrlStateName","useUrlStateString","useUrlStateEnabled","_defaultValue","useUrlStateMultipleOptions","useStateFactory","column","notificationAppStateSelector","notificationAppStateEqualFn","integrationFilterBuilder","Filter","toLocaleLowerCase","and","Operator","userIntegrationCopier","userIntegration","getApplicationsAction","emptyImmutableArray","freeze","emptyImmutableObject","findById","findByKey","val","BehaviorGroupChip","unlink","notification","Chip","BehaviorGroupCell","setOpen","onSelected","dataset","currentTarget","firstChild","behaviorGroupContent","found","OptionsMenuItem","bg","toggle","OptionsMenuToggle","onToggle","toggleTemplate","ChipGroup","readonlyText","Split","hasGutter","SplitItem","global_palette_black_400","v","join","isEditMode","OptionsMenu","direction","menuItems","menuAppendTo","document","TableText","wrapModifier","actionButtonClassName","float","cellWidth","EmptySpan","_props","emptySpanProducer","NotificationsBehaviorGroupTable","Component","Wrapped","ouia","callbacks","onStartEditing","onFinishEditing","onCancelEditing","onBehaviorGroupLinkUpdated","loadingActionStatus","width","behaviors","global_disabled_color_100","global_active_color_100","isOutsideDropdown","global_palette_black_600","TableVariant","actionsToggle","NotificationFilterColumn","GroupByEnum","GroupBy","DropdownItem","None","groupBy","target","shouldBeOpen","pascalCase","Dropdown","DropdownToggle","toggleIndicator","dropdownItems","NotificationsToolbar","appFilterItems","appFilterOptions","APPLICATION","ACTION","clearFilter","exportConfigInternal","dedicatedAction","onGroupBySelected","verticalAlign","height","alt","src","marginLeftClassName","grayFontClassName","ActionTypeToIcon","actionType","ActionComponentWrapper","ActionComponent","isDefault","disabledLabelClassName","Tooltip","position","Label","hasOutline","r","cardClassName","contentTitleStyle","BehaviorGroupCardLayout","switchOpen","prev","Card","isFlat","CardHeader","CardHeaderMain","TextVariants","CardActions","KebabToggle","isPlain","DropdownPosition","CardBody","Grid","GridItem","span","contents","BehaviorGroupCard","onClickEdit","onEdit","onClickDelete","BehaviorGroupCardSkeleton","contentWidth","cardsWrapperClassName","overflow","cardWrapperClassName","BehaviorGroupCardListLayout","measureRef","measuredSizing","useMeasure","container","refContainer","getBoundingClientRect","Flex","alignItems","alignContent","FlexItem","BehaviorGroupCardList","BehaviorGroupCardListSkeleton","BehaviorGroupDeleteModal","toDelete","useOnDeleteWrapper","cancelButtonTitle","conflictingNotifications","cancelButtonVariant","ackDelete","setAckDelete","Stack","StackItem","events","actionButtonHidden","BehaviorGroupDeleteModalSkeleton","deleteBehaviorGroupAction","defaultNotificationsDecoder","DeleteBehaviorGroupPage","deleteBehaviorGroup","affected","useQuery","getAffectedNotificationsByBehaviorGroupAction","addDangerNotification","useEffect","ActionIntegration","min","ActionNotify","ActionsArray","obj","hasOwnProperty","test","context","foundEmail","integrationIds","createError","message","includes","BehaviorGroupSchema","RecipientContext","createContext","getIntegrations","getNotificationRecipients","useRecipientContext","RecipientContextProvider","Provider","RecipientOption","selectOption","equals","mapper","SelectOption","getKey","useRecipientOptionMemo","show","loadingDefault","isNoResultsOption","defaultValues","loadingFilter","filterValues","ReducerActionType","reducerFunction","SET_FILTER_VALUE","search","lastSearch","LOAD_FILTER_VALUE","USE_DEFAULTS","SET_DEFAULTS","useTypeaheadReducer","setFilterValue","loadFilterValue","setDefaults","useDefaults","IntegrationRecipientTypeahead","prevOpen","usePrevious","dispatchers","onOpenChange","onFilter","selection","sel","integrationSelected","Select","SelectVariant","typeAheadAriaLabel","placeholderText","selections","RecipientTypeahead","recipients","s","onClear","RecipientForm","recipientSelected","recipientOnClear","FormHelperText","isError","isHidden","ActionOption","kind","notificationType","actionName","ActionTypeahead","actionSelected","selectedOption","hideNonWebhooks","insights","getInsightsEnvironment","selectableOptions","getSelectOptions","selectedNotifications","o","tableHeaderClassName","$nest","paddingRight","tableBodyClassName","alignLeftClassName","textAlign","emptySpan","BehaviorGroupFormActionsTable","setValues","touched","setFieldTouched","form","touchedActions","errorActions","Array","Set","setValueDispatch","updater","Function","addAction","newAction","rowHandlers","setActions","handleActionSelected","handleIntegrationSelected","handleRecipientSelected","rowAsNotification","_","handleRecipientOnClear","isTouched","handleRemove","borders","subtitleClassName","EditBehaviorGroupForm","FieldArray","helpers","InternalBehaviorGroupSaveModal","ModalVariant","BehaviorGroupSaveModal","getRecipients","lowerCaseSearch","toLowerCase","useGetRecipients","saveBehaviorGroupActionCreator","updateBehaviorGroupActionsActionCreator","endpointIds","EditBehaviorGroupPage","ClientContext","_search","useGetIntegrations","actionsContextValue","saveBehaviorGroupMutation","updateBehaviorGroupActionsMutation","fetchingIntegrations","setFetchingIntegrations","updateBehaviorGroupActions","saveBehaviorGroup","original","Promise","resolve","toFetch","onlyAdmins","toSystemProperties","all","systemProps","systemProperties","getDefaultSystemEndpointAction","result","newIds","endpointsToAdd","flat","catch","err","expandableSectionClassName","backgroundColor","global_BackgroundColor_100","global_spacer_lg","sectionClassName","sectionTitleClassName","paddingTop","titleClassName","global_palette_black_1000","emptyAddButtonClassName","BehaviorGroupAddButton","buttonProps","button","isAriaDisabled","BehaviorGroupsSection","setExpanded","setFilter","filteredBehaviors","lowerCaseFilter","editModalState","editModalActions","deleteModalState","deleteModalActions","createGroup","stopPropagation","onCloseModal","saved","reload","onCloseDelete","deleted","onClearFilter","contentId","ExpandableSectionToggle","Badge","isRead","isDetached","SearchInput","behaviorGroupDecoder","getBehaviorGroupByNotificationAction","notificationId","getNotification","behaviorGroupSectionClassName","marginBottom","global_spacer_xl","emptyArray","BundlePageBehaviorGroupContent","notificationsFilter","initialAppOptions","debounce","useUrlStateApplication","useUrlStateAction","useFilters","useNotificationFilter","applications","useGetBehaviorGroups","errorObject","useBehaviorGroupContent","notificationPage","defaultPerPage","sort","currentPage","setCurrentPage","useState","itemsPerPage","setItemsPerPage","appFilter","appIds","arrayValue","filterOption","changePage","changeItemsPerPage","useNotificationPage","debouncedFilters","useNotifications","filterApplicationId","filterBundleId","listNotificationsActionCreator","notificationRows","updateBehaviorGroupLink","startEditMode","finishEditMode","cancelEditMode","updateBehaviorGroups","setNotificationRows","prevNotificationInput","removeBehaviorGroup","splice","ob","nb","linkBehavior","setEditMode","command","behaviorGroupIds","linkBehaviorGroupAction","b","draftNotification","oldBehaviors","_prev","clearQueue","forEach","useBehaviorGroupNotificationRows","isLinked","Section","displayInlineClassName","display","NotificationListBundlePage","pageHeaderTitleProps","PageHeader","PageHeaderTitle","InsightsEnvDetector","onEnvironment","RenderIfFalse","Main","BundleStatus","pathRoutes","integrationFilter","useIntegrationFilter","pageData","filterBuilder","usePage","integrationsQuery","initFetch","exportIntegrationsQuery","integrationRows","setIntegrationRows","prevIntegrationsInput","reduxDispatch","setIntegrationRowByIndex","partialIntegration","prevIntegrations","newIntegrations","setIntegrationRowById","listIntegrationHistoryActionCreator","last5","reverse","p","Date","_integration","useIntegrationRows","modalIsOpenState","modalIsOpenActions","onAddIntegrationClicked","exporter","ExporterType","integrationExporterFactory","exportedIntegrations","nextPage","export","now","canWrite","closeFormModal","closeDeleteModal","Math","pageCount","onFunction","chrome","on","getBundles","getApplications","unregister","navId","NOT_FOUND","FAILED_TO_LOAD","LOADING","isBundleStatus","AppSkeleton","InsightsRoute","Routes","pathRoute","exact","zodSchemaAtomicLong","acquire","andDecrement","andIncrement","opaque","plain","release","AtomicLong","MigrationReport","deletedEndpoints","durationInMs","updatedAccounts","updatedBehaviorGroupActions","eventId","StatusServiceGetCurrentStatus","fromUtc","getTime","getTimezoneOffset","adapter","currentStatus","MAINTENANCE","utcFormat","regularFormat","serverStatus","setRbac","setServer","setOrgAdmin","waitForInsights","init","appId","getApp","identifyApp","auth","getUser","identity","is_org_admin","fetchRBAC","hasPermission","useApp","serviceName","pathname","hasReadPermissions","utcStartTime","utcEndTime","startTime","endTime","timezone","Maintenance","timeZone","NotificationsPortal","NotAuthorized","SavedNotificationScopeReducer","getType","createStore","middleware","initStore","resetStore","restoreStore","SavedNotificationScopeKeys","SavedNotificationScopeActions","setIntegration","createAction","SET_INTEGRATION","start","START","finish","FINISH","unset","UNSET","getBaseName","pathName","split","shift","getSubApp"],"mappings":"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","file":"js/527.4a1ceb34368c535174b4.js","sourcesContent":["import { DeepReadonly } from 'ts-essentials';\n\nconst apiVersion = 'v1.0';\nconst apiBaseUrl = `/api/notifications/${apiVersion}`;\n\nexport const withBaseUrl = (path: string) => `${apiBaseUrl}${path}`;\n\nconst Config = {\n    integrations: {\n        subAppId: 'integrations',\n        title: 'Integrations | Settings'\n    },\n    notifications: {\n        subAppId: 'notifications',\n        title: 'Notifications | Settings'\n    },\n    pages: {\n    }\n};\n\nconst ReadonlyConfig: DeepReadonly<typeof Config> = Config;\nexport default ReadonlyConfig;\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n    notifications: {\n        id: 'notifications',\n        description: 'Application name',\n        defaultMessage: 'Notifications'\n    },\n    integrations: {\n        id: 'integrations',\n        description: 'Application name',\n        defaultMessage: 'Integrations'\n    },\n    integrationsEmptyStateTitle: {\n        id: 'integrationsEmptyStateTitle',\n        description: 'Integrations Empty State title',\n        defaultMessage: 'No integrations'\n    },\n    integrationsTableEmptyStateBody: {\n        id: 'integrationsTableEmptyStateBody',\n        description: 'Integrations Empty State body',\n        defaultMessage: 'Connect to webhooks and external applications.'\n    }\n});\n","import * as React from 'react';\nimport { Redirect } from 'react-router';\n\nimport { linkTo } from '../Routes';\n\nexport const defaultBundleName = 'rhel';\n\nexport const RedirectToDefaultBundle = () => <Redirect from={ linkTo.notifications('') } to={ linkTo.notifications(defaultBundleName) } />;\n","import { Schemas } from '../generated/OpenapiIntegrations';\nimport { UUID } from './Notification';\n\n// Integrations that exist\nexport enum IntegrationType {\n    WEBHOOK = 'webhook',\n    CAMEL = 'camel',\n    EMAIL_SUBSCRIPTION = 'email_subscription'\n}\n\nexport const UserIntegrationType = {\n    WEBHOOK: IntegrationType.WEBHOOK,\n    CAMEL: IntegrationType.CAMEL\n} as const;\n\nexport type UserIntegrationType = (typeof UserIntegrationType)[keyof typeof UserIntegrationType];\n\nexport interface IntegrationBase<T extends IntegrationType> {\n    id: string;\n    name: string;\n    type: T;\n    isEnabled: boolean;\n}\n\nexport interface IntegrationHttp extends IntegrationBase<IntegrationType.WEBHOOK> {\n    type: IntegrationType.WEBHOOK;\n    url: string;\n    sslVerificationEnabled: boolean;\n    secretToken?: string;\n    method: Schemas.HttpType;\n}\n\nexport interface IntegrationCamel extends IntegrationBase<IntegrationType.CAMEL> {\n    type: IntegrationType.CAMEL;\n    url: string;\n    sslVerificationEnabled: boolean;\n    secretToken?: string;\n    subType?: string;\n    basicAuth?: {\n        user: string;\n        pass: string;\n    };\n    extras?: Record<string, string>;\n}\n\nexport interface IntegrationEmailSubscription extends IntegrationBase<IntegrationType.EMAIL_SUBSCRIPTION> {\n    type: IntegrationType.EMAIL_SUBSCRIPTION,\n    onlyAdmin: boolean;\n    ignorePreferences: boolean;\n    groupId?: UUID\n}\n\nexport type Integration = IntegrationHttp | IntegrationEmailSubscription | IntegrationCamel;\n\n// Integrations that the user can create in the Integrations page;\nexport type UserIntegration = Extract<Integration, {\n    type: UserIntegrationType\n}>;\n\ntype NewIntegrationKeys = 'id';\n\nexport type NewIntegrationTemplate<\n    T extends IntegrationBase<IntegrationType>\n> = Omit<T, NewIntegrationKeys> & Partial<Pick<T, NewIntegrationKeys>>;\n\nexport type NewIntegrationBase = NewIntegrationTemplate<IntegrationBase<UserIntegrationType>>;\nexport type NewIntegration = NewIntegrationTemplate<Integration>;\nexport type NewUserIntegration = NewIntegrationTemplate<UserIntegration>;\n\nexport type ServerIntegrationRequest = Schemas.Endpoint;\nexport type ServerIntegrationResponse = Schemas.Endpoint;\n\nexport interface IntegrationConnectionAttempt {\n    date: Date;\n    isSuccess: boolean;\n}\n","import { intlHelper } from '@redhat-cloud-services/frontend-components-translations';\nimport { createIntl, createIntlCache } from 'react-intl';\nimport { DeepReadonly } from 'ts-essentials';\n\nimport { IntegrationType } from '../types/Integration';\nimport messages from './DefinedMessages';\n\nconst cache = createIntlCache();\nconst locale = navigator.language.slice(0, 2);\nconst intl = createIntl({\n    // eslint-disable-next-line no-console\n    onError: console.log,\n    locale\n}, cache);\nconst intlSettings = { locale };\n\nconst MutableMessages = {\n    appName: intlHelper(intl.formatMessage(messages.notifications), intlSettings),\n    appNameIntegrations: intlHelper(intl.formatMessage(messages.integrations), intlSettings),\n    pages: {\n        integrations: {\n            list: {\n                title: 'Integrations'\n            },\n            add: {\n                title: 'Add integration'\n            },\n            edit: {\n                title: 'Edit integration'\n            }\n        },\n        notifications: {\n            list: {\n                title: 'Notifications',\n                viewHistory: 'View notification history'\n            }\n        },\n        error: {\n            title: 'Notifications',\n            emptyState: {\n                title: 'Unhandled error',\n                content: 'There was a problem trying to process your request.',\n                showDetails: 'Show details',\n                actions: {\n                    goToIndex: 'Go back'\n                }\n            }\n        }\n    },\n    components: {\n        integrations: {\n            toolbar: {\n                actions: {\n                    addIntegration: 'Add integration',\n                    editIntegration: 'Edit integration'\n                }\n            },\n            table: {\n                title: 'Integrations',\n                columns: {\n                    name: 'Name',\n                    type: 'Type',\n                    lastConnectionAttempt: 'Last connection attempt',\n                    enabled: 'Enabled'\n                }\n            },\n            enableError: {\n                title: 'Unable to enable the Integration',\n                description: 'There was a problem trying to enable the integration: \"{0}\".\\nPlease try again.'\n            },\n            disableError: {\n                title: 'Unable to disable the Integration',\n                description: 'There was a problem trying to disable the integration: \"{0}\".\\nPlease try again.'\n            },\n            integrationType: {\n                [IntegrationType.WEBHOOK]: 'Webhook'\n            }\n        },\n        notifications: {\n            types: {\n                EMAIL_SUBSCRIPTION: 'Send an email',\n                DRAWER: 'Send to notification drawer',\n                INTEGRATION: 'Integration'\n            },\n            toolbar: {\n                actions: {\n\n                }\n            },\n            table: {\n                title: 'Notifications',\n                columns: {\n                    event: 'Event type',\n                    action: 'Action',\n                    recipient: 'Recipient'\n                }\n            }\n        }\n    },\n    common: {\n        choose: 'Please choose'\n    }\n};\n\nexport const Messages: DeepReadonly<typeof MutableMessages> = MutableMessages;\n","import { ErrorBoundaryPage } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport { Messages } from '../../properties/Messages';\n\ntype ErrorPageProps = RouteComponentProps<any>;\n\nexport const ErrorPageInternal: React.FunctionComponent<ErrorPageProps> = (props) => {\n    const goToListPage = React.useCallback(() => {\n        props.history.goBack();\n    }, [ props.history ]);\n\n    return (\n        <ErrorBoundaryPage\n            action={ goToListPage }\n            actionLabel={ Messages.pages.error.emptyState.actions.goToIndex }\n            pageHeader={ Messages.pages.error.title }\n            title={ Messages.pages.error.emptyState.title }\n            description={ Messages.pages.error.emptyState.content }\n        >\n            { props.children }\n        </ErrorBoundaryPage>\n    );\n};\n\nexport const ErrorPage = withRouter(ErrorPageInternal);\n","export enum ServerStatus {\n    RUNNING = 'RUNNING',\n    MAINTENANCE = 'MAINTENANCE'\n}\n\ntype ServerRunning = {\n    status: ServerStatus.RUNNING;\n}\n\ntype ServerMaintenance = {\n    status: ServerStatus.MAINTENANCE;\n    from: Date,\n    to: Date\n}\n\nexport type Server = ServerRunning | ServerMaintenance;\n","import * as React from 'react';\nimport { useContext } from 'react';\n\nimport { Server, ServerStatus } from '../types/Server';\n\nexport interface AppContext {\n    rbac: {\n        canWriteIntegrationsEndpoints: boolean;\n        canReadIntegrationsEndpoints: boolean;\n        canWriteNotifications: boolean;\n        canReadNotifications: boolean;\n    },\n    isOrgAdmin: boolean,\n    server: Server\n}\n\nexport const AppContext = React.createContext<AppContext>({\n    rbac: {\n        canReadIntegrationsEndpoints: false,\n        canReadNotifications: false,\n        canWriteIntegrationsEndpoints: false,\n        canWriteNotifications: false\n    },\n    isOrgAdmin: false,\n    server: {\n        status: ServerStatus.RUNNING\n    }\n});\n\nexport const useAppContext = () => useContext(AppContext);\n","import { getOuiaPropsFactory } from '@redhat-cloud-services/insights-common-typescript';\n\nexport const getOuiaProps = getOuiaPropsFactory('Notifications');\n","import { CheckCircleIcon, ExclamationCircleIcon } from '@patternfly/react-icons';\nimport { global_danger_color_100, global_spacer_xs, global_success_color_100 } from '@patternfly/react-tokens';\nimport { toUtc } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport format from 'date-fns/format';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nexport interface ConnectionAttemptProps {\n    type: ConnectionAttemptType;\n    date: Date;\n}\n\nexport enum ConnectionAttemptType {\n    SUCCESS,\n    FAILED\n}\n\nconst dateClassName = style({\n    marginLeft: global_spacer_xs.var\n});\n\nconst dateFormatString = 'MMM d, HH:mm:ss';\n\nconst getIcon = (type: ConnectionAttemptType) => {\n    switch (type) {\n        case ConnectionAttemptType.SUCCESS:\n            return <CheckCircleIcon color={ global_success_color_100.value } />;\n        case ConnectionAttemptType.FAILED:\n            return <ExclamationCircleIcon color={ global_danger_color_100.value } />;\n        default:\n            assertNever(type);\n    }\n};\n\nexport const ConnectionAttempt: React.FunctionComponent<ConnectionAttemptProps> = (props) => {\n    const formattedDate = format(toUtc(props.date), dateFormatString);\n    return (\n        <>\n            { getIcon(props.type) } <span className={ dateClassName }> { formattedDate } UTC </span>\n        </>\n    );\n};\n","import { Alert, AlertVariant } from '@patternfly/react-core';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { ConnectionAttempt, ConnectionAttemptType } from './ConnectionAttempt';\n\ninterface ConnectionAlertProps extends OuiaComponentProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n    alertVariant: AlertVariant;\n    description: string;\n    title: string;\n}\n\nconst connectionAttemptClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst marginTopClassName = style({\n    marginTop: global_spacer_sm.var\n});\n\nexport const ConnectionAlert: React.FunctionComponent<ConnectionAlertProps> = (props) => {\n    return (\n        <div { ...getOuiaProps('ConnectionAlert', props) }>\n            <Alert title={ props.title } variant={ props.alertVariant } isInline>\n                <p className={ marginTopClassName }>\n                    { props.description }\n                </p>\n                <p className={ marginTopClassName }>\n                    Last attempts: { props.attempts.map(\n                        (attempt, index) =>\n                            <span key={ index } className={ connectionAttemptClassName }>\n                                <ConnectionAttempt\n                                    type={ attempt.isSuccess ? ConnectionAttemptType.SUCCESS : ConnectionAttemptType.FAILED }\n                                    date={ attempt.date }\n                                />\n                            </span>\n                    ) }\n                </p>\n            </Alert>\n        </div>\n    );\n};\n","import { AlertVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { ConnectionAlert } from './ConnectionAlert';\n\ninterface ConnectionDegradedProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n}\n\nexport const ConnectionDegraded: React.FunctionComponent<ConnectionDegradedProps> = (props) => {\n    const description = React.useMemo(() => {\n        const failures = props.attempts.filter(a => !a.isSuccess).length;\n        const attempts = props.attempts.length;\n\n        if (failures === 1) {\n            return `This connection has had 1 failure in the last ${ attempts } connection attempts.`;\n        }\n\n        return `This connection has had ${ failures } failures in the last ${ attempts } connection attempts.`;\n    }, [ props.attempts ]);\n\n    return <ConnectionAlert\n        attempts={ props.attempts }\n        alertVariant={ AlertVariant.warning }\n        description={ description }\n        title=\"Connection is degraded\"\n    />;\n};\n","import { AlertVariant } from '@patternfly/react-core';\nimport * as React from 'react';\n\nimport { IntegrationConnectionAttempt } from '../../../types/Integration';\nimport { ConnectionAlert } from './ConnectionAlert';\n\ninterface ConnectionFailedProps {\n    attempts: Array<IntegrationConnectionAttempt>;\n}\n\nexport const ConnectionFailed: React.FunctionComponent<ConnectionFailedProps> = (props) => {\n    return <ConnectionAlert\n        attempts={ props.attempts }\n        alertVariant={ AlertVariant.danger }\n        description=\"This connection has failed the most recent connection attempts.\"\n        title=\"Failed connection\"\n    />;\n};\n","import { TextContent, TextList, TextListItem, TextListItemVariants, TextListVariants } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { UserIntegration } from '../../../types/Integration';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\n\nconst titleClass = style({\n    fontWeight: 400\n});\n\ninterface ExpandedContentProps extends OuiaComponentProps {\n    integration: UserIntegration;\n}\n\nexport const ExpandedContent: React.FunctionComponent<ExpandedContentProps> = (props) => {\n    return (\n        <TextContent { ...getOuiaProps('Integrations/Table/ExpandedContent', props) }>\n            <TextList component={ TextListVariants.dl }>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    Endpoint URL\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.url }\n                </TextListItem>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    SSL verification\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.sslVerificationEnabled ? 'Enabled' : 'Disabled' }\n                </TextListItem>\n                <TextListItem className={ titleClass } component={ TextListItemVariants.dt }>\n                    Authentication type\n                </TextListItem>\n                <TextListItem component={ TextListItemVariants.dd }>\n                    { props.integration.secretToken !== undefined ? 'Secret token' : 'None' }\n                </TextListItem>\n            </TextList>\n        </TextContent>\n    );\n};\n","import {\n    EmptyState,\n    EmptyStateBody,\n    EmptyStateIcon,\n    EmptyStateVariant,\n    Spinner,\n    Switch,\n    Text,\n    Title\n} from '@patternfly/react-core';\nimport { CheckCircleIcon, CubesIcon, ExclamationCircleIcon, OffIcon } from '@patternfly/react-icons';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/Table/table';\nimport {\n    expandable,\n    IActions,\n    IActionsResolver,\n    ICell,\n    IRow,\n    IRowData,\n    RowWrapperProps,\n    Table,\n    TableBody,\n    TableHeader\n} from '@patternfly/react-table';\nimport {\n    global_danger_color_100,\n    global_spacer_md,\n    global_spacer_sm,\n    global_success_color_100,\n    global_warning_color_200\n} from '@patternfly/react-tokens';\nimport { SkeletonTable } from '@redhat-cloud-services/frontend-components';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport { important } from 'csx';\nimport * as React from 'react';\nimport { useIntl } from 'react-intl';\nimport { style } from 'typestyle';\n\nimport messages from '../../properties/DefinedMessages';\nimport { Messages } from '../../properties/Messages';\nimport { IntegrationConnectionAttempt, UserIntegration } from '../../types/Integration';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { ConnectionDegraded } from './Table/ConnectionDegraded';\nimport { ConnectionFailed } from './Table/ConnectionFailed';\nimport { ExpandedContent } from './Table/ExpandedContent';\n\nexport type OnEnable = (integration: IntegrationRow, index: number, isChecked: boolean) => void;\n\ninterface IntegrationsTableProps extends OuiaComponentProps {\n    isLoading: boolean;\n    loadingCount?: number;\n    integrations: Array<IntegrationRow>;\n    onCollapse?: (integration: IntegrationRow, index: number, isOpen: boolean) => void;\n    onEnable?: OnEnable;\n    actionResolver: (row: IntegrationRow, index: number) => IActions;\n}\n\nexport type IntegrationRow = UserIntegration & {\n    isOpen: boolean;\n    isSelected: boolean;\n    isEnabledLoading: boolean;\n    isConnectionAttemptLoading: boolean;\n    lastConnectionAttempts?: Array<IntegrationConnectionAttempt>;\n}\n\nenum LastConnectionAttemptStatus {\n    UNKNOWN,\n    SUCCESS,\n    WARNING,\n    ERROR\n}\n\nconst connectionAlertClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\nconst expandedContentClassName = style({\n    paddingLeft: 0,\n    paddingBottom: 0\n});\n\nconst isEnabledLoadingClassName = style({\n    marginLeft: 10\n});\n\nconst smallMarginLeft = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst degradedClassName = style({\n    fontWeight: 600,\n    color: global_warning_color_200.var,\n    fontSize: 'var(--pf-global--FontSize--sm)'\n});\n\nconst getLastConnectionAttemptStatus = (attempts: Array<IntegrationConnectionAttempt>): LastConnectionAttemptStatus => {\n    if (attempts.length === 0) {\n        return LastConnectionAttemptStatus.UNKNOWN;\n    }\n\n    const failures = attempts.filter(a => !a.isSuccess).length;\n\n    if (failures === attempts.length) {\n        return LastConnectionAttemptStatus.ERROR;\n    } else if (failures > 0) {\n        return LastConnectionAttemptStatus.WARNING;\n    }\n\n    return LastConnectionAttemptStatus.SUCCESS;\n};\n\nconst getConnectionAlert = (attempts: Array<IntegrationConnectionAttempt>) => {\n    const status = getLastConnectionAttemptStatus(attempts);\n    switch (status) {\n        case LastConnectionAttemptStatus.UNKNOWN:\n        case LastConnectionAttemptStatus.SUCCESS:\n            return null;\n        case LastConnectionAttemptStatus.ERROR:\n            return (\n                <div className={ connectionAlertClassName }>\n                    <ConnectionFailed attempts={ attempts } />\n                </div>\n            );\n        case LastConnectionAttemptStatus.WARNING:\n            return (\n                <div className={ connectionAlertClassName }>\n                    <ConnectionDegraded attempts={ attempts } />\n                </div>\n            );\n        default:\n            assertNever(status);\n    }\n};\n\nconst LastConnectionAttemptSuccess: React.FunctionComponent = () => (\n    <>\n        <span>\n            <CheckCircleIcon color={ global_success_color_100.value } data-testid=\"success-icon\" />\n            <span className={ smallMarginLeft }>Success</span>\n        </span>\n    </>\n);\n\nconst LastConnectionAttemptError: React.FunctionComponent = () => (\n    <>\n        <span>\n            <ExclamationCircleIcon color={ global_danger_color_100.value } data-testid=\"fail-icon\" />\n            <span className={ smallMarginLeft }>Failure</span>\n        </span>\n    </>\n);\n\nconst getConnectionAttemptCell = (attempts: Array<IntegrationConnectionAttempt> | undefined, isLoading: boolean) => {\n    if (attempts === undefined) {\n        return 'Error fetching connection attempts';\n    }\n\n    if (isLoading) {\n        return <Spinner size=\"md\" />;\n    }\n\n    const status = getLastConnectionAttemptStatus(attempts);\n    switch (status) {\n        case LastConnectionAttemptStatus.UNKNOWN:\n            return <>\n                <span>\n                    <OffIcon data-testid=\"off-icon\" />\n                    <span className={ smallMarginLeft }>Unknown</span>\n                </span>\n            </>;\n        case LastConnectionAttemptStatus.SUCCESS:\n            return <><LastConnectionAttemptSuccess /></>;\n        case LastConnectionAttemptStatus.ERROR:\n            return <><LastConnectionAttemptError /></>;\n        case LastConnectionAttemptStatus.WARNING:\n            return <>\n                { attempts[0].isSuccess ? <LastConnectionAttemptSuccess /> : <LastConnectionAttemptError />}\n                <br />\n                <Text className={ degradedClassName }>Degraded connection</Text>\n            </>;\n        default:\n            assertNever(status);\n    }\n};\n\nconst toTableRows = (integrations: Array<IntegrationRow>, onEnable?: OnEnable): Array<IRow> => {\n    return integrations.reduce((rows, integration, idx) => {\n        rows.push({\n            id: integration.id,\n            key: integration.id,\n            isOpen: integration.isOpen,\n            selected: integration.isSelected,\n            cells: [\n                {\n                    title: integration.name\n                },\n                {\n                    title: Messages.components.integrations.integrationType[integration.type]\n                },\n                {\n                    title: getConnectionAttemptCell(integration.lastConnectionAttempts, integration.isConnectionAttemptLoading)\n                },\n                {\n                    title: <>\n                        { integration.isEnabledLoading ? (\n                            <Spinner className={ isEnabledLoadingClassName } size=\"md\" />\n                        ) : (\n                            <Switch\n                                id={ `table-row-switch-id-${integration.id}` }\n                                aria-label=\"Enabled\"\n                                isChecked={ integration.isEnabled }\n                                onChange={ isChecked => onEnable && onEnable(integration, idx, isChecked) }\n                                isDisabled={ !onEnable }\n                                ouiaId={ `enabled-${integration.id}` }\n                            />\n                        )}\n                    </>\n                }\n            ]\n        });\n        rows.push({\n            fullWidth: true,\n            parent: idx * 2,\n            cells: [\n                {\n                    title: <>\n                        {integration.lastConnectionAttempts !== undefined && getConnectionAlert(integration.lastConnectionAttempts)}\n                        <div className={ expandedContentClassName }>\n                            <ExpandedContent integration={ integration } ouiaId={ integration.id } />\n                        </div>\n                    </>,\n                    props: {\n                        colSpan: 6\n                    }\n                }\n            ]\n        });\n        return rows;\n    }, [] as Array<IRow>);\n};\n\nconst columns: Array<ICell> = [\n    {\n        title: Messages.components.integrations.table.columns.name,\n        cellFormatters: [ expandable ],\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.type,\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.lastConnectionAttempt,\n        transforms: []\n    },\n    {\n        title: Messages.components.integrations.table.columns.enabled,\n        transforms: []\n    }\n];\n\nconst buildClassNames = () => {\n    const noneStyle = important('none');\n    const borderStyle = important('var(--pf-c-table--border-width--base) solid var(--pf-c-table--BorderColor)');\n\n    const noBorderBottom = {\n        borderBottom: noneStyle\n    };\n\n    const rowExpandedContentClassName = style(noBorderBottom);\n    const rowWrapperClassName = style(noBorderBottom, {\n        borderTop: borderStyle\n    });\n    const tableClassName = style({\n        borderBottom: borderStyle\n    });\n\n    return {\n        rowExpandedContentClassName,\n        rowWrapperClassName,\n        tableClassName\n    };\n};\n\nconst {\n    rowExpandedContentClassName,\n    rowWrapperClassName,\n    tableClassName\n} = buildClassNames();\n\nconst RowWrapper: React.FunctionComponent<RowWrapperProps> = (props) => {\n    const { trRef, className, rowProps, row, ...rest } = props;\n    if (!row) {\n        return <></>;\n    }\n\n    return (\n        <tr\n            { ...rest }\n            ref={ trRef as any }\n            className={ css(\n                className,\n                row.isExpanded === true ? rowExpandedContentClassName : rowWrapperClassName,\n                row.isExpanded !== undefined && styles.tableExpandableRow,\n                row.isExpanded && styles.modifiers.expanded\n            ) }\n            hidden={ row?.isExpanded !== undefined && !row.isExpanded }\n        >\n            { props.children}\n        </tr>\n    );\n};\n\nexport const IntegrationsTable: React.FunctionComponent<IntegrationsTableProps> = (props) => {\n    const intl = useIntl();\n    const onCollapseHandler = React.useCallback((_event, _index: number, isOpen: boolean, data: IRowData) => {\n        const integrations = props.integrations;\n        const onCollapse = props.onCollapse;\n        const index = integrations.findIndex(integration => integration.id === data.id);\n        if (onCollapse && index !== -1) {\n            const integration = integrations[index];\n            onCollapse(integration, index, isOpen);\n        }\n    }, [ props.integrations, props.onCollapse ]);\n\n    const rows = React.useMemo(() => {\n        return toTableRows(props.integrations, props.onEnable);\n    }, [ props.integrations, props.onEnable ]);\n\n    const actionsResolverCallback: IActionsResolver = React.useCallback(rowData => {\n        const actionResolver = props.actionResolver;\n        if (rowData.parent === undefined && rowData && props.integrations) {\n            const integrationIndex = props.integrations.findIndex(i => i.id === rowData.id);\n            const integrationRow = props.integrations[integrationIndex];\n            if (integrationRow) {\n                return actionResolver(integrationRow, integrationIndex);\n            }\n        }\n\n        return [];\n    }, [ props.actionResolver, props.integrations ]);\n\n    if (props.isLoading) {\n        return (\n            <div { ...getOuiaProps('Integrations/Table',  { ...props, ouiaSafe: false }) }>\n                <SkeletonTable\n                    rowSize={ (props.loadingCount && props.loadingCount > 0) ? props.loadingCount : 10 }\n                    columns={ columns }\n                    paddingColumnSize={ 0 }\n                    sortBy={ undefined }\n                />\n            </div>\n        );\n    }\n\n    return (\n        <div { ...getOuiaProps('Integrations/Table', props) }>\n            {rows.length === 0 ?  (<EmptyState variant={ EmptyStateVariant.full }>\n                <EmptyStateIcon icon={ CubesIcon } />\n                <Title headingLevel=\"h2\" size=\"lg\">\n                    {intl.formatMessage(messages.integrationsEmptyStateTitle)}\n                </Title>\n                <EmptyStateBody>\n                    {intl.formatMessage(messages.integrationsTableEmptyStateBody)}\n                </EmptyStateBody>\n            </EmptyState>) :\n                (<Table\n                    className={ tableClassName }\n                    aria-label={ Messages.components.integrations.table.title }\n                    rows={ rows }\n                    cells={ columns }\n                    onCollapse={ onCollapseHandler }\n                    rowWrapper={ RowWrapper as (props: RowWrapperProps) => React.ReactElement }\n                    actionResolver={ actionsResolverCallback }\n                >\n                    <TableHeader />\n                    <TableBody />\n                </Table>)}\n        </div>\n    );\n};\n","import { ExporterType, exporterTypeFromString } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\ntype OnExport = (type: ExporterType) => void;\n\nexport const useTableExportConfig = (onExport: OnExport) => {\n    return React.useMemo(() => {\n        if (onExport) {\n            return {\n                extraItems: [],\n                onSelect: (_event, type: string) => {\n                    onExport(exporterTypeFromString(type));\n                }\n            };\n        }\n\n        return undefined;\n    }, [ onExport ]);\n};\n","import { Environment, getInsightsEnvironment, InsightsType } from '@redhat-cloud-services/insights-common-typescript';\n\nexport const stagingAndProd: Array<Environment> = [\n    'stage-beta',\n    'prod-beta',\n    'stage',\n    'prod'\n];\n\nexport const isStagingOrProd = (insights: InsightsType) => {\n    return stagingAndProd.includes(getInsightsEnvironment(insights));\n};\n","import { ClearFilters, Filters, SetFilters } from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum IntegrationFilterColumn {\n    NAME = 'name',\n    ENABLED = 'enabled'\n}\n\nexport type IntegrationFilters = Filters<typeof IntegrationFilterColumn>;\nexport type SetIntegrationFilters = SetFilters<typeof IntegrationFilterColumn>;\nexport type ClearIntegrationFilters = ClearFilters<typeof IntegrationFilterColumn>;\n","import { PaginationProps, PaginationVariant } from '@patternfly/react-core';\nimport { PrimaryToolbar } from '@redhat-cloud-services/frontend-components';\nimport {\n    ColumnsMetada,\n    ExporterType,\n    getInsights,\n    OuiaComponentProps,\n    useInsightsEnvironmentFlag,\n    usePrimaryToolbarFilterConfig\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport { cssRaw, style } from 'typestyle';\n\nimport { useTableExportConfig } from '../../hooks/useTableExportConfig';\nimport { Messages } from '../../properties/Messages';\nimport { stagingAndProd } from '../../types/Environments';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { DisabledIntegrationIcon, EnabledIntegrationIcon } from '../Icons';\nimport { ClearIntegrationFilters, IntegrationFilterColumn, IntegrationFilters, SetIntegrationFilters } from './Filters';\n\ncssRaw(`\n    @media only screen and (max-width: 768px) {\n        #integrations-bottom-toolbar .ins-c-primary-toolbar__pagination {\n            flex: 1;\n        }\n    }\n`);\n\ninterface IntegrationsToolbarProps extends OuiaComponentProps {\n    onAddIntegration?: () => void;\n    onExport: (type: ExporterType) => void;\n    filters: IntegrationFilters;\n    setFilters: SetIntegrationFilters;\n    clearFilters: ClearIntegrationFilters;\n    pageCount: number;\n    count: number;\n    page: number;\n    perPage: number;\n    pageChanged: (page: number) => void;\n    perPageChanged: (page: number) => void;\n}\n\nconst enabledTextClassName = style({\n    marginLeft: 4\n});\n\nconst filterMetadata: ColumnsMetada<typeof IntegrationFilterColumn> = {\n    [IntegrationFilterColumn.NAME]: {\n        label: 'Name',\n        placeholder: 'Filter by name'\n    },\n    [IntegrationFilterColumn.ENABLED]: {\n        label: 'Enabled',\n        placeholder: 'Filter by enabled',\n        options: {\n            exclusive: false,\n            items: [\n                {\n                    value: 'Enabled',\n                    label: <><EnabledIntegrationIcon /> <span className={ enabledTextClassName }>Enabled</span></>\n                },\n                {\n                    value: 'Disabled',\n                    label: <><DisabledIntegrationIcon /> <span className={ enabledTextClassName }>Disabled</span></>\n                }\n            ]\n        }\n    }\n};\n\nexport const IntegrationsToolbar: React.FunctionComponent<IntegrationsToolbarProps> = (props) => {\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n        IntegrationFilterColumn,\n        props.filters,\n        props.setFilters,\n        props.clearFilters,\n        filterMetadata\n    );\n\n    const actionsConfig = React.useMemo(() => {\n        const actions = [\n            {\n                key: 'add-integration',\n                label: Messages.components.integrations.toolbar.actions.addIntegration,\n                onClick: props.onAddIntegration,\n                props: {\n                    isDisabled: !props.onAddIntegration\n                }\n            }\n        ];\n\n        return {\n            actions,\n            kebabToggleProps: {\n                isDisabled: false\n            }\n        };\n    }, [ props.onAddIntegration ]);\n\n    const exportConfig = useTableExportConfig(props.onExport);\n\n    const filterConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.filterConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const activeFiltersConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.activeFiltersConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const pageChanged = React.useCallback((_event: unknown, page: number) => {\n        const inner = props.pageChanged;\n        inner(page);\n    }, [ props.pageChanged ]);\n\n    const perPageChanged = React.useCallback((_event: unknown, perPage: number) => {\n        const inner = props.perPageChanged;\n        inner(perPage);\n    }, [ props.perPageChanged ]);\n\n    const topPaginationProps = React.useMemo<PaginationProps>(() => ({\n        itemCount: props.count,\n        page: props.page,\n        perPage: props.perPage,\n        isCompact: true,\n        variant: PaginationVariant.top,\n        onSetPage: pageChanged,\n        onFirstClick: pageChanged,\n        onPreviousClick: pageChanged,\n        onNextClick: pageChanged,\n        onLastClick: pageChanged,\n        onPageInput: pageChanged,\n        onPerPageSelect: perPageChanged\n    }), [ props.count, props.page, props.perPage, pageChanged, perPageChanged ]);\n\n    const bottomPaginationProps = React.useMemo<PaginationProps>(() => ({\n        ...topPaginationProps,\n        isCompact: false,\n        variant: PaginationVariant.bottom\n    }), [ topPaginationProps ]);\n\n    return (\n        <div { ...getOuiaProps('Integrations/DualToolbar', props) }>\n            <PrimaryToolbar\n                actionsConfig={ actionsConfig }\n                exportConfig={ exportConfig }\n                filterConfig={ filterConfig }\n                activeFiltersConfig={ activeFiltersConfig }\n                pagination={ topPaginationProps }\n                id=\"integrations-top-toolbar\"\n            />\n            { props.children }\n            <PrimaryToolbar id=\"integrations-bottom-toolbar\" pagination={ bottomPaginationProps } />\n        </div>\n    );\n};\n","import { CheckCircleIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\n\nexport const EnabledIntegrationIcon: React.FunctionComponent = () => {\n    return <CheckCircleIcon color=\"green\" />;\n};\n","import { OffIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\n\nexport const DisabledIntegrationIcon: React.FunctionComponent = () => {\n    return <OffIcon />;\n};\n","import { assertNever } from 'assert-never';\nimport { useMemo, useReducer } from 'react';\n\nenum UseDeleteModalReducerActionType {\n    DELETE = 'delete',\n    RESET = 'reset'\n}\n\ninterface UseDeleteModalActionDelete<T> {\n    type: UseDeleteModalReducerActionType.DELETE;\n    data: T;\n}\n\ninterface UseDeleteModalActionReset {\n    type: UseDeleteModalReducerActionType.RESET;\n}\n\ntype UseDeleteModalReducerAction<T> = UseDeleteModalActionDelete<T> | UseDeleteModalActionReset;\n\ntype UseDeleteModalReducerState<T> = {\n    isOpen: false;\n    data: undefined;\n} | {\n    isOpen: true;\n    data: T;\n}\n\nconst initialState: UseDeleteModalReducerState<undefined> = {\n    isOpen: false,\n    data: undefined\n};\n\ntype ReducerFunction<T> = (state: UseDeleteModalReducerState<T>, action: UseDeleteModalReducerAction<T>) => UseDeleteModalReducerState<T>;\ntype ReducerActions<T> = {\n    delete: (data: T) => void;\n    reset: () => void;\n}\n\nconst reducer = <T>(\n    state: UseDeleteModalReducerState<T>,\n    action: UseDeleteModalReducerAction<T>\n): UseDeleteModalReducerState<T> => {\n    switch (action.type) {\n        case UseDeleteModalReducerActionType.DELETE:\n            return {\n                isOpen: true,\n                data: action.data\n            };\n        case UseDeleteModalReducerActionType.RESET:\n            return initialState;\n        default:\n            assertNever(action);\n\n    }\n};\n\nconst makeDeleteAction = <T>(data: T): UseDeleteModalActionDelete<T> => ({\n    type: UseDeleteModalReducerActionType.DELETE,\n    data\n});\n\nconst makeResetAction = (): UseDeleteModalActionReset => ({\n    type: UseDeleteModalReducerActionType.RESET\n});\n\nexport const useDeleteModalReducer = <T>(): [ UseDeleteModalReducerState<T>, ReducerActions<T> ] => {\n    const [ state, dispatch ] = useReducer<ReducerFunction<T>>(reducer, initialState);\n\n    const actions = useMemo<ReducerActions<T>>(() => ({\n        delete: data => dispatch(makeDeleteAction(data)),\n        reset: () => dispatch(makeResetAction())\n    }), [ dispatch ]);\n\n    return [ state, actions ];\n};\n","import { assertNever } from 'assert-never';\nimport { useMemo, useReducer } from 'react';\n\nenum UseFormModalReducerActionType {\n    EDIT = 'edit',\n    CREATE = 'create',\n    RESET = 'reset'\n}\n\ninterface UseFormModalReducerActionCreate<T> {\n    type: UseFormModalReducerActionType.CREATE;\n    template?: Partial<T>;\n}\n\ninterface UseFormModalReducerActionEdit<T> {\n    type: UseFormModalReducerActionType.EDIT;\n    template: T;\n}\n\ninterface UseFormModalReducerActionReset {\n    type: UseFormModalReducerActionType.RESET;\n}\n\ntype UseFormModalReducerAction<T> = UseFormModalReducerActionCreate<T> | UseFormModalReducerActionEdit<T> | UseFormModalReducerActionReset;\ntype ReducerAction<T> = {\n    create: (template?: Partial<T>) => void;\n    edit: (template: T) => void;\n    reset: () => void;\n};\n\ninterface UseFormModalReducerState<T> {\n    isOpen: boolean;\n    isEdit: boolean;\n    template: T | Partial<T> | undefined;\n    isCopy: boolean;\n}\n\nconst initialState: UseFormModalReducerState<undefined> = {\n    isOpen: false,\n    isEdit: false,\n    template: undefined,\n    isCopy: false\n};\n\ntype CopyFunction<T> = (from: Partial<T>) => Partial<T>;\n\nconst buildReducer = <T>(copyFunction?: CopyFunction<T>) => {\n    const reducer = (\n        state: UseFormModalReducerState<T>,\n        action: UseFormModalReducerAction<T>\n    ): UseFormModalReducerState<T> => {\n        switch (action.type) {\n            case UseFormModalReducerActionType.CREATE:\n                return {\n                    isOpen: true,\n                    isEdit: false,\n                    template: action.template ? copyFunction ? copyFunction(action.template) : action.template : undefined,\n                    isCopy: !!action.template\n                };\n            case UseFormModalReducerActionType.EDIT:\n                return {\n                    isOpen: true,\n                    isEdit: true,\n                    template: action.template,\n                    isCopy: false\n                };\n            case UseFormModalReducerActionType.RESET:\n                return initialState;\n            default:\n                assertNever(action);\n        }\n    };\n\n    return reducer;\n};\n\nconst makeCreateAction = <T>(template?: Partial<T>): UseFormModalReducerActionCreate<T> => ({\n    type: UseFormModalReducerActionType.CREATE,\n    template\n});\n\nconst makeEditAction = <T>(template: T): UseFormModalReducerActionEdit<T> => ({\n    type: UseFormModalReducerActionType.EDIT,\n    template\n});\n\nconst makeResetAction = (): UseFormModalReducerActionReset => ({\n    type: UseFormModalReducerActionType.RESET\n});\n\nexport const useFormModalReducer = <T>(copyFunction?: CopyFunction<T>): [ UseFormModalReducerState<T>, ReducerAction<T> ] => {\n    const reducer = useMemo(() => {\n        return buildReducer(copyFunction);\n    }, [ copyFunction ]);\n\n    const [ state, dispatch ] = useReducer(reducer, initialState);\n\n    const actions = useMemo<ReducerAction<T>>(() => ({\n        create: (data?: Partial<T>) => dispatch(makeCreateAction(data)),\n        edit: (data: T) => dispatch(makeEditAction(data)),\n        reset: () => dispatch(makeResetAction())\n    }), [ dispatch ]);\n\n    return [ state, actions ];\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle?: Bundle | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const CamelProperties = zodSchemaCamelProperties();\n  export type CamelProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    extras?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    secret_token?: string | undefined | null;\n    sub_type?: string | undefined | null;\n    url: string;\n  };\n\n  export const CurrentStatus = zodSchemaCurrentStatus();\n  export type CurrentStatus = {\n    end_time?: string | undefined | null;\n    start_time?: string | undefined | null;\n    status: Status;\n  };\n\n  export const EmailSubscriptionProperties =\n    zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = {\n    group_id?: UUID | undefined | null;\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties | CamelProperties)\n      | undefined\n      | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType =\n    | 'webhook'\n    | 'email_subscription'\n    | 'default'\n    | 'camel';\n\n  export const EntityTag = zodSchemaEntityTag();\n  export type EntityTag = {\n    value?: string | undefined | null;\n    weak?: boolean | undefined | null;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const Family = zodSchemaFamily();\n  export type Family =\n    | 'CLIENT_ERROR'\n    | 'INFORMATIONAL'\n    | 'OTHER'\n    | 'REDIRECTION'\n    | 'SERVER_ERROR'\n    | 'SUCCESSFUL';\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Link = zodSchemaLink();\n  export type Link = {\n    params?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    rel?: string | undefined | null;\n    rels?: Array<string> | undefined | null;\n    title?: string | undefined | null;\n    type?: string | undefined | null;\n    uri?: string | undefined | null;\n    uriBuilder?: UriBuilder | undefined | null;\n  };\n\n  export const Locale = zodSchemaLocale();\n  export type Locale = {\n    country?: string | undefined | null;\n    displayCountry?: string | undefined | null;\n    displayLanguage?: string | undefined | null;\n    displayName?: string | undefined | null;\n    displayScript?: string | undefined | null;\n    displayVariant?: string | undefined | null;\n    extensionKeys?: Array<string> | undefined | null;\n    iSO3Country?: string | undefined | null;\n    iSO3Language?: string | undefined | null;\n    language?: string | undefined | null;\n    script?: string | undefined | null;\n    unicodeLocaleAttributes?: Array<string> | undefined | null;\n    unicodeLocaleKeys?: Array<string> | undefined | null;\n    variant?: string | undefined | null;\n  };\n\n  export const MediaType = zodSchemaMediaType();\n  export type MediaType = {\n    parameters?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    subtype?: string | undefined | null;\n    type?: string | undefined | null;\n    wildcardSubtype?: boolean | undefined | null;\n    wildcardType?: boolean | undefined | null;\n  };\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const MultivaluedMapStringObject =\n    zodSchemaMultivaluedMapStringObject();\n  export type MultivaluedMapStringObject = {\n    [x: string]: Array<unknown>;\n  };\n\n  export const MultivaluedMapStringString =\n    zodSchemaMultivaluedMapStringString();\n  export type MultivaluedMapStringString = {\n    [x: string]: Array<string>;\n  };\n\n  export const NewCookie = zodSchemaNewCookie();\n  export type NewCookie = {\n    comment?: string | undefined | null;\n    domain?: string | undefined | null;\n    expiry?: string | undefined | null;\n    httpOnly?: boolean | undefined | null;\n    maxAge?: number | undefined | null;\n    name?: string | undefined | null;\n    path?: string | undefined | null;\n    secure?: boolean | undefined | null;\n    value?: string | undefined | null;\n    version?: number | undefined | null;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const PageRbacGroup = zodSchemaPageRbacGroup();\n  export type PageRbacGroup = {\n    data: Array<RbacGroup>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const PageRbacUser = zodSchemaPageRbacUser();\n  export type PageRbacUser = {\n    data: Array<RbacUser>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const RbacGroup = zodSchemaRbacGroup();\n  export type RbacGroup = {\n    created?: string | undefined | null;\n    description?: string | undefined | null;\n    modified?: string | undefined | null;\n    name?: string | undefined | null;\n    platform_default?: boolean | undefined | null;\n    principalCount?: number | undefined | null;\n    roleCount?: number | undefined | null;\n    system?: boolean | undefined | null;\n    uuid?: UUID | undefined | null;\n  };\n\n  export const RbacRaw = zodSchemaRbacRaw();\n  export type RbacRaw = {\n    data?:\n      | Array<{\n          [x: string]: unknown;\n        }>\n      | undefined\n      | null;\n    links?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    meta?:\n      | {\n          [x: string]: number;\n        }\n      | undefined\n      | null;\n  };\n\n  export const RbacUser = zodSchemaRbacUser();\n  export type RbacUser = {\n    active?: boolean | undefined | null;\n    email?: string | undefined | null;\n    firstName?: string | undefined | null;\n    isActive?: boolean | undefined | null;\n    isOrgAdmin?: boolean | undefined | null;\n    lastName?: string | undefined | null;\n    orgAdmin?: boolean | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const RenderEmailTemplateRequest =\n    zodSchemaRenderEmailTemplateRequest();\n  export type RenderEmailTemplateRequest = {\n    body_template: string;\n    payload: string;\n    subject_template: string;\n  };\n\n  export const RequestEmailSubscriptionProperties =\n    zodSchemaRequestEmailSubscriptionProperties();\n  export type RequestEmailSubscriptionProperties = {\n    only_admins: boolean;\n  };\n\n  export const Response = zodSchemaResponse();\n  export type Response = {\n    allowedMethods?: Array<string> | undefined | null;\n    cookies?:\n      | {\n          [x: string]: NewCookie;\n        }\n      | undefined\n      | null;\n    date?: string | undefined | null;\n    entity?: unknown | undefined | null;\n    entityTag?: EntityTag | undefined | null;\n    headers?: MultivaluedMapStringObject | undefined | null;\n    language?: Locale | undefined | null;\n    lastModified?: string | undefined | null;\n    length?: number | undefined | null;\n    links?: Array<Link> | undefined | null;\n    location?: string | undefined | null;\n    mediaType?: MediaType | undefined | null;\n    metadata?: MultivaluedMapStringObject | undefined | null;\n    status?: number | undefined | null;\n    statusInfo?: StatusType | undefined | null;\n    stringHeaders?: MultivaluedMapStringString | undefined | null;\n  };\n\n  export const Status = zodSchemaStatus();\n  export type Status = 'MAINTENANCE' | 'UP';\n\n  export const StatusType = zodSchemaStatusType();\n  export type StatusType = {\n    family?: Family | undefined | null;\n    reasonPhrase?: string | undefined | null;\n    statusCode?: number | undefined | null;\n  };\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const UriBuilder = zodSchemaUriBuilder();\n  export type UriBuilder = unknown;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  export const __Empty = zodSchema__Empty();\n  export type __Empty = string | undefined;\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle: zodSchemaBundle().optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCamelProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          extras: z.record(z.string()).optional().nullable(),\n          secret_token: z.string().optional().nullable(),\n          sub_type: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCurrentStatus() {\n      return z\n      .object({\n          end_time: z.string().optional().nullable(),\n          start_time: z.string().optional().nullable(),\n          status: zodSchemaStatus()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z\n      .object({\n          group_id: zodSchemaUUID().optional().nullable(),\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties(),\n              zodSchemaCamelProperties()\n          ])\n          .optional()\n          .nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default', 'camel' ]);\n  }\n\n  function zodSchemaEntityTag() {\n      return z\n      .object({\n          value: z.string().optional().nullable(),\n          weak: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFamily() {\n      return z.enum([\n          'CLIENT_ERROR',\n          'INFORMATIONAL',\n          'OTHER',\n          'REDIRECTION',\n          'SERVER_ERROR',\n          'SUCCESSFUL'\n      ]);\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaLink() {\n      return z\n      .object({\n          params: z.record(z.string()).optional().nullable(),\n          rel: z.string().optional().nullable(),\n          rels: z.array(z.string()).optional().nullable(),\n          title: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          uri: z.string().optional().nullable(),\n          uriBuilder: zodSchemaUriBuilder().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaLocale() {\n      return z\n      .object({\n          country: z.string().optional().nullable(),\n          displayCountry: z.string().optional().nullable(),\n          displayLanguage: z.string().optional().nullable(),\n          displayName: z.string().optional().nullable(),\n          displayScript: z.string().optional().nullable(),\n          displayVariant: z.string().optional().nullable(),\n          extensionKeys: z.array(z.string()).optional().nullable(),\n          iSO3Country: z.string().optional().nullable(),\n          iSO3Language: z.string().optional().nullable(),\n          language: z.string().optional().nullable(),\n          script: z.string().optional().nullable(),\n          unicodeLocaleAttributes: z.array(z.string()).optional().nullable(),\n          unicodeLocaleKeys: z.array(z.string()).optional().nullable(),\n          variant: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMediaType() {\n      return z\n      .object({\n          parameters: z.record(z.string()).optional().nullable(),\n          subtype: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          wildcardSubtype: z.boolean().optional().nullable(),\n          wildcardType: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMultivaluedMapStringObject() {\n      return z.record(z.array(z.unknown()));\n  }\n\n  function zodSchemaMultivaluedMapStringString() {\n      return z.record(z.array(z.string()));\n  }\n\n  function zodSchemaNewCookie() {\n      return z\n      .object({\n          comment: z.string().optional().nullable(),\n          domain: z.string().optional().nullable(),\n          expiry: z.string().optional().nullable(),\n          httpOnly: z.boolean().optional().nullable(),\n          maxAge: z.number().int().optional().nullable(),\n          name: z.string().optional().nullable(),\n          path: z.string().optional().nullable(),\n          secure: z.boolean().optional().nullable(),\n          value: z.string().optional().nullable(),\n          version: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageRbacGroup() {\n      return z\n      .object({\n          data: z.array(zodSchemaRbacGroup()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageRbacUser() {\n      return z\n      .object({\n          data: z.array(zodSchemaRbacUser()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacGroup() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string().optional().nullable(),\n          modified: z.string().optional().nullable(),\n          name: z.string().optional().nullable(),\n          platform_default: z.boolean().optional().nullable(),\n          principalCount: z.number().int().optional().nullable(),\n          roleCount: z.number().int().optional().nullable(),\n          system: z.boolean().optional().nullable(),\n          uuid: zodSchemaUUID().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacRaw() {\n      return z\n      .object({\n          data: z.array(z.record(z.unknown())).optional().nullable(),\n          links: z.record(z.string()).optional().nullable(),\n          meta: z.record(z.number().int()).optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacUser() {\n      return z\n      .object({\n          active: z.boolean().optional().nullable(),\n          email: z.string().optional().nullable(),\n          firstName: z.string().optional().nullable(),\n          isActive: z.boolean().optional().nullable(),\n          isOrgAdmin: z.boolean().optional().nullable(),\n          lastName: z.string().optional().nullable(),\n          orgAdmin: z.boolean().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRenderEmailTemplateRequest() {\n      return z\n      .object({\n          body_template: z.string(),\n          payload: z.string(),\n          subject_template: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestEmailSubscriptionProperties() {\n      return z\n      .object({\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaResponse() {\n      return z\n      .object({\n          allowedMethods: z.array(z.string()).optional().nullable(),\n          cookies: z.record(zodSchemaNewCookie()).optional().nullable(),\n          date: z.string().optional().nullable(),\n          entity: z.unknown().optional().nullable(),\n          entityTag: zodSchemaEntityTag().optional().nullable(),\n          headers: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          language: zodSchemaLocale().optional().nullable(),\n          lastModified: z.string().optional().nullable(),\n          length: z.number().int().optional().nullable(),\n          links: z.array(zodSchemaLink()).optional().nullable(),\n          location: z.string().optional().nullable(),\n          mediaType: zodSchemaMediaType().optional().nullable(),\n          metadata: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          status: z.number().int().optional().nullable(),\n          statusInfo: zodSchemaStatusType().optional().nullable(),\n          stringHeaders: zodSchemaMultivaluedMapStringString()\n          .optional()\n          .nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatus() {\n      return z.enum([ 'MAINTENANCE', 'UP' ]);\n  }\n\n  function zodSchemaStatusType() {\n      return z\n      .object({\n          family: zodSchemaFamily().optional().nullable(),\n          reasonPhrase: z.string().optional().nullable(),\n          statusCode: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaUriBuilder() {\n      return z.unknown();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchema__Empty() {\n      return z.string().max(0).optional();\n  }\n}\n\nexport namespace Operations {\n  // GET /endpoints\n  export namespace EndpointServiceGetEndpoints {\n    const Active = z.boolean();\n    type Active = boolean;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Type = z.string();\n    type Type = string;\n    export interface Params {\n      active?: Active;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n      type?: Type;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'EndpointPage', 200, Schemas.EndpointPage>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints';\n        const query = {} as Record<string, any>;\n        if (params.active !== undefined) {\n            query.active = params.active;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        if (params.type !== undefined) {\n            query.type = params.type;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.EndpointPage, 'EndpointPage', 200) ]\n        })\n        .build();\n    };\n  }\n  // POST /endpoints\n  export namespace EndpointServiceCreateEndpoint {\n    export interface Params {\n      body: Schemas.Endpoint;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Schemas.Endpoint, 'Endpoint', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/email/subscription/{bundleName}/{applicationName}/{type}\n  export namespace EndpointServiceSubscribeEmail {\n    const ApplicationName = z.string();\n    type ApplicationName = string;\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      applicationName: ApplicationName;\n      bundleName: BundleName;\n      type: Schemas.EmailSubscriptionType;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/integrations/v1.0/endpoints/email/subscription/{bundleName}/{applicationName}/{type}'\n        .replace('{applicationName}', params.applicationName.toString())\n        .replace('{bundleName}', params.bundleName.toString())\n        .replace('{type}', params.type.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/email/subscription/{bundleName}/{applicationName}/{type}\n  export namespace EndpointServiceUnsubscribeEmail {\n    const ApplicationName = z.string();\n    type ApplicationName = string;\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      applicationName: ApplicationName;\n      bundleName: BundleName;\n      type: Schemas.EmailSubscriptionType;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/integrations/v1.0/endpoints/email/subscription/{bundleName}/{applicationName}/{type}'\n        .replace('{applicationName}', params.applicationName.toString())\n        .replace('{bundleName}', params.bundleName.toString())\n        .replace('{type}', params.type.toString());\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // POST /endpoints/system/email_subscription\n  export namespace EndpointServiceGetOrCreateEmailSubscriptionEndpoint {\n    export interface Params {\n      body: Schemas.RequestEmailSubscriptionProperties;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/system/email_subscription';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Schemas.Endpoint, 'Endpoint', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}\n  export namespace EndpointServiceGetEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'Endpoint', 200, Schemas.Endpoint>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.Endpoint, 'Endpoint', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/{id}\n  export namespace EndpointServiceUpdateEndpoint {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      id: Schemas.UUID;\n      body: Schemas.Endpoint;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/{id}\n  export namespace EndpointServiceDeleteEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.__Empty, '__Empty', 204) ]\n        })\n        .build();\n    };\n  }\n  // PUT /endpoints/{id}/enable\n  export namespace EndpointServiceEnableEndpoint {\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/enable'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /endpoints/{id}/enable\n  export namespace EndpointServiceDisableEndpoint {\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'__Empty', 204, Schemas.__Empty>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/enable'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Schemas.__Empty, '__Empty', 204) ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}/history\n  export namespace EndpointServiceGetEndpointHistory {\n    const IncludeDetail = z.boolean();\n    type IncludeDetail = boolean;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.NotificationHistory);\n    type Response200 = Array<Schemas.NotificationHistory>;\n    export interface Params {\n      id: Schemas.UUID;\n      includeDetail?: IncludeDetail;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/integrations/v1.0/endpoints/{id}/history'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        if (params.includeDetail !== undefined) {\n            query.includeDetail = params.includeDetail;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /endpoints/{id}/history/{history_id}/details\n  export namespace EndpointServiceGetDetailedEndpointHistory {\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      historyId: Schemas.UUID;\n      id: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/integrations/v1.0/endpoints/{id}/history/{history_id}/details'\n        .replace('{history_id}', params.historyId.toString())\n        .replace('{id}', params.id.toString());\n        const query = {} as Record<string, any>;\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n}\n","import { assertNever } from 'assert-never';\n\nimport { Schemas } from '../../generated/OpenapiIntegrations';\nimport {\n    Integration,\n    IntegrationBase,\n    IntegrationCamel, IntegrationEmailSubscription,\n    IntegrationHttp,\n    IntegrationType,\n    NewIntegration,\n    ServerIntegrationRequest,\n    ServerIntegrationResponse\n} from '../Integration';\n\nconst getIntegrationType = (type: Schemas.EndpointType | undefined): IntegrationType => {\n    switch (type) {\n        case Schemas.EndpointType.Enum.camel:\n            return IntegrationType.CAMEL;\n        case Schemas.EndpointType.Enum.webhook:\n            return IntegrationType.WEBHOOK;\n        case Schemas.EndpointType.Enum.email_subscription:\n            return IntegrationType.EMAIL_SUBSCRIPTION;\n        case Schemas.EndpointType.Enum.default:\n        case undefined:\n            throw new Error(`Unexpected type: ${type}`);\n        default:\n            assertNever(type);\n    }\n};\n\nexport const getEndpointType = (type: IntegrationType): Schemas.EndpointType => {\n    switch (type) {\n        case IntegrationType.WEBHOOK:\n            return Schemas.EndpointType.Enum.webhook;\n        case IntegrationType.CAMEL:\n            return Schemas.EndpointType.Enum.camel;\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            return Schemas.EndpointType.Enum.email_subscription;\n        default:\n            assertNever(type);\n    }\n};\n\ntype NotNullType = {\n    <T>(value: T | undefined | null): T | undefined;\n    <T>(value: T | undefined | null, defaultValue: T): T;\n}\n\nconst notNull: NotNullType = <T>(value: T | undefined | null, defaultValue?: T): T | undefined => value === null ? defaultValue : value;\n\nconst toIntegrationWebhook = (integrationBase: IntegrationBase<IntegrationType.WEBHOOK>, properties: Schemas.WebhookProperties): IntegrationHttp => ({\n    ...integrationBase,\n    url: properties.url || '',\n    sslVerificationEnabled: !properties.disable_ssl_verification,\n    secretToken: notNull(properties.secret_token),\n    method: properties.method ?? Schemas.HttpType.Enum.GET\n});\n\nconst toIntegrationCamel = (integrationBase: IntegrationBase<IntegrationType.CAMEL>, properties: Schemas.CamelProperties): IntegrationCamel => ({\n    ...integrationBase,\n    url: properties.url || '',\n    sslVerificationEnabled: !properties.disable_ssl_verification,\n    secretToken: notNull(properties.secret_token),\n\n    subType: notNull(properties.sub_type),\n    basicAuth: properties.basic_authentication === null ?\n        undefined\n        :\n        {\n            user: notNull(properties.basic_authentication?.username, ''),\n            pass: notNull(properties.basic_authentication?.password, '')\n        },\n    extras: notNull(properties.extras)\n});\n\nconst toIntegrationEmail = (\n    integrationBase: IntegrationBase<IntegrationType.EMAIL_SUBSCRIPTION>,\n    properties: Schemas.EmailSubscriptionProperties): IntegrationEmailSubscription => ({\n    ...integrationBase,\n    ignorePreferences: properties.ignore_preferences,\n    groupId: properties.group_id === null ? undefined : properties.group_id,\n    onlyAdmin: properties.only_admins\n});\n\nexport const toIntegration = (serverIntegration: ServerIntegrationResponse): Integration => {\n\n    const integrationBase: IntegrationBase<IntegrationType> = {\n        id: serverIntegration.id || '',\n        name: serverIntegration.name || '',\n        isEnabled: !!serverIntegration.enabled,\n        type: getIntegrationType(serverIntegration.type)\n    };\n\n    switch (integrationBase.type) {\n        case IntegrationType.WEBHOOK:\n            return toIntegrationWebhook(\n                integrationBase as IntegrationBase<IntegrationType.WEBHOOK>,\n                serverIntegration.properties as Schemas.WebhookProperties\n            );\n\n        case IntegrationType.CAMEL: {\n            return toIntegrationCamel(\n                integrationBase as IntegrationBase<IntegrationType.CAMEL>,\n                serverIntegration.properties as Schemas.CamelProperties\n            );\n        }\n\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            return toIntegrationEmail(\n                integrationBase as IntegrationBase<IntegrationType.EMAIL_SUBSCRIPTION>,\n                serverIntegration.properties as Schemas.EmailSubscriptionProperties\n            );\n        default:\n            assertNever(integrationBase.type);\n    }\n};\n\nexport const toIntegrations = (serverIntegrations: Array<ServerIntegrationResponse>): Array<Integration> => {\n    return filterOutDefaultAction(serverIntegrations).map(toIntegration);\n};\n\ntype ServerIntegrationProperties = Schemas.EmailSubscriptionProperties | Schemas.WebhookProperties | Schemas.CamelProperties\n\nexport const toIntegrationProperties = (integration: Integration | NewIntegration): ServerIntegrationProperties => {\n    switch (integration.type) {\n        case IntegrationType.WEBHOOK:\n            const integrationHttp: IntegrationHttp = integration as IntegrationHttp;\n            return {\n                url: integrationHttp.url,\n                method: integrationHttp.method,\n                disable_ssl_verification: !integrationHttp.sslVerificationEnabled,\n                secret_token: integrationHttp.secretToken\n            };\n        case IntegrationType.CAMEL:\n            const integrationCamel: IntegrationCamel = integration as IntegrationCamel;\n            return {\n                url: integrationCamel.url,\n                disable_ssl_verification: !integrationCamel.sslVerificationEnabled,\n                secret_token: integrationCamel.secretToken,\n                basic_authentication: {\n                    username: integrationCamel.basicAuth?.user,\n                    password: integrationCamel.basicAuth?.pass\n                },\n                extras: integrationCamel.extras\n            };\n        case IntegrationType.EMAIL_SUBSCRIPTION:\n            const integrationEmail: IntegrationEmailSubscription = integration as IntegrationEmailSubscription;\n            return {\n                only_admins: integrationEmail.onlyAdmin,\n                group_id: integrationEmail.groupId,\n                ignore_preferences: integrationEmail.ignorePreferences\n            };\n        default:\n            assertNever(integration);\n    }\n};\n\nexport const toServerIntegrationRequest =\n    (integration: Integration | NewIntegration): ServerIntegrationRequest => {\n        return {\n            id: integration.id,\n            name: integration.name,\n            enabled: integration.isEnabled,\n            type: getEndpointType(integration.type),\n            description: '',\n            properties: toIntegrationProperties(integration)\n        };\n    };\n\nexport const filterOutDefaultAction = (serverNotifications: Array<ServerIntegrationResponse>) =>\n    serverNotifications.filter(e => e.type !== Schemas.EndpointType.enum.default);\n","import { Page, useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useParameterizedQuery, useQuery } from 'react-fetching-library';\n\nimport {\n    Operations\n} from '../generated/OpenapiIntegrations';\nimport { getEndpointType, toIntegrations } from '../types/adapters/IntegrationAdapter';\nimport { IntegrationType, UserIntegration } from '../types/Integration';\n\nexport const listIntegrationsActionCreator = (pager?: Page) => {\n    const query = (pager ?? Page.defaultPage()).toQuery();\n    return Operations.EndpointServiceGetEndpoints.actionCreator({\n        limit: +query.limit,\n        offset: +query.offset,\n        type: query.filterType ? getEndpointType(query.filterType as IntegrationType) : undefined,\n        active: query.filterActive ? query.filterActive === 'true' : undefined\n    });\n};\n\nexport const listIntegrationIntegrationDecoder = validationResponseTransformer((payload: Operations.EndpointServiceGetEndpoints.Payload) => {\n    if (payload?.status === 200) {\n        return validatedResponse(\n            'IntegrationPage',\n            200,\n            {\n                data: toIntegrations(payload.value.data) as Array<UserIntegration>,\n                count: payload.value.meta.count\n            },\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useListIntegrationsQuery = (pager?: Page, initFetch?: boolean) => useTransformQueryResponse(\n    useQuery(listIntegrationsActionCreator(pager), initFetch),\n    listIntegrationIntegrationDecoder\n);\n\nexport const useListIntegrationPQuery = () => useTransformQueryResponse(\n    useParameterizedQuery(listIntegrationsActionCreator),\n    listIntegrationIntegrationDecoder\n);\n","import { ExporterCsv, ExporterHeaders } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { UserIntegration } from '../../../types/Integration';\n\nexport class IntegrationExporterCsv extends ExporterCsv<UserIntegration> {\n\n    public serialize(integration: UserIntegration) {\n        return {\n            ...integration\n        };\n    }\n\n    public headers(): ExporterHeaders<IntegrationExporterCsv, UserIntegration> {\n        return [\n            [ 'id', 'id' ],\n            [ 'name', 'name' ],\n            [ 'isEnabled', 'isEnabled' ],\n            [ 'type', 'type' ],\n            // This works now, but what will happen when there are multiple types (slack, webhook, etc)\n            [ 'url', 'url' ]\n        ];\n    }\n}\n","import { ExporterJson } from '@redhat-cloud-services/insights-common-typescript';\n\nimport { UserIntegration } from '../../../types/Integration';\n\nexport class IntegrationExporterJson extends ExporterJson<UserIntegration> {\n\n}\n","import { Button, ButtonVariant, Spinner } from '@patternfly/react-core';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { IntegrationRef } from '../../types/Notification';\n\ninterface AddNotificationBodyProps {\n    integration: IntegrationRef;\n    isLoading: boolean;\n    switchEnabled: () => void;\n}\n\nconst buttonClassname = style({\n    paddingLeft: 0\n});\n\nexport const AddNotificationBody: React.FunctionComponent<AddNotificationBodyProps> = (props) => {\n\n    const text = props.integration.isEnabled ? 'This integration is enabled and ready to use.' : 'This integration is disabled.';\n    const buttonText = props.integration.isEnabled ? 'Disable integration' : 'Enable integration';\n\n    return (\n        <>\n            <div>{ text }</div>\n            <Button\n                className={ buttonClassname }\n                isDisabled={ props.isLoading }\n                variant={ ButtonVariant.link }\n                onClick={ props.switchEnabled }\n            >\n                {buttonText}\n            </Button>\n            { props.isLoading && (\n                <Spinner size=\"sm\" />\n            ) }\n        </>\n    );\n};\n","import * as Yup from 'yup';\nimport Lazy from 'yup/lib/Lazy';\n\nimport { Schemas } from '../../generated/OpenapiIntegrations';\nimport {\n    IntegrationCamel,\n    IntegrationHttp,\n    IntegrationType, NewIntegration,\n    NewIntegrationBase, NewIntegrationTemplate\n} from '../../types/Integration';\n\nexport const maxIntegrationNameLength = 150;\n\nexport const IntegrationSchemaBase: Yup.SchemaOf<NewIntegrationBase> = Yup.object({\n    id: Yup.string().optional(),\n    name: Yup.string().required('Write a name for this Integration.').max(maxIntegrationNameLength).trim(),\n    type: Yup.mixed<IntegrationType>().oneOf([ IntegrationType.WEBHOOK, IntegrationType.CAMEL ]).default(IntegrationType.WEBHOOK).optional(),\n    isEnabled: Yup.boolean().default(true).required()\n});\n\nexport const IntegrationHttpSchema: Yup.SchemaOf<NewIntegrationTemplate<IntegrationHttp>> = IntegrationSchemaBase.concat(Yup.object().shape({\n    type: Yup.mixed<IntegrationType.WEBHOOK>().oneOf([ IntegrationType.WEBHOOK ]).required(),\n    url: Yup.string().url().required('Write a valid url for this Integration.'),\n    sslVerificationEnabled: Yup.boolean().default(true),\n    secretToken: Yup.string().notRequired(),\n    method: Yup.mixed<Schemas.HttpType>().oneOf(Object.values(Schemas.HttpType.Enum)).default(Schemas.HttpType.Enum.POST)\n}));\n\nexport const IntegrationCamelSchema: Yup.SchemaOf<NewIntegrationTemplate<IntegrationCamel>> = IntegrationSchemaBase.concat(Yup.object().shape({\n    type: Yup.mixed<IntegrationType.CAMEL>().oneOf([ IntegrationType.CAMEL ]).required(),\n    url: Yup.string().required('Provide a url/host for this Integration.'),\n    sslVerificationEnabled: Yup.boolean().default(true),\n    secretToken: Yup.string().notRequired(),\n    subType: Yup.string().notRequired(),\n    basicAuth: Yup.object().shape({\n        user: Yup.string().required('Provide a user.'),\n        pass: Yup.string().required('Provide a password.')\n    }).optional(),\n    extras: Yup.mixed()\n}));\n\nexport const IntegrationSchema: Lazy<Yup.SchemaOf<NewIntegration | NewIntegrationBase | NewIntegrationBase>> = Yup.lazy(value => {\n    if (value) {\n        if (value.type === IntegrationType.WEBHOOK) {\n            return IntegrationHttpSchema;\n        }\n\n        if (value.type === IntegrationType.CAMEL) {\n            return IntegrationCamelSchema;\n        }\n    }\n\n    return IntegrationSchemaBase;\n});\n","import { Checkbox, FormTextInput, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './IntegrationTypeForm';\n\nexport const IntegrationTypeCamelForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n    // <!-- this should be a dropdown -->\n    return (\n        <div className=\"pf-c-form\" { ...getOuiaProps('Integrations/HttpForm', props) } >\n            <FormTextInput\n                isRequired={ true }\n                label=\"Type\"\n                type=\"text\"\n                name=\"sub_type\"\n                id=\"integration-type-camel-type\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'endpoint-type') }\n            />\n            <FormTextInput\n                isRequired={ true }\n                label=\"Endpoint URL\"\n                type=\"text\"\n                name=\"url\"\n                id=\"integration-type-camel-url\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'endpoint-url') }\n            />\n            <Checkbox\n                id=\"integration-type-camel-ssl-verification-enabled\"\n                label=\"Enable SSL verification\"\n                name=\"sslVerificationEnabled\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'is-ssl-verification-enabled') }\n            />\n            <FormTextInput\n                isRequired={ false }\n                label=\"Secret token\"\n                id=\"integration-type-camel-secret-token\"\n                name=\"secretToken\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'secret-token') }\n            />\n            { /*\n            TODO add BasicAuthentication here\n            TODO add extras here\n            */ }\n        </div>\n    );\n};\n","import { Checkbox, FormTextInput, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './IntegrationTypeForm';\n\nexport const IntegrationTypeHttpForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n    return (\n        <div className=\"pf-c-form\" { ...getOuiaProps('Integrations/HttpForm', props) } >\n            <FormTextInput\n                isRequired={ true }\n                label=\"Endpoint URL\"\n                type=\"url\"\n                name=\"url\"\n                id=\"integration-type-http-url\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'endpoint-url') }\n            />\n            <Checkbox\n                id=\"integration-type-http-ssl-verification-enabled\"\n                label=\"Enable SSL verification\"\n                name=\"sslVerificationEnabled\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'is-ssl-verification-enabled') }\n            />\n            <FormTextInput\n                isRequired={ false }\n                label=\"Secret token\"\n                id=\"integration-type-http-secret-token\"\n                name=\"secretToken\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'secret-token') }\n            />\n        </div>\n    );\n};\n","import { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\n\nimport { IntegrationType, UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationTypeCamelForm } from './IntegrationTypeCamelForm';\nimport { IntegrationTypeHttpForm } from './IntegrationTypeHttpForm';\n\nexport interface IntegrationTypeForm extends OuiaComponentProps {\n    type: UserIntegrationType;\n}\n\nexport const IntegrationTypeForm: React.FunctionComponent<IntegrationTypeForm> = (props) => {\n    switch (props.type) {\n        case IntegrationType.WEBHOOK:\n            return <IntegrationTypeHttpForm { ...props } />;\n        case IntegrationType.CAMEL:\n            return <IntegrationTypeCamelForm { ...props } />;\n        default:\n            assertNever(props.type);\n    }\n};\n","import { FormSelectOption } from '@patternfly/react-core';\nimport {\n    Form,\n    FormSelect,\n    FormTextInput,\n    OuiaComponentProps,\n    ouiaIdConcat\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { Messages } from '../../properties/Messages';\nimport { maxIntegrationNameLength } from '../../schemas/Integrations/Integration';\nimport { IntegrationType, NewUserIntegration } from '../../types/Integration';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { IntegrationTypeForm } from './Form/IntegrationTypeForm';\n\nconst options = [ IntegrationType.WEBHOOK ]\n.map(type => Messages.components.integrations.integrationType[type])\n.map(label => (<FormSelectOption key={ label } label={ label } />));\n\nexport const IntegrationsForm: React.FunctionComponent<OuiaComponentProps> = (props) => {\n\n    const { values } = useFormikContext<NewUserIntegration>();\n\n    return (\n        <Form { ...getOuiaProps('Integrations/Form', props) }>\n            <FormTextInput\n                maxLength={ maxIntegrationNameLength }\n                isRequired={ true }\n                label=\"Integration name\"\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'name') }\n            />\n            <FormSelect\n                isRequired={ true }\n                label=\"Type\"\n                name=\"type\"\n                id=\"integration-type\"\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'type') }\n            >\n                { options }\n            </FormSelect>\n            <IntegrationTypeForm\n                type={ values.type }\n                ouiaId={ ouiaIdConcat(props.ouiaId, 'type-form') }\n            />\n        </Form>\n    );\n};\n","import { ActionModalError, SaveModal, SaveModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { Messages } from '../../properties/Messages';\nimport { IntegrationSchema } from '../../schemas/Integrations/Integration';\nimport { NewUserIntegration, UserIntegration } from '../../types/Integration';\nimport { IntegrationsForm } from './Form';\n\ntype PartialIntegration = Partial<UserIntegration>;\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onSave';\n\nexport interface IntegrationSaveModalProps extends Omit<SaveModalProps, UsedProps>{\n    initialIntegration?: PartialIntegration;\n    onSave: (integration: UserIntegration | NewUserIntegration) => boolean | Promise<boolean>;\n    isEdit: boolean;\n}\n\ninterface InternalIntegrationSaveModalProps {\n    isEdit: boolean;\n    onClose: (saved: boolean) => void;\n    error?: ActionModalError;\n}\n\nconst InternalIntegrationSaveModal: React.FunctionComponent<InternalIntegrationSaveModalProps> = (props) => {\n\n    const pageMessages = props.isEdit ? Messages.pages.integrations.edit : Messages.pages.integrations.add;\n    const pageTitle =  pageMessages.title;\n    const { handleSubmit, isValid, isSubmitting } = useFormikContext<NewUserIntegration>();\n\n    const onSaveClicked = React.useCallback(() => {\n        handleSubmit();\n        return false;\n    }, [ handleSubmit ]);\n\n    return (\n        <SaveModal\n            isOpen={ true }\n            isSaving={ isSubmitting }\n            onSave={ onSaveClicked }\n            title={ pageTitle }\n            content={ <IntegrationsForm /> }\n            onClose={ props.onClose }\n            error={ props.error }\n            actionButtonDisabled={ !isValid }\n        />\n    );\n};\n\nexport const IntegrationSaveModal: React.FunctionComponent<IntegrationSaveModalProps> = (props) => {\n\n    const [ initialIntegration ] = React.useState<PartialIntegration>(() => {\n        return {\n            // The call is twice, because we use lazy evaluation for the integration base type.\n            // To ensure we get the defaults on the second level (webhook, slack, etc) we need to call it again\n            ...IntegrationSchema.cast(IntegrationSchema.cast({})),\n            ...props.initialIntegration\n        } as PartialIntegration;\n    });\n\n    const onSubmit = React.useCallback(async (integration: PartialIntegration) => {\n        const onSave = props.onSave;\n        const onClose = props.onClose;\n        const transformedIntegration = IntegrationSchema.cast(integration) as NewUserIntegration;\n        const saved = await onSave(transformedIntegration);\n        if (saved) {\n            onClose(true);\n        }\n    }, [ props.onSave, props.onClose ]);\n\n    return (\n        <Formik<PartialIntegration>\n            initialValues={ initialIntegration }\n            validationSchema={ IntegrationSchema }\n            onSubmit={ onSubmit }\n            validateOnMount={ true }\n        >\n            <InternalIntegrationSaveModal\n                isEdit={ props.isEdit }\n                onClose={ props.onClose }\n                error={ props.error }\n            />\n        </Formik>\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiIntegrations';\nimport { toIntegration, toServerIntegrationRequest } from '../types/adapters/IntegrationAdapter';\nimport { Integration, NewIntegration, UserIntegration } from '../types/Integration';\n\nexport const createIntegrationActionCreator = (integration: NewIntegration) => {\n    return Operations.EndpointServiceCreateEndpoint.actionCreator({\n        body: toServerIntegrationRequest(integration)\n    });\n};\n\nexport const saveIntegrationActionCreator = (integration: Integration | NewIntegration | UserIntegration) => {\n    if (integration.id) {\n        return Operations.EndpointServiceUpdateEndpoint.actionCreator({\n            body: toServerIntegrationRequest(integration),\n            id: integration.id\n        });\n    }\n\n    return createIntegrationActionCreator(integration);\n};\n\nconst decoder = (response: Operations.EndpointServiceCreateEndpoint.Payload | Operations.EndpointServiceUpdateEndpoint.Payload) => {\n    if (response.type === 'Endpoint') {\n        return {\n            ...response,\n            type: 'Integration',\n            value: toIntegration(response.value)\n        };\n    }\n\n    return response;\n};\n\nexport const useSaveIntegrationMutation = () => useTransformQueryResponse(\n    useMutation(saveIntegrationActionCreator),\n    decoder\n);\n","import { useMutation } from 'react-fetching-library';\n\nimport {\n    Operations\n} from '../generated/OpenapiIntegrations';\nimport { Integration, ServerIntegrationResponse } from '../types/Integration';\n\nexport const switchIntegrationEnabledStatusActionCreator = (integration: Integration) => {\n    if (integration.isEnabled) {\n        return Operations.EndpointServiceDisableEndpoint.actionCreator({\n            id: integration.id\n        });\n    } else {\n        return Operations.EndpointServiceEnableEndpoint.actionCreator({\n            id: integration.id\n        });\n    }\n};\n\nexport const useSwitchIntegrationEnabledStatus =\n    () => useMutation<ServerIntegrationResponse>(switchIntegrationEnabledStatusActionCreator);\n","import { NotificationAppState } from '../types/NotificationAppState';\nimport { SavedNotificationScopeState } from '../types/SavedNotificationScopeTypes';\n\nexport const savedNotificationScopeSelector = (state: NotificationAppState): SavedNotificationScopeState => state.savedNotificationScope;\n\nexport const savedNotificationScopeEqualFn = (left: SavedNotificationScopeState, right: SavedNotificationScopeState): boolean => {\n    return left?.integration === right?.integration && left?.status === right?.status;\n};\n","import { ActionModalError, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { AddNotificationBody } from '../../../components/Integrations/AddNotificationBody';\nimport { IntegrationSaveModal } from '../../../components/Integrations/SaveModal';\nimport { useSaveIntegrationMutation } from '../../../services/useSaveIntegration';\nimport { useSwitchIntegrationEnabledStatus } from '../../../services/useSwitchIntegrationEnabledStatus';\nimport { SavedNotificationScopeActions } from '../../../store/actions/SavedNotificationScopeAction';\nimport {\n    savedNotificationScopeEqualFn,\n    savedNotificationScopeSelector\n} from '../../../store/selectors/SavedNotificationScopeSelector';\nimport { Status } from '../../../store/types/SavedNotificationScopeTypes';\nimport { Integration, NewUserIntegration, UserIntegration, UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationRef } from '../../../types/Notification';\n\ninterface CreatePageProps {\n    isEdit: boolean;\n    initialIntegration: Partial<UserIntegration>;\n    onClose: (saved: boolean) => void;\n}\n\ninterface AddNotificationBodyContainer {\n    integration: IntegrationRef;\n}\n\nconst AddNotificationBodyContainer: React.FunctionComponent<AddNotificationBodyContainer> = (props) => {\n\n    const savedNotificationScope = useSelector(savedNotificationScopeSelector, savedNotificationScopeEqualFn);\n    const dispatch = useDispatch();\n    const switchIntegrationEnabledStatus = useSwitchIntegrationEnabledStatus();\n\n    const onClick = React.useCallback((): void => {\n        const mutate = switchIntegrationEnabledStatus.mutate;\n        if (savedNotificationScope) {\n            dispatch(SavedNotificationScopeActions.start());\n            const integration = savedNotificationScope.integration;\n            mutate(integration).then(response => {\n                if (!response.error) {\n                    dispatch(SavedNotificationScopeActions.finish(!integration.isEnabled));\n                } else {\n                    dispatch(SavedNotificationScopeActions.finish(integration.isEnabled));\n                }\n            });\n        }\n    }, [ switchIntegrationEnabledStatus.mutate, dispatch, savedNotificationScope ]);\n\n    React.useEffect(() => {\n        dispatch(SavedNotificationScopeActions.setIntegration(props.integration));\n        return () => {\n            dispatch(SavedNotificationScopeActions.unset());\n        };\n    }, [ dispatch, props.integration ]);\n\n    if (!savedNotificationScope) {\n        return <React.Fragment />;\n    }\n\n    return <AddNotificationBody\n        integration={ savedNotificationScope.integration }\n        isLoading={ savedNotificationScope.status === Status.LOADING }\n        switchEnabled={ onClick }\n    />;\n};\n\nexport const CreatePage: React.FunctionComponent<CreatePageProps> = props => {\n\n    const saveIntegrationMutation = useSaveIntegrationMutation();\n    const [ hasError, setError ] = React.useState(false);\n\n    const onSaveIntegration = React.useCallback((integration: NewUserIntegration) => {\n        if (!integration.id) {\n            integration.isEnabled = true;\n        }\n\n        setError(false);\n\n        return saveIntegrationMutation.mutate(integration).then(response => {\n            if (response.payload?.status === 200) {\n\n                const savedIntegration: IntegrationRef =  response.payload?.type === 'Integration' ? {\n                    ...response.payload.value as Integration,\n                    type: response.payload.value.type as unknown as UserIntegrationType\n                } : integration as IntegrationRef;\n\n                const title = props.isEdit ? `${savedIntegration.name} saved successfully` : `${savedIntegration.name} added successfully`;\n\n                addSuccessNotification(\n                    title,\n                    <AddNotificationBodyContainer integration={ savedIntegration } />,\n                    true\n                );\n\n                return true;\n            } else {\n                setError(true);\n                return false;\n            }\n        });\n    }, [ saveIntegrationMutation, props.isEdit ]);\n\n    const error = React.useMemo<ActionModalError | undefined>(() => {\n        if (hasError) {\n            if (props.isEdit) {\n                return {\n                    title: 'Integration failed to update',\n                    description: <p>There was an error trying to update the Integration. Please try again.</p>\n                };\n            } else {\n                return {\n                    title: 'Failed to create Integration',\n                    description: <p>There was an error trying to create the Integration. Please try again.</p>\n                };\n            }\n        }\n\n        return undefined;\n    }, [ hasError, props.isEdit ]);\n\n    return (\n        <IntegrationSaveModal\n            initialIntegration={ props.initialIntegration }\n            onSave={ onSaveIntegration }\n            isEdit={ props.isEdit }\n            isSaving={ saveIntegrationMutation.loading }\n            onClose={ props.onClose }\n            error={ error }\n        />\n    );\n};\n","import { ExpandableSection, List, ListItem, Skeleton } from '@patternfly/react-core';\nimport { DeleteModal, DeleteModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { UserIntegration } from '../../types/Integration';\nimport { BehaviorGroup } from '../../types/Notification';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onDelete';\n\ninterface IntegrationDeleteModalProps extends Omit<DeleteModalProps, UsedProps> {\n    integration?: UserIntegration;\n    onDelete: (integration: UserIntegration) => boolean | Promise<boolean>;\n    behaviorGroups?: Array<BehaviorGroup>;\n}\n\nexport const IntegrationDeleteModal: React.FunctionComponent<IntegrationDeleteModalProps> = (props) => {\n\n    const onDeleteInternal = React.useCallback(() => {\n        const integration = props.integration;\n        const onDelete = props.onDelete;\n        if (integration) {\n            return onDelete(integration);\n        }\n\n        return false;\n    }, [ props.onDelete, props.integration ]);\n\n    const content = React.useMemo(() => {\n        if (props.behaviorGroups === undefined) {\n            return (\n                <span data-testid=\"loading\">\n                    <Skeleton />\n                </span>\n            );\n        } else if (props.behaviorGroups.length === 0) {\n            return <span\n                data-testid=\"removing-integration-without-notifications\"\n            >\n                Removing integration <strong>{ props.integration?.name }</strong> does not affect any behavior group.\n            </span>;\n        } else {\n            const behaviorGroupText = props.behaviorGroups.length !== 1 ? 'behavior groups' : 'behavior group';\n            return (\n                <span data-testid={ `removing-integration-with-notifications-${props.behaviorGroups.length}` }>\n                    Removing integration <strong>{ props.integration?.name }</strong> affects {props.behaviorGroups.length} {behaviorGroupText}.\n                    { props.behaviorGroups.length > 0 &&\n                    <ExpandableSection toggleText={ `View ${props.behaviorGroups.length} ${behaviorGroupText}.` }>\n                        <List>\n                            { props.behaviorGroups.map(behaviorGroup => (\n                                <ListItem\n                                    key={ behaviorGroup.id }\n                                >\n                                    { behaviorGroup.bundleName }: { behaviorGroup.displayName }\n                                </ListItem>\n                            )) }\n                        </List>\n                    </ExpandableSection> }\n                </span>\n            );\n        }\n    }, [ props.behaviorGroups, props.integration ]);\n\n    if (!props.integration) {\n        return null;\n    }\n\n    return (\n        <DeleteModal\n            isOpen={ true }\n            isDeleting={ props.isDeleting }\n            title={ 'Remove integration' }\n            content={ content }\n            onClose={ props.onClose }\n            onDelete={ onDeleteInternal }\n            error={ props.error }\n            titleIconVariant=\"warning\"\n        />\n    );\n};\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle?: Bundle | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const CamelProperties = zodSchemaCamelProperties();\n  export type CamelProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    extras?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    secret_token?: string | undefined | null;\n    sub_type?: string | undefined | null;\n    url: string;\n  };\n\n  export const CurrentStatus = zodSchemaCurrentStatus();\n  export type CurrentStatus = {\n    end_time?: string | undefined | null;\n    start_time?: string | undefined | null;\n    status: Status;\n  };\n\n  export const EmailSubscriptionProperties =\n    zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = {\n    group_id?: UUID | undefined | null;\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties | CamelProperties)\n      | undefined\n      | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType =\n    | 'webhook'\n    | 'email_subscription'\n    | 'default'\n    | 'camel';\n\n  export const EntityTag = zodSchemaEntityTag();\n  export type EntityTag = {\n    value?: string | undefined | null;\n    weak?: boolean | undefined | null;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const Family = zodSchemaFamily();\n  export type Family =\n    | 'CLIENT_ERROR'\n    | 'INFORMATIONAL'\n    | 'OTHER'\n    | 'REDIRECTION'\n    | 'SERVER_ERROR'\n    | 'SUCCESSFUL';\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Link = zodSchemaLink();\n  export type Link = {\n    params?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    rel?: string | undefined | null;\n    rels?: Array<string> | undefined | null;\n    title?: string | undefined | null;\n    type?: string | undefined | null;\n    uri?: string | undefined | null;\n    uriBuilder?: UriBuilder | undefined | null;\n  };\n\n  export const Locale = zodSchemaLocale();\n  export type Locale = {\n    country?: string | undefined | null;\n    displayCountry?: string | undefined | null;\n    displayLanguage?: string | undefined | null;\n    displayName?: string | undefined | null;\n    displayScript?: string | undefined | null;\n    displayVariant?: string | undefined | null;\n    extensionKeys?: Array<string> | undefined | null;\n    iSO3Country?: string | undefined | null;\n    iSO3Language?: string | undefined | null;\n    language?: string | undefined | null;\n    script?: string | undefined | null;\n    unicodeLocaleAttributes?: Array<string> | undefined | null;\n    unicodeLocaleKeys?: Array<string> | undefined | null;\n    variant?: string | undefined | null;\n  };\n\n  export const MediaType = zodSchemaMediaType();\n  export type MediaType = {\n    parameters?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    subtype?: string | undefined | null;\n    type?: string | undefined | null;\n    wildcardSubtype?: boolean | undefined | null;\n    wildcardType?: boolean | undefined | null;\n  };\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const MultivaluedMapStringObject =\n    zodSchemaMultivaluedMapStringObject();\n  export type MultivaluedMapStringObject = {\n    [x: string]: Array<unknown>;\n  };\n\n  export const MultivaluedMapStringString =\n    zodSchemaMultivaluedMapStringString();\n  export type MultivaluedMapStringString = {\n    [x: string]: Array<string>;\n  };\n\n  export const NewCookie = zodSchemaNewCookie();\n  export type NewCookie = {\n    comment?: string | undefined | null;\n    domain?: string | undefined | null;\n    expiry?: string | undefined | null;\n    httpOnly?: boolean | undefined | null;\n    maxAge?: number | undefined | null;\n    name?: string | undefined | null;\n    path?: string | undefined | null;\n    secure?: boolean | undefined | null;\n    value?: string | undefined | null;\n    version?: number | undefined | null;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const PageRbacGroup = zodSchemaPageRbacGroup();\n  export type PageRbacGroup = {\n    data: Array<RbacGroup>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const PageRbacUser = zodSchemaPageRbacUser();\n  export type PageRbacUser = {\n    data: Array<RbacUser>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const RbacGroup = zodSchemaRbacGroup();\n  export type RbacGroup = {\n    created?: string | undefined | null;\n    description?: string | undefined | null;\n    modified?: string | undefined | null;\n    name?: string | undefined | null;\n    platform_default?: boolean | undefined | null;\n    principalCount?: number | undefined | null;\n    roleCount?: number | undefined | null;\n    system?: boolean | undefined | null;\n    uuid?: UUID | undefined | null;\n  };\n\n  export const RbacRaw = zodSchemaRbacRaw();\n  export type RbacRaw = {\n    data?:\n      | Array<{\n          [x: string]: unknown;\n        }>\n      | undefined\n      | null;\n    links?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    meta?:\n      | {\n          [x: string]: number;\n        }\n      | undefined\n      | null;\n  };\n\n  export const RbacUser = zodSchemaRbacUser();\n  export type RbacUser = {\n    active?: boolean | undefined | null;\n    email?: string | undefined | null;\n    firstName?: string | undefined | null;\n    isActive?: boolean | undefined | null;\n    isOrgAdmin?: boolean | undefined | null;\n    lastName?: string | undefined | null;\n    orgAdmin?: boolean | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const RenderEmailTemplateRequest =\n    zodSchemaRenderEmailTemplateRequest();\n  export type RenderEmailTemplateRequest = {\n    body_template: string;\n    payload: string;\n    subject_template: string;\n  };\n\n  export const RequestEmailSubscriptionProperties =\n    zodSchemaRequestEmailSubscriptionProperties();\n  export type RequestEmailSubscriptionProperties = {\n    only_admins: boolean;\n  };\n\n  export const Response = zodSchemaResponse();\n  export type Response = {\n    allowedMethods?: Array<string> | undefined | null;\n    cookies?:\n      | {\n          [x: string]: NewCookie;\n        }\n      | undefined\n      | null;\n    date?: string | undefined | null;\n    entity?: unknown | undefined | null;\n    entityTag?: EntityTag | undefined | null;\n    headers?: MultivaluedMapStringObject | undefined | null;\n    language?: Locale | undefined | null;\n    lastModified?: string | undefined | null;\n    length?: number | undefined | null;\n    links?: Array<Link> | undefined | null;\n    location?: string | undefined | null;\n    mediaType?: MediaType | undefined | null;\n    metadata?: MultivaluedMapStringObject | undefined | null;\n    status?: number | undefined | null;\n    statusInfo?: StatusType | undefined | null;\n    stringHeaders?: MultivaluedMapStringString | undefined | null;\n  };\n\n  export const Status = zodSchemaStatus();\n  export type Status = 'MAINTENANCE' | 'UP';\n\n  export const StatusType = zodSchemaStatusType();\n  export type StatusType = {\n    family?: Family | undefined | null;\n    reasonPhrase?: string | undefined | null;\n    statusCode?: number | undefined | null;\n  };\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const UriBuilder = zodSchemaUriBuilder();\n  export type UriBuilder = unknown;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle: zodSchemaBundle().optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCamelProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          extras: z.record(z.string()).optional().nullable(),\n          secret_token: z.string().optional().nullable(),\n          sub_type: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCurrentStatus() {\n      return z\n      .object({\n          end_time: z.string().optional().nullable(),\n          start_time: z.string().optional().nullable(),\n          status: zodSchemaStatus()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z\n      .object({\n          group_id: zodSchemaUUID().optional().nullable(),\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties(),\n              zodSchemaCamelProperties()\n          ])\n          .optional()\n          .nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default', 'camel' ]);\n  }\n\n  function zodSchemaEntityTag() {\n      return z\n      .object({\n          value: z.string().optional().nullable(),\n          weak: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFamily() {\n      return z.enum([\n          'CLIENT_ERROR',\n          'INFORMATIONAL',\n          'OTHER',\n          'REDIRECTION',\n          'SERVER_ERROR',\n          'SUCCESSFUL'\n      ]);\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaLink() {\n      return z\n      .object({\n          params: z.record(z.string()).optional().nullable(),\n          rel: z.string().optional().nullable(),\n          rels: z.array(z.string()).optional().nullable(),\n          title: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          uri: z.string().optional().nullable(),\n          uriBuilder: zodSchemaUriBuilder().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaLocale() {\n      return z\n      .object({\n          country: z.string().optional().nullable(),\n          displayCountry: z.string().optional().nullable(),\n          displayLanguage: z.string().optional().nullable(),\n          displayName: z.string().optional().nullable(),\n          displayScript: z.string().optional().nullable(),\n          displayVariant: z.string().optional().nullable(),\n          extensionKeys: z.array(z.string()).optional().nullable(),\n          iSO3Country: z.string().optional().nullable(),\n          iSO3Language: z.string().optional().nullable(),\n          language: z.string().optional().nullable(),\n          script: z.string().optional().nullable(),\n          unicodeLocaleAttributes: z.array(z.string()).optional().nullable(),\n          unicodeLocaleKeys: z.array(z.string()).optional().nullable(),\n          variant: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMediaType() {\n      return z\n      .object({\n          parameters: z.record(z.string()).optional().nullable(),\n          subtype: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          wildcardSubtype: z.boolean().optional().nullable(),\n          wildcardType: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMultivaluedMapStringObject() {\n      return z.record(z.array(z.unknown()));\n  }\n\n  function zodSchemaMultivaluedMapStringString() {\n      return z.record(z.array(z.string()));\n  }\n\n  function zodSchemaNewCookie() {\n      return z\n      .object({\n          comment: z.string().optional().nullable(),\n          domain: z.string().optional().nullable(),\n          expiry: z.string().optional().nullable(),\n          httpOnly: z.boolean().optional().nullable(),\n          maxAge: z.number().int().optional().nullable(),\n          name: z.string().optional().nullable(),\n          path: z.string().optional().nullable(),\n          secure: z.boolean().optional().nullable(),\n          value: z.string().optional().nullable(),\n          version: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageRbacGroup() {\n      return z\n      .object({\n          data: z.array(zodSchemaRbacGroup()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageRbacUser() {\n      return z\n      .object({\n          data: z.array(zodSchemaRbacUser()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacGroup() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string().optional().nullable(),\n          modified: z.string().optional().nullable(),\n          name: z.string().optional().nullable(),\n          platform_default: z.boolean().optional().nullable(),\n          principalCount: z.number().int().optional().nullable(),\n          roleCount: z.number().int().optional().nullable(),\n          system: z.boolean().optional().nullable(),\n          uuid: zodSchemaUUID().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacRaw() {\n      return z\n      .object({\n          data: z.array(z.record(z.unknown())).optional().nullable(),\n          links: z.record(z.string()).optional().nullable(),\n          meta: z.record(z.number().int()).optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacUser() {\n      return z\n      .object({\n          active: z.boolean().optional().nullable(),\n          email: z.string().optional().nullable(),\n          firstName: z.string().optional().nullable(),\n          isActive: z.boolean().optional().nullable(),\n          isOrgAdmin: z.boolean().optional().nullable(),\n          lastName: z.string().optional().nullable(),\n          orgAdmin: z.boolean().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRenderEmailTemplateRequest() {\n      return z\n      .object({\n          body_template: z.string(),\n          payload: z.string(),\n          subject_template: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestEmailSubscriptionProperties() {\n      return z\n      .object({\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaResponse() {\n      return z\n      .object({\n          allowedMethods: z.array(z.string()).optional().nullable(),\n          cookies: z.record(zodSchemaNewCookie()).optional().nullable(),\n          date: z.string().optional().nullable(),\n          entity: z.unknown().optional().nullable(),\n          entityTag: zodSchemaEntityTag().optional().nullable(),\n          headers: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          language: zodSchemaLocale().optional().nullable(),\n          lastModified: z.string().optional().nullable(),\n          length: z.number().int().optional().nullable(),\n          links: z.array(zodSchemaLink()).optional().nullable(),\n          location: z.string().optional().nullable(),\n          mediaType: zodSchemaMediaType().optional().nullable(),\n          metadata: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          status: z.number().int().optional().nullable(),\n          statusInfo: zodSchemaStatusType().optional().nullable(),\n          stringHeaders: zodSchemaMultivaluedMapStringString()\n          .optional()\n          .nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatus() {\n      return z.enum([ 'MAINTENANCE', 'UP' ]);\n  }\n\n  function zodSchemaStatusType() {\n      return z\n      .object({\n          family: zodSchemaFamily().optional().nullable(),\n          reasonPhrase: z.string().optional().nullable(),\n          statusCode: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaUriBuilder() {\n      return z.unknown();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n}\n\nexport namespace Operations {\n  // POST /notifications/behaviorGroups\n  // Create a behavior group.\n  export namespace NotificationServiceCreateBehaviorGroup {\n    export interface Params {\n      body: Schemas.BehaviorGroup;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'BehaviorGroup', 200, Schemas.BehaviorGroup>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/behaviorGroups';\n        const query = {} as Record<string, any>;\n        return actionBuilder('POST', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.BehaviorGroup, 'BehaviorGroup', 200)\n            ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/behaviorGroups/affectedByRemovalOfEndpoint/{endpointId}\n  // Retrieve the behavior groups affected by the removal of an endpoint.\n  export namespace NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint {\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      endpointId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/affectedByRemovalOfEndpoint/{endpointId}'.replace(\n            '{endpointId}',\n            params.endpointId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/behaviorGroups/{behaviorGroupId}/actions\n  // Update the list of actions of a behavior group.\n  export namespace NotificationServiceUpdateBehaviorGroupActions {\n    const Body = z.array(z.string());\n    type Body = Array<string>;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      behaviorGroupId: Schemas.UUID;\n      body: Body;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/{behaviorGroupId}/actions'.replace(\n            '{behaviorGroupId}',\n            params.behaviorGroupId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/behaviorGroups/{id}\n  // Update a behavior group.\n  export namespace NotificationServiceUpdateBehaviorGroup {\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      id: Schemas.UUID;\n      body: Schemas.BehaviorGroup;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /notifications/behaviorGroups/{id}\n  // Delete a behavior group.\n  export namespace NotificationServiceDeleteBehaviorGroup {\n    const Response200 = z.boolean();\n    type Response200 = boolean;\n    export interface Params {\n      id: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/behaviorGroups/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/bundles/{bundleId}/behaviorGroups\n  // Retrieve the behavior groups of a bundle.\n  export namespace NotificationServiceFindBehaviorGroupsByBundleId {\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      bundleId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/bundles/{bundleId}/behaviorGroups'.replace(\n            '{bundleId}',\n            params.bundleId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes\n  // Retrieve all event types. The returned list can be filtered by bundle or application.\n  export namespace NotificationServiceGetEventTypes {\n    const ApplicationIds = z.array(z.string());\n    type ApplicationIds = Array<string>;\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      applicationIds?: ApplicationIds;\n      bundleId?: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/eventTypes';\n        const query = {} as Record<string, any>;\n        if (params.applicationIds !== undefined) {\n            query.applicationIds = params.applicationIds;\n        }\n\n        if (params.bundleId !== undefined) {\n            query.bundleId = params.bundleId;\n        }\n\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes/affectedByRemovalOfBehaviorGroup/{behaviorGroupId}\n  // Retrieve the event types affected by the removal of a behavior group.\n  export namespace NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup {\n    const Response200 = z.array(Schemas.EventType);\n    type Response200 = Array<Schemas.EventType>;\n    export interface Params {\n      behaviorGroupId: Schemas.UUID;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/eventTypes/affectedByRemovalOfBehaviorGroup/{behaviorGroupId}'.replace(\n            '{behaviorGroupId}',\n            params.behaviorGroupId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/eventTypes/{eventTypeId}/behaviorGroups\n  // Retrieve the behavior groups linked to an event type.\n  export namespace NotificationServiceGetLinkedBehaviorGroups {\n    const Limit = z.number().int();\n    type Limit = number;\n    const Offset = z.number().int();\n    type Offset = number;\n    const PageNumber = z.number().int();\n    type PageNumber = number;\n    const SortBy = z.string();\n    type SortBy = string;\n    const Response200 = z.array(Schemas.BehaviorGroup);\n    type Response200 = Array<Schemas.BehaviorGroup>;\n    export interface Params {\n      eventTypeId: Schemas.UUID;\n      limit?: Limit;\n      offset?: Offset;\n      pageNumber?: PageNumber;\n      sortBy?: SortBy;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups'.replace(\n            '{eventTypeId}',\n            params.eventTypeId.toString()\n        );\n        const query = {} as Record<string, any>;\n        if (params.limit !== undefined) {\n            query.limit = params.limit;\n        }\n\n        if (params.offset !== undefined) {\n            query.offset = params.offset;\n        }\n\n        if (params.pageNumber !== undefined) {\n            query.pageNumber = params.pageNumber;\n        }\n\n        if (params.sortBy !== undefined) {\n            query.sort_by = params.sortBy;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // PUT /notifications/eventTypes/{eventTypeId}/behaviorGroups\n  // Update the list of behavior groups of an event type.\n  export namespace NotificationServiceUpdateEventTypeBehaviors {\n    const Body = z.array(z.string());\n    type Body = Array<string>;\n    const Response200 = z.string();\n    type Response200 = string;\n    export interface Params {\n      eventTypeId: Schemas.UUID;\n      body: Body;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path =\n        '/api/notifications/v1.0/notifications/eventTypes/{eventTypeId}/behaviorGroups'.replace(\n            '{eventTypeId}',\n            params.eventTypeId.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('PUT', path)\n        .queryParams(query)\n        .data(params.body)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/facets/applications\n  // Return a thin list of configured applications. This can be used to configure a filter in the UI\n  export namespace NotificationServiceGetApplicationsFacets {\n    const BundleName = z.string();\n    type BundleName = string;\n    const Response200 = z.array(Schemas.Facet);\n    type Response200 = Array<Schemas.Facet>;\n    export interface Params {\n      bundleName?: BundleName;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/facets/applications';\n        const query = {} as Record<string, any>;\n        if (params.bundleName !== undefined) {\n            query.bundleName = params.bundleName;\n        }\n\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // GET /notifications/facets/bundles\n  // Return a thin list of configured bundles. This can be used to configure a filter in the UI\n  export namespace NotificationServiceGetBundleFacets {\n    const Response200 = z.array(Schemas.Facet);\n    type Response200 = Array<Schemas.Facet>;\n    export type Payload =\n      | ValidatedResponse<'unknown', 200, Response200>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/facets/bundles';\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response200, 'unknown', 200) ]\n        })\n        .build();\n    };\n  }\n  // DELETE /notifications/{id}\n  export namespace NotificationServiceMarkRead {\n    const Id = z.number().int();\n    type Id = number;\n    const Response204 = z.string();\n    type Response204 = string;\n    export interface Params {\n      id: Id;\n    }\n\n    export type Payload =\n      | ValidatedResponse<'unknown', 204, Response204>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (params: Params): ActionCreator => {\n        const path = '/api/notifications/v1.0/notifications/{id}'.replace(\n            '{id}',\n            params.id.toString()\n        );\n        const query = {} as Record<string, any>;\n        return actionBuilder('DELETE', path)\n        .queryParams(query)\n        .config({\n            rules: [ new ValidateRule(Response204, 'unknown', 204) ]\n        })\n        .build();\n    };\n  }\n}\n","import { Schemas } from '../generated/OpenapiNotifications';\nimport { UserIntegration } from './Integration';\nimport { NotificationRecipient } from './Recipient';\n\nexport type UUID = Schemas.UUID;\n\nexport interface NotificationBase {\n    id: UUID;\n    applicationDisplayName: string;\n    eventTypeDisplayName: string;\n}\n\nexport interface Notification extends NotificationBase {\n    actions?: Array<Action>;\n    useDefault?: boolean;\n}\n\nexport interface NotificationBehaviorGroup extends NotificationBase {\n    readonly behaviors: ReadonlyArray<BehaviorGroup>;\n}\n\nexport type IntegrationRef = Pick<UserIntegration, 'id' | 'name' | 'type' | 'isEnabled'>\n\nexport interface DefaultNotificationBehavior {\n    actions: Array<Action>;\n}\n\nexport interface ActionBase {\n    type: NotificationType;\n}\n\nexport interface ActionIntegration extends ActionBase {\n    type: NotificationType.INTEGRATION;\n    integration: IntegrationRef;\n}\n\nexport interface ActionNotify extends ActionBase {\n    type: NotificationType.EMAIL_SUBSCRIPTION | NotificationType.DRAWER;\n    recipient: ReadonlyArray<NotificationRecipient>;\n}\n\nexport type Action = ActionIntegration | ActionNotify;\n\nexport const isActionNotify = (action: Action): action is ActionNotify =>\n    action.type === NotificationType.EMAIL_SUBSCRIPTION || action.type === NotificationType.DRAWER;\n\nexport const isActionIntegration = (action: Action): action is ActionIntegration =>\n    action.type === NotificationType.INTEGRATION;\n\nexport enum NotificationType {\n    EMAIL_SUBSCRIPTION = 'EMAIL_SUBSCRIPTION',\n    DRAWER = 'DRAWER',\n    INTEGRATION = 'INTEGRATION'\n}\n\nexport type Facet = Schemas.Facet;\n\nexport type ServerNotificationRequest = Schemas.EventType;\nexport type ServerNotificationResponse = Schemas.EventType;\n\nexport type BehaviorGroup = {\n    readonly id: UUID;\n    readonly actions: ReadonlyArray<Action>;\n    readonly bundleId: UUID,\n    readonly displayName: string;\n    readonly bundleName: string;\n}\n\nexport type NewBehaviorGroup = Partial<Pick<BehaviorGroup, 'id'>> & Omit<BehaviorGroup, 'id'>;\n\nexport type EmailSystemProperties = {\n    type: NotificationType.EMAIL_SUBSCRIPTION;\n    props: {\n        onlyAdmins: boolean;\n        ignorePreferences: false;\n        groupId: undefined;\n    }\n}\nexport type SystemProperties = EmailSystemProperties;\n","import { IntegrationRef, UUID } from './Notification';\n\nexport abstract class Recipient {\n    readonly displayName: string;\n\n    protected constructor(displayName: string) {\n        this.displayName = displayName;\n    }\n\n    public abstract getKey();\n    public abstract equals(recipient: Recipient);\n}\n\nexport class IntegrationRecipient extends Recipient {\n    readonly integration: IntegrationRef;\n\n    public constructor(integration: IntegrationRef) {\n        super(integration.name + (integration.isEnabled ? '' : ' - Disabled'));\n        this.integration = integration;\n    }\n\n    public getKey() {\n        return this.integration.id;\n    }\n\n    public equals(recipient: Recipient) {\n        if (recipient instanceof IntegrationRecipient) {\n            return recipient.integration.id === this.integration.id;\n        }\n\n        return false;\n    }\n}\n\nexport class NotificationRecipient extends Recipient {\n    readonly sendToAdmin: boolean;\n    readonly integrationId: UUID | undefined;\n    readonly key: string;\n\n    public constructor(integrationId: UUID | undefined, sendToAdmin: boolean) {\n        let displayName = 'Users:';\n        if (sendToAdmin) {\n            displayName += ' Admins';\n        } else {\n            displayName += ' All';\n        }\n\n        super(displayName);\n        this.key = sendToAdmin ? 'admin' : 'user';\n        this.sendToAdmin = sendToAdmin;\n        this.integrationId = integrationId;\n    }\n\n    public getKey() {\n        return this.key;\n    }\n\n    public equals(recipient: Recipient) {\n        if (recipient instanceof NotificationRecipient) {\n            return recipient.sendToAdmin === this.sendToAdmin;\n        }\n\n        return false;\n    }\n}\n\n","import { assertNever } from 'assert-never';\nimport produce, { castDraft } from 'immer';\n\nimport { Schemas } from '../../generated/OpenapiNotifications';\nimport { IntegrationEmailSubscription, ServerIntegrationResponse, UserIntegration } from '../Integration';\nimport {\n    Action, ActionNotify,\n    NotificationBase,\n    NotificationType,\n    ServerNotificationResponse,\n    SystemProperties\n} from '../Notification';\nimport { NotificationRecipient } from '../Recipient';\nimport { toIntegration } from './IntegrationAdapter';\n\nconst _toAction = (type: NotificationType, serverAction: ServerIntegrationResponse): Action => {\n    if (type === NotificationType.INTEGRATION) {\n        const userIntegration = toIntegration(serverAction) as UserIntegration;\n        return {\n            type,\n            integration: userIntegration\n        };\n    }\n\n    const integration = toIntegration(serverAction) as IntegrationEmailSubscription;\n\n    return {\n        type,\n        recipient: [ new NotificationRecipient(integration.id, integration.onlyAdmin) ]\n    };\n};\n\nexport const usesDefault = (endpoints: Array<Schemas.Endpoint>): boolean =>\n    endpoints.findIndex(e => e.type === Schemas.EndpointType.enum.default) !== -1;\n\nexport const toNotification = (serverNotification: ServerNotificationResponse): NotificationBase => {\n    if (!serverNotification.id || !serverNotification.application) {\n        throw new Error(`Unexpected notification from server ${JSON.stringify(serverNotification)}`);\n    }\n\n    return {\n        id: serverNotification.id,\n        applicationDisplayName: serverNotification.application.display_name,\n        eventTypeDisplayName: serverNotification.display_name\n    };\n};\n\nexport const toAction = (serverAction: ServerIntegrationResponse): Action => {\n    switch (serverAction.type) {\n        case Schemas.EndpointType.enum.webhook:\n            return _toAction(NotificationType.INTEGRATION, serverAction);\n        case Schemas.EndpointType.enum.camel:\n            return _toAction(NotificationType.INTEGRATION, serverAction);\n        case Schemas.EndpointType.enum.email_subscription:\n            return _toAction(NotificationType.EMAIL_SUBSCRIPTION, serverAction);\n        case Schemas.EndpointType.enum.default:\n            throw new Error('EndpointType.default should not reach this point');\n        default:\n            assertNever(serverAction.type);\n    }\n};\n\nexport const reduceActions = (actions: ReadonlyArray<Action>): ReadonlyArray<Action> => actions.reduce((actions, current) => {\n    return produce(actions, draft => {\n        if (current.type === NotificationType.EMAIL_SUBSCRIPTION) {\n            const existingAction = draft.find(a => a.type === current.type) as ActionNotify;\n            if (existingAction) {\n                castDraft(existingAction.recipient).push(current.recipient[0]);\n            } else {\n                draft.push(castDraft(current));\n            }\n        } else {\n            draft.push(castDraft(current));\n        }\n    });\n}, [] as ReadonlyArray<Action>);\n\nexport const toNotifications = (serverNotifications: Array<ServerNotificationResponse>) => serverNotifications.map(toNotification);\n\nexport const toSystemProperties = (action: Action): ReadonlyArray<SystemProperties> => {\n    if (action.type === NotificationType.EMAIL_SUBSCRIPTION) {\n        return action.recipient.map(r => ({\n            type: NotificationType.EMAIL_SUBSCRIPTION,\n            props: {\n                onlyAdmins: r.sendToAdmin,\n                ignorePreferences: false,\n                groupId: undefined\n            }\n        }));\n    } else {\n        throw new Error(`No system properties for type ${action.type}`);\n    }\n};\n","import { Schemas } from '../../generated/OpenapiNotifications';\nimport { BehaviorGroup, NewBehaviorGroup } from '../Notification';\nimport { reduceActions, toAction } from './NotificationAdapter';\n\ntype ServerBehaviorGroup = Schemas.BehaviorGroup;\n\nconst reportBehaviorGroup = (element: ServerBehaviorGroup): never => {\n    throw new Error('Invalid behavior group:' + JSON.stringify(element));\n};\n\nexport const toBehaviorGroup = (serverBehaviorGroup: ServerBehaviorGroup): BehaviorGroup => {\n    const actions = serverBehaviorGroup.actions?.map((behaviorAction) => {\n        if (behaviorAction.endpoint) {\n            return toAction(behaviorAction.endpoint);\n        }\n\n        return reportBehaviorGroup(serverBehaviorGroup);\n    }) || [];\n\n    return {\n        actions: reduceActions(actions),\n        bundleId: serverBehaviorGroup.bundle_id,\n        displayName: serverBehaviorGroup.display_name,\n        id: serverBehaviorGroup.id ?? reportBehaviorGroup(serverBehaviorGroup),\n        bundleName: serverBehaviorGroup.bundle?.display_name ?? ''\n    };\n};\n\nexport const toShallowBehaviorGroupRequest = (behaviorGroup: BehaviorGroup | NewBehaviorGroup): ServerBehaviorGroup => {\n    return {\n        bundle_id: behaviorGroup.bundleId,\n        display_name: behaviorGroup.displayName\n    };\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useParameterizedQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toBehaviorGroup } from '../../types/adapters/BehaviorGroupAdapter';\n\nconst behaviorGroupsForEndpointActionCreator = (integrationId: string) => {\n    return Operations.NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint.actionCreator({\n        endpointId: integrationId\n    });\n};\n\nconst defaultBehaviorGroupDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetBehaviorGroupsAffectedByRemovalOfEndpoint.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroups',\n                200,\n                payload.value.map(toBehaviorGroup),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetAffectedBehaviorGroupsByEndpoint = () =>\n    useTransformQueryResponse(useParameterizedQuery(behaviorGroupsForEndpointActionCreator), defaultBehaviorGroupDecoder);\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiIntegrations';\n\nexport const deleteIntegrationActionCreator = (integrationId: string) => {\n    return Operations.EndpointServiceDeleteEndpoint.actionCreator({\n        id: integrationId\n    });\n};\n\nexport const useDeleteIntegration = () => useMutation<boolean>(deleteIntegrationActionCreator);\n","import {\n    ActionModalError,\n    addSuccessNotification,\n    OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { IntegrationDeleteModal } from '../../../components/Integrations/DeleteModal';\nimport { useGetAffectedBehaviorGroupsByEndpoint } from '../../../services/Notifications/GetAffectedBehaviorGroupsByEndpoint';\nimport { useDeleteIntegration } from '../../../services/useDeleteIntegration';\nimport { UserIntegration } from '../../../types/Integration';\n\ninterface IntegrationDeleteModalPageProps extends OuiaComponentProps {\n    onClose: (deleted: boolean) => void;\n    integration: UserIntegration;\n}\n\nexport const IntegrationDeleteModalPage: React.FunctionComponent<IntegrationDeleteModalPageProps> = (props) => {\n\n    const deleteIntegrationMutation = useDeleteIntegration();\n    const getBehaviorGroupsQuery = useGetAffectedBehaviorGroupsByEndpoint();\n    const [ hasError, setError ] = React.useState(false);\n\n    const onDelete = React.useCallback((integration: UserIntegration) => {\n        const deleteIntegration = deleteIntegrationMutation.mutate;\n        setError(false);\n        return deleteIntegration(integration.id).then((response) => {\n            if (!response.error) {\n                addSuccessNotification('Integration removed', 'The integration was removed.');\n                return true;\n            } else {\n                setError(true);\n                return false;\n            }\n        });\n    }, [ deleteIntegrationMutation.mutate, setError ]);\n\n    const error = React.useMemo<ActionModalError | undefined>(() => {\n        if (hasError) {\n            return {\n                title: 'Failed to remove Integration',\n                description: <p>There was an error trying to remove the Integration. Please try again.</p>\n            };\n        }\n\n        return undefined;\n    }, [ hasError ]);\n\n    React.useEffect(() => {\n        const query = getBehaviorGroupsQuery.query;\n        query(props.integration.id);\n    }, [ props.integration, getBehaviorGroupsQuery.query ]);\n\n    const behaviorGroups = React.useMemo(() => {\n        const payload = getBehaviorGroupsQuery.payload;\n        if (payload && payload.type === 'BehaviorGroups') {\n            return payload.value;\n        }\n\n        return undefined;\n    }, [ getBehaviorGroupsQuery.payload ]);\n\n    return (\n        <IntegrationDeleteModal\n            integration={ props.integration }\n            behaviorGroups={ behaviorGroups }\n            isDeleting={ deleteIntegrationMutation.loading }\n            onClose={ props.onClose }\n            onDelete={ onDelete }\n            error={ error }\n        />\n    );\n};\n","import {\n    useFilters,\n    useUrlStateMultipleOptions,\n    useUrlStateString\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\n\nimport { IntegrationFilterColumn } from '../../../components/Integrations/Filters';\n\nconst DEBOUNCE_MS = 250;\n\nconst useUrlStateName = (defaultValue?: string) => useUrlStateString('name', defaultValue);\nconst useUrlStateEnabled = (_defaultValue?: string) => useUrlStateMultipleOptions('enabled', [ 'Enabled', 'Disabled' ]);\n\nconst useStateFactory = (column: IntegrationFilterColumn) => {\n    switch (column) {\n        case IntegrationFilterColumn.NAME:\n            return useUrlStateName;\n        case IntegrationFilterColumn.ENABLED:\n            return useUrlStateEnabled;\n        default:\n            assertNever(column);\n    }\n};\n\nexport const useIntegrationFilter = (debounce = DEBOUNCE_MS) => {\n    return useFilters(IntegrationFilterColumn, debounce, useStateFactory);\n};\n","import { Operations } from '../generated/OpenapiIntegrations';\n\nexport const listIntegrationHistoryActionCreator = (integrationId: string) => {\n    return Operations.EndpointServiceGetEndpointHistory.actionCreator({\n        id: integrationId\n    });\n};\n","import { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport pLimit from 'p-limit';\nimport { useCallback, useContext, useEffect, useState } from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { format } from 'react-string-format';\nimport { usePrevious } from 'react-use';\n\nimport { IntegrationRow } from '../../../components/Integrations/Table';\nimport { Messages } from '../../../properties/Messages';\nimport { listIntegrationHistoryActionCreator } from '../../../services/useListIntegrationHistory';\nimport {\n    switchIntegrationEnabledStatusActionCreator\n} from '../../../services/useSwitchIntegrationEnabledStatus';\nimport { SavedNotificationScopeActions } from '../../../store/actions/SavedNotificationScopeAction';\nimport { NotificationAppState } from '../../../store/types/NotificationAppState';\nimport { SavedNotificationScopeState, Status } from '../../../store/types/SavedNotificationScopeTypes';\nimport { UserIntegration } from '../../../types/Integration';\n\nconst notificationAppStateSelector = (state: NotificationAppState): SavedNotificationScopeState => state.savedNotificationScope;\n\nconst notificationAppStateEqualFn = (left: SavedNotificationScopeState, right: SavedNotificationScopeState): boolean => {\n    return left?.integration === right?.integration && left?.status === right?.status;\n};\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nexport const useIntegrationRows = (integrations: Array<UserIntegration>) => {\n    const [ integrationRows, setIntegrationRows ] = useState<Array<IntegrationRow>>([]);\n    const prevIntegrationsInput = usePrevious(integrations);\n\n    const reduxDispatch = useDispatch();\n    const savedNotificationScope = useSelector<NotificationAppState, SavedNotificationScopeState>(\n        notificationAppStateSelector, notificationAppStateEqualFn\n    );\n\n    const { query } = useContext(ClientContext);\n    const [ limit ] = useState<pLimit.Limit>(() => pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS));\n\n    const setIntegrationRowByIndex = useCallback((index: number, partialIntegration: Partial<IntegrationRow>) => {\n        setIntegrationRows(prevIntegrations => {\n            const newIntegrations = [ ...prevIntegrations ];\n            newIntegrations[index] = { ...newIntegrations[index], ...partialIntegration } as IntegrationRow;\n            return newIntegrations;\n        });\n    }, [ setIntegrationRows ]);\n\n    const setIntegrationRowById = useCallback((id: string, partialIntegration: Partial<IntegrationRow>) => {\n        setIntegrationRows(prevIntegrations => {\n            const index = prevIntegrations.findIndex(integration => integration.id === id);\n            if (index === -1) {\n                return prevIntegrations;\n            }\n\n            const newIntegrations = [ ...prevIntegrations ];\n            newIntegrations[index] = { ...newIntegrations[index], ...partialIntegration } as IntegrationRow;\n            return newIntegrations;\n        });\n    }, [ setIntegrationRows ]);\n\n    useEffect(() => {\n        if (integrations !== prevIntegrationsInput) {\n            setIntegrationRows(prev => {\n                return integrations.map(integration => ({\n                    isOpen: false,\n                    isSelected: false,\n                    isEnabledLoading: false,\n                    lastConnectionAttempts: [],\n                    isConnectionAttemptLoading: true,\n                    ...prev.find(i => i.id === integration.id),\n                    ...integration\n                }));\n            });\n\n            if (integrations) {\n                limit.clearQueue();\n\n                integrations.map(integration => integration.id).forEach(integrationId => {\n                    limit(() => query(listIntegrationHistoryActionCreator(integrationId))).then(response => {\n\n                        if (response.payload && response.payload.status === 200) {\n                            const last5 = (response.payload.value.reverse().slice(0, 5)).map(p => ({\n                                isSuccess: !!p.invocationResult,\n                                date: new Date(p.created as string)\n                            }));\n                            setIntegrationRowById(integrationId, {\n                                isConnectionAttemptLoading: false,\n                                lastConnectionAttempts: last5\n                            });\n                        } else {\n                            setIntegrationRowById(integrationId, {\n                                isConnectionAttemptLoading: false,\n                                lastConnectionAttempts: undefined\n                            });\n                        }\n                    });\n                });\n            }\n        }\n    }, [ prevIntegrationsInput, integrations, setIntegrationRowById, limit, query ]);\n\n    const onCollapse = useCallback((_integration: IntegrationRow, index: number, isOpen: boolean) => {\n        setIntegrationRowByIndex(index, {\n            isOpen\n        });\n    }, [ setIntegrationRowByIndex ]);\n\n    const onEnable = useCallback((_integration: UserIntegration, index: number, isEnabled: boolean) => {\n        setIntegrationRowByIndex(index, {\n            isEnabledLoading: true\n        });\n\n        if (savedNotificationScope) {\n            if (_integration.id === savedNotificationScope.integration.id) {\n                reduxDispatch(SavedNotificationScopeActions.start());\n            }\n        }\n\n        query(switchIntegrationEnabledStatusActionCreator(_integration)).then((response) => {\n            if (!response.error) {\n                setIntegrationRowByIndex(index, {\n                    isEnabled,\n                    isEnabledLoading: false\n                });\n                if (savedNotificationScope) {\n                    if (_integration.id === savedNotificationScope.integration.id) {\n                        reduxDispatch(SavedNotificationScopeActions.finish(isEnabled));\n                    }\n                }\n            } else {\n                const message = isEnabled ? Messages.components.integrations.enableError : Messages.components.integrations.disableError;\n\n                if (savedNotificationScope) {\n                    if (_integration.id === savedNotificationScope.integration.id) {\n                        reduxDispatch(SavedNotificationScopeActions.finish(_integration.isEnabled));\n                    }\n                }\n\n                addDangerNotification(\n                    message.title,\n                    format(message.description, _integration.name),\n                    true);\n                setIntegrationRowByIndex(index, {\n                    isEnabled: _integration.isEnabled,\n                    isEnabledLoading: false\n                });\n            }\n        });\n\n    }, [ setIntegrationRowByIndex, query, reduxDispatch, savedNotificationScope ]);\n\n    useEffect(() => {\n        if (savedNotificationScope) {\n            if (savedNotificationScope.status === Status.LOADING) {\n                setIntegrationRowById(\n                    savedNotificationScope.integration.id,\n                    { isEnabledLoading: true }\n                );\n            } else {\n                setIntegrationRowById(\n                    savedNotificationScope.integration.id,\n                    { isEnabledLoading: false, isEnabled: savedNotificationScope.integration.isEnabled }\n                );\n            }\n        }\n    }, [ savedNotificationScope, setIntegrationRowById ]);\n\n    return {\n        rows: integrationRows,\n        onCollapse,\n        onEnable\n    };\n};\n","import { Main, PageHeader, PageHeaderTitle, Section } from '@redhat-cloud-services/frontend-components';\nimport {\n    addDangerNotification,\n    ExporterType,\n    Filter,\n    Operator,\n    Page\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { format } from 'date-fns';\nimport inBrowserDownload from 'in-browser-download';\nimport * as React from 'react';\nimport { useContext } from 'react';\n\nimport { AppContext } from '../../../app/AppContext';\nimport { IntegrationFilters } from '../../../components/Integrations/Filters';\nimport { IntegrationsTable } from '../../../components/Integrations/Table';\nimport { IntegrationsToolbar } from '../../../components/Integrations/Toolbar';\nimport { useDeleteModalReducer } from '../../../hooks/useDeleteModalReducer';\nimport { useFormModalReducer } from '../../../hooks/useFormModalReducer';\nimport { usePage } from '../../../hooks/usePage';\nimport { Messages } from '../../../properties/Messages';\nimport { useListIntegrationPQuery, useListIntegrationsQuery } from '../../../services/useListIntegrations';\nimport { IntegrationType, UserIntegration } from '../../../types/Integration';\nimport { integrationExporterFactory } from '../../../utils/exporters/Integration/Factory';\nimport { CreatePage } from '../Create/CreatePage';\nimport { IntegrationDeleteModalPage } from '../Delete/DeleteModal';\nimport { useActionResolver } from './useActionResolver';\nimport { useIntegrationFilter } from './useIntegrationFilter';\nimport { useIntegrationRows } from './useIntegrationRows';\n\nconst integrationFilterBuilder = (filters?: IntegrationFilters) => {\n    const filter = new Filter();\n    if (filters?.enabled?.length === 1) {\n        const isEnabled = filters.enabled[0].toLocaleLowerCase() === 'enabled';\n        filter.and('active', Operator.EQUAL, isEnabled.toString());\n    }\n\n    return filter.and('type', Operator.EQUAL, IntegrationType.WEBHOOK);\n};\n\nconst userIntegrationCopier = (userIntegration: Partial<UserIntegration>) => ({\n    ...userIntegration,\n    name: `Copy of ${userIntegration.name}`\n});\n\nexport const IntegrationsListPage: React.FunctionComponent = () => {\n\n    const { rbac: { canWriteIntegrationsEndpoints }} = useContext(AppContext);\n    const integrationFilter = useIntegrationFilter();\n    const pageData = usePage<IntegrationFilters>(10, integrationFilterBuilder, integrationFilter.filters);\n    const integrationsQuery = useListIntegrationsQuery(pageData.page);\n    const exportIntegrationsQuery = useListIntegrationPQuery();\n\n    const integrations = React.useMemo(() => {\n        const payload = integrationsQuery.payload;\n        if (payload?.type === 'IntegrationPage') {\n            return payload.value;\n        }\n\n        return {\n            data: [],\n            count: 0\n        };\n    }, [ integrationsQuery.payload ]);\n\n    const integrationRows = useIntegrationRows(integrations.data);\n    const [ modalIsOpenState, modalIsOpenActions ] = useFormModalReducer<UserIntegration>(userIntegrationCopier);\n    const [ deleteModalState, deleteModalActions ] = useDeleteModalReducer<UserIntegration>();\n\n    const onAddIntegrationClicked = React.useCallback(() => {\n        modalIsOpenActions.create();\n    }, [ modalIsOpenActions ]);\n\n    const onEdit = React.useCallback((integration: UserIntegration) => {\n        modalIsOpenActions.edit(integration);\n    }, [ modalIsOpenActions ]);\n\n    const onDelete = React.useCallback((integration: UserIntegration) => {\n        deleteModalActions.delete(integration);\n    }, [ deleteModalActions ]);\n\n    const onExport = React.useCallback(async (type: ExporterType) => {\n        const query = exportIntegrationsQuery.query;\n        const exporter = integrationExporterFactory(type);\n        const exportedIntegrations: Array<UserIntegration> = [];\n        let page = Page.of(1, 100, new Filter().and('type', Operator.EQUAL, 'webhook'));\n        while (true) {\n            const data = await query(page);\n            if (data?.payload?.status !== 200) {\n                if (exportedIntegrations.length === 0) {\n                    addDangerNotification(\n                        'Unable to download integrations',\n                        'We were unable to download the integrations for exporting. Please try again.'\n                    );\n                    return;\n                } else {\n                    addDangerNotification(\n                        'Unable to download all integrations',\n                        `We were unable to download all the integrations for exporting. Downloading: ${exportedIntegrations.length}.`\n                    );\n                    break;\n                }\n            }\n\n            if (data.payload.value.data.length === 0) {\n                break;\n            }\n\n            page = page.nextPage();\n            exportedIntegrations.push(...data.payload.value.data);\n        }\n\n        if (exportedIntegrations) {\n            inBrowserDownload(\n                exporter.export(exportedIntegrations),\n                `integrations-${format(new Date(Date.now()), 'y-dd-MM')}.${exporter.type}`\n            );\n        }\n    }, [ exportIntegrationsQuery ]);\n\n    const actionResolver = useActionResolver({\n        canWrite: canWriteIntegrationsEndpoints,\n        onEdit,\n        onDelete,\n        onEnable: integrationRows.onEnable\n    });\n\n    const closeFormModal = React.useCallback((saved: boolean) => {\n        const query = integrationsQuery.query;\n        modalIsOpenActions.reset();\n        if (saved) {\n            query();\n        }\n    }, [ modalIsOpenActions, integrationsQuery.query ]);\n\n    const closeDeleteModal = React.useCallback((deleted: boolean) => {\n        const query = integrationsQuery.query;\n        if (deleted) {\n            query();\n        }\n\n        deleteModalActions.reset();\n    }, [ deleteModalActions, integrationsQuery.query ]);\n\n    // This is an estimate of how many rows are in the next page (Won't be always correct because a new row could be added while we are browsing)\n    // Is used for the skeleton loading\n    const loadingCount = Math.min(pageData.page.size, integrations.count - (pageData.page.index - 1) * pageData.page.size)  || 10;\n\n    return (\n        <>\n            <PageHeader>\n                <PageHeaderTitle title={ Messages.pages.integrations.list.title } />\n            </PageHeader>\n            <Main>\n                <Section className='pf-c-page__main-section pf-m-light'>\n                    <IntegrationsToolbar\n                        onAddIntegration={ canWriteIntegrationsEndpoints ? onAddIntegrationClicked : undefined }\n                        onExport={ onExport }\n                        filters={ integrationFilter.filters }\n                        setFilters={ integrationFilter.setFilters }\n                        clearFilters={ integrationFilter.clearFilter }\n                        count={ integrations.count || 0 }\n                        pageCount={ integrations.data.length }\n                        page={ pageData.page.index }\n                        perPage={ pageData.page.size }\n                        pageChanged={ pageData.changePage }\n                        perPageChanged={ pageData.changeItemsPerPage }\n                    >\n                        <IntegrationsTable\n                            isLoading={ integrationsQuery.loading }\n                            loadingCount={ loadingCount }\n                            integrations={ integrationRows.rows }\n                            onCollapse={ integrationRows.onCollapse }\n                            onEnable={ canWriteIntegrationsEndpoints ? integrationRows.onEnable : undefined }\n                            actionResolver={ actionResolver }\n                        />\n                    </IntegrationsToolbar>\n                    { modalIsOpenState.isOpen && (\n                        <CreatePage\n                            isEdit={ modalIsOpenState.isEdit }\n                            initialIntegration={ modalIsOpenState.template || {} }\n                            onClose={ closeFormModal }\n                        />\n                    ) }\n                    { deleteModalState.data && (\n                        <IntegrationDeleteModalPage\n                            onClose={ closeDeleteModal }\n                            integration={ deleteModalState.data }\n                        />\n                    )}\n                </Section>\n            </Main>\n        </>\n    );\n};\n","import { useParameterizedQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const getApplicationsAction = (bundleName: string) => Operations.NotificationServiceGetApplicationsFacets.actionCreator({\n    bundleName\n});\n\nexport const useGetApplications = () => useParameterizedQuery(getApplicationsAction);\n","export const emptyImmutableArray = Object.freeze([]);\nexport const emptyImmutableObject = Object.freeze({});\n","interface HasId<ID> {\n    id: ID\n}\n\nexport const findByKey = <T, KEY extends keyof T>(val: T[KEY], key: KEY) => (value: T) => value[key] === val;\nexport const findById = <T extends HasId<T['id']>>(id: T['id']) => findByKey<T, 'id'>(id, 'id');\n","import {\n    Chip, ChipGroup,\n    OptionsMenu,\n    OptionsMenuItem,\n    OptionsMenuToggle,\n    Split,\n    SplitItem\n} from '@patternfly/react-core';\nimport { BellSlashIcon } from '@patternfly/react-icons';\nimport { TableText } from '@patternfly/react-table';\nimport { global_palette_black_400 } from '@patternfly/react-tokens';\nimport * as React from 'react';\n\nimport { BehaviorGroupContent } from '../../../pages/Notifications/List/useBehaviorGroupContent';\nimport { BehaviorGroup, NotificationBehaviorGroup } from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\nimport { emptyImmutableObject } from '../../../utils/Immutable';\n\ninterface BehaviorGroupCellProps {\n    id: string;\n    notification: NotificationBehaviorGroup;\n    behaviorGroupContent: BehaviorGroupContent;\n    selected: ReadonlyArray<BehaviorGroup>;\n    onSelect?: (notification: NotificationBehaviorGroup, behaviorGroup: BehaviorGroup, linkBehavior: boolean) => void;\n    isEditMode: boolean;\n}\n\ninterface BehaviorGroupChip {\n    behaviorGroup: BehaviorGroup;\n    notification: BehaviorGroupCellProps['notification'];\n    onSelect?: BehaviorGroupCellProps['onSelect'];\n}\n\nconst BehaviorGroupChip: React.FunctionComponent<BehaviorGroupChip> = props => {\n    const unlink = React.useCallback(() => {\n        const onSelect = props.onSelect;\n        if (onSelect) {\n            onSelect(props.notification, props.behaviorGroup, false);\n        }\n    }, [ props.onSelect, props.behaviorGroup, props.notification ]);\n\n    return <Chip onClick={ unlink }>\n        { props.behaviorGroup.displayName }\n    </Chip>;\n};\n\nexport const BehaviorGroupCell: React.FunctionComponent<BehaviorGroupCellProps> = props => {\n\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const onSelected = React.useCallback((event?: React.MouseEvent<HTMLAnchorElement> | React.KeyboardEvent) => {\n        const dataset = (event?.currentTarget?.firstChild as HTMLElement)?.dataset ?? emptyImmutableObject;\n        const onSelect = props.onSelect;\n        if (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError && onSelect) {\n            if (dataset.behaviorGroupId) {\n                const found = props.behaviorGroupContent.content.find(findById(dataset.behaviorGroupId));\n                if (found) {\n                    const isSelected = !!props.selected.find(findById(found.id));\n                    onSelect(props.notification, found, !isSelected);\n                }\n            }\n        }\n    }, [ props.onSelect, props.behaviorGroupContent, props.notification, props.selected ]);\n\n    const items = React.useMemo(() => {\n        if (props.behaviorGroupContent.isLoading || props.behaviorGroupContent.hasError) {\n            return [\n                <OptionsMenuItem key=\"is-loading\" isDisabled>Loading</OptionsMenuItem>\n            ];\n        }\n\n        return props.behaviorGroupContent.content.map(bg => {\n            const selected = !!props.selected.find(findById(bg.id));\n\n            return (\n                <OptionsMenuItem\n                    key={ bg.id }\n                    onSelect={ onSelected }\n                    data-behavior-group-id={ bg.id }\n                    isSelected={ selected }\n                >\n                    { bg.displayName }\n                </OptionsMenuItem>\n            );\n        });\n    }, [ props.behaviorGroupContent, props.selected, onSelected ]);\n\n    const toggle = React.useMemo(() => {\n        return (\n            <OptionsMenuToggle onToggle={ setOpen } toggleTemplate={ (\n                <ChipGroup>\n                    { props.selected.map(value => (\n                        <BehaviorGroupChip key={ value.id } behaviorGroup={ value } notification={ props.notification } onSelect={ props.onSelect } />\n                    )) }\n                </ChipGroup>\n            ) } />\n        );\n    }, [ props.selected, props.notification, props.onSelect ]);\n\n    const readonlyText = React.useMemo(() => {\n        if (props.selected.length === 0) {\n            return <Split hasGutter>\n                <SplitItem><BellSlashIcon color={ global_palette_black_400.value } /></SplitItem>\n                <SplitItem>Mute</SplitItem>\n            </Split>;\n        }\n\n        return props.selected.map(v => v.displayName).join(', ');\n    }, [ props.selected ]);\n\n    if (!props.isEditMode) {\n        return <TableText wrapModifier=\"truncate\"> { readonlyText } </TableText>;\n    }\n\n    return <OptionsMenu id={ props.id } direction=\"up\" menuItems={ items } toggle={ toggle } isOpen={ isOpen } menuAppendTo={ document.body } />;\n};\n","import { Button, ButtonVariant, Skeleton } from '@patternfly/react-core';\nimport { CheckIcon, CloseIcon, PencilAltIcon } from '@patternfly/react-icons';\nimport { cellWidth, IActions, ICell, IRowData, Table, TableBody, TableHeader, TableVariant } from '@patternfly/react-table';\nimport { global_active_color_100, global_disabled_color_100, global_palette_black_600 } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroupContent } from '../../pages/Notifications/List/useBehaviorGroupContent';\nimport { BehaviorGroupNotificationRow } from '../../pages/Notifications/List/useBehaviorGroupNotificationRows';\nimport { BehaviorGroup, NotificationBehaviorGroup, UUID } from '../../types/Notification';\nimport { emptyImmutableArray } from '../../utils/Immutable';\nimport { ouia } from '../Ouia';\nimport { BehaviorGroupCell } from './Table/BehaviorGroupCell';\n\ntype OnNotificationIdHandler = (notificationId: UUID) => void;\nexport type OnBehaviorGroupLinkUpdated = (notification: NotificationBehaviorGroup, behaviorGroup: BehaviorGroup, isLinked: boolean) => void;\n\nexport interface NotificationsBehaviorGroupTableProps {\n    behaviorGroupContent: BehaviorGroupContent;\n    notifications: Array<BehaviorGroupNotificationRow>;\n    onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n    onStartEditing?: OnNotificationIdHandler;\n    onFinishEditing?: OnNotificationIdHandler;\n    onCancelEditing?: OnNotificationIdHandler;\n}\n\nconst actionButtonClassName = style({\n    float: 'right'\n});\n\ntype Callbacks = {\n    onStartEditing: OnNotificationIdHandler;\n    onFinishEditing:  OnNotificationIdHandler;\n    onCancelEditing: OnNotificationIdHandler;\n    onBehaviorGroupLinkUpdated: OnBehaviorGroupLinkUpdated;\n};\n\nconst toTableRows = (\n    notifications: Array<BehaviorGroupNotificationRow>,\n    behaviorGroupContent: BehaviorGroupContent,\n    callbacks?: Callbacks) => {\n    return notifications.map((notification => ({\n        id: notification.id,\n        key: notification.id,\n        notification,\n        cells: [\n            {\n                title: <span>{ notification.eventTypeDisplayName }</span>\n            },\n            {\n                title: <span>{ notification.applicationDisplayName }</span>\n            },\n            {\n                title: notification.loadingActionStatus === 'loading' ?\n                    <Skeleton width=\"90%\" /> :\n                    <span>\n                        <BehaviorGroupCell\n                            id={ `behavior-group-cell-${notification.id}` }\n                            notification={ notification }\n                            behaviorGroupContent={ behaviorGroupContent }\n                            selected={ notification.behaviors ?? emptyImmutableArray }\n                            onSelect={ callbacks?.onBehaviorGroupLinkUpdated }\n                            isEditMode={ notification.isEditMode }\n                        />\n                    </span>\n            }\n        ]\n    })));\n};\n\nconst cells: Array<ICell> = [\n    {\n        title: 'Event',\n        transforms: [],\n        cellFormatters: []\n    },\n    {\n        title: 'Application',\n        transforms: []\n    },\n    {\n        title: 'Behavior',\n        transforms: [ cellWidth(35) ]\n    }\n];\n\n// This will actually silence lots of warning we are having in the console about unwanted elements.\nconst EmptySpan: React.FunctionComponent<any> = _props => <span />;\nconst emptySpanProducer = () => <EmptySpan />;\n\nexport const NotificationsBehaviorGroupTable = ouia<NotificationsBehaviorGroupTableProps>(props => {\n\n    const callbacks: Callbacks | undefined = React.useMemo(() => {\n\n        if (props.onStartEditing && props.onFinishEditing && props.onCancelEditing) {\n            return {\n                onStartEditing: props.onStartEditing,\n                onFinishEditing: props.onFinishEditing,\n                onCancelEditing: props.onCancelEditing,\n                onBehaviorGroupLinkUpdated: props.onBehaviorGroupLinkUpdated\n            };\n        }\n\n        return undefined;\n    }, [ props.onStartEditing, props.onFinishEditing, props.onCancelEditing, props.onBehaviorGroupLinkUpdated ]);\n\n    const rows = React.useMemo(() => {\n        return toTableRows(props.notifications, props.behaviorGroupContent, callbacks);\n    }, [ props.notifications, props.behaviorGroupContent, callbacks ]);\n\n    const actionResolver = React.useCallback((rowData: IRowData): IActions => {\n        const notification: BehaviorGroupNotificationRow = rowData.notification;\n\n        const isDisabled = notification.loadingActionStatus !== 'done';\n\n        if (!notification.isEditMode) {\n            return [\n                {\n                    key: 'edit',\n                    className: actionButtonClassName,\n                    title: <Button aria-label=\"edit\" variant={ ButtonVariant.plain } isDisabled={ isDisabled }>\n                        <PencilAltIcon />\n                    </Button>,\n                    isOutsideDropdown: true,\n                    onClick: () => callbacks?.onStartEditing(notification.id),\n                    isDisabled: isDisabled || !callbacks\n                }\n            ];\n        }\n\n        return [\n            {\n                key: 'done',\n                className: actionButtonClassName,\n                title: <Button aria-label=\"done\" variant={ ButtonVariant.plain } isDisabled={ isDisabled }>\n                    <CheckIcon color={ isDisabled ? global_disabled_color_100.value : global_active_color_100.value } />\n                </Button>,\n                isOutsideDropdown: true,\n                onClick: () => callbacks?.onFinishEditing(notification.id),\n                isDisabled: isDisabled || !callbacks\n            },\n            {\n                key: 'cancel',\n                className: actionButtonClassName,\n                title: <Button aria-label=\"cancel\" variant={ ButtonVariant.plain } isDisabled={ isDisabled }>\n                    <CloseIcon color={ isDisabled ? global_disabled_color_100.value : global_palette_black_600.value } />\n                </Button>,\n                isOutsideDropdown: true,\n                onClick: () => callbacks?.onCancelEditing(notification.id),\n                isDisabled: isDisabled || !callbacks\n            }\n        ];\n    }, [ callbacks ]);\n\n    return (\n        <Table\n            aria-label=\"Notifications\"\n            rows={ rows }\n            cells={ cells }\n            variant={ TableVariant.compact }\n            actionResolver={ actionResolver }\n            actionsToggle={ emptySpanProducer as any }\n        >\n            <TableHeader />\n            <TableBody />\n        </Table>\n    );\n}, 'Notifications/Table');\n","import { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { getOuiaProps } from '../utils/getOuiaProps';\n\nexport const ouia = <P extends any>(Component: React.FunctionComponent<P>, type: string): React.FunctionComponent<OuiaComponentProps & P> => {\n\n    const Wrapped: React.FunctionComponent<OuiaComponentProps & P> = props => {\n        return (\n            <div { ...getOuiaProps(type, props) }>\n                <Component { ...props } />\n            </div>\n        );\n    };\n\n    Wrapped.displayName = `Ouia(${Component.displayName ?? Component.name})`;\n\n    return Wrapped;\n};\n","import { ClearFilters, Filters, SetFilters } from '@redhat-cloud-services/insights-common-typescript';\n\nexport enum NotificationFilterColumn {\n    NAME = 'name',\n    APPLICATION = 'application',\n    ACTION = 'action'\n}\n\nexport type NotificationFilters = Filters<typeof NotificationFilterColumn>;\nexport type SetNotificationFilters = SetFilters<typeof NotificationFilterColumn>;\nexport type ClearNotificationFilters = ClearFilters<typeof NotificationFilterColumn>;\n","export enum GroupByEnum {\n    Application = 'application',\n    None = 'none'\n}\n","import { Dropdown, DropdownItem, DropdownToggle } from '@patternfly/react-core';\nimport { CaretDownIcon } from '@patternfly/react-icons';\nimport camelcase from 'camelcase';\nimport * as React from 'react';\n\nimport { GroupByEnum } from '../Types';\n\nexport interface GroupByProps {\n    groupBy: (selected: GroupByEnum) => void;\n    selected: GroupByEnum;\n}\n\nexport const GroupBy: React.FunctionComponent<GroupByProps> = (props) => {\n    const items = [\n        <DropdownItem data-group-by={ GroupByEnum.Application } key=\"application\">Application</DropdownItem>,\n        <DropdownItem data-group-by={ GroupByEnum.None } key=\"none\">None</DropdownItem>\n    ];\n\n    const [ isOpen, setOpen ] = React.useState<boolean>(false);\n\n    const onSelect = React.useCallback((event) => {\n        const groupBy = props.groupBy;\n        const selected = props.selected;\n\n        if (event.target.dataset.groupBy !== selected) {\n            switch (event.target.dataset.groupBy) {\n                case GroupByEnum.Application:\n                    groupBy(GroupByEnum.Application);\n                    break;\n                case GroupByEnum.None:\n                    groupBy(GroupByEnum.None);\n                    break;\n            }\n        }\n\n        setOpen(false);\n    }, [ props.groupBy, props.selected ]);\n\n    const onToggle = React.useCallback((shouldBeOpen) => {\n        setOpen(shouldBeOpen);\n    }, [ setOpen ]);\n\n    const content = React.useMemo(() => {\n        return `Group by: ${camelcase(props.selected, {\n            pascalCase: true\n        })}`;\n    }, [ props.selected ]);\n\n    return (\n        <Dropdown\n            onSelect={ onSelect }\n            isOpen={ isOpen }\n            toggle={ <DropdownToggle\n                id=\"group-by-dropdown-toggle\"\n                toggleIndicator={ CaretDownIcon }\n                onToggle={ onToggle }\n            >\n                { content }\n            </DropdownToggle> }\n            dropdownItems={ items }\n        />\n    );\n};\n","import { PrimaryToolbar } from '@redhat-cloud-services/frontend-components';\nimport {\n    ColumnsMetada,\n    ExporterType,\n    getInsights,\n    OuiaComponentProps,\n    useInsightsEnvironmentFlag,\n    usePrimaryToolbarFilterConfig\n} from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useCallback, useMemo } from 'react';\n\nimport { useTableExportConfig } from '../../hooks/useTableExportConfig';\nimport { stagingAndProd } from '../../types/Environments';\nimport { Facet } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport {\n    ClearNotificationFilters,\n    NotificationFilterColumn,\n    NotificationFilters,\n    SetNotificationFilters\n} from './Filter';\nimport { GroupBy } from './Table/GroupBy';\nimport { GroupByEnum } from './Types';\n\ninterface NotificationsToolbarProps extends OuiaComponentProps {\n    filters: NotificationFilters;\n    setFilters: SetNotificationFilters;\n    clearFilter: ClearNotificationFilters;\n\n    appFilterOptions: Array<Facet>;\n\n    groupBy?: GroupByEnum;\n    onGroupBySelected?: (selected: GroupByEnum) => void;\n\n    onExport: (type: ExporterType) => void;\n}\n\nexport const NotificationsToolbar: React.FunctionComponent<NotificationsToolbarProps> = (props) => {\n\n    const filterMetadata = useMemo<ColumnsMetada<typeof NotificationFilterColumn>>(() => {\n\n        const appFilterItems = props.appFilterOptions.map(a => ({\n            value: a.displayName,\n            label: <> {a.displayName}</>\n        }));\n\n        return {\n            [NotificationFilterColumn.NAME]: {\n                label: 'Event type',\n                placeholder: 'Filter by event type'\n            },\n            [NotificationFilterColumn.APPLICATION]: {\n                label: 'Application',\n                placeholder: 'Filter by application',\n                options: {\n                    exclusive: false,\n                    default: [] as any,\n                    items: appFilterItems\n                }\n            },\n            [NotificationFilterColumn.ACTION]: {\n                label: 'Action',\n                placeholder: 'Filter by action'\n            }\n        };\n    }, [ props.appFilterOptions ]);\n\n    const primaryToolbarFilterConfig = usePrimaryToolbarFilterConfig(\n        NotificationFilterColumn,\n        props.filters,\n        props.setFilters,\n        props.clearFilter,\n        filterMetadata\n    );\n\n    const exportConfigInternal = useTableExportConfig(props.onExport);\n\n    const filterConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.filterConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const activeFiltersConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => primaryToolbarFilterConfig.activeFiltersConfig, [ primaryToolbarFilterConfig ])\n    );\n\n    const exportConfig = useInsightsEnvironmentFlag(\n        getInsights(),\n        stagingAndProd,\n        undefined,\n        useCallback(() => exportConfigInternal, [ exportConfigInternal ])\n    );\n\n    return (\n        <div { ...getOuiaProps('Notifications/DualToolbar', props) }>\n            <PrimaryToolbar\n                filterConfig={ filterConfig }\n                activeFiltersConfig={ activeFiltersConfig }\n                dedicatedAction={ (props.groupBy && props.onGroupBySelected) ?\n                    <GroupBy selected={ props.groupBy } groupBy={ props.onGroupBySelected } /> :\n                    undefined }\n                exportConfig={ exportConfig }\n            />\n            { props.children }\n            <PrimaryToolbar />\n        </div>\n    );\n};\n","import { Page, useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Schemas } from '../generated/OpenapiIntegrations';\nimport { Operations } from '../generated/OpenapiNotifications';\nimport { toNotifications } from '../types/adapters/NotificationAdapter';\n\nexport const listNotificationsActionCreator = (pager?: Page) => {\n    const query = (pager ?? Page.defaultPage()).toQuery();\n    return Operations.NotificationServiceGetEventTypes.actionCreator({\n        limit: +query.limit,\n        offset: +query.offset,\n        applicationIds: query.filterApplicationId as unknown as Array<Schemas.UUID>,\n        bundleId: query.filterBundleId as unknown as string\n    });\n};\n\nconst decoder = validationResponseTransformer((payload: Operations.NotificationServiceGetEventTypes.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'eventTypesArray',\n            200,\n            toNotifications(payload.value),\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useListNotifications = (pager?: Page) => useTransformQueryResponse(\n    useQuery(listNotificationsActionCreator(pager)),\n    decoder\n);\n","export default __webpack_public_path__ + \"fonts/WebhookIcon.svg\";","import { SVGIconProps } from '@patternfly/react-icons/dist/js/createIcon';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport icon from './WebhookIcon.svg';\nconst className = style({\n    verticalAlign: '-0.125em',\n    width: '1em',\n    height: '1em'\n});\n\nexport const WebhookIcon: React.FunctionComponent<SVGIconProps> = () => {\n    return (\n        <img alt=\"Webhook\" className={ className } src={ icon } />\n    );\n};\n","import { Spinner } from '@patternfly/react-core';\nimport { EnvelopeIcon } from '@patternfly/react-icons';\nimport BellIcon from '@patternfly/react-icons/dist/js/icons/bell-icon';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { Messages } from '../../properties/Messages';\nimport { Action, NotificationType } from '../../types/Notification';\nimport { getOuiaProps } from '../../utils/getOuiaProps';\nimport { WebhookIcon } from '../Icons/WebhookIcon';\n\nexport interface ActionComponentText extends OuiaComponentProps{\n    isDefault: boolean;\n    action: Action | undefined;\n    loading?: boolean;\n    hasError?: boolean;\n}\n\ninterface ActionTypeToIconProps {\n    actionType: NotificationType;\n}\n\nconst marginLeftClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nconst grayFontClassName = style({\n    color: '#888'\n});\n\nconst ActionTypeToIcon: React.FunctionComponent<ActionTypeToIconProps> = (props) => {\n    switch (props.actionType) {\n        case NotificationType.DRAWER:\n            return <BellIcon />;\n        case NotificationType.EMAIL_SUBSCRIPTION:\n            return <EnvelopeIcon />;\n        case NotificationType.INTEGRATION:\n            return <WebhookIcon />;\n        default:\n            assertNever(props.actionType);\n    }\n};\n\nconst ActionComponentWrapper: React.FunctionComponent<ActionComponentText> = (props) => (\n    <div { ...getOuiaProps('Notifications/ActionComponent', props) }>\n        { props.children }\n    </div>\n);\n\nexport const ActionComponent: React.FunctionComponent<ActionComponentText> = (props) => {\n\n    if (props.loading) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <Spinner size=\"md\" />\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (props.hasError) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span>Error loading actions</span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (props.isDefault) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span>Default behavior</span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    if (!props.action) {\n        return (\n            <ActionComponentWrapper { ...props }>\n                <span className={ grayFontClassName }>\n                    <div>No actions.</div>\n                    <div>Users will not be notified.</div>\n                </span>\n            </ActionComponentWrapper>\n        );\n    }\n\n    return (\n        <ActionComponentWrapper { ...props }>\n            <ActionTypeToIcon actionType={ props.action.type } />\n            <span className={ marginLeftClassName }>{ Messages.components.notifications.types[props.action.type] }</span>\n            { props.action.type === NotificationType.INTEGRATION && (\n                <span>: { Messages.components.integrations.integrationType[props.action.integration.type] }</span>\n            ) }\n        </ActionComponentWrapper>\n    );\n};\n","import { Label, Tooltip } from '@patternfly/react-core';\nimport { global_spacer_sm } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { Action, NotificationType } from '../../types/Notification';\n\ninterface RecipientProps {\n    action: Action;\n    hasOutline?: boolean;\n}\n\nconst disabledLabelClassName = style({\n    marginLeft: global_spacer_sm.var\n});\n\nexport const Recipient: React.FunctionComponent<RecipientProps> = (props) => {\n    if (props.action.type === NotificationType.INTEGRATION) {\n        return (\n            <>\n                <span>{ props.action.integration.name }</span>\n                { !props.action.integration.isEnabled && (\n                    <>\n                        <Tooltip content=\"This integration has been disabled. This action wil not fire until it is enabled.\" position=\"bottom\">\n                            <Label variant={ props.hasOutline ? 'outline' : 'filled' } className={ disabledLabelClassName }>Disabled</Label>\n                        </Tooltip>\n                    </>\n                )}\n            </>\n        );\n    }\n\n    return <span>{ props.action.recipient.map(r => r.displayName).join(', ') }</span>;\n};\n","import {\n    Card,\n    CardActions,\n    CardBody,\n    CardHeader,\n    CardHeaderMain,\n    Dropdown,\n    DropdownItem,\n    DropdownPosition,\n    Grid,\n    GridItem,\n    KebabToggle,\n    Skeleton,\n    Text,\n    TextContent,\n    TextVariants\n} from '@patternfly/react-core';\nimport { c_form__label_FontSize } from '@patternfly/react-tokens';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { ActionComponent } from '../ActionComponent';\nimport { Recipient } from '../Recipient';\n\nconst cardClassName = style({\n    width: 450,\n    height: '100%'\n});\n\nconst contentTitleStyle = {\n    fontSize: c_form__label_FontSize.value\n};\n\nexport interface BehaviorGroupProps extends OuiaComponentProps {\n    behaviorGroup: BehaviorGroup;\n    onEdit?: (behaviorGroup: BehaviorGroup) => void;\n    onDelete?: (behaviorGroup: BehaviorGroup) => void;\n}\n\nexport interface BehaviorGroupCardLayout {\n    title: React.ReactNode;\n    dropdownItems?: Array<React.ReactNode>;\n    contents: Array<{\n        key: string;\n        action: React.ReactNode;\n        recipient: React.ReactNode;\n    }>;\n}\n\nconst BehaviorGroupCardLayout: React.FunctionComponent<BehaviorGroupCardLayout> = props => {\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const switchOpen = React.useCallback(() => setOpen(prev => !prev), [ setOpen ]);\n\n    return (\n        <Card isFlat className={ cardClassName }>\n            <CardHeader>\n                <CardHeaderMain><TextContent><Text component={ TextVariants.h4 }> { props.title } </Text></TextContent></CardHeaderMain>\n                <CardActions>\n                    <Dropdown\n                        onSelect={ switchOpen }\n                        toggle={ <KebabToggle onToggle={ setOpen } isDisabled={ !props.dropdownItems } /> }\n                        isOpen={ isOpen }\n                        isPlain\n                        dropdownItems={ props.dropdownItems }\n                        position={ DropdownPosition.right }\n                    />\n                </CardActions>\n            </CardHeader>\n            <CardBody>\n                <Grid hasGutter>\n                    <GridItem span={ 6 }>\n                        <TextContent>\n                            <Text component={ TextVariants.h5 } style={ contentTitleStyle }>Action</Text>\n                        </TextContent>\n                    </GridItem>\n                    <GridItem span={ 6 }>\n                        <TextContent>\n                            <Text component={ TextVariants.h5 } style={ contentTitleStyle }>Recipient</Text>\n                        </TextContent>\n                    </GridItem>\n                    { props.contents.map(content => (\n                        <React.Fragment key={ content.key }>\n                            <GridItem span={ 6 }>\n                                { content.action }\n                            </GridItem>\n                            <GridItem span={ 6 }>\n                                { content.recipient }\n                            </GridItem>\n                        </React.Fragment>\n                    )) }\n                </Grid>\n            </CardBody>\n        </Card>\n    );\n};\n\nexport const BehaviorGroupCard: React.FunctionComponent<BehaviorGroupProps> = props => {\n    const onClickEdit = React.useCallback(() => {\n        const onEdit = props.onEdit;\n        if (onEdit) {\n            onEdit(props.behaviorGroup);\n        }\n    }, [ props.behaviorGroup, props.onEdit ]);\n\n    const onClickDelete = React.useCallback(() => {\n        const onDelete = props.onDelete;\n        if (onDelete) {\n            onDelete(props.behaviorGroup);\n        }\n    }, [ props.behaviorGroup, props.onDelete ]);\n\n    const dropdownItems = React.useMemo(() => [\n        <DropdownItem key=\"on-edit\" onClick={ onClickEdit } isDisabled={ !onClickEdit } > Edit </DropdownItem>,\n        <DropdownItem key=\"on-delete\" onClick={ onClickDelete } isDisabled={ !onClickDelete }> Delete </DropdownItem>\n    ], [ onClickEdit, onClickDelete ]);\n\n    return (\n        <BehaviorGroupCardLayout\n            title={ props.behaviorGroup.displayName }\n            dropdownItems={ dropdownItems }\n            contents={ props.behaviorGroup.actions.map((action, index) => ({\n                key: `${index}-${action.type}`,\n                recipient: <Recipient action={ action } />,\n                action: <ActionComponent isDefault={ false } action={ action } />\n            })) }\n        />\n    );\n};\n\nexport const BehaviorGroupCardSkeleton: React.FunctionComponent = () => {\n    const contentWidth = '150px';\n\n    return (\n        <BehaviorGroupCardLayout\n            title={ <Skeleton width=\"300px\" /> }\n            contents={ [\n                {\n                    key: 'skeleton-1',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                },\n                {\n                    key: 'skeleton-2',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                },\n                {\n                    key: 'skeleton-3',\n                    action: <Skeleton width={ contentWidth } />,\n                    recipient: <Skeleton width={ contentWidth } />\n                }\n            ] }\n        />\n    );\n};\n","import { Flex, FlexItem } from '@patternfly/react-core';\nimport { global_spacer_md } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { useMeasure } from 'react-use';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { BehaviorGroupCard, BehaviorGroupCardSkeleton } from './BehaviorGroupCard';\n\nconst cardsWrapperClassName = style({\n    overflow: 'auto'\n});\n\nconst cardWrapperClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\ninterface BehaviorGroupCardListProps {\n    onEdit?: (behaviorGroup: BehaviorGroup) => void;\n    onDelete?: (behaviorGroup: BehaviorGroup) => void;\n    behaviorGroups: ReadonlyArray<BehaviorGroup>;\n}\n\ninterface BehaviorGroupCardListLayoutProps {\n    contents: Array<{\n        key: string;\n        element: React.ReactNode;\n    }>;\n}\n\nconst BehaviorGroupCardListLayout: React.FunctionComponent<BehaviorGroupCardListLayoutProps> = props => {\n\n    const [ measureRef, measuredSizing ] = useMeasure<HTMLDivElement>();\n    const container = React.useRef<HTMLDivElement>();\n    const ref = React.useCallback(refContainer => {\n        container.current = refContainer;\n        measureRef(refContainer);\n    }, [ container, measureRef ]);\n\n    React.useEffect(() => {\n        if (container.current?.firstChild?.firstChild) {\n            const element = container.current.firstChild as HTMLElement;\n            const height = (element.firstChild as HTMLElement).getBoundingClientRect().height;\n            element.style['max-height'] = `${height}px`;\n        }\n    }, [ measuredSizing ]);\n\n    return (\n        <div ref={ ref } data-testid=\"ref-card-list-container\">\n            <Flex\n                alignItems={ { default: 'alignItemsStretch' } }\n                alignContent={ { default: 'alignContentSpaceBetween' } }\n                className={ cardsWrapperClassName }\n                data-testid=\"card-list-container\"\n            >\n                { props.contents.map(content => (\n                    <FlexItem key={ content.key } className={ cardWrapperClassName }>\n                        { content.element }\n                    </FlexItem>\n                ))}\n            </Flex>\n        </div>\n    );\n};\n\nexport const BehaviorGroupCardList: React.FunctionComponent<BehaviorGroupCardListProps> = props => {\n\n    return (\n        <BehaviorGroupCardListLayout\n            contents={ props.behaviorGroups.map(behaviorGroup => ({\n                key: behaviorGroup.id,\n                element: <BehaviorGroupCard\n                    behaviorGroup={ behaviorGroup }\n                    onEdit={ props.onEdit }\n                    onDelete={ props.onDelete }\n                />\n            })) }\n        />\n    );\n};\n\nexport const BehaviorGroupCardListSkeleton: React.FunctionComponent = () => {\n    return (\n        <BehaviorGroupCardListLayout\n            contents={ [\n                {\n                    key: 'skeleton-1',\n                    element: <BehaviorGroupCardSkeleton />\n                },\n                {\n                    key: 'skeleton-2',\n                    element: <BehaviorGroupCardSkeleton />\n                },\n                {\n                    key: 'skeleton-3',\n                    element: <BehaviorGroupCardSkeleton />\n                }\n            ] }\n        />\n    );\n};\n","import {\n    ButtonVariant,\n    Checkbox,\n    ExpandableSection,\n    List,\n    ListItem,\n    Skeleton,\n    Stack,\n    StackItem\n} from '@patternfly/react-core';\nimport { ActionModalProps, DeleteModal, DeleteModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { useOnDeleteWrapper } from '../../../hooks/useOnDeleteWrapper';\nimport { OnDelete } from '../../../types/Callbacks';\nimport { BehaviorGroup, Notification } from '../../../types/Notification';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onDelete';\n\ninterface BehaviorGroupDeleteModalProps extends Omit<DeleteModalProps, UsedProps> {\n    behaviorGroup: BehaviorGroup;\n    onDelete: OnDelete<BehaviorGroup>;\n    conflictingNotifications: Array<Notification>;\n}\n\ntype BehaviorGroupDeleteModalSkeletonProps = Pick<ActionModalProps, 'onClose'>;\n\nexport const BehaviorGroupDeleteModal: React.FunctionComponent<BehaviorGroupDeleteModalProps> = props => {\n    const onDelete = useOnDeleteWrapper(props.onDelete, props.behaviorGroup);\n\n    const cancelButtonTitle = React.useMemo(\n        () => props.conflictingNotifications.length === 0 ? 'Cancel' : 'Close',\n        [ props.conflictingNotifications ]\n    );\n\n    const cancelButtonVariant = React.useMemo(\n        () => props.conflictingNotifications.length === 0 ? ButtonVariant.link : ButtonVariant.secondary,\n        [ props.conflictingNotifications ]\n    );\n\n    const [ ackDelete, setAckDelete ] = React.useState(false);\n\n    const content = React.useMemo(() => {\n        if (props.conflictingNotifications.length === 0) {\n            return (\n                <Stack hasGutter>\n                    <StackItem>\n                        Action and recipient pairings assigned in <b>{ props.behaviorGroup.displayName }</b> will lost. You\n                        will no longer be able to assign this behavior group to events.\n                    </StackItem>\n                    <StackItem>\n                        <Checkbox\n                            id=\"checkbox-delete-i-acknowledge\"\n                            label=\"I acknowledge that this action cannot be undone\"\n                            onChange={ setAckDelete }\n                            isChecked={ ackDelete }\n                        />\n                    </StackItem>\n                </Stack>\n            );\n        } else {\n            const events = props.conflictingNotifications;\n\n            return (\n                <Stack hasGutter>\n                    <StackItem>\n                        <b>{ props.behaviorGroup.displayName }</b> is associated to { events.length } events.\n                        Please remove the behavior group from these events in order  to continue.\n                    </StackItem>\n                    <StackItem>\n                        <ExpandableSection\n                            toggleText={ `View ${ events.length } event${ events.length === 0 ? '' : 's' }` }\n                        >\n                            <List>\n                                { events.map(event =>\n                                    (<ListItem key={ event.id }>{ `${event.applicationDisplayName} - ${event.eventTypeDisplayName}` }</ListItem>)\n                                ) }\n                            </List>\n                        </ExpandableSection>\n                    </StackItem>\n                </Stack>\n            );\n        }\n    }, [ props.conflictingNotifications, props.behaviorGroup, ackDelete, setAckDelete ]);\n\n    return (\n        <DeleteModal\n            isOpen={ true }\n            isDeleting={ props.isDeleting }\n            title=\"Delete behavior group\"\n            content={ content }\n            onClose={ props.onClose }\n            onDelete={ onDelete }\n            error={ props.error }\n            titleIconVariant=\"warning\"\n            actionButtonDisabled={ !ackDelete }\n            actionButtonHidden={ props.conflictingNotifications.length > 0 }\n            cancelButtonTitle={ cancelButtonTitle }\n            cancelButtonVariant={ cancelButtonVariant }\n        />\n    );\n};\n\nconst onDelete = () => false;\n\nexport const BehaviorGroupDeleteModalSkeleton: React.FunctionComponent<BehaviorGroupDeleteModalSkeletonProps> = props => {\n    return (\n        <DeleteModal\n            isOpen={ true }\n            title=\"Delete behavior group\"\n            actionButtonDisabled={ true }\n            titleIconVariant=\"warning\"\n            content={ <Stack hasGutter>\n                <StackItem><Skeleton width=\"500px\" /></StackItem>\n                <StackItem><Skeleton width=\"500px\" /></StackItem>\n            </Stack> }\n            onClose={ props.onClose }\n            isDeleting={ false }\n            onDelete={ onDelete }\n        />\n    );\n};\n","import { useCallback } from 'react';\n\nimport { OnDelete } from '../types/Callbacks';\n\nexport const useOnDeleteWrapper = <T>(onDelete: OnDelete<T>, toDelete: T) => {\n    return useCallback(() => {\n        return  onDelete(toDelete);\n    }, [ onDelete, toDelete ]);\n};\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\nconst deleteBehaviorGroupAction = (id: UUID) => {\n    return Operations.NotificationServiceDeleteBehaviorGroup.actionCreator({\n        id\n    });\n};\n\nexport const useDeleteBehaviorGroupMutation = () => useMutation(deleteBehaviorGroupAction);\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toNotifications } from '../../types/adapters/NotificationAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst getAffectedNotificationsByBehaviorGroupAction = (id: UUID) => {\n    return Operations.NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup.actionCreator({\n        behaviorGroupId: id\n    });\n};\n\nconst defaultNotificationsDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetEventTypesAffectedByRemovalOfBehaviorGroup.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'Notifications',\n                200,\n                toNotifications(payload.value),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetAffectedNotificationsByBehaviorGroupQuery = (id: UUID) =>\n    useTransformQueryResponse(\n        useQuery(getAffectedNotificationsByBehaviorGroupAction(id)),\n        defaultNotificationsDecoder\n    );\n","import { addDangerNotification, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useEffect } from 'react';\n\nimport {\n    BehaviorGroupDeleteModal,\n    BehaviorGroupDeleteModalSkeleton\n} from '../../../components/Notifications/BehaviorGroup/BehaviorGroupDeleteModal';\nimport { useDeleteBehaviorGroupMutation } from '../../../services/Notifications/DeleteBehaviorGroup';\nimport { useGetAffectedNotificationsByBehaviorGroupQuery } from '../../../services/Notifications/GetAffectedNotificationsByBehaviorGroup';\nimport { BehaviorGroup } from '../../../types/Notification';\n\nexport interface DeleteBehaviorGroupPageProps {\n    behaviorGroup: BehaviorGroup;\n    onClose: (deleted: boolean) => void;\n}\n\nexport const DeleteBehaviorGroupPage: React.FunctionComponent<DeleteBehaviorGroupPageProps> = props => {\n\n    const deleteBehaviorGroup = useDeleteBehaviorGroupMutation();\n    const affected = useGetAffectedNotificationsByBehaviorGroupQuery(props.behaviorGroup.id);\n\n    const onDelete = React.useCallback(async (behaviorGroup: BehaviorGroup) => {\n        const mutate = deleteBehaviorGroup.mutate;\n        const response = await mutate(behaviorGroup.id);\n\n        if (response.payload?.status === 200) {\n            addSuccessNotification(\n                'Behavior group deleted',\n                <>\n                    Group <b>{ behaviorGroup.displayName }</b> deleted successfully.\n                </>\n            );\n            return true;\n        }\n\n        addDangerNotification(\n            'Behavior group failed to be deleted',\n            <>\n                Failed to delete group <b> { behaviorGroup.displayName }</b>.\n                <br />\n                Please try again.\n            </>\n        );\n\n        return false;\n    }, [ deleteBehaviorGroup.mutate ]);\n\n    useEffect(() => {\n        const payload = affected.payload;\n        const onClose = props.onClose;\n        if (payload && payload.status !== 200) {\n            addDangerNotification(\n                'Associated events failed to load ',\n                <>\n                    Failed to load associated events for group <b> { props.behaviorGroup.displayName }</b>.\n                    <br />\n                    Please try again.\n                </>\n            );\n\n            onClose(false);\n        }\n    }, [ affected.payload, props.behaviorGroup, props.onClose ]);\n\n    if (affected.loading) {\n        return <BehaviorGroupDeleteModalSkeleton\n            onClose={ props.onClose }\n        />;\n    }\n\n    if (affected.payload?.status !== 200) {\n        return null;\n    }\n\n    return <BehaviorGroupDeleteModal\n        onDelete={ onDelete }\n        isDeleting={ deleteBehaviorGroup.loading }\n        onClose={ props.onClose }\n        behaviorGroup={ props.behaviorGroup }\n        conflictingNotifications={ affected.payload.value }\n    />;\n};\n","import * as Yup from 'yup';\n\nimport { NotificationType } from '../../types/Notification';\n\nconst ActionIntegration = Yup.object({\n    type: Yup.mixed().oneOf([ NotificationType.INTEGRATION ]).required(),\n    integration: Yup.object({\n        id: Yup.string().required()\n    }).required(),\n    integrationId: Yup.string().min(1)\n});\n\nconst ActionNotify = Yup.object({\n    type: Yup.mixed().oneOf([ NotificationType.EMAIL_SUBSCRIPTION /*, NotificationType.DRAWER */ ]).required(),\n    recipient: Yup.array(Yup.object()).min(1),\n    integrationId: Yup.string().min(0)\n});\n\ntype ActionsType = Yup.TypeOf<typeof ActionIntegration> | Yup.TypeOf<typeof ActionNotify>;\n\nexport const ActionsArray = Yup.array(Yup.lazy(obj => {\n    if ((obj as any).hasOwnProperty('type')) {\n        if ((obj as any).type === NotificationType.INTEGRATION) {\n            return ActionIntegration;\n        }\n    }\n\n    return ActionNotify;\n})).test('no-repeated', '${path} can\\'t contain repeated actions', (value: Array<ActionsType>  | undefined, context) => {\n    const errors: Array<ReturnType<Yup.TestContext['createError']>> = [];\n\n    let foundEmail = false;\n    const integrationIds: Array<string> = [];\n\n    if (!value) {\n        return true;\n    }\n\n    for (let i = 0; i < value.length; ++i) {\n        const action = value[i];\n        const integrationId = action.integrationId;\n        if (action.type === NotificationType.EMAIL_SUBSCRIPTION) {\n            if (foundEmail) {\n                errors.push(context.createError({\n                    message: 'Only 1 send email action is allowed',\n                    path: `actions.${i}`\n                }));\n            }\n\n            foundEmail = true;\n        } else if (integrationId) {\n            if (integrationIds.includes(integrationId)) {\n                errors.push(context.createError({\n                    message: 'Integration already used in the group, please select other',\n                    path: `actions.${i}`\n                }));\n            } else {\n                integrationIds.push(integrationId);\n            }\n        }\n    }\n\n    if (errors.length === 0) {\n        return true;\n    }\n\n    return {\n        ...context.createError(),\n        inner: errors\n    };\n});\n\nexport const WithActions = Yup.object({\n    actions: ActionsArray\n});\n\nexport const BehaviorGroupSchema = Yup.object({\n    displayName: Yup.string().required('You must specify a name for the behavior group'),\n    actions: ActionsArray\n});\n","import { createContext, useContext } from 'react';\n\nimport { UserIntegrationType } from '../../types/Integration';\nimport { IntegrationRef } from '../../types/Notification';\nimport { Recipient } from '../../types/Recipient';\n\nexport type GetIntegrations = (type: UserIntegrationType, search?: string) => Promise<ReadonlyArray<IntegrationRef>>;\nexport type GetNotificationRecipients = (filter?: string) => Promise<ReadonlyArray<Recipient>>;\n\nexport interface RecipientContext {\n    getIntegrations: GetIntegrations,\n    getNotificationRecipients: GetNotificationRecipients\n}\n\nconst RecipientContext = createContext<RecipientContext>({\n    getIntegrations: async () => {\n        throw new Error('No IntegrationContext found');\n    },\n    getNotificationRecipients: async () => {\n        throw new Error('No RecipientContext found');\n    }\n});\n\nexport const useRecipientContext = () => useContext(RecipientContext);\nexport const RecipientContextProvider = RecipientContext.Provider;\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport { Recipient } from '../../../types/Recipient';\n\nexport class RecipientOption implements SelectOptionObject {\n    readonly recipient: Recipient;\n\n    constructor(recipient: Recipient) {\n        this.recipient = recipient;\n    }\n\n    compareTo(selectOption: any): boolean {\n        if (selectOption instanceof RecipientOption) {\n            return this.recipient.equals(selectOption.recipient);\n        }\n\n        return false;\n    }\n\n    toString(): string {\n        return this.recipient.displayName;\n    }\n}\n","import { SelectOption } from '@patternfly/react-core';\nimport assertNever from 'assert-never';\nimport * as React from 'react';\n\nimport { Recipient } from '../../../types/Recipient';\nimport { RecipientOption } from './RecipientOption';\nimport { ReducerState } from './useTypeaheadReducer';\n\nconst mapper = (r: Recipient) =>\n    <SelectOption key={ r.getKey() } value={ new RecipientOption(r) } />;\n\nexport const useRecipientOptionMemo = (state: ReducerState<Recipient>) => {\n    return React.useMemo(() => {\n        if (state.show === 'default') {\n            if (state.loadingDefault) {\n                return [ <SelectOption\n                    key=\"loading-option\"\n                    isNoResultsOption={ true }\n                    value=\"Loading...\"\n                /> ];\n            } else {\n                return state.defaultValues.map(mapper);\n            }\n        } else if (state.show === 'filter') {\n            if (state.loadingFilter) {\n                return [ <SelectOption\n                    key=\"loading-option\"\n                    isNoResultsOption={ true }\n                    value=\"Loading...\"\n                /> ];\n            } else {\n                return state.filterValues.map(mapper);\n            }\n        }\n\n        assertNever(state.show);\n    }, [ state ]);\n};\n","import assertNever from 'assert-never';\nimport { Reducer, useCallback, useMemo, useReducer } from 'react';\n\nexport interface ReducerState<T> {\n    filterValues: ReadonlyArray<T>;\n    defaultValues: ReadonlyArray<T>;\n    show: 'default' | 'filter';\n    loadingFilter: boolean;\n    loadingDefault: boolean;\n    lastSearch: string;\n}\n\nenum ReducerActionType {\n    LOAD_FILTER_VALUE,\n    SET_FILTER_VALUE,\n    USE_DEFAULTS,\n    SET_DEFAULTS\n}\n\ntype ReducerAction<T> = {\n    type: ReducerActionType.USE_DEFAULTS;\n} | {\n    type: ReducerActionType.LOAD_FILTER_VALUE;\n    search: string;\n} | {\n    type: ReducerActionType.SET_FILTER_VALUE;\n    search: string;\n    values: ReadonlyArray<T>;\n} | {\n    type: ReducerActionType.SET_DEFAULTS;\n    values: ReadonlyArray<T>;\n}\n\nconst reducerFunction = <T>(state: ReducerState<T>, action: ReducerAction<T>): ReducerState<T> => {\n    switch (action.type) {\n        case ReducerActionType.SET_FILTER_VALUE:\n            if (action.search === state.lastSearch) {\n                if (action.values === state.filterValues) {\n                    return state;\n                }\n\n                return {\n                    ...state,\n                    loadingFilter: false,\n                    filterValues: action.values\n                };\n            }\n\n            return state;\n        case ReducerActionType.LOAD_FILTER_VALUE:\n            if (action.search !== state.lastSearch || state.show !== 'filter') {\n                return {\n                    ...state,\n                    loadingFilter: true,\n                    filterValues: [],\n                    lastSearch: action.search,\n                    show: 'filter'\n                };\n            }\n\n            return state;\n        case ReducerActionType.USE_DEFAULTS:\n            if (state.show !== 'default') {\n                return {\n                    ...state,\n                    show: 'default'\n                };\n            }\n\n            return state;\n        case ReducerActionType.SET_DEFAULTS:\n            return {\n                ...state,\n                defaultValues: action.values,\n                loadingDefault: false\n            };\n        default:\n            assertNever(action);\n    }\n};\n\nexport const useTypeaheadReducer = <T>() => {\n    const [ state, dispatch ] = useReducer<Reducer<ReducerState<T>, ReducerAction<T>>>(reducerFunction, {\n        filterValues: [],\n        defaultValues: [],\n        show: 'default',\n        loadingFilter: false,\n        loadingDefault: true,\n        lastSearch: ''\n    } as ReducerState<T>);\n\n    const setFilterValue = useCallback((search: string, values: ReadonlyArray<T>) => dispatch({\n        type: ReducerActionType.SET_FILTER_VALUE,\n        values,\n        search\n    }), [ dispatch ]);\n\n    const loadFilterValue = useCallback((search: string) => dispatch({\n        type: ReducerActionType.LOAD_FILTER_VALUE,\n        search\n    }), [ dispatch ]);\n\n    const setDefaults = useCallback((values: ReadonlyArray<T>) => dispatch({\n        type: ReducerActionType.SET_DEFAULTS,\n        values\n    }), [ dispatch ]);\n\n    const useDefaults = useCallback(() => dispatch({\n        type: ReducerActionType.USE_DEFAULTS\n    }), [ dispatch ]);\n\n    const dispatchers = useMemo(() => ({\n        setFilterValue,\n        loadFilterValue,\n        setDefaults,\n        useDefaults\n    }), [ setFilterValue, loadFilterValue, setDefaults, useDefaults ]);\n\n    return [ state, dispatchers ] as [ typeof state, typeof dispatchers ];\n};\n","import { Select, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { IntegrationRef } from '../../../types/Notification';\nimport { IntegrationRecipient } from '../../../types/Recipient';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { useRecipientContext } from '../RecipientContext';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface IntegrationRecipientTypeaheadProps extends OuiaComponentProps {\n    selected: Partial<IntegrationRef> | undefined;\n    integrationType: UserIntegrationType;\n    isDisabled?: boolean;\n    onSelected: (recipientOption: RecipientOption) => void;\n    onOpenChange?: (isOpen: boolean) => void;\n}\n\nexport const IntegrationRecipientTypeahead: React.FunctionComponent<IntegrationRecipientTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n    const prevOpen = usePrevious(isOpen);\n    const { getIntegrations } = useRecipientContext();\n\n    const [ state, dispatchers ] = useTypeaheadReducer<IntegrationRecipient>();\n\n    const toggle = React.useCallback((isOpen: boolean) => {\n        setOpen(isOpen);\n    }, [ setOpen ]);\n\n    React.useEffect(() => {\n        const onOpenChange = props.onOpenChange;\n        if (prevOpen !== undefined && prevOpen !== isOpen) {\n            onOpenChange && onOpenChange(isOpen);\n        }\n    }, [ prevOpen, isOpen, props.onOpenChange ]);\n\n    React.useEffect(() => {\n        getIntegrations(props.integrationType, '').then(integrations => dispatchers.setDefaults(integrations.map(i => new IntegrationRecipient(i))));\n    }, [ getIntegrations, props.integrationType, dispatchers ]);\n\n    React.useEffect(() => {\n        if (state.loadingFilter) {\n            getIntegrations(props.integrationType, state.lastSearch).then(integrations => dispatchers.setFilterValue(\n                state.lastSearch,\n                integrations.map(i => new IntegrationRecipient(i))\n            ));\n        }\n    }, [ getIntegrations, props.integrationType, state.loadingFilter, state.lastSearch, dispatchers ]);\n\n    const options = useRecipientOptionMemo(state);\n\n    const onFilter = React.useCallback((e: React.ChangeEvent<HTMLInputElement> | null) => {\n        // Ignore filter calls with null event\n        if (e === null) {\n            return options;\n        }\n\n        const search = e.target.value?.trim();\n        if (search === '') {\n            dispatchers.useDefaults();\n        } else {\n            dispatchers.loadFilterValue(search);\n        }\n\n        return options;\n    }, [ dispatchers, options ]);\n\n    const selection = React.useMemo(() => {\n        const sel = props.selected;\n        if (sel === undefined || sel.name === undefined || sel.id === undefined || sel.type === undefined) {\n            return undefined;\n        }\n\n        return new RecipientOption(new IntegrationRecipient(sel as IntegrationRef));\n    }, [ props.selected ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const integrationSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n            integrationSelected(value);\n            setOpen(false);\n        }\n    }, [ props.onSelected ]);\n\n    return (\n        <div { ...getOuiaProps('IntegrationRecipientTypeahead', props) }>\n            <Select\n                variant={ SelectVariant.typeahead }\n                typeAheadAriaLabel=\"Choose webhook\"\n                placeholderText=\"Choose webhook\"\n                selections={ selection }\n                onSelect={ onSelect }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onFilter={ onFilter }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n            >\n                { options }\n            </Select>\n        </div>\n    );\n};\n","import { Select, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { NotificationRecipient, Recipient } from '../../../types/Recipient';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { useRecipientContext } from '../RecipientContext';\nimport { RecipientOption } from './RecipientOption';\nimport { useRecipientOptionMemo } from './useRecipientOptionMemo';\nimport { useTypeaheadReducer } from './useTypeaheadReducer';\n\nexport interface RecipientTypeaheadProps extends OuiaComponentProps {\n    selected: ReadonlyArray<NotificationRecipient>;\n    onSelected: (value: RecipientOption) => void;\n    isDisabled?: boolean;\n    onClear: () => void;\n    onOpenChange?: (isOpen: boolean) => void;\n}\n\nexport const RecipientTypeahead: React.FunctionComponent<RecipientTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n    const [ state, dispatchers ] = useTypeaheadReducer<Recipient>();\n    const prevOpen = usePrevious(isOpen);\n    const { getNotificationRecipients } = useRecipientContext();\n\n    React.useEffect(() => {\n        getNotificationRecipients('').then(recipients => dispatchers.setDefaults(recipients));\n    }, [ getNotificationRecipients, dispatchers ]);\n\n    React.useEffect(() => {\n        if (state.loadingFilter) {\n            getNotificationRecipients(state.lastSearch).then(recipients => dispatchers.setFilterValue(\n                state.lastSearch,\n                recipients\n            ));\n        }\n    }, [ getNotificationRecipients, state.loadingFilter, state.lastSearch, dispatchers ]);\n\n    const toggle = React.useCallback((isOpen: boolean) => {\n        setOpen(isOpen);\n    }, [ setOpen ]);\n\n    React.useEffect(() => {\n        const onOpenChange = props.onOpenChange;\n        if (prevOpen !== undefined && prevOpen !== isOpen) {\n            onOpenChange && onOpenChange(isOpen);\n        }\n    }, [ prevOpen, isOpen, props.onOpenChange ]);\n\n    const options = useRecipientOptionMemo(state);\n\n    const onFilter = React.useCallback((e: React.ChangeEvent<HTMLInputElement> | null) => {\n        // Ignore filter calls with null event\n        if (e === null) {\n            return options;\n        }\n\n        const search = e.target.value?.trim();\n        if (search === '') {\n            dispatchers.useDefaults();\n        } else {\n            dispatchers.loadFilterValue(search);\n        }\n\n        return options;\n    }, [ dispatchers, options ]);\n\n    const selection = React.useMemo(() => {\n        const sel = props.selected;\n        if (sel === undefined) {\n            return undefined;\n        }\n\n        return (sel as ReadonlyArray<NotificationRecipient>).map(s => new RecipientOption(s));\n\n    }, [ props.selected ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const onSelected = props.onSelected;\n        if (value instanceof RecipientOption) {\n            onSelected(value);\n        }\n    }, [ props.onSelected ]);\n\n    return (\n        <div { ...getOuiaProps('RecipientTypeahead', props) }>\n            <Select\n                variant={ SelectVariant.typeaheadMulti }\n                typeAheadAriaLabel=\"Select the recipients\"\n                selections={ selection }\n                onSelect={ onSelect }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onFilter={ onFilter }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n                onClear={ props.onClear }\n            >\n                { options }\n            </Select>\n        </div>\n    );\n};\n","import { FormHelperText } from '@patternfly/react-core';\nimport { ExclamationCircleIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\n\nimport { IntegrationType } from '../../../types/Integration';\nimport { Action, NotificationType } from '../../../types/Notification';\nimport { UseBehaviorGroupActionHandlers } from '../BehaviorGroup/useBehaviorGroupActionHandlers';\nimport { IntegrationRecipientTypeahead } from '../Form/IntegrationRecipientTypeahead';\nimport { RecipientTypeahead } from '../Form/RecipientTypeahead';\n\ninterface RecipientFormProps {\n    action: Action;\n    integrationSelected: ReturnType<UseBehaviorGroupActionHandlers['handleIntegrationSelected']>;\n    recipientSelected: ReturnType<UseBehaviorGroupActionHandlers['handleRecipientSelected']>;\n    recipientOnClear: ReturnType<UseBehaviorGroupActionHandlers['handleRecipientOnClear']>;\n    onOpenChange?: (isOpen: boolean) => void;\n    error?: string;\n}\n\nexport const RecipientForm: React.FunctionComponent<RecipientFormProps> = props => {\n    let recipient: React.ReactNode;\n\n    if (props.action.type === NotificationType.INTEGRATION) {\n        recipient = (\n            <IntegrationRecipientTypeahead\n                onSelected={ props.integrationSelected }\n                integrationType={ props.action.integration?.type ?? IntegrationType.WEBHOOK }\n                selected={ props.action.integration }\n                onOpenChange={ props.onOpenChange }\n            />\n        );\n    } else {\n        recipient = (\n            <RecipientTypeahead\n                onSelected={ props.recipientSelected }\n                selected={ props.action.recipient }\n                onClear={ props.recipientOnClear }\n                onOpenChange={ props.onOpenChange }\n            />\n        );\n    }\n\n    return (\n        <>\n            { recipient }\n            { props.error && (\n                <FormHelperText isError icon={ <ExclamationCircleIcon /> } isHidden={ !props.error }>\n                    { props.error }\n                </FormHelperText>\n            ) }\n        </>\n    );\n};\n","import { SelectOptionObject } from '@patternfly/react-core';\n\nimport { Messages } from '../../../properties/Messages';\nimport { UserIntegrationType } from '../../../types/Integration';\nimport { NotificationType } from '../../../types/Notification';\n\ntype ActionTypeOrIntegration = {\n    kind: 'integration';\n    type: UserIntegrationType;\n} | {\n    kind: 'notification';\n    type: NotificationType;\n}\n\nexport class ActionOption implements SelectOptionObject {\n    readonly integrationType: UserIntegrationType | undefined;\n    readonly notificationType: NotificationType;\n\n    constructor(type: ActionTypeOrIntegration) {\n        if (type.kind === 'integration') {\n            this.notificationType = NotificationType.INTEGRATION;\n            this.integrationType = type.type;\n        } else {\n            this.notificationType = type.type;\n            this.integrationType = undefined;\n        }\n    }\n\n    compareTo(selectOption: any): boolean {\n        if (selectOption instanceof ActionOption) {\n            return selectOption.notificationType === this.notificationType && selectOption.integrationType === this.integrationType;\n        }\n\n        return false;\n    }\n\n    toString(): string {\n        const actionName = Messages.components.notifications.types[this.notificationType];\n        if (this.integrationType) {\n            const integrationName = Messages.components.integrations.integrationType[this.integrationType];\n            return `${actionName}: ${integrationName}`;\n        }\n\n        return actionName;\n    }\n}\n","import { Select, SelectOption, SelectOptionObject, SelectVariant } from '@patternfly/react-core';\nimport { getInsights, OuiaComponentProps } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\n\nimport { isStagingOrProd } from '../../../types/Environments';\nimport { IntegrationType } from '../../../types/Integration';\nimport { Action, NotificationType } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { ActionOption } from './ActionOption';\n\nconst getSelectOptions = (selectedNotifications: ReadonlyArray<NotificationType>) => [\n    ...([ NotificationType.DRAWER, NotificationType.EMAIL_SUBSCRIPTION ] as ReadonlyArray<NotificationType>)\n    .filter(type => !selectedNotifications.includes(type))\n    .map(type => new ActionOption({\n        kind: 'notification',\n        type\n    })),\n    ...[ IntegrationType.WEBHOOK as const ].map(type => new ActionOption({\n        kind: 'integration',\n        type\n    }))\n];\n\nexport interface ActionTypeaheadProps extends OuiaComponentProps {\n    selectedNotifications: ReadonlyArray<NotificationType>;\n    action: Action;\n    isDisabled?: boolean;\n    onSelected: (actionOption: ActionOption) => void;\n}\n\nexport const ActionTypeahead: React.FunctionComponent<ActionTypeaheadProps> = (props) => {\n    const [ isOpen, setOpen ] = React.useState(false);\n\n    const toggle = React.useCallback((isExpanded: boolean) => {\n        setOpen(isExpanded);\n    }, [ setOpen ]);\n\n    const onSelect = React.useCallback((_event, value: string | SelectOptionObject) => {\n        const actionSelected = props.onSelected;\n        if (value instanceof ActionOption) {\n            actionSelected(value);\n            setOpen(false);\n        }\n\n    }, [ props.onSelected, setOpen ]);\n\n    const selectedOption = React.useMemo(() => {\n        if (props.action.type === NotificationType.INTEGRATION) {\n            return new ActionOption({\n                kind: 'integration',\n                type: props.action.integration.type\n            });\n        }\n\n        return new ActionOption({\n            kind: 'notification',\n            type: props.action.type\n        });\n    }, [ props.action ]);\n\n    const hideNonWebhooks = isStagingOrProd(getInsights());\n\n    const selectableOptions = React.useMemo(() => getSelectOptions(props.selectedNotifications)\n    .filter((o) => !hideNonWebhooks\n            || o.notificationType === NotificationType.INTEGRATION)\n    .map(o => <SelectOption key={ o.toString() } value={ o } />), [ hideNonWebhooks, props.selectedNotifications ]);\n\n    return (\n        <div { ...getOuiaProps('ActionTypeahead', props) } >\n            <Select\n                variant={ SelectVariant.typeahead }\n                typeAheadAriaLabel=\"Select an action type\"\n                selections={ selectedOption }\n                onToggle={ toggle }\n                isOpen={ isOpen }\n                onSelect={ onSelect }\n                menuAppendTo={ document.body }\n                isDisabled={ props.isDisabled }\n            >\n                { selectableOptions }\n            </Select>\n        </div>\n    );\n};\n","import { Button, ButtonVariant, GridItem } from '@patternfly/react-core';\nimport { MinusCircleIcon, PlusCircleIcon } from '@patternfly/react-icons';\nimport {\n    cellWidth,\n    IActions,\n    ICell,\n    IRow,\n    IRowData,\n    Table,\n    TableBody,\n    TableHeader,\n    TableVariant } from '@patternfly/react-table';\nimport { important } from 'csx';\nimport { FieldArrayRenderProps, FormikProps } from 'formik';\nimport produce, { castDraft, Draft } from 'immer';\nimport * as React from 'react';\nimport { DeepPartial } from 'ts-essentials';\nimport { cssRaw, style } from 'typestyle';\n\nimport { IntegrationType } from '../../../types/Integration';\nimport { Action, BehaviorGroup, NewBehaviorGroup, NotificationType } from '../../../types/Notification';\nimport { RecipientForm } from '../EditableActionRow/RecipientForm';\nimport { ActionTypeahead } from '../Form/ActionTypeahead';\nimport {\n    SetActionUpdater,\n    UseBehaviorGroupActionHandlers,\n    useBehaviorGroupActionHandlers\n} from './useBehaviorGroupActionHandlers';\n\ncssRaw(`\n    @media only screen and (max-width: 768px) {\n        .pf-c-select .pf-c-select__toggle-typeahead {\n            --pf-c-select__toggle-typeahead--FlexBasis: 0;\n        }\n    }\n`);\n\nexport type BehaviorGroupFormTableProps =\n    FieldArrayRenderProps & {\n    form: FormikProps<FormType>;\n}\n\ntype FormType = DeepPartial<BehaviorGroup | NewBehaviorGroup>;\n\nconst tableHeaderClassName = style({\n    $nest: {\n        '& tr': {\n            borderBottom: important(0)\n        },\n        '& th:first-child': {\n            paddingLeft: important(0)\n        },\n        '& th:last-child, & td:last-child': {\n            paddingRight: important(0)\n        }\n    }\n});\n\nconst tableBodyClassName = style({\n    $nest: {\n        '& td:first-child': {\n            paddingLeft: important(0)\n        },\n        '& td:last-child': {\n            paddingRight: important(0)\n        }\n    }\n});\n\nconst alignLeftClassName = style({\n    textAlign: 'left',\n    paddingLeft: 0\n});\n\nconst cells: Array<ICell> = [\n    {\n        title: 'Actions',\n        transforms: [ cellWidth(50) ]\n    },\n    {\n        title: 'Recipient'\n    }\n];\n\nconst toTableRows = (\n    actions: ReadonlyArray<Action>,\n    errors: any,\n    touched: any,\n    selectedNotifications: ReadonlyArray<NotificationType>,\n    rowHandlers: UseBehaviorGroupActionHandlers,\n    setFieldTouched: (field: string, isTouched?: boolean, shouldValidate?: boolean) => void\n): Array<IRow> => {\n    return actions.map((action, index) => {\n        let error: string | undefined = undefined;\n        let isTouched = false;\n        let path;\n\n        if (action.type === NotificationType.INTEGRATION) {\n            path = `actions.${index}.integration`;\n        } else {\n            path = `actions.${index}.recipient`;\n        }\n\n        if (action.type === NotificationType.INTEGRATION) {\n            if (touched[index]?.integration) {\n                isTouched = true;\n            }\n\n            if (isTouched && errors[index]?.integration) {\n                error = 'Select a recipient for this integration.';\n            }\n        }\n\n        if (!error && isTouched) {\n            setFieldTouched(path, false, false);\n        }\n\n        return {\n            id: index,\n            key: index,\n            cells: [\n                {\n                    title: <ActionTypeahead\n                        selectedNotifications={ selectedNotifications }\n                        action={ action }\n                        onSelected={ rowHandlers.handleActionSelected(index) }\n                    />\n                },\n                {\n                    title: <RecipientForm\n                        action={ action }\n                        integrationSelected={ rowHandlers.handleIntegrationSelected(index) }\n                        recipientSelected={ rowHandlers.handleRecipientSelected(index) }\n                        recipientOnClear={ rowHandlers.handleRecipientOnClear(index) }\n                        error={ error }\n                        onOpenChange={ isOpen => {\n                            if (!isOpen) {\n                                setFieldTouched(path, true, false);\n                            }\n                        } }\n                    />\n                }\n            ]\n        };\n    });\n};\n\nconst emptySpan = () => <span />;\n\nexport const BehaviorGroupFormActionsTable: React.FunctionComponent<BehaviorGroupFormTableProps> = (props) => {\n\n    const { values, setValues, isSubmitting, errors, touched, setFieldTouched } = props.form;\n    const actions = React.useMemo<ReadonlyArray<Action>>(() => values.actions ?? [] as ReadonlyArray<Action>, [ values ]);\n    const touchedActions = React.useMemo(() => touched?.actions ?? [], [ touched ]);\n    const errorActions = React.useMemo(() => errors?.actions ?? [], [ errors ]);\n\n    const selectedNotifications = React.useMemo(\n        () => new Array(...new Set<NotificationType>(actions.map(a => a.type))) as ReadonlyArray<NotificationType>,\n        [ actions ]\n    );\n\n    const setValueDispatch = React.useCallback((updater: SetActionUpdater) => {\n        setValues(produce(prev => {\n            const form = (prev as Draft<FormType>);\n            if (updater instanceof Function) {\n                form.actions = castDraft(updater(form.actions as ReadonlyArray<DeepPartial<Action>>));\n            } else {\n                form.actions = castDraft(updater);\n            }\n        }), false);\n    }, [ setValues ]);\n\n    const addAction = React.useCallback(() => {\n        const push = props.push;\n        let newAction: DeepPartial<Action>;\n        if (selectedNotifications.includes(NotificationType.EMAIL_SUBSCRIPTION)) {\n            newAction = {\n                type: NotificationType.INTEGRATION,\n                integration: {\n                    type: IntegrationType.WEBHOOK\n                }\n            };\n        } else {\n            newAction = {\n                type: NotificationType.EMAIL_SUBSCRIPTION,\n                recipient: []\n            };\n        }\n\n        push(newAction);\n    }, [ props.push, selectedNotifications ]);\n\n    React.useEffect(() => {\n        if (actions.length === 0) {\n            addAction();\n        }\n    }, [ actions, addAction ]);\n\n    const rowHandlers = useBehaviorGroupActionHandlers(setValueDispatch);\n\n    const rows = React.useMemo(\n        () => toTableRows(actions, errorActions, touchedActions, selectedNotifications, rowHandlers, setFieldTouched),\n        [ actions, errorActions, touchedActions, selectedNotifications, rowHandlers, setFieldTouched ]\n    );\n\n    const actionResolver = React.useCallback((rowData: IRowData): IActions => {\n        const handleRemove = props.handleRemove;\n        if (rows.length > 1) {\n            return [\n                {\n                    key: 'delete',\n                    title: <Button aria-label=\"delete-action\" variant={ ButtonVariant.plain }>\n                        <MinusCircleIcon />\n                    </Button>,\n                    isOutsideDropdown: true,\n                    onClick: handleRemove(rowData.id)\n                }\n            ];\n        }\n\n        return [];\n    }, [ rows, props.handleRemove ]);\n\n    return (\n        <>\n            <Table\n                aria-label=\"behavior-group-actions-form\"\n                rows={ rows }\n                cells={ cells }\n                actionResolver={ actionResolver }\n                actionsToggle={ emptySpan as any }\n                borders={ false }\n                variant={ TableVariant.compact }\n            >\n                <TableHeader className={ tableHeaderClassName } />\n                <TableBody className={ tableBodyClassName } />\n            </Table>\n            <GridItem span={ 12 }>\n                <Button\n                    className={ alignLeftClassName }\n                    variant={ ButtonVariant.link }\n                    icon={ <PlusCircleIcon /> }\n                    onClick={ addAction }\n                    isDisabled={ isSubmitting }\n                >\n                    Add action\n                </Button>\n            </GridItem>\n        </>\n    );\n};\n","import produce from 'immer';\nimport { SetStateAction, useCallback } from 'react';\nimport { DeepPartial } from 'ts-essentials';\n\nimport { Action, ActionIntegration, ActionNotify, NotificationType } from '../../../types/Notification';\nimport { IntegrationRecipient, NotificationRecipient } from '../../../types/Recipient';\nimport { ActionOption } from '../Form/ActionOption';\nimport { RecipientOption } from '../Form/RecipientOption';\n\nexport interface UseBehaviorGroupActionHandlers {\n    handleActionSelected: (index: number) => (value: ActionOption) => void;\n    handleIntegrationSelected: (index: number) => (value: RecipientOption) => void;\n    handleRecipientSelected: (index: number) => (value: RecipientOption) => void;\n    handleRecipientOnClear: (index: number) => () => void;\n}\n\nexport type SetActionUpdater = SetStateAction<ReadonlyArray<DeepPartial<Action>>>;\n\nexport const useBehaviorGroupActionHandlers = (\n    setActions: (updater: SetActionUpdater) => void\n): UseBehaviorGroupActionHandlers => {\n\n    const handleActionSelected = useCallback((index: number) => (value: ActionOption) => {\n        setActions(produce(prev => {\n            const row = prev[index];\n            row.type = value.notificationType;\n            if (value.integrationType) {\n                const rowAsIntegration = row as DeepPartial<ActionIntegration>;\n                rowAsIntegration.integration = {\n                    type: value.integrationType\n                };\n            } else {\n                const rowAsNotification = row as DeepPartial<ActionNotify>;\n                rowAsNotification.recipient = [];\n            }\n        }));\n    }, [ setActions ]);\n\n    const handleIntegrationSelected = useCallback((index: number) => (value: RecipientOption) => {\n        setActions(produce(prev => {\n            if (value.recipient instanceof IntegrationRecipient) {\n                const rowAsIntegration = prev[index] as DeepPartial<ActionIntegration>;\n                rowAsIntegration.integration = value.recipient.integration;\n            }\n        }));\n    }, [ setActions ]);\n\n    const handleRecipientSelected = useCallback((index: number) => (value: RecipientOption) => {\n        setActions(produce(prev => {\n            const row = prev[index];\n            if (row.type !== NotificationType.INTEGRATION) {\n                const rowAsNotification = row as DeepPartial<ActionNotify>;\n                if (rowAsNotification.recipient) {\n                    const index = rowAsNotification.recipient.findIndex(r => value.recipient.equals(r as NotificationRecipient));\n                    if (index === -1) {\n                        rowAsNotification.recipient = [ ...rowAsNotification.recipient, value.recipient ];\n                    } else {\n                        rowAsNotification.recipient = rowAsNotification.recipient.filter((_, i) => i !== index);\n                    }\n                }\n            }\n        }));\n    }, [ setActions ]);\n\n    const handleRecipientOnClear = useCallback((index: number) => () => {\n        setActions(produce(prev => {\n            const row = prev[index];\n            if (row.type !== NotificationType.INTEGRATION) {\n                const rowAsNotification = row as DeepPartial<ActionNotify>;\n                rowAsNotification.recipient = [];\n            }\n        }));\n    }, [ setActions ]);\n\n    return {\n        handleActionSelected,\n        handleIntegrationSelected,\n        handleRecipientSelected,\n        handleRecipientOnClear\n    };\n};\n","import { Form, Grid, GridItem } from '@patternfly/react-core';\nimport { global_spacer_md } from '@patternfly/react-tokens';\nimport { FormTextInput, OuiaComponentProps, ouiaIdConcat } from '@redhat-cloud-services/insights-common-typescript';\nimport { FieldArray } from 'formik';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { BehaviorGroup } from '../../../types/Notification';\nimport { getOuiaProps } from '../../../utils/getOuiaProps';\nimport { BehaviorGroupFormActionsTable } from './BehaviorGroupFormActionsTable';\n\nexport interface EditBehaviorGroupProps extends OuiaComponentProps {\n    behaviorGroup?: Partial<BehaviorGroup>;\n}\n\nconst subtitleClassName = style({\n    paddingBottom: global_spacer_md.var\n});\n\nexport const EditBehaviorGroupForm: React.FunctionComponent<EditBehaviorGroupProps> = props => {\n\n    return (\n        <div { ... getOuiaProps('Notifications/BehaviorGroupForm', props) }>\n            <div className={ subtitleClassName }>Enter a name and add actions for your new group.</div>\n            <Form>\n                <Grid hasGutter>\n                    <GridItem span={ 12 }>\n                        <FormTextInput\n                            ouiaId={ ouiaIdConcat(props.ouiaId, 'group-name') }\n                            label=\"Group name\"\n                            name=\"displayName\"\n                            id=\"group-name\"\n                        />\n                    </GridItem>\n                    <FieldArray name=\"actions\">\n                        { helpers => (\n                            <>\n                                <BehaviorGroupFormActionsTable\n                                    { ...helpers }\n                                />\n                            </>\n                        ) }\n                    </FieldArray>\n                </Grid>\n            </Form>\n        </div>\n    );\n};\n","import { ModalVariant } from '@patternfly/react-core';\nimport { SaveModal, SaveModalProps } from '@redhat-cloud-services/insights-common-typescript';\nimport { Formik, useFormikContext } from 'formik';\nimport * as React from 'react';\n\nimport { BehaviorGroupSchema } from '../../../schemas/Integrations/Notifications';\nimport { BehaviorGroup, DefaultNotificationBehavior, Notification } from '../../../types/Notification';\nimport { EditBehaviorGroupForm } from './BehaviorGroupForm';\n\ntype UsedProps = 'isOpen' | 'title' | 'content' | 'onSave';\nexport type BehaviorGroupSaveModalProps = Omit<SaveModalProps, UsedProps> & {\n    data?: Partial<BehaviorGroup>;\n    onSave: (behaviorGroup: BehaviorGroup) => boolean | Promise<boolean>;\n};\n\ninterface InternalProps {\n    onClose: (saved: boolean) => void;\n    data: BehaviorGroupSaveModalProps['data'];\n}\n\nconst InternalBehaviorGroupSaveModal: React.FunctionComponent<InternalProps> = props => {\n    const title =  `${props.data ? 'Create new' : 'Edit'} behavior group`;\n\n    const { handleSubmit, isValid, isSubmitting } = useFormikContext<Notification | DefaultNotificationBehavior>();\n\n    const onSaveClicked = React.useCallback(() => {\n        handleSubmit();\n        return false;\n    }, [ handleSubmit ]);\n\n    return (\n        <SaveModal\n            content={ <EditBehaviorGroupForm\n                behaviorGroup={ props.data }\n            /> }\n            isSaving={ isSubmitting }\n            onSave={ onSaveClicked }\n            isOpen={ true }\n            title={ title }\n            onClose={ props.onClose }\n            variant={ ModalVariant.large }\n            actionButtonDisabled={ !isValid }\n        />\n    );\n};\n\nexport const BehaviorGroupSaveModal: React.FunctionComponent<BehaviorGroupSaveModalProps> = props => {\n    const onSubmit = React.useCallback(async (data: Partial<BehaviorGroup>) => {\n        const onClose = props.onClose;\n        const onSave = props.onSave;\n\n        const saved = await onSave(data as BehaviorGroup);\n\n        if (saved) {\n            onClose(true);\n        }\n    }, [ props.onClose, props.onSave ]);\n\n    return (\n        <Formik<Partial<BehaviorGroup>>\n            initialValues={ props.data ?? { } }\n            validationSchema={ BehaviorGroupSchema }\n            onSubmit={ onSubmit }\n            validateOnMount={ true }\n        >\n            <InternalBehaviorGroupSaveModal\n                onClose={ props.onClose }\n                data={ props.data }\n            />\n        </Formik>\n    );\n};\n","import { NotificationRecipient } from '../../types/Recipient';\nimport { GetNotificationRecipients } from './RecipientContext';\n\nconst all: ReadonlyArray<NotificationRecipient> = [\n    new NotificationRecipient(undefined, false),\n    new NotificationRecipient(undefined, true)\n];\n\nconst getRecipients = async (search?: string) => {\n    if (search) {\n        const lowerCaseSearch = search.toLowerCase();\n        return all.filter(r => r.displayName.toLowerCase().includes(lowerCaseSearch));\n    }\n\n    return all;\n};\n\nexport const useGetRecipients = (): GetNotificationRecipients => {\n    return getRecipients;\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toBehaviorGroup, toShallowBehaviorGroupRequest } from '../../types/adapters/BehaviorGroupAdapter';\nimport { BehaviorGroup, NewBehaviorGroup } from '../../types/Notification';\n\ntype Payload = Operations.NotificationServiceCreateBehaviorGroup.Payload\n    | Operations.NotificationServiceUpdateBehaviorGroup.Payload;\n\nconst decoder = validationResponseTransformer(\n    (payload: Payload) => {\n        if (payload.type === 'BehaviorGroup') {\n            return validatedResponse(\n                'BehaviorGroup',\n                payload.status,\n                toBehaviorGroup(payload.value),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nconst saveBehaviorGroupActionCreator =  (behaviorGroup: BehaviorGroup | NewBehaviorGroup) => {\n    if (behaviorGroup.id === undefined) {\n        return Operations.NotificationServiceCreateBehaviorGroup.actionCreator({\n            body: toShallowBehaviorGroupRequest(behaviorGroup)\n        });\n    }\n\n    return Operations.NotificationServiceUpdateBehaviorGroup.actionCreator({\n        id: behaviorGroup.id,\n        body: toShallowBehaviorGroupRequest(behaviorGroup)\n    });\n};\n\nexport const useSaveBehaviorGroupMutation = () => useTransformQueryResponse(\n    useMutation(saveBehaviorGroupActionCreator),\n    decoder\n);\n","import { useMutation } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\ntype UpdateBehaviorGroupActionsParams = {\n    behaviorGroupId: UUID;\n    endpointIds: Array<UUID>;\n}\n\nconst updateBehaviorGroupActionsActionCreator =  (params: UpdateBehaviorGroupActionsParams) => {\n    return Operations.NotificationServiceUpdateBehaviorGroupActions.actionCreator({\n        behaviorGroupId: params.behaviorGroupId,\n        body: params.endpointIds\n    });\n};\n\nexport const useUpdateBehaviorGroupActionsMutation = () => useMutation(updateBehaviorGroupActionsActionCreator);\n","import { addDangerNotification, addSuccessNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport produce from 'immer';\nimport isEqual from 'lodash/isEqual';\nimport uniqWith from 'lodash/uniqWith';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport { BehaviorGroupSaveModal } from '../../../components/Notifications/BehaviorGroup/BehaviorGroupSaveModal';\nimport { RecipientContextProvider } from '../../../components/Notifications/RecipientContext';\nimport { useGetIntegrations } from '../../../components/Notifications/useGetIntegrations';\nimport { useGetRecipients } from '../../../components/Notifications/useGetRecipients';\nimport { getDefaultSystemEndpointAction } from '../../../services/Integrations/GetDefaultSystemEndpoint';\nimport { useSaveBehaviorGroupMutation } from '../../../services/Notifications/SaveBehaviorGroup';\nimport { useUpdateBehaviorGroupActionsMutation } from '../../../services/Notifications/UpdateBehaviorGroupActions';\nimport { toSystemProperties } from '../../../types/adapters/NotificationAdapter';\nimport {\n    BehaviorGroup, isActionIntegration, isActionNotify,\n    NewBehaviorGroup,\n    NotificationType,\n    SystemProperties,\n    UUID\n} from '../../../types/Notification';\n\ninterface EditBehaviorGroupPageProps {\n    behaviorGroup?: Partial<BehaviorGroup>;\n    onClose: (saved: boolean) => void;\n}\n\nconst needsSaving = (original: Partial<BehaviorGroup> | undefined, updated: BehaviorGroup | NewBehaviorGroup) => {\n    return original?.id === undefined || original.displayName !== updated.displayName;\n};\n\nexport const EditBehaviorGroupPage: React.FunctionComponent<EditBehaviorGroupPageProps> = props => {\n    const getRecipients = useGetRecipients();\n    const getIntegrations = useGetIntegrations();\n\n    const actionsContextValue = React.useMemo(() => ({\n        getIntegrations,\n        getNotificationRecipients: getRecipients\n    }), [ getIntegrations, getRecipients ]);\n\n    const saveBehaviorGroupMutation = useSaveBehaviorGroupMutation();\n    const updateBehaviorGroupActionsMutation = useUpdateBehaviorGroupActionsMutation();\n    const { query } = useContext(ClientContext);\n    const [ fetchingIntegrations, setFetchingIntegrations ] = React.useState<boolean>(false);\n\n    const onSave = React.useCallback(async (data: BehaviorGroup | NewBehaviorGroup) => {\n        const updateBehaviorGroupActions = updateBehaviorGroupActionsMutation.mutate;\n        const saveBehaviorGroup = saveBehaviorGroupMutation.mutate;\n\n        return (needsSaving(props.behaviorGroup, data) ?\n            saveBehaviorGroup(data).then(value => {\n                if (value.payload?.type === 'BehaviorGroup') {\n                    return value.payload.value.id;\n                } else if (value.payload?.status === 200) {\n                    return data.id;\n                }\n\n                throw new Error('Behavior group wasn\\'t saved');\n            }) : Promise.resolve(data.id)).then(behaviorGroupId => {\n\n            // Determine what system Integrations we need to fetch\n            const toFetch: ReadonlyArray<SystemProperties> = uniqWith(\n                ([] as Array<SystemProperties>)\n                .concat(...data.actions.filter(isActionNotify)\n                .map(action => produce(action, draft => {\n                    draft.recipient = draft.recipient.filter(r => !r.integrationId);\n                }))\n                .map(action => toSystemProperties(action))),\n                isEqual\n            );\n\n            if (toFetch.find(props => props.type !== NotificationType.EMAIL_SUBSCRIPTION)) {\n                throw new Error('Only email subscriptions are created when assigning behavior groups');\n            }\n\n            if (toFetch.length > 0) {\n                setFetchingIntegrations(true);\n            }\n\n            return Promise.all(\n                toFetch.map(systemProps => query(getDefaultSystemEndpointAction(systemProps))\n                .then(result => result.payload?.type === 'Endpoint' ? result.payload.value.id : undefined)\n                )\n            ).then(newIds => {\n                const endpointsToAdd = [\n                    // fetched\n                    ...newIds as UUID[],\n                    // integrations\n                    ...data.actions.filter(isActionIntegration).map(action => action.integration.id),\n                    // Existing actions with id\n                    ...data.actions.filter(isActionNotify).map(a => a.recipient).flat().map(r => r.integrationId).filter(r => r) as UUID[]\n                ];\n\n                return updateBehaviorGroupActions({\n                    behaviorGroupId: behaviorGroupId as UUID,\n                    endpointIds: endpointsToAdd\n                });\n            });\n        }).then(value => {\n            if (value.payload?.status === 200) {\n                if (data.id === undefined) {\n                    addSuccessNotification(\n                        'New behavior group created',\n                        <>\n                            Group <b> { data.displayName } </b> created successfully.\n                        </>\n                    );\n                } else {\n                    addSuccessNotification(\n                        'Behavior group saved',\n                        <>\n                            Group <b> { data.displayName } </b> was saved successfully.\n                        </>\n                    );\n                }\n\n                return true;\n            }\n\n            if (data.id === undefined) {\n                addDangerNotification(\n                    'Behavior group failed to be created',\n                    <>\n                        Failed to create group <b> { data.displayName }</b>.\n                        <br />\n                        Please try again.\n                    </>\n                );\n            } else {\n                addDangerNotification(\n                    'Behavior group failed to save',\n                    <>\n                        Failed to save group <b> { data.displayName }</b>.\n                        <br />\n                        Please try again.\n                    </>\n                );\n            }\n\n            return false;\n        }).catch(err => {\n            console.error('Error saving behavior groups', err);\n            throw err;\n        });\n    }, [ saveBehaviorGroupMutation.mutate, updateBehaviorGroupActionsMutation.mutate, props.behaviorGroup, query ]);\n\n    const isSaving = React.useMemo(() => {\n        return fetchingIntegrations || saveBehaviorGroupMutation.loading || updateBehaviorGroupActionsMutation.loading;\n    }, [ fetchingIntegrations, saveBehaviorGroupMutation.loading, updateBehaviorGroupActionsMutation.loading ]);\n\n    return (\n        <RecipientContextProvider value={ actionsContextValue }>\n            <BehaviorGroupSaveModal\n                data={ props.behaviorGroup }\n                isSaving={ isSaving }\n                onClose={ props.onClose }\n                onSave={ onSave }\n            />\n        </RecipientContextProvider>\n    );\n};\n","import { Filter, Operator, Page } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { ClientContext } from 'react-fetching-library';\n\nimport { listIntegrationIntegrationDecoder, listIntegrationsActionCreator } from '../../services/useListIntegrations';\nimport { UserIntegrationType } from '../../types/Integration';\nimport { IntegrationRef } from '../../types/Notification';\nimport { GetIntegrations } from './RecipientContext';\n\nexport const useGetIntegrations = (): GetIntegrations => {\n    const { query } = useContext(ClientContext);\n\n    return React.useCallback(async (type: UserIntegrationType, _search?: string) => {\n        return query(listIntegrationsActionCreator(\n            Page.of(\n                1,\n                20,\n                new Filter()\n                .and('type', Operator.EQUAL, type)\n            )\n        )).then(response => {\n            let integrations: ReadonlyArray<IntegrationRef> = [];\n            const payload = response.payload ? listIntegrationIntegrationDecoder(response.payload) : undefined;\n\n            if (payload?.type === 'IntegrationPage') {\n                integrations = payload.value.data;\n            }\n\n            return integrations;\n        });\n    }, [ query ]);\n};\n","import assertNever from 'assert-never';\n\nimport { Operations } from '../../generated/OpenapiIntegrations';\nimport { NotificationType, SystemProperties } from '../../types/Notification';\n\nexport const getDefaultSystemEndpointAction = (systemProperties: SystemProperties) => {\n    if (systemProperties.type === NotificationType.EMAIL_SUBSCRIPTION) {\n        return Operations.EndpointServiceGetOrCreateEmailSubscriptionEndpoint.actionCreator({\n            body: {\n                only_admins: systemProperties.props.onlyAdmins\n            }\n        });\n    }\n\n    assertNever(systemProperties.type);\n};\n","import {\n    Badge,\n    Button, ButtonProps,\n    ButtonVariant,\n    ExpandableSection,\n    ExpandableSectionToggle,\n    SearchInput, Split,\n    SplitItem,\n    Stack,\n    StackItem,\n    Title, Tooltip\n} from '@patternfly/react-core';\nimport { global_BackgroundColor_100, global_palette_black_1000, global_spacer_lg } from '@patternfly/react-tokens';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport {\n    BehaviorGroupCardList,\n    BehaviorGroupCardListSkeleton\n} from '../../../components/Notifications/BehaviorGroup/BehaviorGroupCardList';\nimport { useDeleteModalReducer } from '../../../hooks/useDeleteModalReducer';\nimport {\n    useFormModalReducer } from '../../../hooks/useFormModalReducer';\nimport { BehaviorGroup, UUID } from '../../../types/Notification';\nimport { emptyImmutableArray } from '../../../utils/Immutable';\nimport { DeleteBehaviorGroupPage } from '../Form/DeleteBehaviorGroupPage';\nimport { EditBehaviorGroupPage } from '../Form/EditBehaviorGroupPage';\nimport { BehaviorGroupContent } from './useBehaviorGroupContent';\n\nconst expandableSectionClassName = {\n    backgroundColor: global_BackgroundColor_100.var,\n    paddingLeft: global_spacer_lg.var,\n    paddingRight: global_spacer_lg.var\n};\n\nconst sectionClassName = style(\n    expandableSectionClassName,\n    {\n        paddingBottom: global_spacer_lg.var\n    }\n);\n\nconst sectionTitleClassName = style(\n    expandableSectionClassName,\n    {\n        paddingTop: global_spacer_lg.var\n    }\n);\n\nconst titleClassName = style({\n    marginTop: '-0.15em',\n    color: global_palette_black_1000.var\n});\n\nconst emptyAddButtonClassName = style({\n    marginTop: '-0.2em'\n});\n\ninterface BehaviorGroupSectionProps {\n    bundleId: UUID;\n    behaviorGroupContent: BehaviorGroupContent;\n}\n\ntype BehaviorGroupAddButtonProps = Pick<ButtonProps, 'className' | 'onClick' | 'isDisabled' | 'component'>;\n\nconst BehaviorGroupAddButton: React.FunctionComponent<BehaviorGroupAddButtonProps> = props => {\n    const { isDisabled, ...buttonProps } = props;\n    const { isOrgAdmin } = useAppContext();\n\n    const button = <Button\n        { ...buttonProps }\n        isAriaDisabled={ isDisabled }\n        variant={ ButtonVariant.primary }\n    >\n        Create new group\n    </Button>;\n\n    if (isDisabled) {\n        const content = isOrgAdmin ?\n            'You need the Notifications administrator role to perform this action' :\n            'You do not have permissions to perform this action. Contact your org admin for more information';\n        return <Tooltip content={ content }>\n            { button }\n        </Tooltip>;\n    }\n\n    return button;\n};\n\nexport const BehaviorGroupsSection: React.FunctionComponent<BehaviorGroupSectionProps> = props => {\n\n    const [ isExpanded, setExpanded ] = React.useState(true);\n    const [ filter, setFilter ] = React.useState<string>('');\n    const { rbac } = useAppContext();\n\n    const filteredBehaviors = React.useMemo(() => {\n        if (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError) {\n            const lowerCaseFilter = filter.toLowerCase();\n            return props.behaviorGroupContent.content.filter(bg => bg.displayName.toLowerCase().includes(lowerCaseFilter));\n        }\n\n        return emptyImmutableArray;\n    }, [ filter, props.behaviorGroupContent ]);\n\n    const [ editModalState, editModalActions ] = useFormModalReducer<BehaviorGroup>();\n    const [ deleteModalState, deleteModalActions ] = useDeleteModalReducer<BehaviorGroup>();\n\n    const createGroup = React.useCallback((event) => {\n        event.stopPropagation();\n        editModalActions.create({\n            bundleId: props.bundleId\n        });\n    }, [ editModalActions, props.bundleId ]);\n\n    const onCloseModal = React.useCallback((saved: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (saved) {\n            reload();\n        }\n\n        editModalActions.reset();\n    }, [ editModalActions, props.behaviorGroupContent.reload ]);\n\n    const onEdit = React.useCallback((behaviorGroup: BehaviorGroup) => {\n        editModalActions.edit(behaviorGroup);\n    }, [ editModalActions ]);\n\n    const onDelete = React.useCallback((behaviorGroup: BehaviorGroup) => {\n        deleteModalActions.delete(behaviorGroup);\n    }, [ deleteModalActions ]);\n\n    const onCloseDelete = React.useCallback((deleted: boolean) => {\n        const reload = props.behaviorGroupContent.reload;\n        if (deleted) {\n            reload();\n        }\n\n        deleteModalActions.reset();\n    }, [ deleteModalActions, props.behaviorGroupContent.reload ]);\n\n    const onClearFilter = React.useCallback(() => {\n        setFilter('');\n    }, [ setFilter ]);\n\n    const contentId = 'behavior-group-section-content';\n\n    return (\n        <div>\n            <div className={ sectionTitleClassName }>\n                <ExpandableSectionToggle\n                    isExpanded={ isExpanded }\n                    onToggle={ setExpanded }\n                    contentId={ contentId }\n                    direction=\"down\"\n                >\n                    <Split hasGutter>\n                        <SplitItem>\n                            <Title className={ titleClassName } headingLevel=\"h2\">Behavior groups</Title>\n                        </SplitItem>\n                        <SplitItem>\n                            { (!props.behaviorGroupContent.isLoading && !props.behaviorGroupContent.hasError) && (\n                                props.behaviorGroupContent.content.length > 0 ?\n                                    <Badge isRead>{ props.behaviorGroupContent.content.length }</Badge> :\n                                    <BehaviorGroupAddButton\n                                        className={ emptyAddButtonClassName }\n                                        component='a'\n                                        onClick={ createGroup }\n                                        isDisabled={ !rbac.canWriteNotifications }\n                                    />\n                            ) }\n                        </SplitItem>\n                    </Split>\n                </ExpandableSectionToggle>\n            </div>\n            <ExpandableSection\n                className={ sectionClassName }\n                contentId={ contentId }\n                isExpanded={ isExpanded }\n                onToggle={ setExpanded }\n                isDetached\n            >\n                <Stack hasGutter>\n                    <StackItem>\n                        Configure default actions for notifications recipients. Keep in mind that users will be able\n                        to change settings for all entitled events in User Preferences. You can prevent users from\n                        changing assigned actions by locking action / recipient pairings when creating or editing\n                        behavior groups.\n                    </StackItem>\n                    { (props.behaviorGroupContent.isLoading ||\n                        props.behaviorGroupContent.hasError ||\n                        props.behaviorGroupContent.content.length > 0) && (\n                        <>\n                            <StackItem>\n                                <Split hasGutter>\n                                    <SplitItem>\n                                        <SearchInput\n                                            value={ filter }\n                                            onChange={ setFilter }\n                                            onClear={ onClearFilter }\n                                            type=\"text\"\n                                            aria-label=\"Search by name\"\n                                            placeholder=\"Search by name\"\n                                            isDisabled={ props.behaviorGroupContent.isLoading }\n                                        />\n                                    </SplitItem>\n                                    <SplitItem>\n                                        <BehaviorGroupAddButton\n                                            isDisabled={ props.behaviorGroupContent.isLoading || !rbac.canWriteNotifications }\n                                            onClick={ createGroup }\n                                        />\n                                    </SplitItem>\n                                </Split>\n                            </StackItem>\n                            <StackItem>\n                                { props.behaviorGroupContent.isLoading ? (\n                                    <BehaviorGroupCardListSkeleton />\n                                ) : props.behaviorGroupContent.hasError ? (\n                                    <div>Error loading behavior groups</div>\n                                ) : (\n                                    <BehaviorGroupCardList\n                                        onEdit={ rbac.canWriteNotifications ? onEdit : undefined }\n                                        onDelete={ rbac.canWriteNotifications ? onDelete : undefined }\n                                        behaviorGroups={ filteredBehaviors }\n                                    />\n                                ) }\n                            </StackItem>\n                        </>\n                    ) }\n                </Stack>\n                { editModalState.isOpen && (\n                    <EditBehaviorGroupPage\n                        behaviorGroup={ editModalState.template }\n                        onClose={ onCloseModal }\n                    />\n                )}\n                { deleteModalState.isOpen && (\n                    <DeleteBehaviorGroupPage\n                        behaviorGroup={ deleteModalState.data }\n                        onClose={ onCloseDelete }\n                    />\n                ) }\n            </ExpandableSection>\n        </div>\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { toBehaviorGroup } from '../../types/adapters/BehaviorGroupAdapter';\nimport { UUID } from '../../types/Notification';\n\nconst behaviorGroupDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceFindBehaviorGroupsByBundleId.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroups',\n                200,\n                payload.value.map(toBehaviorGroup),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const useGetBehaviorGroups = (bundleId: UUID) => {\n    return useTransformQueryResponse(\n        useQuery(Operations.NotificationServiceFindBehaviorGroupsByBundleId.actionCreator({\n            bundleId\n        })),\n        behaviorGroupDecoder\n    );\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\n\nexport const getBehaviorGroupByNotificationDecoder = validationResponseTransformer(\n    (payload: Operations.NotificationServiceGetLinkedBehaviorGroups.Payload) => {\n        if (payload.status === 200) {\n            return validatedResponse(\n                'BehaviorGroupId',\n                200,\n                payload.value.map(value => value.id),\n                payload.errors\n            );\n        }\n\n        return payload;\n    }\n);\n\nexport const getBehaviorGroupByNotificationAction = (notificationId: UUID) =>\n    Operations.NotificationServiceGetLinkedBehaviorGroups.actionCreator({\n        eventTypeId: notificationId\n    });\n\nexport const useGetBehaviorGroupByNotification = (notificationId: UUID) => {\n    return useTransformQueryResponse(\n        useQuery(getBehaviorGroupByNotificationAction(notificationId)),\n        getBehaviorGroupByNotificationDecoder\n    );\n};\n","import { Operations } from '../../generated/OpenapiNotifications';\nimport { UUID } from '../../types/Notification';\nimport NotificationServiceUpdateEventTypeBehaviors = Operations.NotificationServiceUpdateEventTypeBehaviors;\n\nexport const linkBehaviorGroupAction = (notificationId: UUID, behaviorGroupIds: Array<UUID>) => {\n    return NotificationServiceUpdateEventTypeBehaviors.actionCreator({\n        body: behaviorGroupIds,\n        eventTypeId: notificationId\n    });\n};\n","import { addDangerNotification } from '@redhat-cloud-services/insights-common-typescript';\nimport produce, { castDraft } from 'immer';\nimport pLimit from 'p-limit';\nimport * as React from 'react';\nimport { ClientContext } from 'react-fetching-library';\nimport { usePrevious } from 'react-use';\n\nimport { getBehaviorGroupByNotificationAction } from '../../../services/Notifications/GetBehaviorGroupByNotificationId';\nimport { linkBehaviorGroupAction } from '../../../services/Notifications/LinkBehaviorGroup';\nimport { toBehaviorGroup } from '../../../types/adapters/BehaviorGroupAdapter';\nimport { BehaviorGroup, Notification, NotificationBehaviorGroup, UUID } from '../../../types/Notification';\nimport { findById } from '../../../utils/Find';\n\nconst MAX_NUMBER_OF_CONCURRENT_REQUESTS = 5;\n\nexport type BehaviorGroupNotificationRow = NotificationBehaviorGroup & {\n    readonly loadingActionStatus: 'loading' | 'done' | 'error';\n    readonly behaviors: ReadonlyArray<BehaviorGroup>;\n} & (\n    {\n        readonly isEditMode: false;\n    } |\n    {\n        readonly isEditMode: true;\n        readonly oldBehaviors: ReadonlyArray<BehaviorGroup>;\n    }\n);\n\nconst getNotification = <T extends ReadonlyArray<BehaviorGroupNotificationRow>>(\n    rows: T,\n    notificationId: UUID): T[number] => {\n    const notification = rows.find(findById(notificationId));\n    if (!notification) {\n        throw new Error('Notification not found in rows');\n    }\n\n    return notification;\n};\n\nexport const useBehaviorGroupNotificationRows = (notifications: Array<Notification>) => {\n    const [ notificationRows, setNotificationRows ] = React.useState<Array<BehaviorGroupNotificationRow>>([]);\n    const prevNotificationInput = usePrevious(notifications);\n    const { query } = React.useContext(ClientContext);\n    const [ limit ] = React.useState<pLimit.Limit>(() => pLimit(MAX_NUMBER_OF_CONCURRENT_REQUESTS));\n\n    const removeBehaviorGroup = React.useCallback((notificationId: UUID, behaviorGroupId: UUID) => {\n        setNotificationRows(produce(draft => {\n            const notification = getNotification(draft, notificationId);\n            const index = notification.behaviors.findIndex(findById(behaviorGroupId));\n            if (index === -1) {\n                throw new Error('Behavior group not found in rows');\n            }\n\n            notification.behaviors.splice(index, 1);\n        }));\n    }, [ setNotificationRows ]);\n\n    const updateBehaviorGroups = React.useCallback((behaviorGroups: ReadonlyArray<BehaviorGroup>) => {\n        setNotificationRows(produce(draft => {\n            for (const content of draft) {\n                content.behaviors = castDraft(content.behaviors.map(ob => behaviorGroups.find(nb => nb.id === ob.id) || ob));\n            }\n        }));\n    }, [ setNotificationRows ]);\n\n    const updateBehaviorGroupLink = React.useCallback((notificationId: UUID, behaviorGroup: BehaviorGroup, linkBehavior: boolean) => {\n        if (linkBehavior) {\n            setNotificationRows(produce(draft => {\n                const notification = getNotification(draft, notificationId);\n                notification.behaviors.push({\n                    ...castDraft(behaviorGroup)\n                });\n            }));\n        } else {\n            removeBehaviorGroup(notificationId, behaviorGroup.id);\n        }\n    }, [ removeBehaviorGroup, setNotificationRows ]);\n\n    const setEditMode = React.useCallback(async (notificationId: UUID, command: 'edit' | 'finish' | 'cancel') => {\n\n        if (command === 'finish') {\n            const notification = getNotification(notificationRows, notificationId);\n            if (notification.isEditMode) {\n                setNotificationRows(produce(draft => {\n                    const draftNotification = getNotification(draft, notificationId);\n                    draftNotification.loadingActionStatus = 'loading';\n                }));\n\n                const response = await query(linkBehaviorGroupAction(notificationId, notification.behaviors.map(b => b.id)));\n                if (response.payload?.status === 200) {\n                    setNotificationRows(produce(draft => {\n                        const draftNotification = getNotification(draft, notificationId);\n                        draftNotification.isEditMode = false;\n                        draftNotification.loadingActionStatus = 'done';\n                    }));\n                } else {\n                    addDangerNotification(\n                        'Saving behavior',\n                        <>\n                            There was an error saving the behavior\n                             of <b>{notification.applicationDisplayName} - {notification.eventTypeDisplayName}</b>.\n                        </>\n                    );\n                    setNotificationRows(produce(draft => {\n                        const draftNotification = getNotification(draft, notificationId);\n                        draftNotification.isEditMode = true;\n                        draftNotification.loadingActionStatus = 'done';\n                    }));\n                }\n            }\n        } else {\n            setNotificationRows(produce(draft => {\n                const notification = getNotification(draft, notificationId);\n\n                if (notification.isEditMode && command === 'cancel') {\n                    notification.behaviors = notification.oldBehaviors;\n                }\n\n                notification.isEditMode = command === 'edit';\n                if (notification.isEditMode) {\n                    notification.oldBehaviors = notification.behaviors;\n                }\n            }));\n        }\n    }, [ setNotificationRows, notificationRows, query ]);\n\n    const startEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'edit');\n    }, [ setEditMode ]);\n\n    const finishEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'finish');\n    }, [ setEditMode ]);\n\n    const cancelEditMode = React.useCallback((notificationId: UUID) => {\n        setEditMode(notificationId, 'cancel');\n    }, [ setEditMode ]);\n\n    React.useEffect(() => {\n        if (notifications !== prevNotificationInput) {\n            setNotificationRows(_prev => notifications.map(notification => ({\n                ...notification,\n                loadingActionStatus: 'loading',\n                behaviors: [],\n                isEditMode: false\n            })));\n\n            if (notifications) {\n                limit.clearQueue();\n\n                notifications.map(notification => notification.id).forEach(notificationId => {\n                    limit(() => query(getBehaviorGroupByNotificationAction(notificationId))).then(response => {\n                        setNotificationRows(produce(draft => {\n                            const draftNotification = getNotification(draft, notificationId);\n                            if (response.payload?.status === 200) {\n                                draftNotification.loadingActionStatus = 'done';\n                                draftNotification.behaviors = response.payload.value.map(toBehaviorGroup).map(bg => ({\n                                    ...bg,\n                                    isLoading: false,\n                                    actions: castDraft(bg.actions)\n                                }));\n                            } else {\n                                draftNotification.loadingActionStatus = 'error';\n                                draftNotification.behaviors = [];\n                            }\n                        }));\n                    });\n                });\n            }\n        }\n\n    }, [ notifications, limit, query, prevNotificationInput, setNotificationRows ]);\n\n    return {\n        rows: notificationRows,\n        updateBehaviorGroupLink,\n        updateBehaviorGroups,\n        startEditMode,\n        finishEditMode,\n        cancelEditMode\n    };\n};\n","import { global_spacer_xl } from '@patternfly/react-tokens';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport { ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { style } from 'typestyle';\n\nimport { useAppContext } from '../../../app/AppContext';\nimport { NotificationsBehaviorGroupTable } from '../../../components/Notifications/NotificationsBehaviorGroupTable';\nimport { NotificationsToolbar } from '../../../components/Notifications/Toolbar';\nimport { useListNotifications } from '../../../services/useListNotifications';\nimport { BehaviorGroup, Facet, NotificationBehaviorGroup, UUID } from '../../../types/Notification';\nimport { BehaviorGroupsSection } from './BehaviorGroupsSection';\nimport { useBehaviorGroupContent } from './useBehaviorGroupContent';\nimport { useBehaviorGroupNotificationRows } from './useBehaviorGroupNotificationRows';\nimport { useNotificationFilter } from './useNotificationFilter';\nimport { useNotificationPage } from './useNotificationPage';\n\ninterface BundlePageBehaviorGroupContentProps {\n    applications: Array<Facet>;\n    bundle: Facet;\n}\n\nconst behaviorGroupSectionClassName = style({\n    marginBottom: global_spacer_xl.var\n});\n\nconst emptyArray = [];\n\nexport const BundlePageBehaviorGroupContent: React.FunctionComponent<BundlePageBehaviorGroupContentProps> = props => {\n\n    const notificationsFilter = useNotificationFilter(props.applications.map(a => a.displayName.toString()));\n    const behaviorGroupContent = useBehaviorGroupContent(props.bundle.id);\n\n    const { rbac } = useAppContext();\n\n    const onExport = React.useCallback((type: ExporterType) => {\n        console.log('Export to', type);\n    }, []);\n\n    const notificationPage = useNotificationPage(notificationsFilter.debouncedFilters, props.bundle, props.applications, 10);\n    const useNotifications = useListNotifications(notificationPage.page);\n    const {\n        rows: notificationRows,\n        updateBehaviorGroupLink,\n        startEditMode,\n        finishEditMode,\n        cancelEditMode,\n        updateBehaviorGroups\n    } = useBehaviorGroupNotificationRows(\n        useNotifications.payload?.type === 'eventTypesArray' ? useNotifications.payload.value : emptyArray\n    );\n\n    const behaviorGroups = !behaviorGroupContent.isLoading && !behaviorGroupContent.hasError ? behaviorGroupContent.content : undefined;\n\n    React.useEffect(() => {\n        if (behaviorGroups) {\n            updateBehaviorGroups(behaviorGroups);\n        }\n    }, [ behaviorGroups, updateBehaviorGroups ]);\n\n    const onBehaviorGroupLinkUpdated = React.useCallback((\n        notification: NotificationBehaviorGroup,\n        behaviorGroup: BehaviorGroup,\n        isLinked: boolean) => {\n        if (behaviorGroup) {\n            updateBehaviorGroupLink(notification.id, behaviorGroup, isLinked);\n        }\n    }, [ updateBehaviorGroupLink ]);\n\n    const onStartEditing = React.useCallback((notificationId: UUID) => {\n        startEditMode(notificationId);\n    }, [ startEditMode ]);\n\n    const onFinishEditing = React.useCallback((notificationId: UUID) => {\n        finishEditMode(notificationId);\n    }, [ finishEditMode ]);\n\n    const onCancelEditing = React.useCallback((notificationId: UUID) => {\n        cancelEditMode(notificationId);\n    }, [ cancelEditMode ]);\n\n    return (\n        <Section>\n            <div className={ behaviorGroupSectionClassName }>\n                <BehaviorGroupsSection\n                    bundleId={ props.bundle.id }\n                    behaviorGroupContent={ behaviorGroupContent }\n                />\n            </div>\n            <NotificationsToolbar\n                filters={ notificationsFilter.filters }\n                setFilters={ notificationsFilter.setFilters }\n                clearFilter={ notificationsFilter.clearFilter }\n                appFilterOptions={ props.applications }\n                onExport={ onExport }\n            >\n                <NotificationsBehaviorGroupTable\n                    notifications={ notificationRows }\n                    behaviorGroupContent={ behaviorGroupContent }\n                    onBehaviorGroupLinkUpdated={ onBehaviorGroupLinkUpdated }\n                    onStartEditing={ rbac.canWriteNotifications ? onStartEditing : undefined }\n                    onFinishEditing={ rbac.canWriteNotifications ? onFinishEditing : undefined }\n                    onCancelEditing={ rbac.canWriteNotifications ? onCancelEditing : undefined }\n                />\n            </NotificationsToolbar>\n        </Section>\n    );\n};\n","import { useFilters, useUrlStateMultipleOptions, useUrlStateString } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\nimport { useMemo } from 'react';\n\nimport { NotificationFilterColumn } from '../../../components/Notifications/Filter';\n\nconst DEBOUNCE_MS = 250;\n\nexport const useNotificationFilter = (initialAppOptions: Array<string>, debounce = DEBOUNCE_MS) => {\n    const useStateFactory = useMemo(() => {\n        const useUrlStateName = (defaultValue?: string) => useUrlStateString('name', defaultValue);\n        const useUrlStateApplication = (defaultValue?: Array<string>) => useUrlStateMultipleOptions(\n            'app',\n            initialAppOptions,\n            defaultValue\n        );\n        const useUrlStateAction = (defaultValue?: string) => useUrlStateString('action', defaultValue);\n\n        const useStateFactoryInternal = (column: NotificationFilterColumn) => {\n            switch (column) {\n                case NotificationFilterColumn.NAME:\n                    return useUrlStateName;\n                case NotificationFilterColumn.ACTION:\n                    return useUrlStateAction;\n                case NotificationFilterColumn.APPLICATION:\n                    return useUrlStateApplication;\n                default:\n                    assertNever(column);\n            }\n        };\n\n        return useStateFactoryInternal;\n        // This is an init param, so it doesn't need to recompute on change.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return useFilters(NotificationFilterColumn, debounce, useStateFactory);\n};\n","import * as React from 'react';\n\nimport { useGetBehaviorGroups } from '../../../services/Notifications/GetBehaviorGroups';\nimport { BehaviorGroup, UUID } from '../../../types/Notification';\n\nexport type BehaviorGroupContent = {\n    isLoading: true;\n    reload: () => void;\n} | {\n    isLoading: false;\n    hasError: true;\n    error: string;\n    reload: () => void;\n} | {\n    isLoading: false;\n    hasError: false;\n    content: ReadonlyArray<BehaviorGroup>;\n    reload: () => void;\n}\n\nexport const useBehaviorGroupContent = (bundleId: UUID) => {\n    const behaviorGroups = useGetBehaviorGroups(bundleId);\n\n    return React.useMemo<BehaviorGroupContent>(() => {\n        const payload = behaviorGroups.payload;\n        const error = behaviorGroups.errorObject;\n        const loading = behaviorGroups.loading;\n        const reload = behaviorGroups.query;\n\n        if (loading) {\n            return {\n                isLoading: true,\n                reload\n            };\n        }\n\n        if (payload?.status === 200) {\n            return {\n                isLoading: false,\n                hasError: false,\n                content: payload.value,\n                reload\n            };\n        }\n\n        return {\n            isLoading: false,\n            hasError: true,\n            error: error.toString(),\n            reload\n        };\n\n    }, [ behaviorGroups.payload, behaviorGroups.loading, behaviorGroups.errorObject, behaviorGroups.query ]);\n};\n","import { arrayValue, Filter, Operator, Page, Sort } from '@redhat-cloud-services/insights-common-typescript';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NotificationFilterColumn, NotificationFilters } from '../../../components/Notifications/Filter';\nimport { Facet } from '../../../types/Notification';\n\nexport interface UseNotificationPageReturn {\n    page: Page;\n    changePage: (page: number) => void;\n    changeItemsPerPage: (perPage: number) =>  void;\n}\n\nexport const useNotificationPage = (\n    filters: NotificationFilters,\n    bundle: Facet,\n    appFilterOptions: Array<Facet>,\n    defaultPerPage: number,\n    sort?: Sort): UseNotificationPageReturn => {\n    const [ currentPage, setCurrentPage ] = useState<number>(1);\n    const [ itemsPerPage, setItemsPerPage ] = useState<number>(defaultPerPage);\n\n    useEffect(() => setCurrentPage(1), [ setCurrentPage, filters ]);\n\n    const page = useMemo(() => {\n        const filter = new Filter();\n\n        const appFilter = filters[NotificationFilterColumn.APPLICATION];\n\n        if (appFilter) {\n            const appIds: Array<string> = [];\n            for (const appName of arrayValue(appFilter)) {\n                const filterOption = appFilterOptions.find(a => a.displayName === appName);\n                if (filterOption) {\n                    appIds.push(filterOption.id);\n                }\n            }\n\n            filter.and('applicationId', Operator.EQUAL, appIds);\n        }\n\n        filter.and('bundleId', Operator.EQUAL, bundle.id);\n\n        return Page.of(currentPage, itemsPerPage, filter, sort);\n    }, [ currentPage, itemsPerPage, sort, filters, appFilterOptions, bundle ]);\n\n    const changePage = useCallback((page: number) => setCurrentPage(page), [ setCurrentPage ]);\n    const changeItemsPerPage = useCallback((perPage: number) => {\n        setCurrentPage(1);\n        setItemsPerPage(perPage);\n    }, [ setCurrentPage ]);\n\n    return {\n        page,\n        changePage,\n        changeItemsPerPage\n    };\n};\n","import { Button, ButtonVariant } from '@patternfly/react-core';\nimport { Main, PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components';\nimport {\n    getInsights,\n    InsightsEnvDetector,\n    RenderIfFalse\n} from '@redhat-cloud-services/insights-common-typescript';\nimport { default as React } from 'react';\nimport { style } from 'typestyle';\n\nimport { Messages } from '../../../properties/Messages';\nimport { stagingAndProd } from '../../../types/Environments';\nimport { Facet } from '../../../types/Notification';\nimport { BundlePageBehaviorGroupContent } from './BundlePageBehaviorGroupContent';\n\ninterface NotificationListBundlePageProps {\n    bundle: Facet;\n    applications: Array<Facet>;\n}\n\nconst displayInlineClassName = style({\n    display: 'inline'\n});\n\nexport const NotificationListBundlePage: React.FunctionComponent<NotificationListBundlePageProps> = (props) => {\n\n    const pageHeaderTitleProps = {\n        className: displayInlineClassName,\n        title: Messages.pages.notifications.list.title\n    };\n\n    return (\n        <>\n            <PageHeader>\n                <PageHeaderTitle { ...pageHeaderTitleProps } />\n                <InsightsEnvDetector insights={ getInsights() } onEnvironment={ stagingAndProd }>\n                    <RenderIfFalse>\n                        <Button variant={ ButtonVariant.link }>{ Messages.pages.notifications.list.viewHistory }</Button>\n                    </RenderIfFalse>\n                </InsightsEnvDetector>\n            </PageHeader>\n            <Main>\n                <BundlePageBehaviorGroupContent applications={ props.applications } bundle={ props.bundle } />\n            </Main>\n        </>\n    );\n};\n","import { AppSkeleton, getInsights } from '@redhat-cloud-services/insights-common-typescript';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\n\nimport { defaultBundleName, RedirectToDefaultBundle } from '../../../components/RedirectToDefaultBundle';\nimport { linkTo } from '../../../Routes';\nimport { useGetApplications } from '../../../services/Notifications/GetApplications';\nimport { useGetBundles } from '../../../services/Notifications/GetBundles';\nimport { Facet } from '../../../types/Notification';\nimport { NotificationListBundlePage } from './BundlePage';\n\ninterface NotificationListPageParams {\n    bundleName: string;\n}\n\nenum BundleStatus {\n    LOADING,\n    NOT_FOUND,\n    FAILED_TO_LOAD\n}\n\nconst isBundleStatus = (bundle: Facet | BundleStatus): bundle is BundleStatus => typeof bundle === 'number';\n\nexport const NotificationsListPage: React.FunctionComponent = () => {\n\n    const params = useParams<NotificationListPageParams>();\n    const history = useHistory();\n    const insights = getInsights();\n    const onFunction = insights?.chrome?.on;\n\n    const getBundles = useGetBundles();\n    const getApplications = useGetApplications();\n\n    React.useEffect(() => {\n        let unregister;\n        if (onFunction) {\n            unregister = onFunction('APP_NAVIGATION', (event: any) => {\n                history.push(linkTo.notifications(event.navId));\n            });\n        }\n\n        return () => {\n            typeof unregister === 'function' && unregister();\n        };\n    }, [ history, onFunction ]);\n\n    const bundle: Facet | BundleStatus = useMemo(() => {\n        if (getBundles.payload?.status === 200) {\n            return getBundles.payload.value.find(b => b.name === params.bundleName) ?? BundleStatus.NOT_FOUND;\n        } else if (getBundles.payload) {\n            return BundleStatus.FAILED_TO_LOAD;\n        }\n\n        return BundleStatus.LOADING;\n    }, [ getBundles.payload, params.bundleName ]);\n\n    React.useEffect(() => {\n        const query = getApplications.query;\n        if (!isBundleStatus(bundle)) {\n            query(bundle.name);\n        }\n    }, [ bundle, getApplications.query ]);\n\n    const applications: Array<Facet> | null | undefined = useMemo(\n        () => {\n            if (getApplications.payload) {\n                return getApplications.payload.status === 200 ? getApplications.payload.value : null;\n            }\n\n            return undefined;\n        },\n        [ getApplications.payload ]\n    );\n\n    if (bundle === BundleStatus.NOT_FOUND) {\n        if (params.bundleName === defaultBundleName) {\n            throw new Error('Default bundle information not found');\n        }\n\n        return <RedirectToDefaultBundle />;\n    }\n\n    if (bundle === BundleStatus.FAILED_TO_LOAD) {\n        throw new Error('Unable to load bundle information');\n    }\n\n    if (applications === null) {\n        throw new Error('Unable to load application facets');\n    }\n\n    if (bundle === BundleStatus.LOADING || !applications) {\n        return (\n            <AppSkeleton />\n        );\n    }\n\n    return (\n        <NotificationListBundlePage\n            bundle={ bundle }\n            applications={ applications }\n        />\n    );\n};\n","import * as React from 'react';\nimport { Route, RouteProps, Switch } from 'react-router';\n\nimport { RedirectToDefaultBundle } from './components/RedirectToDefaultBundle';\nimport { ErrorPage } from './pages/Error/Page';\nimport { IntegrationsListPage } from './pages/Integrations/List/Page';\nimport { NotificationsListPage } from './pages/Notifications/List/Page';\n\ninterface Path {\n    path: string;\n    component: React.ComponentType;\n}\n\nexport const linkTo = {\n    integrations: () => '/integrations',\n    notifications: (bundle: string) => `/notifications/${bundle}`\n};\n\nconst EmptyPage: React.FunctionComponent = () => null;\n\nconst pathRoutes: Path[] = [\n    {\n        path: '/',\n        component: EmptyPage\n    },\n    {\n        path: linkTo.integrations(),\n        component: IntegrationsListPage\n    },\n    {\n        path: linkTo.notifications(':bundleName'),\n        component: NotificationsListPage\n    }\n];\n\ntype InsightsRouteProps = RouteProps;\n\nconst InsightsRoute: React.FunctionComponent<InsightsRouteProps> = (props: InsightsRouteProps) => {\n    return (\n        <ErrorPage>\n            <Route { ...props } />\n        </ErrorPage>\n    );\n};\n\nexport const Routes: React.FunctionComponent = () => {\n    return (\n        <Switch>\n            { pathRoutes.map(pathRoute => (\n                <InsightsRoute\n                    key={ pathRoute.path }\n                    component={ pathRoute.component }\n                    path={ pathRoute.path }\n                    exact={ true }\n                />\n            ))}\n            <RedirectToDefaultBundle />\n        </Switch>\n    );\n};\n","import { Filter, Page, Sort } from '@redhat-cloud-services/insights-common-typescript';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nexport interface UsePageReturn {\n    page: Page;\n    changePage: (page: number) => void;\n    changeItemsPerPage: (perPage: number) => void;\n}\n\nexport type FilterBuilder<T> = (filters: T | undefined) => Filter | undefined;\n\nexport const usePage = <T>(defaultPerPage: number, filterBuilder: FilterBuilder<T>, filters?: T, sort?: Sort): UsePageReturn => {\n    const [ currentPage, setCurrentPage ] = useState(1);\n    const [ itemsPerPage, setItemsPerPage ] = useState(defaultPerPage);\n\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [ filters, setCurrentPage, itemsPerPage ]);\n\n    const page = useMemo(() => {\n        const filter = filterBuilder ? filterBuilder(filters) : undefined;\n        return Page.of(currentPage, itemsPerPage, filter, sort);\n    }, [ currentPage, itemsPerPage, filters, sort, filterBuilder ]);\n\n    const changePage = useCallback((page: number) => {\n        setCurrentPage(page);\n    },  [ setCurrentPage ]);\n\n    const changeItemsPerPage = useCallback((perPage: number) => {\n        setItemsPerPage(perPage);\n    }, [ setItemsPerPage ]);\n\n    return {\n        page,\n        changePage,\n        changeItemsPerPage\n    };\n};\n","import { Exporter, ExporterType } from '@redhat-cloud-services/insights-common-typescript';\nimport { assertNever } from 'assert-never';\n\nimport { UserIntegration } from '../../../types/Integration';\nimport { IntegrationExporterCsv } from './Csv';\nimport { IntegrationExporterJson } from './Json';\n\nexport const integrationExporterFactory = (type: ExporterType): Exporter<UserIntegration> => {\n    switch (type) {\n        case ExporterType.CSV:\n            return new IntegrationExporterCsv();\n        case ExporterType.JSON:\n            return new IntegrationExporterJson();\n    }\n\n    assertNever(type);\n};\n","import { useCallback } from 'react';\n\nimport { IntegrationRow, OnEnable } from '../../../components/Integrations/Table';\nimport { UserIntegration } from '../../../types/Integration';\n\ninterface ActionResolverParams {\n    onEdit: (integration: UserIntegration) => void;\n    onDelete: (integration: UserIntegration) => void;\n    canWrite: boolean;\n    onEnable: OnEnable;\n}\n\nexport const useActionResolver = (params: ActionResolverParams) => {\n\n    return useCallback((integration: IntegrationRow, index: number) => {\n        const onEdit = params.onEdit;\n        const onDelete = params.onDelete;\n        const onEnable = params.onEnable;\n\n        const isDisabled = !params.canWrite;\n\n        return [\n            {\n                title: 'Edit',\n                isDisabled,\n                onClick: () => onEdit(integration)\n            }, {\n                title: 'Remove',\n                isDisabled,\n                onClick: () => onDelete(integration)\n            }, {\n                title: integration.isEnabled ? 'Disable' : 'Enable',\n                isDisabled,\n                onClick: () => onEnable(integration, index, !integration.isEnabled)\n            }\n        ];\n\n    }, [ params.onEdit, params.onDelete, params.canWrite, params.onEnable ]);\n};\n","import { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../../generated/OpenapiNotifications';\n\nexport const getBundlesAction = () => Operations.NotificationServiceGetBundleFacets.actionCreator();\n\nexport const useGetBundles = () => useQuery(getBundlesAction());\n","/* eslint-disable */\n/**\n * Generated code, DO NOT modify directly.\n */\nimport { ValidatedResponse } from 'openapi2typescript';\nimport { ValidateRule } from 'openapi2typescript';\nimport {\n    actionBuilder,\n    ActionValidatableConfig\n} from 'openapi2typescript/react-fetching-library';\nimport { Action } from 'react-fetching-library';\nimport * as z from 'zod';\n\nexport namespace Schemas {\n  export const Application = zodSchemaApplication();\n  export type Application = {\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const AtomicLong = zodSchemaAtomicLong();\n  export type AtomicLong = {\n    acquire?: number | undefined | null;\n    andDecrement?: number | undefined | null;\n    andIncrement?: number | undefined | null;\n    opaque?: number | undefined | null;\n    plain?: number | undefined | null;\n    release?: number | undefined | null;\n    value?: number | undefined | null;\n  };\n\n  export const BasicAuthentication = zodSchemaBasicAuthentication();\n  export type BasicAuthentication = {\n    password?: string | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const BehaviorGroup = zodSchemaBehaviorGroup();\n  export type BehaviorGroup = {\n    actions?: Array<BehaviorGroupAction> | undefined | null;\n    bundle?: Bundle | undefined | null;\n    bundle_id: UUID;\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    updated?: string | undefined | null;\n  };\n\n  export const BehaviorGroupAction = zodSchemaBehaviorGroupAction();\n  export type BehaviorGroupAction = {\n    created?: string | undefined | null;\n    endpoint?: Endpoint | undefined | null;\n    id?: BehaviorGroupActionId | undefined | null;\n  };\n\n  export const BehaviorGroupActionId = zodSchemaBehaviorGroupActionId();\n  export type BehaviorGroupActionId = {\n    behaviorGroupId: UUID;\n    endpointId: UUID;\n  };\n\n  export const Bundle = zodSchemaBundle();\n  export type Bundle = {\n    created?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n    updated?: string | undefined | null;\n  };\n\n  export const CamelProperties = zodSchemaCamelProperties();\n  export type CamelProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    extras?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    secret_token?: string | undefined | null;\n    sub_type?: string | undefined | null;\n    url: string;\n  };\n\n  export const CurrentStatus = zodSchemaCurrentStatus();\n  export type CurrentStatus = {\n    end_time?: string | undefined | null;\n    start_time?: string | undefined | null;\n    status: Status;\n  };\n\n  export const EmailSubscriptionProperties =\n    zodSchemaEmailSubscriptionProperties();\n  export type EmailSubscriptionProperties = {\n    group_id?: UUID | undefined | null;\n    ignore_preferences: boolean;\n    only_admins: boolean;\n  };\n\n  export const EmailSubscriptionType = zodSchemaEmailSubscriptionType();\n  export type EmailSubscriptionType = 'DAILY' | 'INSTANT';\n\n  export const Endpoint = zodSchemaEndpoint();\n  export type Endpoint = {\n    created?: string | undefined | null;\n    description: string;\n    enabled?: boolean | undefined | null;\n    id?: UUID | undefined | null;\n    name: string;\n    properties?:\n      | (WebhookProperties | EmailSubscriptionProperties | CamelProperties)\n      | undefined\n      | null;\n    type: EndpointType;\n    updated?: string | undefined | null;\n  };\n\n  export const EndpointPage = zodSchemaEndpointPage();\n  export type EndpointPage = {\n    data: Array<Endpoint>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const EndpointProperties = zodSchemaEndpointProperties();\n  export type EndpointProperties = unknown;\n\n  export const EndpointType = zodSchemaEndpointType();\n  export type EndpointType =\n    | 'webhook'\n    | 'email_subscription'\n    | 'default'\n    | 'camel';\n\n  export const EntityTag = zodSchemaEntityTag();\n  export type EntityTag = {\n    value?: string | undefined | null;\n    weak?: boolean | undefined | null;\n  };\n\n  export const EventType = zodSchemaEventType();\n  export type EventType = {\n    application?: Application | undefined | null;\n    application_id: UUID;\n    description?: string | undefined | null;\n    display_name: string;\n    id?: UUID | undefined | null;\n    name: string;\n  };\n\n  export const Facet = zodSchemaFacet();\n  export type Facet = {\n    displayName: string;\n    id: string;\n    name: string;\n  };\n\n  export const Family = zodSchemaFamily();\n  export type Family =\n    | 'CLIENT_ERROR'\n    | 'INFORMATIONAL'\n    | 'OTHER'\n    | 'REDIRECTION'\n    | 'SERVER_ERROR'\n    | 'SUCCESSFUL';\n\n  export const HttpType = zodSchemaHttpType();\n  export type HttpType = 'GET' | 'POST' | 'PUT';\n\n  export const Link = zodSchemaLink();\n  export type Link = {\n    params?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    rel?: string | undefined | null;\n    rels?: Array<string> | undefined | null;\n    title?: string | undefined | null;\n    type?: string | undefined | null;\n    uri?: string | undefined | null;\n    uriBuilder?: UriBuilder | undefined | null;\n  };\n\n  export const Locale = zodSchemaLocale();\n  export type Locale = {\n    country?: string | undefined | null;\n    displayCountry?: string | undefined | null;\n    displayLanguage?: string | undefined | null;\n    displayName?: string | undefined | null;\n    displayScript?: string | undefined | null;\n    displayVariant?: string | undefined | null;\n    extensionKeys?: Array<string> | undefined | null;\n    iSO3Country?: string | undefined | null;\n    iSO3Language?: string | undefined | null;\n    language?: string | undefined | null;\n    script?: string | undefined | null;\n    unicodeLocaleAttributes?: Array<string> | undefined | null;\n    unicodeLocaleKeys?: Array<string> | undefined | null;\n    variant?: string | undefined | null;\n  };\n\n  export const MediaType = zodSchemaMediaType();\n  export type MediaType = {\n    parameters?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    subtype?: string | undefined | null;\n    type?: string | undefined | null;\n    wildcardSubtype?: boolean | undefined | null;\n    wildcardType?: boolean | undefined | null;\n  };\n\n  export const Meta = zodSchemaMeta();\n  export type Meta = {\n    count: number;\n  };\n\n  export const MigrationReport = zodSchemaMigrationReport();\n  export type MigrationReport = {\n    deletedEndpoints?: AtomicLong | undefined | null;\n    durationInMs?: AtomicLong | undefined | null;\n    updatedAccounts?: AtomicLong | undefined | null;\n    updatedBehaviorGroupActions?: AtomicLong | undefined | null;\n  };\n\n  export const MultivaluedMapStringObject =\n    zodSchemaMultivaluedMapStringObject();\n  export type MultivaluedMapStringObject = {\n    [x: string]: Array<unknown>;\n  };\n\n  export const MultivaluedMapStringString =\n    zodSchemaMultivaluedMapStringString();\n  export type MultivaluedMapStringString = {\n    [x: string]: Array<string>;\n  };\n\n  export const NewCookie = zodSchemaNewCookie();\n  export type NewCookie = {\n    comment?: string | undefined | null;\n    domain?: string | undefined | null;\n    expiry?: string | undefined | null;\n    httpOnly?: boolean | undefined | null;\n    maxAge?: number | undefined | null;\n    name?: string | undefined | null;\n    path?: string | undefined | null;\n    secure?: boolean | undefined | null;\n    value?: string | undefined | null;\n    version?: number | undefined | null;\n  };\n\n  export const NotificationHistory = zodSchemaNotificationHistory();\n  export type NotificationHistory = {\n    created?: string | undefined | null;\n    details?:\n      | {\n          [x: string]: unknown;\n        }\n      | undefined\n      | null;\n    endpointId?: UUID | undefined | null;\n    eventId?: string | undefined | null;\n    id?: UUID | undefined | null;\n    invocationResult: boolean;\n    invocationTime: number;\n  };\n\n  export const PageRbacGroup = zodSchemaPageRbacGroup();\n  export type PageRbacGroup = {\n    data: Array<RbacGroup>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const PageRbacUser = zodSchemaPageRbacUser();\n  export type PageRbacUser = {\n    data: Array<RbacUser>;\n    links: {\n      [x: string]: string;\n    };\n    meta: Meta;\n  };\n\n  export const RbacGroup = zodSchemaRbacGroup();\n  export type RbacGroup = {\n    created?: string | undefined | null;\n    description?: string | undefined | null;\n    modified?: string | undefined | null;\n    name?: string | undefined | null;\n    platform_default?: boolean | undefined | null;\n    principalCount?: number | undefined | null;\n    roleCount?: number | undefined | null;\n    system?: boolean | undefined | null;\n    uuid?: UUID | undefined | null;\n  };\n\n  export const RbacRaw = zodSchemaRbacRaw();\n  export type RbacRaw = {\n    data?:\n      | Array<{\n          [x: string]: unknown;\n        }>\n      | undefined\n      | null;\n    links?:\n      | {\n          [x: string]: string;\n        }\n      | undefined\n      | null;\n    meta?:\n      | {\n          [x: string]: number;\n        }\n      | undefined\n      | null;\n  };\n\n  export const RbacUser = zodSchemaRbacUser();\n  export type RbacUser = {\n    active?: boolean | undefined | null;\n    email?: string | undefined | null;\n    firstName?: string | undefined | null;\n    isActive?: boolean | undefined | null;\n    isOrgAdmin?: boolean | undefined | null;\n    lastName?: string | undefined | null;\n    orgAdmin?: boolean | undefined | null;\n    username?: string | undefined | null;\n  };\n\n  export const RequestEmailSubscriptionProperties =\n    zodSchemaRequestEmailSubscriptionProperties();\n  export type RequestEmailSubscriptionProperties = {\n    only_admins: boolean;\n  };\n\n  export const Response = zodSchemaResponse();\n  export type Response = {\n    allowedMethods?: Array<string> | undefined | null;\n    cookies?:\n      | {\n          [x: string]: NewCookie;\n        }\n      | undefined\n      | null;\n    date?: string | undefined | null;\n    entity?: unknown | undefined | null;\n    entityTag?: EntityTag | undefined | null;\n    headers?: MultivaluedMapStringObject | undefined | null;\n    language?: Locale | undefined | null;\n    lastModified?: string | undefined | null;\n    length?: number | undefined | null;\n    links?: Array<Link> | undefined | null;\n    location?: string | undefined | null;\n    mediaType?: MediaType | undefined | null;\n    metadata?: MultivaluedMapStringObject | undefined | null;\n    status?: number | undefined | null;\n    statusInfo?: StatusType | undefined | null;\n    stringHeaders?: MultivaluedMapStringString | undefined | null;\n  };\n\n  export const Status = zodSchemaStatus();\n  export type Status = 'MAINTENANCE' | 'UP';\n\n  export const StatusType = zodSchemaStatusType();\n  export type StatusType = {\n    family?: Family | undefined | null;\n    reasonPhrase?: string | undefined | null;\n    statusCode?: number | undefined | null;\n  };\n\n  export const UUID = zodSchemaUUID();\n  export type UUID = string;\n\n  export const UriBuilder = zodSchemaUriBuilder();\n  export type UriBuilder = unknown;\n\n  export const WebhookProperties = zodSchemaWebhookProperties();\n  export type WebhookProperties = {\n    basic_authentication?: BasicAuthentication | undefined | null;\n    disable_ssl_verification: boolean;\n    method: HttpType;\n    secret_token?: string | undefined | null;\n    url: string;\n  };\n\n  function zodSchemaApplication() {\n      return z\n      .object({\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaAtomicLong() {\n      return z\n      .object({\n          acquire: z.number().int().optional().nullable(),\n          andDecrement: z.number().int().optional().nullable(),\n          andIncrement: z.number().int().optional().nullable(),\n          opaque: z.number().int().optional().nullable(),\n          plain: z.number().int().optional().nullable(),\n          release: z.number().int().optional().nullable(),\n          value: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBasicAuthentication() {\n      return z\n      .object({\n          password: z.string().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroup() {\n      return z\n      .object({\n          actions: z.array(zodSchemaBehaviorGroupAction()).optional().nullable(),\n          bundle: zodSchemaBundle().optional().nullable(),\n          bundle_id: zodSchemaUUID(),\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupAction() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          endpoint: zodSchemaEndpoint().optional().nullable(),\n          id: zodSchemaBehaviorGroupActionId().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBehaviorGroupActionId() {\n      return z\n      .object({\n          behaviorGroupId: zodSchemaUUID(),\n          endpointId: zodSchemaUUID()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaBundle() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCamelProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          extras: z.record(z.string()).optional().nullable(),\n          secret_token: z.string().optional().nullable(),\n          sub_type: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaCurrentStatus() {\n      return z\n      .object({\n          end_time: z.string().optional().nullable(),\n          start_time: z.string().optional().nullable(),\n          status: zodSchemaStatus()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionProperties() {\n      return z\n      .object({\n          group_id: zodSchemaUUID().optional().nullable(),\n          ignore_preferences: z.boolean(),\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEmailSubscriptionType() {\n      return z.enum([ 'DAILY', 'INSTANT' ]);\n  }\n\n  function zodSchemaEndpoint() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string(),\n          enabled: z.boolean().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string(),\n          properties: z\n          .union([\n              zodSchemaWebhookProperties(),\n              zodSchemaEmailSubscriptionProperties(),\n              zodSchemaCamelProperties()\n          ])\n          .optional()\n          .nullable(),\n          type: zodSchemaEndpointType(),\n          updated: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointPage() {\n      return z\n      .object({\n          data: z.array(zodSchemaEndpoint()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEndpointProperties() {\n      return z.unknown();\n  }\n\n  function zodSchemaEndpointType() {\n      return z.enum([ 'webhook', 'email_subscription', 'default', 'camel' ]);\n  }\n\n  function zodSchemaEntityTag() {\n      return z\n      .object({\n          value: z.string().optional().nullable(),\n          weak: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaEventType() {\n      return z\n      .object({\n          application: zodSchemaApplication().optional().nullable(),\n          application_id: zodSchemaUUID(),\n          description: z.string().optional().nullable(),\n          display_name: z.string(),\n          id: zodSchemaUUID().optional().nullable(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFacet() {\n      return z\n      .object({\n          displayName: z.string(),\n          id: z.string(),\n          name: z.string()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaFamily() {\n      return z.enum([\n          'CLIENT_ERROR',\n          'INFORMATIONAL',\n          'OTHER',\n          'REDIRECTION',\n          'SERVER_ERROR',\n          'SUCCESSFUL'\n      ]);\n  }\n\n  function zodSchemaHttpType() {\n      return z.enum([ 'GET', 'POST', 'PUT' ]);\n  }\n\n  function zodSchemaLink() {\n      return z\n      .object({\n          params: z.record(z.string()).optional().nullable(),\n          rel: z.string().optional().nullable(),\n          rels: z.array(z.string()).optional().nullable(),\n          title: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          uri: z.string().optional().nullable(),\n          uriBuilder: zodSchemaUriBuilder().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaLocale() {\n      return z\n      .object({\n          country: z.string().optional().nullable(),\n          displayCountry: z.string().optional().nullable(),\n          displayLanguage: z.string().optional().nullable(),\n          displayName: z.string().optional().nullable(),\n          displayScript: z.string().optional().nullable(),\n          displayVariant: z.string().optional().nullable(),\n          extensionKeys: z.array(z.string()).optional().nullable(),\n          iSO3Country: z.string().optional().nullable(),\n          iSO3Language: z.string().optional().nullable(),\n          language: z.string().optional().nullable(),\n          script: z.string().optional().nullable(),\n          unicodeLocaleAttributes: z.array(z.string()).optional().nullable(),\n          unicodeLocaleKeys: z.array(z.string()).optional().nullable(),\n          variant: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMediaType() {\n      return z\n      .object({\n          parameters: z.record(z.string()).optional().nullable(),\n          subtype: z.string().optional().nullable(),\n          type: z.string().optional().nullable(),\n          wildcardSubtype: z.boolean().optional().nullable(),\n          wildcardType: z.boolean().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMeta() {\n      return z\n      .object({\n          count: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMigrationReport() {\n      return z\n      .object({\n          deletedEndpoints: zodSchemaAtomicLong().optional().nullable(),\n          durationInMs: zodSchemaAtomicLong().optional().nullable(),\n          updatedAccounts: zodSchemaAtomicLong().optional().nullable(),\n          updatedBehaviorGroupActions: zodSchemaAtomicLong()\n          .optional()\n          .nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaMultivaluedMapStringObject() {\n      return z.record(z.array(z.unknown()));\n  }\n\n  function zodSchemaMultivaluedMapStringString() {\n      return z.record(z.array(z.string()));\n  }\n\n  function zodSchemaNewCookie() {\n      return z\n      .object({\n          comment: z.string().optional().nullable(),\n          domain: z.string().optional().nullable(),\n          expiry: z.string().optional().nullable(),\n          httpOnly: z.boolean().optional().nullable(),\n          maxAge: z.number().int().optional().nullable(),\n          name: z.string().optional().nullable(),\n          path: z.string().optional().nullable(),\n          secure: z.boolean().optional().nullable(),\n          value: z.string().optional().nullable(),\n          version: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaNotificationHistory() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          details: z.record(z.unknown()).optional().nullable(),\n          endpointId: zodSchemaUUID().optional().nullable(),\n          eventId: z.string().optional().nullable(),\n          id: zodSchemaUUID().optional().nullable(),\n          invocationResult: z.boolean(),\n          invocationTime: z.number().int()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageRbacGroup() {\n      return z\n      .object({\n          data: z.array(zodSchemaRbacGroup()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaPageRbacUser() {\n      return z\n      .object({\n          data: z.array(zodSchemaRbacUser()),\n          links: z.record(z.string()),\n          meta: zodSchemaMeta()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacGroup() {\n      return z\n      .object({\n          created: z.string().optional().nullable(),\n          description: z.string().optional().nullable(),\n          modified: z.string().optional().nullable(),\n          name: z.string().optional().nullable(),\n          platform_default: z.boolean().optional().nullable(),\n          principalCount: z.number().int().optional().nullable(),\n          roleCount: z.number().int().optional().nullable(),\n          system: z.boolean().optional().nullable(),\n          uuid: zodSchemaUUID().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacRaw() {\n      return z\n      .object({\n          data: z.array(z.record(z.unknown())).optional().nullable(),\n          links: z.record(z.string()).optional().nullable(),\n          meta: z.record(z.number().int()).optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRbacUser() {\n      return z\n      .object({\n          active: z.boolean().optional().nullable(),\n          email: z.string().optional().nullable(),\n          firstName: z.string().optional().nullable(),\n          isActive: z.boolean().optional().nullable(),\n          isOrgAdmin: z.boolean().optional().nullable(),\n          lastName: z.string().optional().nullable(),\n          orgAdmin: z.boolean().optional().nullable(),\n          username: z.string().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaRequestEmailSubscriptionProperties() {\n      return z\n      .object({\n          only_admins: z.boolean()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaResponse() {\n      return z\n      .object({\n          allowedMethods: z.array(z.string()).optional().nullable(),\n          cookies: z.record(zodSchemaNewCookie()).optional().nullable(),\n          date: z.string().optional().nullable(),\n          entity: z.unknown().optional().nullable(),\n          entityTag: zodSchemaEntityTag().optional().nullable(),\n          headers: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          language: zodSchemaLocale().optional().nullable(),\n          lastModified: z.string().optional().nullable(),\n          length: z.number().int().optional().nullable(),\n          links: z.array(zodSchemaLink()).optional().nullable(),\n          location: z.string().optional().nullable(),\n          mediaType: zodSchemaMediaType().optional().nullable(),\n          metadata: zodSchemaMultivaluedMapStringObject().optional().nullable(),\n          status: z.number().int().optional().nullable(),\n          statusInfo: zodSchemaStatusType().optional().nullable(),\n          stringHeaders: zodSchemaMultivaluedMapStringString()\n          .optional()\n          .nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaStatus() {\n      return z.enum([ 'MAINTENANCE', 'UP' ]);\n  }\n\n  function zodSchemaStatusType() {\n      return z\n      .object({\n          family: zodSchemaFamily().optional().nullable(),\n          reasonPhrase: z.string().optional().nullable(),\n          statusCode: z.number().int().optional().nullable()\n      })\n      .nonstrict();\n  }\n\n  function zodSchemaUUID() {\n      return z.string();\n  }\n\n  function zodSchemaUriBuilder() {\n      return z.unknown();\n  }\n\n  function zodSchemaWebhookProperties() {\n      return z\n      .object({\n          basic_authentication: zodSchemaBasicAuthentication()\n          .optional()\n          .nullable(),\n          disable_ssl_verification: z.boolean(),\n          method: zodSchemaHttpType(),\n          secret_token: z.string().optional().nullable(),\n          url: z.string()\n      })\n      .nonstrict();\n  }\n}\n\nexport namespace Operations {\n  // GET /api/notifications/v1.0/status\n  export namespace StatusServiceGetCurrentStatus {\n    export type Payload =\n      | ValidatedResponse<'CurrentStatus', 200, Schemas.CurrentStatus>\n      | ValidatedResponse<'unknown', undefined, unknown>;\n    export type ActionCreator = Action<Payload, ActionValidatableConfig>;\n    export const actionCreator = (): ActionCreator => {\n        const path = '/api/notifications/v1.0/status';\n        const query = {} as Record<string, any>;\n        return actionBuilder('GET', path)\n        .queryParams(query)\n        .config({\n            rules: [\n                new ValidateRule(Schemas.CurrentStatus, 'CurrentStatus', 200)\n            ]\n        })\n        .build();\n    };\n  }\n}\n","import { Schemas } from '../../generated/OpenapiNotifications';\nimport { Server, ServerStatus } from '../Server';\n\n// Todo: This could be added to the common code\nconst fromUtc = (date: Date) => new Date(date.getTime() - date.getTimezoneOffset() * 60 * 1000);\n\nexport const toServer = (currentStatus: Schemas.CurrentStatus): Server => {\n    if (currentStatus.status === Schemas.Status.Enum.MAINTENANCE) {\n        return {\n            status: ServerStatus.MAINTENANCE,\n            from: fromUtc(currentStatus.start_time ? new Date(currentStatus.start_time) : new Date()),\n            to: fromUtc(currentStatus.end_time ? new Date(currentStatus.end_time) : new Date())\n        };\n    }\n\n    return {\n        status: ServerStatus.RUNNING\n    };\n};\n","import { useTransformQueryResponse } from '@redhat-cloud-services/insights-common-typescript';\nimport { validatedResponse, validationResponseTransformer } from 'openapi2typescript';\nimport { useQuery } from 'react-fetching-library';\n\nimport { Operations } from '../generated/OpenapiPrivate';\nimport { toServer } from '../types/adapters/ServerAdapter';\n\nconst adapter = validationResponseTransformer((payload: Operations.StatusServiceGetCurrentStatus.Payload) => {\n    if (payload.status === 200) {\n        return validatedResponse(\n            'ServerStatus',\n            200,\n            toServer(payload.value),\n            payload.errors\n        );\n    }\n\n    return payload;\n});\n\nexport const useGetServerStatus = () => {\n    return useTransformQueryResponse(\n        useQuery(Operations.StatusServiceGetCurrentStatus.actionCreator()),\n        adapter\n    );\n};\n","import './App.scss';\n\nimport { Maintenance, NotAuthorized } from '@redhat-cloud-services/frontend-components';\nimport { NotificationsPortal } from '@redhat-cloud-services/frontend-components-notifications';\nimport { AppSkeleton, toUtc } from '@redhat-cloud-services/insights-common-typescript';\nimport format from 'date-fns/format';\nimport * as React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useLocation } from 'react-router';\n\nimport Config from '../config/Config';\nimport messages from '../properties/DefinedMessages';\nimport { Routes } from '../Routes';\nimport { ServerStatus } from '../types/Server';\nimport { getSubApp } from '../utils/Basename';\nimport { AppContext } from './AppContext';\nimport { useApp } from './useApp';\n\nconst utcFormat = 'HH:mm';\nconst regularFormat = 'hh:mma';\nconst timezoneFormat = 'O';\n\nconst App: React.ComponentType = () => {\n    const intl = useIntl();\n    const { rbac, server, isOrgAdmin } = useApp();\n    const location = useLocation();\n\n    const serviceName = React.useMemo(() => {\n        switch (getSubApp(location.pathname)) {\n            case Config.integrations.subAppId:\n                return intl.formatMessage(messages.integrations);\n            case Config.notifications.subAppId:\n                return intl.formatMessage(messages.notifications);\n            default:\n                return '';\n        }\n    }, [ intl, location.pathname ]);\n\n    const hasReadPermissions = React.useMemo(() => {\n        const appId = getSubApp(location.pathname);\n        switch (appId) {\n            case Config.integrations.subAppId:\n                return rbac?.canReadIntegrationsEndpoints;\n            case Config.notifications.subAppId:\n                return rbac?.canReadNotifications;\n        }\n\n        return false;\n    }, [ rbac, location.pathname ]);\n\n    if (!rbac || !server) {\n        return (\n            <AppSkeleton />\n        );\n    }\n\n    if (server.status === ServerStatus.MAINTENANCE) {\n\n        const utcStartTime = format(toUtc(server.from), utcFormat);\n        const utcEndTime = format(toUtc(server.to), utcFormat);\n        const startTime = format(server.from, regularFormat);\n        const endTime = format(server.to, regularFormat);\n        const timezone = format(server.to, timezoneFormat);\n\n        return <Maintenance\n            utcStartTime={ utcStartTime }\n            utcEndTime={ utcEndTime }\n            startTime={ startTime }\n            endTime={ endTime }\n            timeZone={ timezone }\n        />;\n    }\n\n    return (\n        <AppContext.Provider value={ {\n            rbac,\n            server,\n            isOrgAdmin: !!isOrgAdmin\n        } }>\n            { hasReadPermissions ? (\n                <>\n                    <NotificationsPortal />\n                    <Routes />\n                </>\n            ) : (\n                <NotAuthorized serviceName={ serviceName } />\n            ) }\n        </AppContext.Provider>\n    );\n};\n\nexport default App;\n","import { fetchRBAC, Rbac, waitForInsights } from '@redhat-cloud-services/insights-common-typescript';\nimport { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport Config from '../config/Config';\nimport { useGetServerStatus } from '../services/GetServerStatus';\nimport { Server } from '../types/Server';\nimport { AppContext } from './AppContext';\n\nexport const useApp = (): Partial<AppContext> => {\n\n    const history = useHistory();\n    const serverStatus = useGetServerStatus();\n    const [ rbac, setRbac ] = useState<Rbac>();\n    const [ server, setServer ] = useState<Server>();\n    const [ isOrgAdmin, setOrgAdmin ] = useState<boolean>(false);\n\n    useEffect(() => {\n        waitForInsights().then((insights) => {\n            insights.chrome.init();\n            const appId = insights.chrome.getApp();\n            switch (appId) {\n                case Config.notifications.subAppId:\n                    document.title = Config.notifications.title;\n                    break;\n                case Config.integrations.subAppId:\n                    document.title = Config.integrations.title;\n                    break;\n            }\n\n            insights.chrome.identifyApp(appId);\n        });\n    }, [ history ]);\n\n    useEffect(() => {\n        if (serverStatus.payload?.type === 'ServerStatus') {\n            setServer(serverStatus.payload.value);\n        }\n    }, [ serverStatus.payload ]);\n\n    useEffect(() => {\n        waitForInsights().then(insights => {\n            insights.chrome.auth.getUser().then(user => {\n                setOrgAdmin(user.identity.user.is_org_admin);\n                fetchRBAC(`${Config.notifications.subAppId},${Config.integrations.subAppId}`).then(setRbac);\n            });\n        });\n    }, []);\n\n    return {\n        rbac: rbac ? {\n            canWriteNotifications: rbac.hasPermission('notifications', 'notifications', 'write'),\n            canReadNotifications: rbac.hasPermission('notifications', 'notifications', 'read'),\n            canWriteIntegrationsEndpoints: rbac.hasPermission('integrations', 'endpoints', 'write'),\n            canReadIntegrationsEndpoints: rbac.hasPermission('integrations', 'endpoints', 'read')\n        } : undefined,\n        isOrgAdmin,\n        server\n    };\n};\n","import { getType } from 'typesafe-actions';\n\nimport { NotificationAppAction } from '../actions/NotificationAppAction';\nimport { SavedNotificationScopeActions } from '../actions/SavedNotificationScopeAction';\nimport { SavedNotificationScopeState, Status } from '../types/SavedNotificationScopeTypes';\n\nexport const INITIAL_STATE: SavedNotificationScopeState = null;\n\nexport const SavedNotificationScopeReducer = (\n    state: SavedNotificationScopeState = INITIAL_STATE,\n    action: NotificationAppAction): SavedNotificationScopeState => {\n    switch (action.type) {\n        case getType(SavedNotificationScopeActions.setIntegration):\n            return {\n                integration: action.payload,\n                status: Status.DONE\n            };\n        case getType(SavedNotificationScopeActions.start):\n            if (!state) {\n                return state;\n            }\n\n            return {\n                ...state,\n                status: Status.LOADING\n            };\n        case getType(SavedNotificationScopeActions.finish):\n            if (!state) {\n                return state;\n            }\n\n            return {\n                integration: { ...state.integration, isEnabled: action.payload },\n                status: Status.DONE\n            };\n        case getType(SavedNotificationScopeActions.unset):\n            return null;\n        default:\n            return state;\n    }\n};\n","import { initStore, restoreStore } from '@redhat-cloud-services/insights-common-typescript';\nimport { Middleware } from 'redux';\n\nimport { INITIAL_STATE as SNS_INITIAL_STATE, SavedNotificationScopeReducer } from './reducers/SavedNotificationScopeReducer';\nimport { NotificationAppState } from './types/NotificationAppState';\n\nexport const createStore = (...middleware: Middleware[]) => {\n    return initStore(\n        {\n            savedNotificationScope: SNS_INITIAL_STATE\n        } as NotificationAppState,\n        {\n            savedNotificationScope: SavedNotificationScopeReducer\n        },\n        ...middleware);\n};\n\nexport const resetStore = () => restoreStore();\n","import { ActionType, createAction } from 'typesafe-actions';\n\nimport { IntegrationRef } from '../../types/Notification';\n\nexport enum SavedNotificationScopeKeys {\n    SET_INTEGRATION = 'SET_INTEGRATION',\n    START = 'START',\n    FINISH = 'FINISH',\n    UNSET = 'UNSET'\n}\n\nexport const SavedNotificationScopeActions = {\n    setIntegration: createAction(SavedNotificationScopeKeys.SET_INTEGRATION)<IntegrationRef>(),\n    start: createAction(SavedNotificationScopeKeys.START)(),\n    finish: createAction(SavedNotificationScopeKeys.FINISH)<boolean>(),\n    unset: createAction(SavedNotificationScopeKeys.UNSET)()\n};\n\nexport type SavedNotificationScopeAction = ActionType<typeof SavedNotificationScopeActions>;\n","import { IntegrationRef } from '../../types/Notification';\n\nexport enum Status {\n    LOADING,\n    DONE\n}\n\nexport type SavedNotificationScopeState = {\n    integration: IntegrationRef;\n    status: Status;\n} | null;\n","// This is a custom getBaseName that doesn't add the appId\n// The reason is that this 'app' is in 2 menus (integrations and notifications), so is easier to just add that into our\n// paths for easier navigation.\nexport const getBaseName = (pathname: string) => {\n    let release = '/';\n    const pathName = pathname.split('/');\n\n    pathName.shift();\n\n    if (pathName[0] === 'beta') {\n        pathName.shift();\n        release = `/beta/`;\n    }\n\n    return `${release}${pathName[0]}`;\n};\n\nexport const getSubApp = (pathname: string) => {\n    const pathName = pathname.split('/');\n    pathName.shift();\n    if (pathName[0] === 'beta') {\n        return pathName[1];\n    }\n\n    return pathName[0];\n};\n"],"sourceRoot":""}