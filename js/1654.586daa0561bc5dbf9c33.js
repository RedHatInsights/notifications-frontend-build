"use strict";(self.webpackChunknotifications_frontend=self.webpackChunknotifications_frontend||[]).push([[1654],{91654:(e,t,a)=>{a.r(t),a.d(t,{TimeConfigComponent:()=>p,default:()=>T});var n=a(21242),l=a(43551),i=a(78343),o=a(93264),s=a.n(o),c=a(65326),m=a(8813),r=a(2412),u=a(60207),d=a(21503);const g=(0,m.style)({width:"280px"}),p=()=>{var e,t;const[a,m]=s().useState(!1),[p,T]=s().useState(),[C,v]=(0,o.useState)(!1),E=(0,r.Y)(),f=(0,u.I)(),{addSuccessNotification:k,addDangerNotification:b}=(0,d.l)(),S=(0,o.useMemo)((()=>{var e;if(200===E.status)return null===(e=E.payload)||void 0===e?void 0:e.value}),[null===(e=E.payload)||void 0===e?void 0:e.value,E.status]);(0,o.useEffect)((()=>{S&&(T({baseCustomTime:S,utcTime:S,timezoneText:void 0}),m("00:00:00"!==S))}),[S]);const h=s().useCallback((()=>{m(!1),T({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[y,x]=s().useState(!1),I=c.map((e=>s().createElement(n.DropdownItem,{key:e.text},e.text))),D=s().useCallback((()=>{m(!0)}),[]),w=s().useCallback((e=>{T({baseCustomTime:e,utcTime:e,timezoneText:void 0})}),[]),M=s().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,a=c.find((e=>e.text===t));a&&T((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),n=new Date;n.setUTCHours(t[0],t[1]);const l=(0,i.Z)(n,-a.offset),o=l.getUTCHours().toString().padStart(2,"0"),s=l.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${o}:${s}`,timezoneText:a.text}}return e}))}x(!1)}),[]),U=s().useCallback((()=>{p&&(0,f.mutate)({body:p.utcTime}).then((e=>{204===e.status?k("Action settings saved",""):b("Failed to save action settings","")})),v(!1)}),[b,k,f.mutate,p]),z=f.loading||E.loading,N=()=>{v(!C)};return s().createElement(s().Fragment,null,s().createElement("p",null,s().createElement(l.OutlinedClockIcon,{color:"var(--pf-v5-global--palette--cyan-200)"}),"Â ",`Any daily digest emails you've opted into will be sent at ${S||"00:00"} UTC`),s().createElement(n.Button,{variant:"link",onClick:N,ouiaId:"TimeConfigModal"},"Edit time settings"),s().createElement(n.Modal,{className:"pf-v5-u-pl-xl",variant:n.ModalVariant.small,isOpen:C,onClose:N,actions:[s().createElement(n.Button,{key:"save",variant:"primary",type:"submit",isLoading:z,isDisabled:z,onClick:U},z?"Loading":"Save"),s().createElement(n.Button,{key:"cancel",variant:"link",onClick:N},"Cancel")],ouiaId:"TimeConfigModal"},s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2"},"Action settings")),s().createElement(n.StackItem,null,s().createElement(n.Text,{component:n.TextVariants.p},"Daily digest email receipt"),s().createElement(n.HelperText,null,s().createElement(n.HelperTextItem,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),s().createElement("br",null),s().createElement(n.Split,null,s().createElement(n.SplitItem,{isFilled:!0},s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,E.loading?s().createElement(n.Skeleton,null):s().createElement(n.Radio,{isChecked:!a,onChange:h,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),s().createElement(n.StackItem,null,E.loading?s().createElement(n.Skeleton,null):s().createElement(n.Radio,{isChecked:a,onChange:D,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),a&&s().createElement(s().Fragment,null,s().createElement(n.StackItem,{className:"pf-v5-u-pl-lg"},s().createElement(n.Text,{component:n.TextVariants.h6},"Time"),s().createElement(n.TimePicker,{onChange:w,time:null==p?void 0:p.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),s().createElement(n.StackItem,{className:"pf-v5-u-pl-lg"},s().createElement(n.Text,{component:n.TextVariants.h6},"Time zone"),s().createElement(n.Dropdown,{className:g,toggle:s().createElement(n.DropdownToggle,{isOpen:y,id:"timezone",onToggle:()=>x(!y)},null!==(t=null==p?void 0:p.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),isOpen:y,onSelect:M,menuAppendTo:()=>document.body,dropdownItems:I}))))))))},T=p},2412:(e,t,a)=>{a.d(t,{Y:()=>i});var n=a(94782),l=a(16721);const i=()=>(0,n.useQuery)(l.B.OrgConfigResourceGetDailyDigestTimePreference.actionCreator())},60207:(e,t,a)=>{a.d(t,{I:()=>o});var n=a(94782),l=a(16721);const i=e=>l.B.OrgConfigResourceSaveDailyDigestTimePreference.actionCreator({body:e.body}),o=()=>(0,n.useMutation)(i)}}]);
//# sourceMappingURL=../sourcemaps/1654.fbed2816a9bb2b64bda6ad2eaea90867.js.map