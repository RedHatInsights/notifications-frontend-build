"use strict";(self.webpackChunknotifications_frontend=self.webpackChunknotifications_frontend||[]).push([[1654],{91654:(e,t,a)=>{a.r(t),a.d(t,{TimeConfigComponent:()=>v,default:()=>E});var n=a(21242),i=a(43551),l=a(28551),o=a(78343),s=a(93264),c=a.n(s),m=a(65326),r=a(8813),u=a(2412),d=a(60207),g=a(21503);const p=(0,r.style)({width:"280px"}),T=(0,r.style)({paddingLeft:l.J.value}),C=(0,r.style)({paddingLeft:"36px"}),v=()=>{var e,t;const[a,l]=c().useState(!1),[r,v]=c().useState(),[E,f]=(0,s.useState)(!1),k=(0,u.Y)(),b=(0,d.I)(),{addSuccessNotification:S,addDangerNotification:y}=(0,g.l)(),h=(0,s.useMemo)((()=>{var e;if(200===k.status)return null===(e=k.payload)||void 0===e?void 0:e.value}),[null===(e=k.payload)||void 0===e?void 0:e.value,k.status]);(0,s.useEffect)((()=>{h&&(v({baseCustomTime:h,utcTime:h,timezoneText:void 0}),l("00:00:00"!==h))}),[h]);const x=c().useCallback((()=>{l(!1),v({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[I,D]=c().useState(!1),w=m.map((e=>c().createElement(n.DropdownItem,{key:e.text},e.text))),M=c().useCallback((()=>{l(!0)}),[]),U=c().useCallback((e=>{v({baseCustomTime:e,utcTime:e,timezoneText:void 0})}),[]),z=c().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,a=m.find((e=>e.text===t));a&&v((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),n=new Date;n.setUTCHours(t[0],t[1]);const i=(0,o.Z)(n,-a.offset),l=i.getUTCHours().toString().padStart(2,"0"),s=i.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${l}:${s}`,timezoneText:a.text}}return e}))}D(!1)}),[]),N=c().useCallback((()=>{r&&(0,b.mutate)({body:r.utcTime}).then((e=>{204===e.status?S("Action settings saved",""):y("Failed to save action settings","")})),f(!1)}),[y,S,b.mutate,r]),O=b.loading||k.loading,A=()=>{f(!E)};return c().createElement(c().Fragment,null,c().createElement("p",null,c().createElement(i.OutlinedClockIcon,{color:"var(--pf-v5-global--palette--cyan-200)"}),"Â ",`Any daily digest emails you've opted into will be sent at ${h||"00:00"} UTC`),c().createElement(n.Button,{variant:"link",onClick:A,ouiaId:"TimeConfigModal"},"Edit time settings"),c().createElement(n.Modal,{className:C,variant:n.ModalVariant.small,isOpen:E,onClose:A,actions:[c().createElement(n.Button,{key:"save",variant:"primary",type:"submit",isLoading:O,isDisabled:O,onClick:N},O?"Loading":"Save"),c().createElement(n.Button,{key:"cancel",variant:"link",onClick:A},"Cancel")],ouiaId:"TimeConfigModal"},c().createElement(n.Stack,{hasGutter:!0},c().createElement(n.StackItem,null,c().createElement(n.Title,{headingLevel:"h2"},"Action settings")),c().createElement(n.StackItem,null,c().createElement(n.Text,{component:n.TextVariants.p},"Daily digest email receipt"),c().createElement(n.HelperText,null,c().createElement(n.HelperTextItem,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),c().createElement("br",null),c().createElement(n.Split,null,c().createElement(n.SplitItem,{isFilled:!0},c().createElement(n.Stack,{hasGutter:!0},c().createElement(n.StackItem,null,k.loading?c().createElement(n.Skeleton,null):c().createElement(n.Radio,{isChecked:!a,onChange:x,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),c().createElement(n.StackItem,null,k.loading?c().createElement(n.Skeleton,null):c().createElement(n.Radio,{isChecked:a,onChange:M,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),a&&c().createElement(c().Fragment,null,c().createElement(n.StackItem,{className:T},c().createElement(n.Text,{component:n.TextVariants.h6},"Time"),c().createElement(n.TimePicker,{onChange:U,time:null==r?void 0:r.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),c().createElement(n.StackItem,{className:T},c().createElement(n.Text,{component:n.TextVariants.h6},"Time zone"),c().createElement(n.Dropdown,{className:p,toggle:c().createElement(n.DropdownToggle,{isOpen:I,id:"timezone",onToggle:()=>D(!I)},null!==(t=null==r?void 0:r.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),isOpen:I,onSelect:z,menuAppendTo:()=>document.body,dropdownItems:w}))))))))},E=v},2412:(e,t,a)=>{a.d(t,{Y:()=>l});var n=a(94782),i=a(16721);const l=()=>(0,n.useQuery)(i.B.OrgConfigResourceGetDailyDigestTimePreference.actionCreator())},60207:(e,t,a)=>{a.d(t,{I:()=>o});var n=a(94782),i=a(16721);const l=e=>i.B.OrgConfigResourceSaveDailyDigestTimePreference.actionCreator({body:e.body}),o=()=>(0,n.useMutation)(l)}}]);
//# sourceMappingURL=../sourcemaps/1654.1e70c8b7c846f5adb5645502e0d14bd1.js.map