"use strict";(self.webpackChunknotifications_frontend=self.webpackChunknotifications_frontend||[]).push([[7968],{55730:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var i=n(24478),s=n(55128),r=n(18172),o=n(52890),l=n(10756),a=n.n(l),c=n(94782),u=n(28216),d=n(83130),m=n(75861),p=n(9241);(0,r.MD)();const g=e=>{const t=a().useMemo((()=>(0,s.createFetchingClient)(s.getInsights,{responseInterceptors:[o.validateSchemaResponseInterceptor]})),[]),n=a().useMemo((()=>(e.logger?(0,p.b)(e.logger):(0,p.b)()).getStore()),[e.logger]);return a().createElement(i.Z,{locale:navigator.language.slice(0,2),messages:d,onError:console.log},a().createElement(u.Provider,{store:n},a().createElement(c.ClientContextProvider,{client:t},a().createElement(m.Z,null))))}},91654:(e,t,n)=>{n.r(t),n.d(t,{TimeConfigComponent:()=>g,default:()=>v});var i=n(21242),s=n(78343),r=n(10756),o=n.n(r),l=n(65326),a=n(8813),c=n(2412),u=n(60207),d=n(21503);const m=(0,a.style)({width:"280px"}),p=(0,a.style)({marginTop:"12px"}),g=()=>{var e,t;const[n,a]=o().useState(!1),[g,v]=o().useState(),[E,f]=(0,r.useState)(!1),T=(0,c.Y)(),h=(0,u.I)(),{addSuccessNotification:b,addDangerNotification:y}=(0,d.l)(),I=(0,r.useMemo)((()=>{var e;if(200===T.status)return null===(e=T.payload)||void 0===e?void 0:e.value}),[null===(e=T.payload)||void 0===e?void 0:e.value,T.status]);(0,r.useEffect)((()=>{I&&(v({baseCustomTime:I,utcTime:I,timezoneText:void 0}),a("00:00:00"!==I))}),[I]);const k=o().useCallback((()=>{a(!1),v({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[_,C]=o().useState(!1),S=l.map((e=>o().createElement(i.DropdownItem,{key:e.text},e.text))),A=o().useCallback((()=>{a(!0)}),[]),N=o().useCallback((e=>{v({baseCustomTime:e,utcTime:e,timezoneText:void 0})}),[]),x=o().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,n=l.find((e=>e.text===t));n&&v((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),i=new Date;i.setUTCHours(t[0],t[1]);const r=(0,s.Z)(i,-n.offset),o=r.getUTCHours().toString().padStart(2,"0"),l=r.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${o}:${l}`,timezoneText:n.text}}return e}))}C(!1)}),[]),R=o().useCallback((()=>{g&&(0,h.mutate)({body:g.utcTime}).then((e=>{204===e.status?b("Action settings saved",""):y("Failed to save action settings","")})),f(!1)}),[y,b,h.mutate,g]),O=h.loading||T.loading,w=()=>{f(!E)};return o().createElement(o().Fragment,null,o().createElement(i.Alert,{className:p,isInline:!0,title:`Any daily digest emails you've opted into will be sent at ${I||"00:00"} UTC`,actionLinks:o().createElement(i.AlertActionLink,{onClick:w,ouiaId:"TimeConfigModal"},"Edit time settings")}),o().createElement(i.Modal,{className:"pf-v5-u-pl-xl",variant:i.ModalVariant.small,isOpen:E,onClose:w,actions:[o().createElement(i.Button,{key:"save",variant:"primary",type:"submit",isLoading:O,isDisabled:O,onClick:R},O?"Loading":"Save"),o().createElement(i.Button,{key:"cancel",variant:"link",onClick:w},"Cancel")],ouiaId:"TimeConfigModal"},o().createElement(i.Stack,{hasGutter:!0},o().createElement(i.StackItem,null,o().createElement(i.Title,{headingLevel:"h2"},"Action settings")),o().createElement(i.StackItem,null,o().createElement(i.Text,{component:i.TextVariants.p},"Daily digest email receipt"),o().createElement(i.HelperText,null,o().createElement(i.HelperTextItem,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),o().createElement("br",null),o().createElement(i.Split,null,o().createElement(i.SplitItem,{isFilled:!0},o().createElement(i.Stack,{hasGutter:!0},o().createElement(i.StackItem,null,T.loading?o().createElement(i.Skeleton,null):o().createElement(i.Radio,{isChecked:!n,onChange:k,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),o().createElement(i.StackItem,null,T.loading?o().createElement(i.Skeleton,null):o().createElement(i.Radio,{isChecked:n,onChange:A,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),n&&o().createElement(o().Fragment,null,o().createElement(i.StackItem,{className:"pf-v5-u-pl-lg"},o().createElement(i.Text,{component:i.TextVariants.h6},"Time"),o().createElement(i.TimePicker,{onChange:N,time:null==g?void 0:g.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),o().createElement(i.StackItem,{className:"pf-v5-u-pl-lg"},o().createElement(i.Text,{component:i.TextVariants.h6},"Time zone"),o().createElement(i.Dropdown,{className:m,toggle:o().createElement(i.DropdownToggle,{isOpen:_,id:"timezone",onToggle:()=>C(!_)},null!==(t=null==g?void 0:g.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),isOpen:_,onSelect:x,menuAppendTo:()=>document.body,dropdownItems:S}))))))))},v=g},56437:(e,t,n)=>{n.d(t,{K4:()=>o,L6:()=>l,VL:()=>c,Yh:()=>i,_f:()=>s,k$:()=>r});const i=e=>e.type===r.EMAIL_SUBSCRIPTION||e.type===r.DRAWER,s=e=>e.type===r.INTEGRATION;var r;function o(e){return e.type===r.EMAIL_SUBSCRIPTION}function l(e){return e.type===r.DRAWER}!function(e){e.EMAIL_SUBSCRIPTION="EMAIL_SUBSCRIPTION",e.DRAWER="DRAWER",e.INTEGRATION="INTEGRATION"}(r||(r={}));const a=e=>e.map((e=>void 0===e?[void 0]:e.type===r.INTEGRATION?[e.integration.id]:e.recipient.map((e=>e.integrationId)))).flat(),c=(e,t)=>{if(e.length!==t.length)return!1;const n=a(e),i=a(t);return n.length===i.length&&n.every(((e,t)=>e===i[t]))}},69696:(e,t,n)=>{n.d(t,{YO:()=>s,dt:()=>o,nc:()=>l});class i{constructor(e){this.displayName=e}}class s extends i{constructor(e){super(e.name+(e.isEnabled?"":" - Disabled")),this.integration=e}getKey(){return this.integration.id}equals(e){return e instanceof s&&e.integration.id===this.integration.id}}class r extends i{constructor(e,t,n,i){super(e),this.key=i,this.description=t,this.integrationId=n}getKey(){return this.key}}class o extends r{constructor(e,t,n){let i,s;t?(i="Admins",s="Organization administrators for your account"):(i="All",s="All users in your organization who subscribed to this email in their Notification Preferences"),super(i,s,e,t?"users-admin":"users-all"),this.sendToAdmin=t,this.ignorePreferences=n}equals(e){return e instanceof o&&e.sendToAdmin===this.sendToAdmin&&e.ignorePreferences===this.ignorePreferences}}class l extends r{constructor(e,t,n){let i,s,r;"string"==typeof n?(i=n,s=!1,r=!1):(i="Loading",s=n,r=!n),super(i,void 0,e,`rbac-group-${t}`),this.groupId=t,this.isLoading=s,this.hasError=r}equals(e){return e instanceof l&&e.groupId===this.groupId}}},77836:(e,t,n)=>{n.d(t,{LW:()=>o,WX:()=>c,iv:()=>m,u3:()=>u});var i=n(46242),s=n(45295),r=n(73091);const o=e=>{for(const t of Object.values(r.WN))if(e.sub_type){if(t===`${e.type}:${e.sub_type}`)return t}else if(t===e.type)return t;throw new Error(`Unexpected type: ${e.type} with subtype: ${e.sub_type}`)},l=(e,t)=>null===e?t:e,a=e=>""===e?void 0:l(e),c=e=>{var t,n;const c={id:e.id||"",name:e.name||"",isEnabled:!!e.enabled,type:o(e),status:null!==(t=e.status)&&void 0!==t?t:"UNKNOWN",serverErrors:null!==(n=e.server_errors)&&void 0!==n?n:0};if((0,r.cd)(c.type))return((e,t)=>{var n,i,s,r;return{...e,url:null!==(n=null==t?void 0:t.url)&&void 0!==n?n:"",sslVerificationEnabled:null!==(i=!(null==t?void 0:t.disable_ssl_verification))&&void 0!==i&&i,secretToken:a(null==t?void 0:t.secret_token),basicAuth:null===(null==t?void 0:t.basic_authentication)?void 0:{user:l(null===(s=null==t?void 0:t.basic_authentication)||void 0===s?void 0:s.username,""),pass:l(null===(r=null==t?void 0:t.basic_authentication)||void 0===r?void 0:r.password,"")},extras:l(null==t?void 0:t.extras)}})(c,e.properties);switch(c.type){case r.WN.WEBHOOK:return((e,t)=>{var n,i,r;return{...e,url:null!==(n=null==t?void 0:t.url)&&void 0!==n?n:"",sslVerificationEnabled:null!==(i=!(null==t?void 0:t.disable_ssl_verification))&&void 0!==i&&i,secretToken:a(null==t?void 0:t.secret_token),method:null!==(r=null==t?void 0:t.method)&&void 0!==r?r:s.l.HttpType.Enum.GET}})(c,e.properties);case r.WN.ANSIBLE:return((e,t)=>{var n,i,r;return{...e,url:null!==(n=null==t?void 0:t.url)&&void 0!==n?n:"",sslVerificationEnabled:null!==(i=!(null==t?void 0:t.disable_ssl_verification))&&void 0!==i&&i,secretToken:a(null==t?void 0:t.secret_token),method:null!==(r=null==t?void 0:t.method)&&void 0!==r?r:s.l.HttpType.Enum.POST}})(c,e.properties);case r.WN.EMAIL_SUBSCRIPTION:case r.WN.DRAWER:return((e,t)=>({...e,ignorePreferences:t.ignore_preferences,groupId:null===t.group_id?void 0:t.group_id,onlyAdmin:t.only_admins}))(c,e.properties);default:(0,i.vE)(c.type)}},u=e=>e.map(c),d=e=>{const t=e.type;if((0,r.cd)(t)){const t=e;return{url:t.url,disable_ssl_verification:!t.sslVerificationEnabled,secret_token:a(t.secretToken),basic_authentication:t.basicAuth?{username:t.basicAuth.user,password:t.basicAuth.pass}:void 0,extras:t.extras}}switch(t){case r.WN.WEBHOOK:{const t=e;return{url:t.url,method:t.method,disable_ssl_verification:!t.sslVerificationEnabled,secret_token:a(t.secretToken)}}case r.WN.ANSIBLE:{const t=e;return{url:t.url,disable_ssl_verification:!t.sslVerificationEnabled,secret_token:a(t.secretToken),method:t.method}}case r.WN.EMAIL_SUBSCRIPTION:{const t=e;return{only_admins:t.onlyAdmin,group_id:t.groupId,ignore_preferences:t.ignorePreferences}}case r.WN.DRAWER:{const t=e;return{only_admins:t.onlyAdmin,group_id:t.groupId,ignore_preferences:t.ignorePreferences}}default:(0,i.vE)(t)}},m=e=>{const{type:t,subType:n}=(e=>{const t=e.split(":",2);return{type:t[0],subType:2===t.length?t[1]:void 0}})(e.type);return{id:e.id,name:e.name,enabled:e.isEnabled,type:t,sub_type:n,description:"",properties:d(e)}}}}]);
//# sourceMappingURL=../sourcemaps/7968.51579914c58ea2343fe590f0df93c15e.js.map