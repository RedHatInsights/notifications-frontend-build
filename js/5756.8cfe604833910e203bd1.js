"use strict";(self.webpackChunknotifications_frontend=self.webpackChunknotifications_frontend||[]).push([[5756,1654],{85756:(e,t,n)=>{n.r(t),n.d(t,{ConnectedTimeConfig:()=>s,default:()=>m});var a=n(93264),i=n.n(a),l=n(28216),o=n(91654);const s=({store:e})=>i().createElement(l.Provider,{store:e},i().createElement(o.TimeConfigComponent,null)),m=s},91654:(e,t,n)=>{n.r(t),n.d(t,{TimeConfigComponent:()=>p,default:()=>T});var a=n(21242),i=n(78343),l=n(93264),o=n.n(l),s=n(65326),m=n(8813),c=n(2412),r=n(60207),u=n(21503);const d=(0,m.style)({width:"280px"}),g=(0,m.style)({marginTop:"12px"}),p=()=>{var e,t;const[n,m]=o().useState(!1),[p,T]=o().useState(),[C,v]=(0,l.useState)(!1),E=(0,c.Y)(),f=(0,r.I)(),{addSuccessNotification:k,addDangerNotification:S}=(0,u.l)(),b=(0,l.useMemo)((()=>{var e;if(200===E.status)return null===(e=E.payload)||void 0===e?void 0:e.value}),[null===(e=E.payload)||void 0===e?void 0:e.value,E.status]);(0,l.useEffect)((()=>{b&&(T({baseCustomTime:b,utcTime:b,timezoneText:void 0}),m("00:00:00"!==b))}),[b]);const h=o().useCallback((()=>{m(!1),T({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[x,y]=o().useState(!1),I=s.map((e=>o().createElement(a.DropdownItem,{key:e.text},e.text))),D=o().useCallback((()=>{m(!0)}),[]),w=o().useCallback((e=>{T({baseCustomTime:e,utcTime:e,timezoneText:void 0})}),[]),A=o().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,n=s.find((e=>e.text===t));n&&T((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),a=new Date;a.setUTCHours(t[0],t[1]);const l=(0,i.Z)(a,-n.offset),o=l.getUTCHours().toString().padStart(2,"0"),s=l.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${o}:${s}`,timezoneText:n.text}}return e}))}y(!1)}),[]),M=o().useCallback((()=>{p&&(0,f.mutate)({body:p.utcTime}).then((e=>{204===e.status?k("Action settings saved",""):S("Failed to save action settings","")})),v(!1)}),[S,k,f.mutate,p]),U=f.loading||E.loading,z=()=>{v(!C)};return o().createElement(o().Fragment,null,o().createElement(a.Alert,{className:g,isInline:!0,title:`Any daily digest emails you've opted into will be sent at ${b||"00:00"} UTC`,actionLinks:o().createElement(a.AlertActionLink,{onClick:z,ouiaId:"TimeConfigModal"},"Edit time settings")}),o().createElement(a.Modal,{className:"pf-v5-u-pl-xl",variant:a.ModalVariant.small,isOpen:C,onClose:z,actions:[o().createElement(a.Button,{key:"save",variant:"primary",type:"submit",isLoading:U,isDisabled:U,onClick:M},U?"Loading":"Save"),o().createElement(a.Button,{key:"cancel",variant:"link",onClick:z},"Cancel")],ouiaId:"TimeConfigModal"},o().createElement(a.Stack,{hasGutter:!0},o().createElement(a.StackItem,null,o().createElement(a.Title,{headingLevel:"h2"},"Action settings")),o().createElement(a.StackItem,null,o().createElement(a.Text,{component:a.TextVariants.p},"Daily digest email receipt"),o().createElement(a.HelperText,null,o().createElement(a.HelperTextItem,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),o().createElement("br",null),o().createElement(a.Split,null,o().createElement(a.SplitItem,{isFilled:!0},o().createElement(a.Stack,{hasGutter:!0},o().createElement(a.StackItem,null,E.loading?o().createElement(a.Skeleton,null):o().createElement(a.Radio,{isChecked:!n,onChange:h,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),o().createElement(a.StackItem,null,E.loading?o().createElement(a.Skeleton,null):o().createElement(a.Radio,{isChecked:n,onChange:D,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),n&&o().createElement(o().Fragment,null,o().createElement(a.StackItem,{className:"pf-v5-u-pl-lg"},o().createElement(a.Text,{component:a.TextVariants.h6},"Time"),o().createElement(a.TimePicker,{onChange:w,time:null==p?void 0:p.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),o().createElement(a.StackItem,{className:"pf-v5-u-pl-lg"},o().createElement(a.Text,{component:a.TextVariants.h6},"Time zone"),o().createElement(a.Dropdown,{className:d,toggle:o().createElement(a.DropdownToggle,{isOpen:x,id:"timezone",onToggle:()=>y(!x)},null!==(t=null==p?void 0:p.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),isOpen:x,onSelect:A,menuAppendTo:()=>document.body,dropdownItems:I}))))))))},T=p},2412:(e,t,n)=>{n.d(t,{Y:()=>l});var a=n(94782),i=n(16721);const l=()=>(0,a.useQuery)(i.B.OrgConfigResourceGetDailyDigestTimePreference.actionCreator())},60207:(e,t,n)=>{n.d(t,{I:()=>o});var a=n(94782),i=n(16721);const l=e=>i.B.OrgConfigResourceSaveDailyDigestTimePreference.actionCreator({body:e.body}),o=()=>(0,a.useMutation)(l)}}]);
//# sourceMappingURL=../sourcemaps/5756.bed26ed10b81908ad494faa316858723.js.map