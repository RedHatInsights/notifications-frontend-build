"use strict";(self.webpackChunknotifications=self.webpackChunknotifications||[]).push([[6675],{64428:(e,t,n)=>{n.r(t),n.d(t,{IntegrationWizard:()=>f,default:()=>y});var i=n(49405),r=n(63537),s=n(97744),o=n(47503),a=n(15039),c=n(87677),l=n(1384),u=n(85433),d=n(64118),p=n(91360),g=n(61674),h=n(70910),m=n(75045),A=n(17368),I=n(49924);const f=({isOpen:e,isEdit:t,template:n,afterSubmit:I,closeModal:f,category:y})=>{const E={[p.nb]:a.A,[p.c5]:c.A,[p.Lh]:l.A,[p.AU]:u.A,[p.pJ]:g.A},v=(0,h.useFlag)("platform.integrations.behavior-groups-move"),b=(0,h.useFlag)("platform.integrations.pager-duty"),T=(0,A.h)(),[R,N]=o.useState(e);return o.useEffect((()=>{N(e)}),[e]),o.createElement(o.Fragment,null,R&&o.createElement(s.A,{schema:(0,d.w)(y,t,v,b),componentMapper:{...i.Ay,...E},onSubmit:({url:e,[p.Iq]:i,name:r,"secret-token":s,"event-types-table":o,severity:a})=>{const[c,l]=(null==i?void 0:i.split(":"))||["webhook"],u={name:r,enabled:!0,type:c,...l&&{sub_type:l},description:"",properties:{method:"POST",url:e,disable_ssl_verification:!1,secret_token:s,severity:a},...v&&{event_types:o?Object.values(o).flatMap(Object.keys):[]}};t&&(null==n?void 0:n.id)?(0,m.lg)(null==n?void 0:n.id,u,void 0,T,I):(0,m.UD)(u,T,I),f()},initialValues:t?{...n,"secret-token":null==n?void 0:n.secretToken}:{},onCancel:f},(e=>o.createElement(r.Ay,{...e,showFormControls:!1}))))},y=({store:e,...t})=>e?o.createElement(I.Provider,{store:e},o.createElement(f,{...t})):o.createElement(f,{...t})},33408:(e,t,n)=>{n.d(t,{D:()=>r,Ij:()=>a,K0:()=>l,_n:()=>s,ij:()=>i,tr:()=>o});const i=e=>e.type===s.EMAIL_SUBSCRIPTION||e.type===s.DRAWER,r=e=>e.type===s.INTEGRATION;var s;function o(e){return e.type===s.EMAIL_SUBSCRIPTION}function a(e){return e.type===s.DRAWER}!function(e){e.EMAIL_SUBSCRIPTION="EMAIL_SUBSCRIPTION",e.DRAWER="DRAWER",e.INTEGRATION="INTEGRATION"}(s||(s={}));const c=e=>e.map((e=>void 0===e?[void 0]:e.type===s.INTEGRATION?[e.integration.id]:e.recipient.map((e=>e.integrationId)))).flat(),l=(e,t)=>{if(e.length!==t.length)return!1;const n=c(e),i=c(t);return n.length===i.length&&n.every(((e,t)=>e===i[t]))}},92200:(e,t,n)=>{n.d(t,{AJ:()=>o,cx:()=>a,sT:()=>r});class i{constructor(e){this.displayName=e}}class r extends i{constructor(e){super(e.name+(e.isEnabled?"":" - Disabled")),this.integration=e}getKey(){return this.integration.id}equals(e){return e instanceof r&&e.integration.id===this.integration.id}}class s extends i{constructor(e,t,n,i){super(e),this.key=i,this.description=t,this.integrationId=n}getKey(){return this.key}}class o extends s{constructor(e,t,n){let i,r;t?(i="Admins",r="Organization administrators for your account"):(i="All",r="All users in your organization who subscribed to this email in their Notification Preferences"),super(i,r,e,t?"users-admin":"users-all"),this.sendToAdmin=t,this.ignorePreferences=n}equals(e){return e instanceof o&&e.sendToAdmin===this.sendToAdmin&&e.ignorePreferences===this.ignorePreferences}}class a extends s{constructor(e,t,n){let i,r,s;"string"==typeof n?(i=n,r=!1,s=!1):(i="Loading",r=n,s=!n),super(i,void 0,e,`rbac-group-${t}`),this.groupId=t,this.isLoading=r,this.hasError=s}equals(e){return e instanceof a&&e.groupId===this.groupId}}}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./IntegrationsWizard.49dd8af50231d6f4d33ecbb20f821da5.js.map