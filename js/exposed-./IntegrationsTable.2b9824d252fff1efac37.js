"use strict";(self.webpackChunknotifications=self.webpackChunknotifications||[]).push([[2606,6675],{70165:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var i=n(35637),a=n(5864),l=n(41261),s=n(80578),r=n(47503),o=n.n(r),c=n(20269),u=n(61225),m=n(85110),d=n(55318),g=n(932),p=n(12178),E=n(47523),v=n(34333),h=n(66245),f=n(86594),T=n(36516);const C=({activeCategory:e,...t})=>{const{rbac:n,server:i,isOrgAdmin:a}=(0,T.n)(),l=e&&Object.values(v.l).includes(e)?e:void 0;return n&&i?r.createElement(h.B.Provider,{value:{rbac:n,server:i,isOrgAdmin:!!a}},r.createElement(f.O,null,r.createElement(p.P,null),r.createElement(E.A,{category:l,...t}))):r.createElement(d.a,null,r.createElement(g.y,{size:"xl"}))};var y=n(42338);(0,l.IP)();const b=e=>{const t=o().useMemo((()=>(0,a.createFetchingClient)(a.getInsights,{responseInterceptors:[s.validateSchemaResponseInterceptor]})),[]),n=o().useMemo((()=>(e.logger?(0,y.g)(e.logger):(0,y.g)()).getStore()),[e.logger]);return o().createElement(i.A,{locale:navigator.language.slice(0,2),messages:m,onError:console.log},o().createElement(u.Provider,{store:n},o().createElement(c.ClientContextProvider,{client:t},o().createElement(C,{...e}))))}},40874:(e,t,n)=>{n.r(t),n.d(t,{TimeConfigComponent:()=>D,default:()=>U});var i=n(30155),a=n(16165),l=n(72583),s=n(90678),r=n(73113),o=n(60316),c=n(22069),u=n(59257),m=n(49318),d=n(30666),g=n(93973),p=n(71906),E=n(73539),v=n(14243),h=n(76774),f=n(74225),T=n(94494),C=n(75797),y=n(64361),b=n(17661),A=n(89915),I=n(21524),k=n(47503),S=n.n(k),x=n(77621),N=n(90682),R=n(17368),O=n(30679);const M=(0,N.style)({marginTop:"12px"}),P=(0,N.style)({maxHeight:"200px",maxWidth:"400px",overflowY:"auto"}),D=()=>{var e;const[t,n]=S().useState(!1),[N,D]=S().useState(),[U,w]=S().useState(null),[z,L]=(0,k.useState)(!1),F=S().useRef(null),_=S().useRef(null),{addSuccessNotification:B,addDangerNotification:$}=(0,R.h)();S().useEffect((()=>{(async()=>{D(await(0,O.C)())})()}),[]);const W=(0,k.useMemo)((()=>`Any daily digest emails you've opted into will be sent at ${(null==U?void 0:U.utcTime)?null==U?void 0:U.utcTime:"00:00"} UTC`),[null==U?void 0:U.utcTime]);(0,k.useEffect)((()=>{N&&(w({baseCustomTime:N,utcTime:N,timezoneText:void 0}),n("00:00:00"!==N))}),[N]);const j=S().useCallback((()=>{n(!1),w({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[G,q]=S().useState(!1),H=S().useCallback((()=>{n(!0)}),[]),Y=S().useCallback(((e,t)=>{w({baseCustomTime:t,utcTime:t,timezoneText:void 0})}),[]),K=S().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,n=x.find((e=>e.text===t));n&&w((e=>{const t=((null==e?void 0:e.baseCustomTime)||"00:00").split(":").map((e=>parseInt(e))),i=new Date;i.setUTCHours(t[0],t[1]);const a=(0,I.A)(i,-n.offset),l=a.getUTCHours().toString().padStart(2,"0"),s=a.getUTCMinutes().toString().padStart(2,"0");return{baseCustomTime:(null==e?void 0:e.baseCustomTime)||"00:00",utcTime:`${l}:${s}`,timezoneText:n.text}}))}q(!1)}),[]),J=S().useCallback((()=>{U&&(0,O.S)(`${U.utcTime}:00`).then((()=>{B("Action settings saved","")})).catch((()=>{$("Failed to save action settings","")})),L(!1)}),[$,B,U]),V=null===U||null===N,Q=()=>{L(!z)};return S().createElement(S().Fragment,null,S().createElement(A.F,{className:M,isInline:!0,title:W,actionLinks:S().createElement(i.v,{onClick:Q,ouiaId:"TimeConfigModal"},"Edit time settings")}),S().createElement(a.a,{className:"pf-v5-u-pl-xl",variant:a.d.small,isOpen:z,onClose:Q,actions:[S().createElement(l.$n,{key:"save",variant:"primary",type:"submit",isLoading:V,isDisabled:V,onClick:J},V?"Loading":"Save"),S().createElement(l.$n,{key:"cancel",variant:"link",onClick:Q},"Cancel")],ouiaId:"TimeConfigModal"},S().createElement(s.B,{hasGutter:!0},S().createElement(r.a,null,S().createElement(o.h,{headingLevel:"h2"},"Action settings")),S().createElement(r.a,null,S().createElement(c.E,{component:c.Y.p},"Daily digest email receipt"),S().createElement(u.E,null,S().createElement(m.j,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),S().createElement("br",null),S().createElement(d.B,null,S().createElement(g.o,{isFilled:!0},S().createElement(s.B,{hasGutter:!0},S().createElement(r.a,null,null===N?S().createElement(p.E,null):S().createElement(E.s,{isChecked:!t,onChange:j,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),S().createElement(r.a,null,null===N?S().createElement(p.E,null):S().createElement(E.s,{isChecked:t,onChange:H,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),t&&S().createElement(S().Fragment,null,S().createElement(r.a,{className:"pf-v5-u-pl-lg"},S().createElement(c.E,{component:c.Y.h6},"Time"),S().createElement(v.A,{onChange:Y,time:null==U?void 0:U.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),S().createElement(r.a,{className:"pf-v5-u-pl-lg"},S().createElement(c.E,{component:c.Y.h6},"Time zone"),S().createElement(h.$,{isOpen:G,onOpenChange:e=>q(e),menu:S().createElement(f.W,{ref:_,isPlain:!1},S().createElement(T.r,{id:"timezoneMenu"},S().createElement(C.c,{className:P},x.map((e=>S().createElement(y.D,{onClick:K,key:e.text},e.text)))))),menuRef:_,toggle:S().createElement(b.S,{id:"timezone",ref:F,onClick:()=>{q(!G)},isExpanded:G},null!==(e=null==U?void 0:U.timezoneText)&&void 0!==e?e:"(UTC-00:00) Universal Time"),toggleRef:F}))))))))},U=D},64428:(e,t,n)=>{n.r(t),n.d(t,{IntegrationWizard:()=>h,default:()=>f});var i=n(49405),a=n(63537),l=n(97744),s=n(47503),r=n(15039),o=n(87677),c=n(1384),u=n(85433),m=n(64118),d=n(91360),g=n(61674),p=n(70910),E=n(75045),v=n(17368);const h=({isOpen:e,isEdit:t,template:n,afterSubmit:h,closeModal:f,category:T})=>{const C={[d.nb]:r.A,[d.c5]:o.A,[d.Lh]:c.A,[d.AU]:u.A,[d.pJ]:g.A},y=(0,p.useFlag)("platform.integrations.behavior-groups-move"),b=(0,p.useFlag)("platform.integrations.pager-duty"),A=(0,v.h)(),[I,k]=s.useState(e);return s.useEffect((()=>{k(e)}),[e]),s.createElement(s.Fragment,null,I&&s.createElement(l.A,{schema:(0,m.w)(T,t,y,b),componentMapper:{...i.Ay,...C},onSubmit:({url:e,[d.Iq]:i,name:a,"secret-token":l,"event-types-table":s,severity:r})=>{const[o,c]=(null==i?void 0:i.split(":"))||["webhook"],u={name:a,enabled:!0,type:o,...c&&{sub_type:c},description:"",properties:{method:"POST",url:e,disable_ssl_verification:!1,secret_token:l,severity:r},...y&&{event_types:s?Object.values(s).flatMap(Object.keys):[]}};t&&(null==n?void 0:n.id)?(0,E.lg)(null==n?void 0:n.id,u,void 0,A,h):(0,E.UD)(u,A,h),f()},initialValues:t?{...n,"secret-token":null==n?void 0:n.secretToken}:{},onCancel:f},(e=>s.createElement(a.Ay,{...e,showFormControls:!1}))))},f=h},33408:(e,t,n)=>{n.d(t,{D:()=>a,Ij:()=>r,K0:()=>c,_n:()=>l,ij:()=>i,tr:()=>s});const i=e=>e.type===l.EMAIL_SUBSCRIPTION||e.type===l.DRAWER,a=e=>e.type===l.INTEGRATION;var l;function s(e){return e.type===l.EMAIL_SUBSCRIPTION}function r(e){return e.type===l.DRAWER}!function(e){e.EMAIL_SUBSCRIPTION="EMAIL_SUBSCRIPTION",e.DRAWER="DRAWER",e.INTEGRATION="INTEGRATION"}(l||(l={}));const o=e=>e.map((e=>void 0===e?[void 0]:e.type===l.INTEGRATION?[e.integration.id]:e.recipient.map((e=>e.integrationId)))).flat(),c=(e,t)=>{if(e.length!==t.length)return!1;const n=o(e),i=o(t);return n.length===i.length&&n.every(((e,t)=>e===i[t]))}},92200:(e,t,n)=>{n.d(t,{AJ:()=>s,cx:()=>r,sT:()=>a});class i{constructor(e){this.displayName=e}}class a extends i{constructor(e){super(e.name+(e.isEnabled?"":" - Disabled")),this.integration=e}getKey(){return this.integration.id}equals(e){return e instanceof a&&e.integration.id===this.integration.id}}class l extends i{constructor(e,t,n,i){super(e),this.key=i,this.description=t,this.integrationId=n}getKey(){return this.key}}class s extends l{constructor(e,t,n){let i,a;t?(i="Admins",a="Organization administrators for your account"):(i="All",a="All users in your organization who subscribed to this email in their Notification Preferences"),super(i,a,e,t?"users-admin":"users-all"),this.sendToAdmin=t,this.ignorePreferences=n}equals(e){return e instanceof s&&e.sendToAdmin===this.sendToAdmin&&e.ignorePreferences===this.ignorePreferences}}class r extends l{constructor(e,t,n){let i,a,l;"string"==typeof n?(i=n,a=!1,l=!1):(i="Loading",a=n,l=!n),super(i,void 0,e,`rbac-group-${t}`),this.groupId=t,this.isLoading=a,this.hasError=l}equals(e){return e instanceof r&&e.groupId===this.groupId}}}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./IntegrationsTable.60f99233c00dd478ada88a75d2d903da.js.map