"use strict";(self.webpackChunknotifications=self.webpackChunknotifications||[]).push([[2101,3290],{5143:(e,t,n)=>{n.r(t),n.d(t,{ConnectedTimeConfig:()=>s,default:()=>m});var a=n(97656),i=n.n(a),l=n(61225),o=n(40874);const s=({store:e})=>i().createElement(l.Provider,{store:e},i().createElement(o.TimeConfigComponent,null)),m=s},40874:(e,t,n)=>{n.r(t),n.d(t,{TimeConfigComponent:()=>L,default:()=>H});var a=n(30155),i=n(16165),l=n(72583),o=n(90678),s=n(73113),m=n(60316),c=n(22069),r=n(59257),u=n(49318),d=n(30666),g=n(93973),E=n(71906),p=n(73539),C=n(14243),v=n(76774),f=n(74225),T=n(94494),h=n(75797),k=n(64361),b=n(17661),x=n(89915),y=n(21524),S=n(97656),w=n.n(S),z=n(77621),U=n(90682),D=n(2173),M=n(15640),N=n(17368),A=n(51237),$=n.n(A);const F=(0,U.style)({marginTop:"12px"}),I=(0,U.style)({maxHeight:"200px",maxWidth:"400px",overflowY:"auto"}),L=()=>{var e,t;const[n,U]=w().useState(!1),[A,L]=w().useState(),[H,R]=(0,S.useState)(!1),Y=w().useRef(null),B=w().useRef(null),O=(0,D.I)(),j=(0,M.L)(),{addSuccessNotification:G,addDangerNotification:P}=(0,N.h)(),W=(0,S.useMemo)((()=>{var e;if(!O.error)return null===(e=O.payload)||void 0===e?void 0:e.value}),[null===(e=O.payload)||void 0===e?void 0:e.value,O.error]),q=(0,S.useMemo)((()=>`Any daily digest emails you've opted into will be sent at ${(null==A?void 0:A.utcTime)?null==A?void 0:A.utcTime:"00:00"} UTC`),[null==A?void 0:A.utcTime]);(0,S.useEffect)((()=>{W&&(L({baseCustomTime:W,utcTime:W,timezoneText:void 0}),U("00:00:00"!==W))}),[W]);const J=w().useCallback((()=>{U(!1),L({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[K,Q]=w().useState(!1),V=w().useCallback((()=>{U(!0)}),[]),X=w().useCallback(((e,t)=>{L({baseCustomTime:t,utcTime:t,timezoneText:void 0})}),[]),Z=w().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,n=z.find((e=>e.text===t));n&&L((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),a=new Date;a.setUTCHours(t[0],t[1]);const i=(0,y.A)(a,-n.offset),l=i.getUTCHours().toString().padStart(2,"0"),o=i.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${l}:${o}`,timezoneText:n.text}}return e}))}Q(!1)}),[]),_=w().useCallback((()=>{if(A){const e=A.utcTime;$().put("/api/notifications/v1.0/org-config/daily-digest/time-preference",e,{headers:{"Content-Type":"application/json"}}).then((()=>{G("Action settings saved","")})).catch((()=>{P("Failed to save action settings","")}))}R(!1)}),[P,G,A]),ee=j.loading||O.loading,te=()=>{R(!H)};return w().createElement(w().Fragment,null,w().createElement(x.F,{className:F,isInline:!0,title:q,actionLinks:w().createElement(a.v,{onClick:te,ouiaId:"TimeConfigModal"},"Edit time settings")}),w().createElement(i.a,{className:"pf-v5-u-pl-xl",variant:i.d.small,isOpen:H,onClose:te,actions:[w().createElement(l.$n,{key:"save",variant:"primary",type:"submit",isLoading:ee,isDisabled:ee,onClick:_},ee?"Loading":"Save"),w().createElement(l.$n,{key:"cancel",variant:"link",onClick:te},"Cancel")],ouiaId:"TimeConfigModal"},w().createElement(o.B,{hasGutter:!0},w().createElement(s.a,null,w().createElement(m.h,{headingLevel:"h2"},"Action settings")),w().createElement(s.a,null,w().createElement(c.E,{component:c.Y.p},"Daily digest email receipt"),w().createElement(r.E,null,w().createElement(u.j,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),w().createElement("br",null),w().createElement(d.B,null,w().createElement(g.o,{isFilled:!0},w().createElement(o.B,{hasGutter:!0},w().createElement(s.a,null,O.loading?w().createElement(E.E,null):w().createElement(p.s,{isChecked:!n,onChange:J,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),w().createElement(s.a,null,O.loading?w().createElement(E.E,null):w().createElement(p.s,{isChecked:n,onChange:V,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),n&&w().createElement(w().Fragment,null,w().createElement(s.a,{className:"pf-v5-u-pl-lg"},w().createElement(c.E,{component:c.Y.h6},"Time"),w().createElement(C.A,{onChange:X,time:null==A?void 0:A.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),w().createElement(s.a,{className:"pf-v5-u-pl-lg"},w().createElement(c.E,{component:c.Y.h6},"Time zone"),w().createElement(v.$,{isOpen:K,onOpenChange:e=>Q(e),menu:w().createElement(f.W,{ref:B,isPlain:!1},w().createElement(T.r,{id:"timezoneMenu"},w().createElement(h.c,{className:I},z.map((e=>w().createElement(k.D,{onClick:Z,key:e.text},e.text)))))),menuRef:B,toggle:w().createElement(b.S,{id:"timezone",ref:Y,onClick:()=>{Q(!K)},isExpanded:K},null!==(t=null==A?void 0:A.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),toggleRef:Y}))))))))},H=L}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./ConnectedTimeConfig.11db03ba41ef7a598e24183745818fa6.js.map