"use strict";(self.webpackChunknotifications=self.webpackChunknotifications||[]).push([[9900,6675],{65645:(e,t,n)=>{n.r(t);var i=n(47503),a=n.n(i),r=n(5338),l=n(35637),o=n(5864),s=n(41261),c=n(80578),m=n(20269),u=n(61225),d=n(85110),g=n(25211),p=n(8473),E=n(20881),v=n(72374),h=n(12178),f=n(22233),T=n(17933),C=n(40564),A=n(66245),y=n(81923),b=n(86594),I=n(36516);const k="HH:mm",S="hh:mma",x=()=>{const{updateDocumentTitle:e}=(0,E.A)();null==e||e("Notifications");const{rbac:t,server:n,isOrgAdmin:a}=(0,I.n)(),r=(0,o.getInsights)(),[l,s]=i.useState(!1),c=i.useCallback((e=>{e?(r.chrome.getEnvironmentOriginal=r.chrome.getEnvironment,r.chrome.getEnvironment=()=>"ci"):r.chrome.getEnvironment=r.chrome.getEnvironmentOriginal,s(e)}),[r]);if(!t||!n)return i.createElement(y.z,null);if(n.status===C.S.MAINTENANCE){const e=(0,v.A)((0,o.toUtc)(n.from),k),t=(0,v.A)((0,o.toUtc)(n.to),k),a=(0,v.A)(n.from,S),r=(0,v.A)(n.to,S),l=(0,v.A)(n.to,"O");return i.createElement(p.A,{utcStartTime:e,utcEndTime:t,startTime:a,endTime:r,timeZone:l})}return i.createElement(A.B.Provider,{value:{rbac:t,server:n,isOrgAdmin:!!a}},i.createElement(b.O,null,i.createElement(h.P,null),i.createElement(o.InsightsEnvDetector,{insights:r,onEnvironment:T.mr},i.createElement(o.RenderIfTrue,null,i.createElement(g.d,{className:"pf-v5-u-p-sm",isChecked:l,onChange:c,labelOff:"Enable experimental features",label:"Disable experimental features"}))),i.createElement(f.B,null)))};var N=n(42338);(0,s.IP)();const O=document.getElementById("root");(0,r.H)(O).render(a().createElement((e=>{const t=a().useMemo((()=>(0,o.createFetchingClient)(o.getInsights,{responseInterceptors:[c.validateSchemaResponseInterceptor]})),[]),n=a().useMemo((()=>(e.logger?(0,N.g)(e.logger):(0,N.g)()).getStore()),[e.logger]);return a().createElement(l.A,{locale:navigator.language.slice(0,2),messages:d,onError:console.log},a().createElement(u.Provider,{store:n},a().createElement(m.ClientContextProvider,{client:t},a().createElement(x,null))))}),null))},40874:(e,t,n)=>{n.d(t,{TimeConfigComponent:()=>z});var i=n(30155),a=n(16165),r=n(72583),l=n(90678),o=n(73113),s=n(60316),c=n(22069),m=n(59257),u=n(49318),d=n(30666),g=n(93973),p=n(71906),E=n(73539),v=n(14243),h=n(76774),f=n(74225),T=n(94494),C=n(75797),A=n(64361),y=n(17661),b=n(89915),I=n(21524),k=n(47503),S=n.n(k),x=n(77621),N=n(90682),O=n(2173),R=n(15640),M=n(17368),D=n(51237),U=n.n(D);const P=(0,N.style)({marginTop:"12px"}),w=(0,N.style)({maxHeight:"200px",maxWidth:"400px",overflowY:"auto"}),z=()=>{var e,t;const[n,N]=S().useState(!1),[D,z]=S().useState(),[L,B]=(0,k.useState)(!1),F=S().useRef(null),_=S().useRef(null),H=(0,O.I)(),W=(0,R.L)(),{addSuccessNotification:$,addDangerNotification:j}=(0,M.h)(),G=(0,k.useMemo)((()=>{var e;if(!H.error)return null===(e=H.payload)||void 0===e?void 0:e.value}),[null===(e=H.payload)||void 0===e?void 0:e.value,H.error]),q=(0,k.useMemo)((()=>`Any daily digest emails you've opted into will be sent at ${(null==D?void 0:D.utcTime)?null==D?void 0:D.utcTime:"00:00"} UTC`),[null==D?void 0:D.utcTime]);(0,k.useEffect)((()=>{G&&(z({baseCustomTime:G,utcTime:G,timezoneText:void 0}),N("00:00:00"!==G))}),[G]);const Y=S().useCallback((()=>{N(!1),z({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[K,J]=S().useState(!1),V=S().useCallback((()=>{N(!0)}),[]),Z=S().useCallback(((e,t)=>{z({baseCustomTime:t,utcTime:t,timezoneText:void 0})}),[]),Q=S().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,n=x.find((e=>e.text===t));n&&z((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),i=new Date;i.setUTCHours(t[0],t[1]);const a=(0,I.A)(i,-n.offset),r=a.getUTCHours().toString().padStart(2,"0"),l=a.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${r}:${l}`,timezoneText:n.text}}return e}))}J(!1)}),[]),X=S().useCallback((()=>{if(D){const e=D.utcTime;U().put("/api/notifications/v1.0/org-config/daily-digest/time-preference",e,{headers:{"Content-Type":"application/json"}}).then((()=>{$("Action settings saved","")})).catch((()=>{j("Failed to save action settings","")}))}B(!1)}),[j,$,D]),ee=W.loading||H.loading,te=()=>{B(!L)};return S().createElement(S().Fragment,null,S().createElement(b.F,{className:P,isInline:!0,title:q,actionLinks:S().createElement(i.v,{onClick:te,ouiaId:"TimeConfigModal"},"Edit time settings")}),S().createElement(a.a,{className:"pf-v5-u-pl-xl",variant:a.d.small,isOpen:L,onClose:te,actions:[S().createElement(r.$n,{key:"save",variant:"primary",type:"submit",isLoading:ee,isDisabled:ee,onClick:X},ee?"Loading":"Save"),S().createElement(r.$n,{key:"cancel",variant:"link",onClick:te},"Cancel")],ouiaId:"TimeConfigModal"},S().createElement(l.B,{hasGutter:!0},S().createElement(o.a,null,S().createElement(s.h,{headingLevel:"h2"},"Action settings")),S().createElement(o.a,null,S().createElement(c.E,{component:c.Y.p},"Daily digest email receipt"),S().createElement(m.E,null,S().createElement(u.j,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),S().createElement("br",null),S().createElement(d.B,null,S().createElement(g.o,{isFilled:!0},S().createElement(l.B,{hasGutter:!0},S().createElement(o.a,null,H.loading?S().createElement(p.E,null):S().createElement(E.s,{isChecked:!n,onChange:Y,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),S().createElement(o.a,null,H.loading?S().createElement(p.E,null):S().createElement(E.s,{isChecked:n,onChange:V,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),n&&S().createElement(S().Fragment,null,S().createElement(o.a,{className:"pf-v5-u-pl-lg"},S().createElement(c.E,{component:c.Y.h6},"Time"),S().createElement(v.A,{onChange:Z,time:null==D?void 0:D.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),S().createElement(o.a,{className:"pf-v5-u-pl-lg"},S().createElement(c.E,{component:c.Y.h6},"Time zone"),S().createElement(h.$,{isOpen:K,onOpenChange:e=>J(e),menu:S().createElement(f.W,{ref:_,isPlain:!1},S().createElement(T.r,{id:"timezoneMenu"},S().createElement(C.c,{className:w},x.map((e=>S().createElement(A.D,{onClick:Q,key:e.text},e.text)))))),menuRef:_,toggle:S().createElement(y.S,{id:"timezone",ref:F,onClick:()=>{J(!K)},isExpanded:K},null!==(t=null==D?void 0:D.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),toggleRef:F}))))))))}},64428:(e,t,n)=>{n.d(t,{IntegrationWizard:()=>h});var i=n(49405),a=n(63537),r=n(97744),l=n(47503),o=n(15039),s=n(87677),c=n(1384),m=n(85433),u=n(64118),d=n(91360),g=n(61674),p=n(70910),E=n(75045),v=n(17368);const h=({isOpen:e,isEdit:t,template:n,afterSubmit:h,closeModal:f,category:T})=>{const C={[d.nb]:o.A,[d.c5]:s.A,[d.Lh]:c.A,[d.AU]:m.A,[d.pJ]:g.A},A=(0,p.useFlag)("platform.integrations.behavior-groups-move"),y=(0,p.useFlag)("platform.integrations.pager-duty"),b=(0,v.h)(),[I,k]=l.useState(e);return l.useEffect((()=>{k(e)}),[e]),l.createElement(l.Fragment,null,I&&l.createElement(r.A,{schema:(0,u.w)(T,t,A,y),componentMapper:{...i.Ay,...C},onSubmit:({url:e,[d.Iq]:i,name:a,"secret-token":r,"event-types-table":l,severity:o})=>{const[s,c]=(null==i?void 0:i.split(":"))||["webhook"],m={name:a,enabled:!0,type:s,...c&&{sub_type:c},description:"",properties:{method:"POST",url:e,disable_ssl_verification:!1,secret_token:r,severity:o},...A&&{event_types:l?Object.values(l).flatMap(Object.keys):[]}};t&&(null==n?void 0:n.id)?(0,E.l)(null==n?void 0:n.id,m,void 0,b,h):(0,E.U)(m,b,h),f()},initialValues:t?{...n,"secret-token":null==n?void 0:n.secretToken}:{},onCancel:f},(e=>l.createElement(a.Ay,{...e,showFormControls:!1}))))}},33408:(e,t,n)=>{n.d(t,{D:()=>a,Ij:()=>o,K0:()=>c,_n:()=>r,ij:()=>i,tr:()=>l});const i=e=>e.type===r.EMAIL_SUBSCRIPTION||e.type===r.DRAWER,a=e=>e.type===r.INTEGRATION;var r;function l(e){return e.type===r.EMAIL_SUBSCRIPTION}function o(e){return e.type===r.DRAWER}!function(e){e.EMAIL_SUBSCRIPTION="EMAIL_SUBSCRIPTION",e.DRAWER="DRAWER",e.INTEGRATION="INTEGRATION"}(r||(r={}));const s=e=>e.map((e=>void 0===e?[void 0]:e.type===r.INTEGRATION?[e.integration.id]:e.recipient.map((e=>e.integrationId)))).flat(),c=(e,t)=>{if(e.length!==t.length)return!1;const n=s(e),i=s(t);return n.length===i.length&&n.every(((e,t)=>e===i[t]))}},92200:(e,t,n)=>{n.d(t,{AJ:()=>l,cx:()=>o,sT:()=>a});class i{constructor(e){this.displayName=e}}class a extends i{constructor(e){super(e.name+(e.isEnabled?"":" - Disabled")),this.integration=e}getKey(){return this.integration.id}equals(e){return e instanceof a&&e.integration.id===this.integration.id}}class r extends i{constructor(e,t,n,i){super(e),this.key=i,this.description=t,this.integrationId=n}getKey(){return this.key}}class l extends r{constructor(e,t,n){let i,a;t?(i="Admins",a="Organization administrators for your account"):(i="All",a="All users in your organization who subscribed to this email in their Notification Preferences"),super(i,a,e,t?"users-admin":"users-all"),this.sendToAdmin=t,this.ignorePreferences=n}equals(e){return e instanceof l&&e.sendToAdmin===this.sendToAdmin&&e.ignorePreferences===this.ignorePreferences}}class o extends r{constructor(e,t,n){let i,a,r;"string"==typeof n?(i=n,a=!1,r=!1):(i="Loading",a=n,r=!n),super(i,void 0,e,`rbac-group-${t}`),this.groupId=t,this.isLoading=a,this.hasError=r}equals(e){return e instanceof o&&e.groupId===this.groupId}}}}]);
//# sourceMappingURL=../sourcemaps/9900.ee17e9d7fe03c8d9822d4b86373444cc.js.map