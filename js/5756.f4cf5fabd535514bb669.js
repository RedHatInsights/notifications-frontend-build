"use strict";(self.webpackChunknotifications_frontend=self.webpackChunknotifications_frontend||[]).push([[5756,1654],{85756:(e,t,n)=>{n.r(t),n.d(t,{ConnectedTimeConfig:()=>s,default:()=>c});var a=n(93264),i=n.n(a),l=n(28216),o=n(91654);const s=({store:e})=>i().createElement(l.Provider,{store:e},i().createElement(o.TimeConfigComponent,null)),c=s},91654:(e,t,n)=>{n.r(t),n.d(t,{TimeConfigComponent:()=>v,default:()=>E});var a=n(21242),i=n(43551),l=n(28551),o=n(78343),s=n(93264),c=n.n(s),r=n(65326),m=n(8813),u=n(2412),d=n(60207),g=n(21503);const T=(0,m.style)({width:"280px"}),p=(0,m.style)({paddingLeft:l.J.value}),C=(0,m.style)({paddingLeft:"36px"}),v=()=>{var e,t;const[n,l]=c().useState(!1),[m,v]=c().useState(),[E,f]=(0,s.useState)(!1),k=(0,u.Y)(),b=(0,d.I)(),{addSuccessNotification:S,addDangerNotification:y}=(0,g.l)(),h=(0,s.useMemo)((()=>{var e;if(200===k.status)return null===(e=k.payload)||void 0===e?void 0:e.value}),[null===(e=k.payload)||void 0===e?void 0:e.value,k.status]);(0,s.useEffect)((()=>{h&&(v({baseCustomTime:h,utcTime:h,timezoneText:void 0}),l("00:00:00"!==h))}),[h]);const x=c().useCallback((()=>{l(!1),v({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[I,D]=c().useState(!1),w=r.map((e=>c().createElement(a.DropdownItem,{key:e.text},e.text))),M=c().useCallback((()=>{l(!0)}),[]),U=c().useCallback((e=>{v({baseCustomTime:e,utcTime:e,timezoneText:void 0})}),[]),z=c().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,n=r.find((e=>e.text===t));n&&v((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),a=new Date;a.setUTCHours(t[0],t[1]);const i=(0,o.Z)(a,-n.offset),l=i.getUTCHours().toString().padStart(2,"0"),s=i.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${l}:${s}`,timezoneText:n.text}}return e}))}D(!1)}),[]),N=c().useCallback((()=>{m&&(0,b.mutate)({body:m.utcTime}).then((e=>{204===e.status?S("Action settings saved",""):y("Failed to save action settings","")})),f(!1)}),[y,S,b.mutate,m]),O=b.loading||k.loading,A=()=>{f(!E)};return c().createElement(c().Fragment,null,c().createElement("p",null,c().createElement(i.OutlinedClockIcon,{color:"var(--pf-v5-global--palette--cyan-200)"}),"Â ",`Any daily digest emails you've opted into will be sent at ${h||"00:00"} UTC`),c().createElement(a.Button,{variant:"link",onClick:A,ouiaId:"TimeConfigModal"},"Edit time settings"),c().createElement(a.Modal,{className:C,variant:a.ModalVariant.small,isOpen:E,onClose:A,actions:[c().createElement(a.Button,{key:"save",variant:"primary",type:"submit",isLoading:O,isDisabled:O,onClick:N},O?"Loading":"Save"),c().createElement(a.Button,{key:"cancel",variant:"link",onClick:A},"Cancel")],ouiaId:"TimeConfigModal"},c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2"},"Action settings")),c().createElement(a.StackItem,null,c().createElement(a.Text,{component:a.TextVariants.p},"Daily digest email receipt"),c().createElement(a.HelperText,null,c().createElement(a.HelperTextItem,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),c().createElement("br",null),c().createElement(a.Split,null,c().createElement(a.SplitItem,{isFilled:!0},c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,k.loading?c().createElement(a.Skeleton,null):c().createElement(a.Radio,{isChecked:!n,onChange:x,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),c().createElement(a.StackItem,null,k.loading?c().createElement(a.Skeleton,null):c().createElement(a.Radio,{isChecked:n,onChange:M,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),n&&c().createElement(c().Fragment,null,c().createElement(a.StackItem,{className:p},c().createElement(a.Text,{component:a.TextVariants.h6},"Time"),c().createElement(a.TimePicker,{onChange:U,time:null==m?void 0:m.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),c().createElement(a.StackItem,{className:p},c().createElement(a.Text,{component:a.TextVariants.h6},"Time zone"),c().createElement(a.Dropdown,{className:T,toggle:c().createElement(a.DropdownToggle,{isOpen:I,id:"timezone",onToggle:()=>D(!I)},null!==(t=null==m?void 0:m.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),isOpen:I,onSelect:z,menuAppendTo:()=>document.body,dropdownItems:w}))))))))},E=v},2412:(e,t,n)=>{n.d(t,{Y:()=>l});var a=n(94782),i=n(16721);const l=()=>(0,a.useQuery)(i.B.OrgConfigResourceGetDailyDigestTimePreference.actionCreator())},60207:(e,t,n)=>{n.d(t,{I:()=>o});var a=n(94782),i=n(16721);const l=e=>i.B.OrgConfigResourceSaveDailyDigestTimePreference.actionCreator({body:e.body}),o=()=>(0,a.useMutation)(l)}}]);
//# sourceMappingURL=../sourcemaps/5756.b6b182f57c9a51760580b8602e497f72.js.map