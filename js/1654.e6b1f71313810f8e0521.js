"use strict";(self.webpackChunknotifications_frontend=self.webpackChunknotifications_frontend||[]).push([[1654],{91654:(e,t,a)=>{a.r(t),a.d(t,{TimeConfigComponent:()=>p,default:()=>T});var n=a(21242),i=a(78343),l=a(93264),o=a.n(l),s=a(65326),c=a(8813),m=a(2412),r=a(60207),u=a(21503);const d=(0,c.style)({width:"280px"}),g=(0,c.style)({marginTop:"12px"}),p=()=>{var e,t;const[a,c]=o().useState(!1),[p,T]=o().useState(),[C,v]=(0,l.useState)(!1),E=(0,m.Y)(),f=(0,r.I)(),{addSuccessNotification:k,addDangerNotification:S}=(0,u.l)(),b=(0,l.useMemo)((()=>{var e;if(200===E.status)return null===(e=E.payload)||void 0===e?void 0:e.value}),[null===(e=E.payload)||void 0===e?void 0:e.value,E.status]);(0,l.useEffect)((()=>{b&&(T({baseCustomTime:b,utcTime:b,timezoneText:void 0}),c("00:00:00"!==b))}),[b]);const h=o().useCallback((()=>{c(!1),T({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[x,y]=o().useState(!1),I=s.map((e=>o().createElement(n.DropdownItem,{key:e.text},e.text))),D=o().useCallback((()=>{c(!0)}),[]),w=o().useCallback((e=>{T({baseCustomTime:e,utcTime:e,timezoneText:void 0})}),[]),A=o().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,a=s.find((e=>e.text===t));a&&T((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),n=new Date;n.setUTCHours(t[0],t[1]);const l=(0,i.Z)(n,-a.offset),o=l.getUTCHours().toString().padStart(2,"0"),s=l.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${o}:${s}`,timezoneText:a.text}}return e}))}y(!1)}),[]),M=o().useCallback((()=>{p&&(0,f.mutate)({body:p.utcTime}).then((e=>{204===e.status?k("Action settings saved",""):S("Failed to save action settings","")})),v(!1)}),[S,k,f.mutate,p]),U=f.loading||E.loading,z=()=>{v(!C)};return o().createElement(o().Fragment,null,o().createElement(n.Alert,{className:g,isInline:!0,title:`Any daily digest emails you've opted into will be sent at ${b||"00:00"} UTC`,actionLinks:o().createElement(n.AlertActionLink,{onClick:z,ouiaId:"TimeConfigModal"},"Edit time settings")}),o().createElement(n.Modal,{className:"pf-v5-u-pl-xl",variant:n.ModalVariant.small,isOpen:C,onClose:z,actions:[o().createElement(n.Button,{key:"save",variant:"primary",type:"submit",isLoading:U,isDisabled:U,onClick:M},U?"Loading":"Save"),o().createElement(n.Button,{key:"cancel",variant:"link",onClick:z},"Cancel")],ouiaId:"TimeConfigModal"},o().createElement(n.Stack,{hasGutter:!0},o().createElement(n.StackItem,null,o().createElement(n.Title,{headingLevel:"h2"},"Action settings")),o().createElement(n.StackItem,null,o().createElement(n.Text,{component:n.TextVariants.p},"Daily digest email receipt"),o().createElement(n.HelperText,null,o().createElement(n.HelperTextItem,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),o().createElement("br",null),o().createElement(n.Split,null,o().createElement(n.SplitItem,{isFilled:!0},o().createElement(n.Stack,{hasGutter:!0},o().createElement(n.StackItem,null,E.loading?o().createElement(n.Skeleton,null):o().createElement(n.Radio,{isChecked:!a,onChange:h,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),o().createElement(n.StackItem,null,E.loading?o().createElement(n.Skeleton,null):o().createElement(n.Radio,{isChecked:a,onChange:D,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),a&&o().createElement(o().Fragment,null,o().createElement(n.StackItem,{className:"pf-v5-u-pl-lg"},o().createElement(n.Text,{component:n.TextVariants.h6},"Time"),o().createElement(n.TimePicker,{onChange:w,time:null==p?void 0:p.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),o().createElement(n.StackItem,{className:"pf-v5-u-pl-lg"},o().createElement(n.Text,{component:n.TextVariants.h6},"Time zone"),o().createElement(n.Dropdown,{className:d,toggle:o().createElement(n.DropdownToggle,{isOpen:x,id:"timezone",onToggle:()=>y(!x)},null!==(t=null==p?void 0:p.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),isOpen:x,onSelect:A,menuAppendTo:()=>document.body,dropdownItems:I}))))))))},T=p},2412:(e,t,a)=>{a.d(t,{Y:()=>l});var n=a(94782),i=a(16721);const l=()=>(0,n.useQuery)(i.B.OrgConfigResourceGetDailyDigestTimePreference.actionCreator())},60207:(e,t,a)=>{a.d(t,{I:()=>o});var n=a(94782),i=a(16721);const l=e=>i.B.OrgConfigResourceSaveDailyDigestTimePreference.actionCreator({body:e.body}),o=()=>(0,n.useMutation)(l)}}]);
//# sourceMappingURL=../sourcemaps/1654.d401048626d131d12c67ce58768a9717.js.map