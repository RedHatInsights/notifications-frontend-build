"use strict";(self.webpackChunknotifications_frontend=self.webpackChunknotifications_frontend||[]).push([[5756,1654],{85756:(e,t,n)=>{n.r(t),n.d(t,{ConnectedTimeConfig:()=>s,default:()=>c});var a=n(93264),l=n.n(a),i=n(28216),o=n(91654);const s=({store:e})=>l().createElement(i.Provider,{store:e},l().createElement(o.TimeConfigComponent,null)),c=s},91654:(e,t,n)=>{n.r(t),n.d(t,{TimeConfigComponent:()=>p,default:()=>T});var a=n(21242),l=n(43551),i=n(78343),o=n(93264),s=n.n(o),c=n(65326),r=n(8813),m=n(2412),u=n(60207),d=n(21503);const g=(0,r.style)({width:"280px"}),p=()=>{var e,t;const[n,r]=s().useState(!1),[p,T]=s().useState(),[C,v]=(0,o.useState)(!1),E=(0,m.Y)(),f=(0,u.I)(),{addSuccessNotification:k,addDangerNotification:b}=(0,d.l)(),S=(0,o.useMemo)((()=>{var e;if(200===E.status)return null===(e=E.payload)||void 0===e?void 0:e.value}),[null===(e=E.payload)||void 0===e?void 0:e.value,E.status]);(0,o.useEffect)((()=>{S&&(T({baseCustomTime:S,utcTime:S,timezoneText:void 0}),r("00:00:00"!==S))}),[S]);const h=s().useCallback((()=>{r(!1),T({utcTime:"00:00",baseCustomTime:"00:00",timezoneText:void 0})}),[]),[y,x]=s().useState(!1),I=c.map((e=>s().createElement(a.DropdownItem,{key:e.text},e.text))),D=s().useCallback((()=>{r(!0)}),[]),w=s().useCallback((e=>{T({baseCustomTime:e,utcTime:e,timezoneText:void 0})}),[]),M=s().useCallback((e=>{if(null==e?void 0:e.target){const t=e.target.textContent,n=c.find((e=>e.text===t));n&&T((e=>{if(null==e?void 0:e.baseCustomTime){const t=e.baseCustomTime.split(":").map((e=>parseInt(e))),a=new Date;a.setUTCHours(t[0],t[1]);const l=(0,i.Z)(a,-n.offset),o=l.getUTCHours().toString().padStart(2,"0"),s=l.getUTCMinutes().toString().padStart(2,"0");return{...e,utcTime:`${o}:${s}`,timezoneText:n.text}}return e}))}x(!1)}),[]),U=s().useCallback((()=>{p&&(0,f.mutate)({body:p.utcTime}).then((e=>{204===e.status?k("Action settings saved",""):b("Failed to save action settings","")})),v(!1)}),[b,k,f.mutate,p]),z=f.loading||E.loading,N=()=>{v(!C)};return s().createElement(s().Fragment,null,s().createElement("p",null,s().createElement(l.OutlinedClockIcon,{color:"var(--pf-v5-global--palette--cyan-200)"}),"Â ",`Any daily digest emails you've opted into will be sent at ${S||"00:00"} UTC`),s().createElement(a.Button,{variant:"link",onClick:N,ouiaId:"TimeConfigModal"},"Edit time settings"),s().createElement(a.Modal,{className:"pf-v5-u-pl-xl",variant:a.ModalVariant.small,isOpen:C,onClose:N,actions:[s().createElement(a.Button,{key:"save",variant:"primary",type:"submit",isLoading:z,isDisabled:z,onClick:U},z?"Loading":"Save"),s().createElement(a.Button,{key:"cancel",variant:"link",onClick:N},"Cancel")],ouiaId:"TimeConfigModal"},s().createElement(a.Stack,{hasGutter:!0},s().createElement(a.StackItem,null,s().createElement(a.Title,{headingLevel:"h2"},"Action settings")),s().createElement(a.StackItem,null,s().createElement(a.Text,{component:a.TextVariants.p},"Daily digest email receipt"),s().createElement(a.HelperText,null,s().createElement(a.HelperTextItem,{variant:"indeterminate"},"Schedule the time at which to send your account's daily digest email. All times will be converted to UTC after saving.")))),s().createElement("br",null),s().createElement(a.Split,null,s().createElement(a.SplitItem,{isFilled:!0},s().createElement(a.Stack,{hasGutter:!0},s().createElement(a.StackItem,null,E.loading?s().createElement(a.Skeleton,null):s().createElement(a.Radio,{isChecked:!n,onChange:h,id:"settings-time-config",label:"Default time",value:"Default",description:"00:00 UTC",name:"radio-select"})),s().createElement(a.StackItem,null,E.loading?s().createElement(a.Skeleton,null):s().createElement(a.Radio,{isChecked:n,onChange:D,id:"settings-time-config-custom",label:"Custom time",name:"radio-select"})),n&&s().createElement(s().Fragment,null,s().createElement(a.StackItem,{className:"pf-v5-u-pl-lg"},s().createElement(a.Text,{component:a.TextVariants.h6},"Time"),s().createElement(a.TimePicker,{onChange:w,time:null==p?void 0:p.baseCustomTime,width:"263px",stepMinutes:15,placeholder:"00:00",is24Hour:!0})),s().createElement(a.StackItem,{className:"pf-v5-u-pl-lg"},s().createElement(a.Text,{component:a.TextVariants.h6},"Time zone"),s().createElement(a.Dropdown,{className:g,toggle:s().createElement(a.DropdownToggle,{isOpen:y,id:"timezone",onToggle:()=>x(!y)},null!==(t=null==p?void 0:p.timezoneText)&&void 0!==t?t:"(UTC-00:00) Universal Time"),isOpen:y,onSelect:M,menuAppendTo:()=>document.body,dropdownItems:I}))))))))},T=p},2412:(e,t,n)=>{n.d(t,{Y:()=>i});var a=n(94782),l=n(16721);const i=()=>(0,a.useQuery)(l.B.OrgConfigResourceGetDailyDigestTimePreference.actionCreator())},60207:(e,t,n)=>{n.d(t,{I:()=>o});var a=n(94782),l=n(16721);const i=e=>l.B.OrgConfigResourceSaveDailyDigestTimePreference.actionCreator({body:e.body}),o=()=>(0,a.useMutation)(i)}}]);
//# sourceMappingURL=../sourcemaps/5756.22153bc8b4d27d1be407fd6a12ef74f9.js.map